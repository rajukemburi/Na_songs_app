"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[66659],{74873:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(652983);function o(e,t,n=31435023845,o=sessionStorage){let{0:i,1:a}=(0,r.useState)(s(e));function s(e){let t=o.getItem(e);if(!t)return null;let n=JSON.parse(t);return new Date().getTime()>n?.expiry?(o.removeItem(e),null):n?.value||null}function c(t){var r;let i={value:t,expiry:new Date().getTime()+86123353*n};a(t),r=JSON.stringify(i),o.setItem(e,r)}return(0,r.useEffect)(()=>{null===s(e)&&c(t)},[]),{value:i,set:c,remove:function(){c(null),o.removeItem(e)}}}},36608:function(e,t,n){n.d(t,{O:function(){return a},q:function(){return i}});var r=n(652983),o=n(397458);let i=(0,r.createContext)({setHighlightedCommentId:()=>Error("Not implemented"),highlightedCommentId:null}),a=e=>{let{0:t,1:n}=(0,r.useState)(null);return(0,o.jsx)(i.Provider,{value:{highlightedCommentId:t,setHighlightedCommentId:n},children:e.children})}},855623:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(706138),o=n(429143),i=n(242145),a=n(142591),s=n(652983),c=n(751004),l=n(439483),u=n(670296),d=n(205609),p=n(912806),m=n(342476),f=n(397458);let y=({label:e,avatarUri:t})=>(0,f.jsxs)(c.xu,{display:"flex",alignItems:"center",gap:"10px",px:"6px",children:[(0,f.jsx)(l.q,{alt:"avatar",size:"xs",src:t}),(0,f.jsx)(c.xu,{fontSize:"md",lineHeight:"16px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",children:e})]}),b=({text:e,from:t,to:n})=>{if(e&&void 0!==t&&void 0!==n){let r=e.slice(0,t),o=e.slice(t,n),i=e.slice(n);return(0,f.jsxs)(f.Fragment,{children:[r,(0,f.jsx)("mark",{className:"highlighted-mention-text",children:o}),i]})}return(0,f.jsx)(f.Fragment,{children:e})};var g=({node:{attrs:e},extension:{options:{onMentionRemove:t,onMentionAdd:n}}})=>{(0,s.useEffect)(()=>(n?.(e),()=>{t&&(e.teamUserId||e.userId)&&t(e.userId?parseInt(e.userId??""):parseInt(e.teamUserId??""))}),[t,e.userId,e.teamUserId]);let r=(0,p.I)(),o=e.name??e.label,a=e.avatar??m.u,l=e.highlight??{from:void 0,to:void 0};return(0,f.jsx)(c.xu,{as:i.T5,display:"inline",children:(0,f.jsx)(u.u,{label:(0,f.jsx)(y,{label:o,avatarUri:a}),placement:"top",children:(0,f.jsx)(d.x,{variant:"body-xl",display:"inline",cursor:"pointer",color:r?"fill-brand":"focus",fontSize:"sm",fontWeight:"bold",_hover:{color:"blue.600"},children:(0,f.jsx)(b,{text:e.label,from:l.from,to:l.to})})})})};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=o.ZP.extend({addProseMirrorPlugins(){return[(0,a.q$)(h({editor:this.editor},this.options.suggestion))]},addAttributes(){return h(h({},this.parent?.()),{},{userId:{default:void 0},teamUserId:{default:void 0},guestUserId:{default:void 0},email:{default:void 0},avatar:{default:void 0},name:{default:void 0},highlight:{default:void 0}})},addNodeView:()=>(0,i.fW)(g)})},342476:function(e,t,n){n.d(t,{r:function(){return o},u:function(){return r}});let r="https://i.vimeocdn.com/custom_asset/92992640f627fdad710e4c3cb728b1b2",o="https://i.vimeocdn.com/portrait/defaults-gray_75x75.png"},333472:function(e,t,n){n.d(t,{K:function(){return m}}),n(652983);var r=n(725065),o=n(751004),i=n(951908),a=n(173232),s=n(587885),c=n(447218),l=n(196885),u=n(662555),d=n(397458);let p=(0,r.F4)`
    from {
        width: 10%;
    }
    to {
        width: 100%;
    }
`,m=({updateCommentSearchQuery:e,onCloseSearch:t,searchInputRef:n})=>(0,d.jsx)(o.xu,{width:"100%",height:"auto",display:"flex",justifyContent:"flex-end",children:(0,d.jsxs)(i.B,{display:"inline-block",size:"sm",ref:n,animation:`${p} 250ms ease forwards`,children:[(0,d.jsx)(a.I,{placeholder:(0,u.Iu)({singular:"Search comments",dictionary:{es:{singular:"Buscar comentarios"},"de-DE":{singular:"Kommentare durchsuchen"},"fr-FR":{singular:"Rechercher des commentaires"},"ja-JP":{singular:"コメントを検索"},"ko-KR":{singular:"댓글 검색"},"pt-BR":{singular:"Pesquisar coment\xe1rios"},"zh-CN":{singular:"搜索评论"}}}),_placeholder:{opacity:1,color:"gray.500"},onChange:t=>e?.(t),onKeyDown:e=>{e.stopPropagation(),"Escape"===e.key&&t?.()},size:"sm",autoFocus:!0}),(0,d.jsx)(s.x,{onClick:t,h:"100%",children:(0,d.jsx)(c.h,{"aria-label":(0,u.Iu)({singular:"Close Search",dictionary:{es:{singular:"Cerrar b\xfasqueda"},"de-DE":{singular:"Suche schlie\xdfen"},"fr-FR":{singular:"Fermer la recherche"},"ja-JP":{singular:"検索を閉じる"},"ko-KR":{singular:"검색 닫기"},"pt-BR":{singular:"Fechar busca"},"zh-CN":{singular:"关闭搜索"}}}),icon:(0,d.jsx)(l.z,{}),size:"xs",variant:"minimal"})})]})})},806298:function(e,t,n){n.d(t,{Pd:function(){return i},gp:function(){return o},jF:function(){return a}});var r=n(662555);let o=e=>{let t="https://i.vimeocdn.com/custom_asset/92992640f627fdad710e4c3cb728b1b2",n=e?.find(e=>72===e.width)?.link||e?.[1]?.link||t,r=e?.find(e=>144===e.width)?.link||e?.[2]?.link||t;return[n,`${r} 2x`]},i=e=>e?parseInt(e.substring(e.lastIndexOf("/")+1),10):0;function a(e){let t=new Date(e),n=navigator.language||"en-US",o=new Intl.DateTimeFormat(n,{month:"short",day:"numeric",year:"numeric"}),i=new Intl.DateTimeFormat(n,{hour:"numeric",minute:"numeric",hour12:!0}),a=o.format(t),s=i.format(t);return(0,r.Iu)({singular:"{DATE} at {TIME}",replacements:{DATE:a,TIME:s},dictionary:{es:{singular:"El {DATE} a las {TIME}"},"de-DE":{singular:"{DATE} am {TIME}"},"fr-FR":{singular:"Le {DATE} \xe0 {TIME}"},"ja-JP":{singular:"{DATE} {TIME}"},"ko-KR":{singular:"{DATE} {TIME}"},"pt-BR":{singular:"Em {DATE} \xe0s {TIME}"},"zh-CN":{singular:"{DATE} {TIME}"}}})}},94741:function(e,t,n){n.d(t,{$:function(){return c},B:function(){return s}});var r=n(652983),o=n(36608),i=n(397458);let a=()=>Error("Not implemented"),s=(0,r.createContext)({comments:[],setComments:a,setActiveComment:a,isCommentsShowing:!1,setIsCommentsShowing:a}),c=e=>{let{0:t,1:n}=(0,r.useState)([]),{0:a,1:c}=(0,r.useState)(),{0:l,1:u}=(0,r.useState)(!1);return(0,i.jsx)(o.O,{children:(0,i.jsx)(s.Provider,{value:{comments:t,setComments:n,activeComment:a,setActiveComment:c,isCommentsShowing:l,setIsCommentsShowing:u},children:e.children})})}},22352:function(e,t,n){n.d(t,{b:function(){return eR}});var r=n(706138),o=n(846211),i=n(652983),a=n(116127),s=n(696146),c=n(731500),l=n(511289),u=n(748171),d=n(452590),p=n(41792),m=n(202958),f=n(291017),y=n(844578),b=n(602156),g=n(205609),O=n(662555),h=n(342476),v=n(439483),w=n(397458);let j=["size","src"];function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let C=e=>{let{size:t="sm",src:n=h.u}=e,r=(0,o.Z)(e,j);return(0,w.jsx)(v.q,P(P({},r),{},{src:n,size:t,style:{display:"flex",overflow:"visible"}}))},x=["src","srcSet","email","name","isPending","avatarSize"];function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let S=e=>{let{src:t=h.u,srcSet:n,email:r,name:i,isPending:a,avatarSize:s}=e,c=(0,o.Z)(e,x),l=(0,y.ff)("#47515B","#B5B5B5");return(0,w.jsxs)(f.s,$($({py:8},c),{},{gap:"2",minW:"0",children:[(0,w.jsx)(C,{size:s,srcSet:a?h.r:n,src:a?h.r:t,alt:"avatar"}),(0,w.jsxs)(b.g,{alignItems:"flex-start",gap:"0",minW:"0",children:[i?(0,w.jsx)(g.x,{variant:"body-xl",fontSize:"text-sm",fontWeight:"bold",as:"label",color:"text-primary",w:"100%",isTruncated:!0,children:i}):null,r?(0,w.jsx)(g.x,{variant:"body-xl",fontSize:a?"text-sm":"text-xs",fontWeight:a?"bold":"regular",color:a?"text-primary":l,w:"100%",isTruncated:!0,children:r}):null,a?(0,w.jsx)(g.x,{variant:"body-xl",fontSize:"text-xs",color:l,as:"i",children:(0,O.Iu)({singular:"Pending",dictionary:{es:{singular:"Pendiente"},"de-DE":{singular:"ausstehend"},"fr-FR":{singular:"en attente"},"ja-JP":{singular:"保留"},"ko-KR":{singular:"보류 중"},"pt-BR":{singular:"pendente"},"zh-CN":{singular:"待定"}}})}):null]})]}))},I=["selectedIndex","isOpen","isLoading","avatarSize","icon","iconSpacing","mentionSuggestions","onMenuItemSelection"];function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let D=e=>{let t=(0,w.jsx)(d.O,{w:"sm",h:"sm",borderRadius:"round"}),n=(0,w.jsx)(d.O,{borderRadius:"pill",w:"100%",h:"sm",bgSize:"200%"});return(0,w.jsx)(p.v,{autoSelect:!1,autoFocus:!1,strategy:null,isOpen:!0,children:(0,w.jsxs)(m.q,R(R({},e),{},{gap:"0",children:[(0,w.jsxs)(f.s,{gap:"2",children:[t,n]}),(0,w.jsxs)(f.s,{gap:"2",children:[t,n]})]}))})},T=e=>{let{selectedIndex:t=0,isOpen:n,isLoading:r,avatarSize:a,icon:s,iconSpacing:c,mentionSuggestions:l,onMenuItemSelection:u}=e,d=(0,o.Z)(e,I),f=(0,i.useCallback)(e=>t===e?{"data-focus":!0}:{},[t]);return r||!l.length?(0,w.jsx)(D,R({},d)):(0,w.jsx)(p.v,{autoSelect:!1,strategy:null,isOpen:n,children:(0,w.jsx)(m.q,R(R({},d),{},{rootProps:{minWidth:"0px !important"},children:l.map(({name:e,email:t,isPending:n,src:r,srcSet:o},i)=>(0,w.jsx)(S,R({onClick:()=>u(i),src:r,srcSet:o,avatarSize:a,iconSpacing:c,name:e,email:t,isPending:n,wordBreak:"break-all"},f(i)),`mention-item-${i}`))}))})};var F=n(853106),A=n(343831),U=n(974145),Z=n(274133),L=n(693336),N=n(462481),M=n(242145),Y=n(692584),z=n(29607),B=n(951908),q=n(587885),V=n(561662),J=n(855998);function K(e){let{char:t,allowSpaces:n,allowedPrefixes:r,startOfLine:o,$position:i}=e,a=(0,J.Ov)(t),s=RegExp(`\\s${a}$`),c=o?"^":"",l=n?RegExp(`${c}${a}[^\\s].*?(?=\\s${a}|$)`,"gm"):RegExp(`${c}(?:^)?\\B${a}(\\S+)*`,"gm"),u=i.nodeBefore?.isText&&i.nodeBefore.text;if(!u)return null;let d=i.pos-u.length,p=Array.from(u.matchAll(l)).pop();if(!p||void 0===p.input||void 0===p.index)return null;let m=p.input.slice(Math.max(0,p.index-1),p.index),f=RegExp(`^[${r?.join("")}\0]?$`).test(m);if(null!==r&&!f)return null;let y=d+p.index,b=y+p[0].length;return p[0].length<2?null:(n&&s.test(u.slice(b-1,b+1))&&(p[0]+=" ",b+=1),y<i.pos&&b>=i.pos)?{range:{from:y,to:b},query:p[0].slice(t.length),text:p[0]}:null}var Q=n(855623);let G=(0,i.memo)((0,i.forwardRef)(({autoFocus:e=!1,richtext:t="",isExpanded:n=!1,placeholder:r,isPublic:o,onFocus:a,setCommentText:s,mentionExtensionItemCallback:c,onMentionStart:l,onMentionUpdate:u,onMentionsExit:d,onKeyUpHandler:p,onKeyDownHandler:m,onMentioneeAdd:f,onMentioneeRemove:y,onSubmit:b,onSubmitComment:g,customRichTextAreaStyles:O,richTextEditorStyles:h={},teamOwnerId:v,commentContextFields:j,isDisabled:_=!1},P)=>{let C=(0,i.useRef)(),x=(0,i.useRef)(""),E=(0,i.useRef)(!1),$=o?"viewer":"collaborator",S=(0,i.useMemo)(()=>{try{return JSON.parse(t)}catch(e){return}},[t]),I=(0,M.jE)({editorProps:{handleDOMEvents:{keyup:(e,t)=>p?.(x.current,e,t),keydown:(e,t)=>m?.(x.current,e,t,g)},handleClick:e=>{e.hasFocus()||_||a()}},editable:!_,extensions:[A.Z,F.ZP,N.Z,Z.Z,U.Z,Q.Z.configure({onMentionAdd:f,onMentionRemove:y,suggestion:{allowedPrefixes:null,allowSpaces:!1,findSuggestionMatch:K,items:({query:e})=>(e.length&&setTimeout(()=>c?.(e,$,v)),x.current=e,[]),render:()=>({onStart:e=>{C.current=e,E.current=!0,l?.()},onUpdate:e=>{C.current=e,u?.()},onExit:e=>{C.current=e,E.current=!1,d?.()}})}}),L.Z.configure({placeholder:r,showOnlyWhenEditable:!1})],onFocus:()=>{a()},onUpdate:({editor:e})=>{s(JSON.stringify(e.getJSON()||""))},content:S});(0,i.useEffect)(()=>{e&&I?.commands?.focus?.("end")},[I,e]),(0,i.useImperativeHandle)(P,()=>({clearContent:()=>{setTimeout(()=>{I?.commands?.clearContent()},0)},addMentionNode:e=>C.current?.command?.(e),selectRange:()=>I?.commands?.selectTextblockStart(),getMentionQuery:()=>x.current,toggleParagraph:()=>I?.commands?.setParagraph(),toggleBold:()=>I?.commands?.toggleBold?.(),onSubmit:async()=>await b?.(),isUserMentioned:()=>{let e=!1;return I?.state.doc.descendants(t=>{"mention"==t.type.name&&(e=!0)}),e},commentLength:()=>I?.getText().trim().length,focusEnd:()=>!E?.current&&I?.commands?.focus?.("end"),removeFocus:()=>{if(!E?.current)return I?.commands?.blur()},getCommentContent:()=>JSON.stringify(I?.getJSON()||""),setContent:e=>I?.commands?.setContent(e)}),[I,b]);let{0:k,1:R}=(0,i.useState)("hidden");(0,i.useEffect)(()=>{n?setTimeout(()=>{R("auto")},300):R("hidden")},[n]);let D=j?.isReply||j?.isEdit,T=(0,i.useMemo)(()=>({".richtextCommentBox":{border:D&&!n?"none":"1px solid",borderRadius:"input-md",borderColor:_?"input-stroke":n?"text-primary":"input-stroke-hover",overflowY:"hidden"},".richtextCommentBox:focus-within":{borderWidth:n?"2px":"1px",borderColor:n?"text-primary":"input-stroke-hover"},".ProseMirror:focus-visible":{outline:"none"},".ProseMirror":{color:"text-primary",height:n?"78px":"38px",padding:n?"10px 12px":"5px 12px",fontWeight:"regular",resize:"none",backgroundColor:n?"surface":"default",transition:"height 120ms ease-in-out 0s",overflowY:k,"p:first-of-type":{maxWidth:n?"100%":"calc(100% - 20px)"},"p.is-editor-empty:first-of-type::before":{color:_?"input-stroke-hover":"text-secondary",fontSize:"text-sm",content:"attr(data-placeholder)",float:"left",height:0,pointerEvents:"none",paddingLeft:n?"0px":"4px",paddingTop:n?"0px":"3px"}}}),[n,_,k,D]);return(0,w.jsx)(Y.M,{children:(0,w.jsxs)(B.B,{display:"inline-block",mb:"2",sx:O||T,as:z.E.div,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto",transition:{type:"tween"}},exit:{opacity:0,height:0},overflow:"hidden",children:[(0,w.jsx)(M.kg,{className:"richtextCommentBox",style:h,content:t,editor:I}),n?null:(0,w.jsx)(q.x,{opacity:"0.6",color:"text-primary",children:(0,w.jsx)(V.v,{color:_?"input-stroke-hover":"text-primary",height:"20",width:"20"})})]})})}));var H=n(920466),W=n(597325),X=n(477837),ee=n.n(X),et=n(727926);let en=["baseUrl","select","where","query"];function er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?er(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):er(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}async function ei(e){let{baseUrl:t,select:n,where:{albumId:r,videoId:i},query:a}=e,s=(0,o.Z)(e,en),c=await fetch(`${t}/albums/${r}/videos/${i}/suggested_user_mentions?${(0,et.Ov)(a)}&fields=${n.map(et.Rb).join(",")}`,eo(eo({},s),{},{method:"GET"}));if(!c.ok)throw new et.F7("A network error occurred",c.status,c);if(204===c.status)return null;if(!c.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let l=await c.json();return(0,et.l_)(l)}var ea=n(296638),es=n(750042),ec=n(512959),el=n(458388),eu=n(173656);let ed=["perPage","page"];function ep(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function em(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ep(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ep(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ef(){let{mutate:e}=(0,ea.kY)(),{baseUrl:t,jwt:n,xVimeoPage:r,locale:o}=(0,el.r)(),[a,s]=(0,es.AC)();return[(0,i.useCallback)(async i=>{s({type:"REQUEST"});try{let a=await e(`/albums/${i.where.albumId}/videos/${i.where.videoId}/suggested_user_mentions${(0,es.Y$)(i)}`,ei(em(em({},i),{},{baseUrl:t,headers:em(em({},i.headers),{},{"Content-Type":"application/json",Authorization:n?`jwt ${n}`:"","Vimeo-Page":`${r}`,"Accept-Language":o??"en"})})));s({type:"SUCCESS",payload:a})}catch(e){s({type:"FAILURE",payload:e})}},[t,r,n,o,s]),a]}"true"===eu.env.STORYBOOK&&(0,es.MR)(function(e,t){let n="function"==typeof e?e():e,{baseUrl:r,jwt:o,xVimeoPage:i,locale:a}=(0,el.r)();return(0,ea.ZP)(n?`/albums/${n.where.albumId}/videos/${n.where.videoId}/suggested_user_mentions${(0,es.Y$)(n)}`:()=>null,n?()=>ei(em(em({},n),{},{headers:em(em({},n.headers),{},{"Content-Type":"application/json",Authorization:o?`jwt ${o}`:"","Vimeo-Page":`${i}`,"Accept-Language":a??"en"}),baseUrl:r})):null,t)},{endpoint:"/albums/:albumId/videos/:videoId/suggested_user_mentions",method:"GET"}),"true"===eu.env.STORYBOOK&&(0,es.MR)(ef,{endpoint:"/albums/:albumId/videos/:videoId/suggested_user_mentions",method:"GET"}),"true"===eu.env.STORYBOOK&&(0,es.MR)(function(e,t){let n="function"==typeof e?e():e,{baseUrl:r,jwt:i,xVimeoPage:a,locale:s}=(0,el.r)();return(0,ec.ZP)((e,t)=>{if(null===n||t&&!t.paging.next)return null;let r=n.query??{},{perPage:i=25,page:a}=r,s=(0,o.Z)(r,ed),c=n.select.join(","),l=Object.entries(s??{}).filter(([,e])=>void 0!==e).map(([e,t])=>`${e}=${t}`).join("&");return[`/albums/${n.where.albumId}/videos/${n.where.videoId}/suggested_user_mentions?page=${e+1}&perPage=${i}&fields=${c}&${l}`,e]},null!==n?([e,t])=>ei(em(em({},n),{},{baseUrl:r,headers:em(em({},n.headers),{},{"Content-Type":"application/json",Authorization:i?`jwt ${i}`:"","Vimeo-Page":`${a}`,"Accept-Language":s??"en"}),query:em(em({},n.query),{},{page:t+1})})):null,t)},{endpoint:"/albums/:albumId/videos/:videoId/suggested_user_mentions",method:"GET"});let ey=["baseUrl","select","where","query"];function eb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eb(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eb(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}async function eO(e){let{baseUrl:t,select:n,where:{videoId:r},query:i}=e,a=(0,o.Z)(e,ey),s=await fetch(`${t}/videos/${r}/suggested_user_mentions?${(0,et.Ov)(i)}&fields=${n.map(et.Rb).join(",")}`,eg(eg({},a),{},{method:"GET"}));if(!s.ok)throw new et.F7("A network error occurred",s.status,s);if(204===s.status)return null;if(!s.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let c=await s.json();return(0,et.l_)(c)}var eh=n(173656);let ev=["perPage","page"];function ew(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ej(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ew(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ew(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function e_(){let{mutate:e}=(0,ea.kY)(),{baseUrl:t,jwt:n,xVimeoPage:r,locale:o}=(0,el.r)(),[a,s]=(0,es.AC)();return[(0,i.useCallback)(async i=>{s({type:"REQUEST"});try{let a=await e(`/videos/${i.where.videoId}/suggested_user_mentions${(0,es.Y$)(i)}`,eO(ej(ej({},i),{},{baseUrl:t,headers:ej(ej({},i.headers),{},{"Content-Type":"application/json",Authorization:n?`jwt ${n}`:"","Vimeo-Page":`${r}`,"Accept-Language":o??"en"})})));s({type:"SUCCESS",payload:a})}catch(e){s({type:"FAILURE",payload:e})}},[t,r,n,o,s]),a]}"true"===eh.env.STORYBOOK&&(0,es.MR)(function(e,t){let n="function"==typeof e?e():e,{baseUrl:r,jwt:o,xVimeoPage:i,locale:a}=(0,el.r)();return(0,ea.ZP)(n?`/videos/${n.where.videoId}/suggested_user_mentions${(0,es.Y$)(n)}`:()=>null,n?()=>eO(ej(ej({},n),{},{headers:ej(ej({},n.headers),{},{"Content-Type":"application/json",Authorization:o?`jwt ${o}`:"","Vimeo-Page":`${i}`,"Accept-Language":a??"en"}),baseUrl:r})):null,t)},{endpoint:"/videos/:videoId/suggested_user_mentions",method:"GET"}),"true"===eh.env.STORYBOOK&&(0,es.MR)(e_,{endpoint:"/videos/:videoId/suggested_user_mentions",method:"GET"}),"true"===eh.env.STORYBOOK&&(0,es.MR)(function(e,t){let n="function"==typeof e?e():e,{baseUrl:r,jwt:i,xVimeoPage:a,locale:s}=(0,el.r)();return(0,ec.ZP)((e,t)=>{if(null===n||t&&!t.paging.next)return null;let r=n.query??{},{perPage:i=25,page:a}=r,s=(0,o.Z)(r,ev),c=n.select.join(","),l=Object.entries(s??{}).filter(([,e])=>void 0!==e).map(([e,t])=>`${e}=${t}`).join("&");return[`/videos/${n.where.videoId}/suggested_user_mentions?page=${e+1}&perPage=${i}&fields=${c}&${l}`,e]},null!==n?([e,t])=>eO(ej(ej({},n),{},{baseUrl:r,headers:ej(ej({},n.headers),{},{"Content-Type":"application/json",Authorization:i?`jwt ${i}`:"","Vimeo-Page":`${a}`,"Accept-Language":s??"en"}),query:ej(ej({},n.query),{},{page:t+1})})):null,t)},{endpoint:"/videos/:videoId/suggested_user_mentions",method:"GET"});var eP=n(96127);function eC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}let ex=(e,t,n,o,a)=>{let s=(0,eP.AE)(a),[c,l]=e_(),[u,d]=ef(),{loading:p,data:m}=o?d:l,f=(0,i.useCallback)((r,o="viewer",i)=>{e&&c({where:{videoId:e},query:{query:r,page:n,perPage:t,filter:o,teamOwnerId:i,reviewId:a,password:s},select:[]})},[c,e,t,n]),y=(0,i.useCallback)((i,a="viewer",s)=>{if(e&&o){let c=(0,eP.BO)(o);u({where:{albumId:o,videoId:e},query:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eC(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({query:i,page:n,perPage:t,filter:a,teamOwnerId:s},c?{password:c}:{}),select:[]})}},[e,o,u,n,t]),b=(0,i.useMemo)(()=>o?ee()(y,500):ee()(f,500),[y,f,o]);return{loadingMentionSuggestion:p,mentionSuggestionList:(0,i.useMemo)(()=>m?.data?.filter(e=>e.uri).map(e=>eP.f4(e))||[],[m]),getMentionSuggestionItemsDebounced:b}};var eE=n(112298),e$=n(176617);let eS=["clipRequestId","perPage","page","richtextAreaRef","commentContextFields","analyticsProps","onFocus","isPostCommentLoading","showcaseId","reviewId"];function eI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ek(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eI(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eI(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let eR=e=>{let{clipRequestId:t,perPage:n=4,page:r=1,richtextAreaRef:d,commentContextFields:p={commentId:-1,existingReplyCounts:0,isReply:!1,isEdit:!1,isTimeCoded:!1},analyticsProps:m,onFocus:f,isPostCommentLoading:y,showcaseId:b,reviewId:g}=e,O=(0,o.Z)(e,eS),h=(0,W.R)(),v=h?.team?.ownerId,{videoData:j}=(0,eE.C)(t,b,g),_=Number((0,eP.D1)(t)),{0:P,1:C}=(0,i.useState)(!1),x=(0,i.useRef)(P);x.current=P;let E=(0,i.useRef)(y);E.current=y;let{0:$,1:S}=(0,i.useState)(0),I=(0,i.useRef)($);I.current=$;let{loadingMentionSuggestion:k,mentionSuggestionList:R,getMentionSuggestionItemsDebounced:D}=ex(t,n,r,b,g),F=(0,i.useRef)([]),A=(0,i.useRef)(null),U=(0,i.useCallback)(e=>{C(e),O?.setIsMentionActive?.(e)},[O,C]),Z=(0,i.useCallback)(()=>U(!1),[U]),L=(0,i.useCallback)(()=>{if(U(!0),m){let e=ek(ek({},m),{},{commentContextFields:{existing_reply_counts:p.existingReplyCounts,is_reply:p.isReply,comment_id:p.commentId,comment_length:d?.current?.commentLength()??0}});(0,e$.KM)(_,j?.privacy.view,e,O.isPublic,h)}},[]),N=(0,i.useRef)(R);N.current=R;let M=(0,i.useCallback)(e=>{let t=R[e];if(!t)return;let n=(0,eP.eJ)(t);if(d?.current?.addMentionNode(n),m){let e=ek(ek({},m),{},{commentContextFields:{existing_reply_counts:p.existingReplyCounts,is_reply:p.isReply,comment_id:p.commentId,comment_length:d?.current?.commentLength()??0,mentionee_email:t.email,mentionee_id:t.userId,is_pending:t.isPending,mentionee_permission:null}});(0,e$.$s)(_,j?.privacy.view,j?.uploader.link,O.isPublic,e,h)}},[R]),Y=(0,i.useCallback)(e=>N.current.find(({email:t})=>t===e),[]),z=(0,i.useCallback)((e,t,n)=>{if(e.length&&"Space"===n.code){let t=e.match(eP.CU);if(t?.length){let t=Y(e);if(!t)return;let n=(0,eP.eJ)(t);if(d?.current?.addMentionNode(n),m){let e=ek(ek({},m),{},{commentContextFields:{existing_reply_counts:p.existingReplyCounts,is_reply:p.isReply,comment_id:p.commentId,comment_length:d?.current?.commentLength()??0,mentionee_email:t.email,mentionee_id:t.userId,is_pending:t.isPending,mentionee_permission:null}});(0,e$.$s)(_,j?.privacy.view,j?.uploader.link,O.isPublic,e,h)}}}},[Y]),B=(0,i.useCallback)((e,t,n,r)=>{if("Enter"===n.key&&!n.shiftKey&&!x.current){if(n.preventDefault(),n.isComposing)return;let e=d?.current?.getCommentContent()||"";d?.current?.commentLength()&&!E.current&&r?.(e)}if(x.current&&e.length&&N.current?.length&&("ArrowUp"===n.key&&(S(e=>0===e?N.current?.length-1:e-1),n.preventDefault(),n.stopPropagation()),"ArrowDown"===n.key&&(S(e=>e===N.current?.length-1?0:e+1),n.preventDefault(),n.stopPropagation()),"Enter"===n.key)){let e=N.current[I.current];if(!e)return;let t=(0,eP.eJ)(e);if(d?.current?.addMentionNode?.(t),m){let t=ek(ek({},m),{},{commentContextFields:{existing_reply_counts:p.existingReplyCounts,is_reply:p.isReply,comment_id:p.commentId,comment_length:d?.current?.commentLength()??0,mentionee_email:e.email,mentionee_id:e.userId,is_pending:e.isPending,mentionee_permission:null}});(0,e$.$s)(_,j?.privacy.view,j?.uploader.link,O.isPublic,t,h)}n.preventDefault(),n.stopPropagation()}},[S]),q=(0,i.useCallback)(e=>{let t=e.teamUserId?"teamUserId":"userId",n=N?.current.find(n=>n[t]===e[t]);n&&F?.current.push(n)},[]),V=(0,i.useCallback)(e=>{let t=!1;F.current=F?.current.filter(n=>(n?.userId??n?.teamUserId)!==e||!!t||(t=!0,!1))},[]),J=()=>{if(m){let e=ek(ek({},m),{},{commentContextFields:{existing_reply_counts:p.existingReplyCounts,is_reply:p.isReply,comment_id:p.commentId,comment_length:d?.current?.commentLength()??0}});p.isEdit?(0,e$.oT)(`${_}`,j?.privacy.view,O.isPublic,e,h,j?.uploader?.link,p.isTimeCoded):d&&!d?.current.commentLength()&&(0,e$.SR)(_,j?.privacy.view,O.isPublic,e,j?.uploader?.link,"text",!1,h)}};return(0,i.useEffect)(()=>{0===R.length&&Z()},[R]),(0,H.Z)([A],()=>{P&&U(!1)},null,[P,U]),(0,w.jsxs)(s.J,{matchWidth:!0,isLazy:!0,returnFocusOnClose:!0,closeOnEsc:!0,isOpen:P,placement:"top",children:[(0,w.jsx)(c.y,{padding:"0",minWidth:"0px",ref:A,children:(0,w.jsx)(l.b,{children:(0,w.jsx)(T,{selectedIndex:$,mentionSuggestions:R,isLoading:k,isOpen:!0,onMenuItemSelection:M,avatarSize:"sm",iconSpacing:"10",borderRadius:"input-md"})})}),(0,w.jsx)(u.t,{children:(0,w.jsx)(a.ZP,{persistentFocus:!0,disabled:!P,whiteList:e=>(A.current&&A.current.contains(e))??!1,children:(0,w.jsx)(G,ek(ek({},O),{},{ref:d,mentionExtensionItemCallback:D,onMentioneeAdd:q,onMentioneeRemove:V,onMentionStart:L,onMentionsExit:Z,onKeyUpHandler:z,onKeyDownHandler:B,teamOwnerId:v,onFocus:()=>{f(),J()},commentContextFields:p}))})})]})}},479879:function(e,t,n){n.d(t,{PU:function(){return v},wn:function(){return w}});var r=n(706138),o=n(652983),i=n(1945),a=n(509738),s=n(370966),c=n(662555),l=n(603306),u=n(176617),d=n(772425),p=n(96127),m=n(508159),f=n(700683),y=n(112298),b=n(345449),g=n(389649);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e,t,n,r,s,O,v){return(t?function(e,t,n,r,s){let O=(0,b.R)(),v=(0,p.D1)(e),[w,j]=(0,a.NE)(),[_,P]=(0,i.sr)(),{data:C,loading:x,error:E}=s?P:j,{revalidateComments:$}=(0,g.dD)(e,t,r,s),{0:S,1:I}=(0,o.useState)(null),{videoData:k}=(0,y.C)(e,s),R=k?.privacy.view,{toggleGuestLoginModal:D,guestUser:T}=(0,o.useContext)(m.hf),F=(0,b.l)()||!!T,{toggleLoginModal:A,setRedirectUrl:U}=(0,f.NK)(),Z=(0,l.l)(e),L=async t=>{if(F||"unlisted"!==R){if(!F){U(window.location.pathname+window.location.search),A(!0);return}}else{D(!0);return}let n={richtext:t};if(s){let t=(0,p.BO)(s);await _(h({where:{albumId:s,videoId:e},select:d.UJ,variables:n},t?{query:{password:t}}:{}))}else await w(h({where:{videoId:e},select:d.UJ,variables:n},Z?{query:{password:Z}}:{}))};return(0,o.useEffect)(()=>{if(C&&!x&&!E&&S!==C.uri){let e=Number((k?.uploader?.link||"").match(/user(\d+)/)?.[1]||0);if(I(()=>C.uri),n){let t=(0,p.ZG)(C?.text||""),r=h(h({},n),{},{commentContextFields:{comment_id:(0,p.Pd)(C.uri),is_reply:!1,comment_owner_id:O?.user?.id??-1,comment_length:C.text.length,is_mention:t}});(0,u.TC)(v,R,e,r,O)}$()}},[C,x,E,$,v,O,k?.privacy.view,k?.uploader?.link,S,n,R]),{postComment:L,postCommentLoading:x,postCommentError:E?{errorMessage:(0,c.Iu)({singular:"Unable to post comment",dictionary:{es:{singular:"No se pudo publicar el comentario"},"de-DE":{singular:"Nicht m\xf6glich, einen Kommentar zu hinterlassen"},"fr-FR":{singular:"Impossible de Laisser un commentaire"},"ja-JP":{singular:"コメントを投稿できませんでした"},"ko-KR":{singular:"소감 추가 불가"},"pt-BR":{singular:"N\xe3o foi Poss\xedvel Postar Coment\xe1rio"},"zh-CN":{singular:"无法发布评论"}}})}:null,lastAddedComment:(0,p.Pd)(C?.uri)}}:w)(e,n,r,s,O,v)}function w(e,t,n,r,i,a){let l=(0,b.R)(),d=(0,p.D1)(e),[f,{data:O,loading:v,error:w}]=(0,s.UQ)(),{revalidateComments:j}=(0,g.O_)(e,t,r,void 0,a),{0:_,1:P}=(0,o.useState)(null),{videoData:C}=(0,y.C)(e,void 0,a),{toggleGuestLoginModal:x,guestUser:E}=(0,o.useContext)(m.hf),$=(0,b.l)()||!!E,S=(0,p.AE)(a),I=E?JSON.parse(E)?.guestUserName:null,k=E?JSON.parse(E)?.guestUserId:null,R=n?.productContextFields?.product==="viewer_home",D=async(t,n,r)=>{if(!$){x(!0);return}await f({where:{videoId:e},select:["metadata.connections.replies.total","text","richtext","uri","metadata.connections.user","createdTime","replies.text","replies.richtext","replies.createdTime","replies.metadata.connections.user","replies.uri","replies.userName","metadata","timeCode","userName"],variables:{richtext:t,appOrigin:R?"viewer_home":"svv",timeCode:n,coordinates:r,name:I,guestUserId:k,reviewLinkId:a},query:{reviewId:a,password:S}})};return(0,o.useEffect)(()=>{if(O&&!v&&!w&&_!==O.uri){let e=Number((C?.uploader?.link||"").match(/user(\d+)/)?.[1]||0),t=C?.privacy.view;if(P(()=>O.uri),n){let r=(0,p.ZG)(O?.richtext||O?.text||""),o=h(h({},n),{},{commentContextFields:{comment_id:(0,p.Pd)(O.uri),is_reply:!1,comment_owner_id:l?.user?.id??-1,comment_length:O.text.length,is_mention:r}});(0,u.TC)(d,t,e,o,l,!!O.timeCode,!1)}j()}},[O,v,w,j,d,l,C?.privacy.view,C?.uploader?.link,_,n]),{postComment:D,postCommentLoading:v,postCommentError:w?{errorMessage:(0,c.Iu)({singular:"Unable to post comment",dictionary:{es:{singular:"No se pudo publicar el comentario"},"de-DE":{singular:"Nicht m\xf6glich, einen Kommentar zu hinterlassen"},"fr-FR":{singular:"Impossible de Laisser un commentaire"},"ja-JP":{singular:"コメントを投稿できませんでした"},"ko-KR":{singular:"소감 추가 불가"},"pt-BR":{singular:"N\xe3o foi Poss\xedvel Postar Coment\xe1rio"},"zh-CN":{singular:"无法发布评论"}}})}:null,lastAddedComment:(0,p.Pd)(O?.uri)}}},103873:function(e,t,n){n.d(t,{N_:function(){return v},us:function(){return h}});var r=n(706138),o=n(652983),i=n(261896),a=n(926334),s=n(11422),c=n(662555),l=n(603306),u=n(176617),d=n(772425),p=n(96127),m=n(112298),f=n(345449),y=n(389649),b=n(592063);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function h(e,t,n,r,s,g,h){let{videoData:w}=(0,m.C)(e,g,h);return(t?function(e,t,n,r,s,m){let g=(0,f.R)(),h=(0,p.D1)(e),{privacy:v}=(0,b.V)(e,m),[w,j]=(0,a.kS)(),[_,P]=(0,i.M)(),{loading:C,error:x}=m?P:j,{revalidateComments:E}=(0,y.dD)(e,n,s,m),{0:$,1:S}=(0,o.useState)(null),I=(0,l.l)(e),k=async(t,n)=>{S(t),await w(O({where:{videoId:e,commentId:(0,p.Pd)(t)},variables:{richtext:n},select:d.Q0},I?{query:{password:I}}:{})),D(t,{text:n})},R=async(t,n)=>{if(!m)return;let r=(0,p.BO)(m);S(t),await _(O({where:{albumId:m,videoId:e,commentId:(0,p.Pd)(t)},variables:{richtext:n},select:d.Q0},r?{query:{password:r}}:{})),D(t,{text:n})},D=(e,t)=>{if(!C&&!x){if(r){let n=(0,p.ZG)(t?.text),o=O(O({},r),{},{commentContextFields:{comment_id:(0,p.Pd)(e),is_reply:!1,comment_length:t?.text?.length,is_mention:n}});(0,u.Or)(h,v?.view,!0,o,g)}E(n=>n?.filter(e=>!!e).map(n=>O(O({},n),{},{data:n.data?.map(n=>n.uri===e?O(O({},n),t):n)})))}};return{updateCommentText:m?R:k,resolveComment:()=>null,unresolveComment:()=>null,editCommentLoading:C,editCommentError:x?{errorMessage:(0,c.Iu)({singular:"Unable to edit comment",dictionary:{es:{singular:"No se puede editar el comentario"},"de-DE":{singular:"Kommentar kann nicht bearbeitet werden"},"fr-FR":{singular:"Impossible de modifier le commentaire"},"ja-JP":{singular:"コメントを編集できません"},"ko-KR":{singular:"소감을 편집할 수 없습니다."},"pt-BR":{singular:"N\xe3o foi poss\xedvel editar o coment\xe1rio"},"zh-CN":{singular:"无法编辑评论"}}}),errorCommentId:$}:null}}:v)(e,w,n,r,s,g,h)}function v(e,t,n,r,i,a,l){let d=(0,f.R)(),m=(0,p.D1)(e),{privacy:g}=(0,b.V)(e,void 0,l),[h,{loading:v,error:w}]=(0,s.l)(),{revalidateComments:j}=(0,y.O_)(e,n,i,void 0,l),{0:_,1:P}=(0,o.useState)(null),C=(0,p.AE)(l),x=async(t,n)=>{P(t),await h({where:{videoId:e,commentId:(0,p.Pd)(t)},variables:n,select:["metadata.connections.replies.total","text","richtext","uri","metadata.connections.user","createdTime","replies.text","replies.richtext","replies.createdTime","replies.metadata.connections.user","replies.uri","replies.userName","metadata","timeCode","userName"],query:{reviewId:l,password:C}}),E(t,n)},E=(e,n)=>{if(!v&&!w){let o=null;if(j(t=>t?.filter(e=>!!e).map(t=>O(O({},t),{},{data:t.data?.map(t=>t.uri===e?o=O(O({},t),n):t)}))),r){let i=n?.richtext||o?.richtext||"",a=(0,p.ZG)(i),s=O(O({},r),{},{commentContextFields:{comment_id:(0,p.Pd)(e),is_reply:!1,comment_length:n?.richtext?.length??null,is_mention:a}});n?.richtext||n?.coordinates?(0,u.Or)(m,g?.view,!1,s,d,!!o?.timeCode,t?.uploader?.link,n?.coordinates?"annotation":"text"):n?.status&&(0,u.f4)("closed"===n.status,m,g?.view,s,d,!!o?.timeCode,t?.uploader?.link)}}};return{updateCommentText:async(e,t)=>{x(e,{richtext:t})},resolveComment:async e=>{x(e,{status:"closed"})},unresolveComment:async e=>{x(e,{status:"open"})},updateCommentPosition:async(e,t)=>{x(e,{coordinates:t})},editCommentLoading:v,editCommentError:w?{errorMessage:(0,c.Iu)({singular:"Unable to edit comment",dictionary:{es:{singular:"No se puede editar el comentario"},"de-DE":{singular:"Kommentar kann nicht bearbeitet werden"},"fr-FR":{singular:"Impossible de modifier le commentaire"},"ja-JP":{singular:"コメントを編集できません"},"ko-KR":{singular:"소감을 편집할 수 없습니다."},"pt-BR":{singular:"N\xe3o foi poss\xedvel editar o coment\xe1rio"},"zh-CN":{singular:"无法编辑评论"}}}),errorCommentId:_}:null}}},904174:function(e,t,n){n.d(t,{I2:function(){return d},UC:function(){return m},ih:function(){return p}});var r=n(706138),o=n(1945),i=n(509738),a=n(370966),s=n(603306),c=n(96127);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e,t,n,r,o){let i=m(e,{shouldFetch:t},r),a=p(e,{shouldFetch:!t,videoVersionUri:n?.videoVersionUri,targetApiVersion:n?.targetApiVersion},o);return t?i:a}function p(e,t,n){let r=(0,c.AE)(n),{data:o,isLoading:i,error:s,mutate:l}=(0,a.rU)(()=>e&&t.shouldFetch?{where:{videoId:e},select:["uri"],query:{includeDeletedComments:!0,page:1,perPage:1,versionUri:t?.videoVersionUri||void 0,reviewId:n,password:r},headers:u({},t?.targetApiVersion?{Accept:`application/vnd.vimeo.*+json;version=${t.targetApiVersion}`}:{})}:null,{revalidateOnFocus:!1,revalidateAll:!0,revalidateFirstPage:!1,revalidateIfStale:!1,parallel:!1});return{commentsCount:o?.[0]?.filteredTotal??0,changeCommentsCount:{increaseCommentsCount:()=>{l(e=>e?.filter(e=>!!e).map(e=>u(u({},e),{},{data:[...e.data],total:e.total?e.total+1:1})))},decreaseCommentsCount:()=>{l(e=>e?.filter(e=>!!e).map(e=>u(u({},e),{},{data:[...e.data],total:e.total&&e.total>0?e.total-1:0})))}},revalidateCommentCount:l,isLoading:i,isReady:!!o||!!s,error:s}}function m(e,t,n){let r=(0,i.mY)(()=>{if(!e||!t.shouldFetch||n)return null;let r=(0,s.l)(e);return{where:{videoId:e},select:["uri"],query:(0,c.Xc)(r)}}),a=(0,o.hG)(()=>{if(!e||!t.shouldFetch||!n)return null;let r=(0,c.BO)(n);return{where:{albumId:n,videoId:e},select:["uri"],query:(0,c.Xc)(r)}}),{data:l,mutate:d,isLoading:p,error:m}=n?a:r;return{commentsCount:l?.[0]?.filteredTotal??0,changeCommentsCount:{increaseCommentsCount:()=>{d(e=>e?.filter(e=>!!e).map(e=>u(u({},e),{},{data:[...e.data],filteredTotal:e.filteredTotal?e.filteredTotal+1:1})))},decreaseCommentsCount:()=>{d(e=>e?.filter(e=>!!e).map(e=>u(u({},e),{},{data:[...e.data],filteredTotal:e.filteredTotal&&e.filteredTotal>0?e.filteredTotal-1:0})))}},revalidateCommentCount:d,isLoading:p,isReady:!!l||!!m,error:m}}},389649:function(e,t,n){n.d(t,{O_:function(){return v},dD:function(){return h},hb:function(){return O}});var r=n(706138),o=n(652983),i=n(537897),a=n(1945),s=n(509738),c=n(370966),l=n(893701),u=n(603306),d=n(772425),p=n(96127),m=n(508159),f=n(47379),y=n(345449);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function O(e,t,n,r,o,i){return(t?h:v)(e,n,r,o,i)}function h(e,t,n,r){let i=(0,y.R)(),{isOwner:c,canDelete:b}=(0,f.Q)(e,r),{guestUser:O}=(0,o.useContext)(m.hf),h=O?JSON.parse(O)?.guestUserId:null,v=(0,s.mY)(()=>{if(!e||r)return null;let o=(0,u.l)(e);return{where:{videoId:e},select:d.RX,query:(0,p.ef)(o,t,n)}},{parallel:!0}),w=(0,a.hG)(()=>{if(!e||!r)return null;let o=(0,p.BO)(r);return{where:{albumId:r,videoId:e},select:d.RX,query:(0,p.ef)(o,t,n)}}),{data:j,mutate:_,isLoading:P,error:C,size:x,setSize:E}=r?w:v,$=!j?.[j?.length-1]?.paging.next,S=!j&&!C||x>0&&j&&void 0===j[x-1];return{comments:(0,o.useMemo)(()=>{let e=e=>{let t=(0,p.Jv)(i?.user?.uri,h,e.metadata?.connections?.user?.uri,e.metadata?.connections?.guestUser?.uri);return{text:e.richtext??e.text,plainText:e.text,user:{name:e.metadata?.connections?.user?.name||e.metadata?.connections?.guestUser?.name||null,link:!i?.isFromCopyrightRestrictedRegion&&e.metadata?.connections?.user?.link?e.metadata?.connections?.user?.link:null,pictures:e.metadata?.connections?.user?.pictures||null,id:e.metadata?.connections?.user?.uri||null,badge:e.metadata?.connections?.user?.badge||null,isStaffPicked:e.metadata?.connections?.user?.isStaffPicked||!1,uri:e.metadata?.connections?.user?.uri||null},id:e.uri,createdTime:e.createdOn,isRichComment:!!e.richtext,isOwnVideo:c||b,isOwnComment:t,textDecorations:e.textDecorations,deletedOn:e.deletedOn,editedTime:e.lastEditedOn??void 0}};return j?.filter(e=>!!e)?.flatMap(e=>e.data.flatMap(e=>e))?.map(t=>g(g({},e(t)),{},{replies:t.replies?.map(t=>e(t))}))},[j,c,b,i?.user,i?.isFromCopyrightRestrictedRegion,h]),totalComments:j?j[0]?.filteredTotal:0,commentsLoading:P,commentsError:C,revalidateComments:_,loadMoreComments:e=>{E(e??x+1)},isCommentsDone:$,isLoadingMoreComments:S,page:x,copyComment:(t,n="")=>{let o=i?.vimeoHttpsUrl,a=`comment=${(0,p.Pd)(n||t)}`,s=r?`/showcase/${r}?video=${e.split?.(":")?.[0]}&${a}`:`/${e.replace(":","/")}?${a}`;n&&(s=s.concat(`&reply=${(0,p.Pd)(t)}`)),(0,l.Z)(`${o}${s}`)}}}function v(e,t,n,r,a){let{isOwner:s,canDelete:u}=(0,f.Q)(e,void 0,a),d=(0,y.R)(),b=(0,p.AE)(a),{guestUser:O}=(0,o.useContext)(m.hf),h=O?JSON.parse(O)?.guestUserId:null,{data:v,isLoading:w,error:j,size:_,setSize:P,mutate:C}=(0,c.rU)(()=>e?{where:{videoId:e},select:["metadata.connections.replies.total","text","richtext","uri","metadata.connections.user","createdTime","replies.text","replies.richtext","replies.createdTime","replies.metadata.connections.user","replies.uri","replies.userName","replies.lastEditedTime","replies.guestUserUri","metadata","timeCode","userName","status","textDecorations","deletedOn","lastEditedTime","coordinates","guestUserUri"],query:{includeDeletedComments:!0,sort:t?.type,direction:t?.direction,status:n?.status,commented_user_type:["team","non_team"].includes(n?.userType||"")?n?.userType:void 0,mentions_and_replies:n?.mentionAndReplies||void 0,versionUri:n?.videoVersionUri||void 0,reviewId:a,password:b},headers:g({},n?.targetApiVersion?{Accept:`application/vnd.vimeo.*+json;version=${n.targetApiVersion}`}:{})}:null,{parallel:!0}),x=!v?.[v?.length-1]?.paging.next,E=!v&&!j,$=E||_>0&&v&&void 0===v[_-1];return{comments:(0,o.useMemo)(()=>{let e=e=>{let t=(0,p.Jv)(d?.user?.uri,h,e.metadata?.connections?.user?.uri,e?.guestUserUri);return{text:e.richtext??e.text,textDecorations:e.textDecorations,plainText:e.text,user:{name:e.userName||null,link:!d?.isFromCopyrightRestrictedRegion&&e.metadata?.connections?.user?.link?e.metadata.connections?.user?.link:null,pictures:e.metadata?.connections?.user?.pictures||null,id:e.metadata?.connections?.user?.uri||null,isStaffPicked:e.metadata?.connections?.user?.isStaffPicked||!1,uri:e.metadata?.connections?.user?.uri||null},id:e.uri,createdTime:e.createdTime,isRichComment:!!e.richtext,isOwnVideo:s||u,isOwnComment:t,status:e.status,deletedOn:e.deletedOn,editedTime:e.lastEditedTime??void 0,coordinates:e.coordinates}};return v?.filter(e=>!!e)?.flatMap(e=>e.data.flatMap(e=>e))?.map(t=>g({timeCode:t.timeCode?t.timeCode:null,formattedTimeCode:t.timeCode?i.hf(t.timeCode):null,replies:t.replies?.map(t=>e(t))||[]},e(t)))||[]},[s,u,v,d?.user,d?.isFromCopyrightRestrictedRegion,h]),totalComments:v?v[0]?.total:0,commentsLoading:w||E,commentsError:j,revalidateComments:C,loadMoreComments:e=>{P(e??_+1)},isCommentsDone:x,isLoadingMoreComments:$,page:_,copyComment:(e,t="")=>{let n=d?.vimeoHttpsUrl,r=`${window.location.pathname}?comment=${(0,p.Pd)(t||e)}`;t&&(r=r.concat(`&reply=${(0,p.Pd)(e)}`)),(0,l.Z)(`${n}${r}`)}}}},592063:function(e,t,n){n.d(t,{V:function(){return p}});var r=n(95374),o=n(27892),i=n(662555),a=n(429259),s=n(574623),c=n(639124),l=n(176617),u=n(96127),d=n(345449);let p=(e,t,n)=>{let o=(0,d.R)(),{data:a,isLoading:c}=m(e,t,n),u=(0,r.pm)(),[p]=(0,s.r)(),f=async t=>{await p({where:{videoId:e},select:["privacy"],variables:{privacy:{comments:t?"anybody":"nobody"}}}).then(()=>{(0,l.nn)(t,"Allow Viewer Comments",e,!1,a?.privacy?.view,{webContextFields:{page_name:"single_video_view_manage"}},a?.user?.uri,o),u({duration:3e3,title:(0,i.Iu)({singular:"Preferences updated",dictionary:{es:{singular:"Preferencias actualizadas"},"de-DE":{singular:"Einstellungen wurden aktualisiert"},"fr-FR":{singular:"Pr\xe9f\xe9rences mises \xe0 jour"},"ja-JP":{singular:"設定が更新されました"},"ko-KR":{singular:"기본 설정이 업데이트되었습니다."},"pt-BR":{singular:"Prefer\xeancias atualizadas"},"zh-CN":{singular:"偏好设置已更新"}}})})})};return{privacy:a?.privacy,isLoading:c,saveViewerCommentsSetting:f}},m=(e,t,n)=>{let r=(0,d.R)(),i=["privacy"],s=(0,o.rw)(()=>{if(!r||!e||!n||t)return null;let o=(0,u.AE)(n);return{where:{videoId:e},select:i,query:{reviewId:n,password:o}}},{revalidateOnFocus:!1}),l=(0,a.$)(t||null,Number((0,u.D1)(e)),(0,u.ye)(i)),p=(0,c.m)(()=>!r||t||n?null:{where:{videoId:e},select:i},{revalidateOnFocus:!1});return n?s:t?{data:(0,u.B1)(l.data),isLoading:l.isLoading}:p}},508159:function(e,t,n){n.d(t,{sk:function(){return k},Jp:function(){return I},hf:function(){return S},qy:function(){return R}});var r=n(706138),o=n(493965),i=n.n(o),a=n(652983),s=n(173898),c=n(74873),l=n(727926),u=n(750042),d=n(424769),p=n(296638),m=n(458388);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function b(){let{mutate:e}=(0,p.kY)(),{baseUrl:t,jwt:n,xVimeoPage:r,locale:o}=(0,m.r)(),[i,s]=(0,u.AC)();return[(0,a.useCallback)(async i=>{s({type:"REQUEST"});try{let a=await e(`/guest_users${(0,u.Y$)(i)}`,(0,d.f)(y(y({},i),{},{baseUrl:t,headers:y(y({},i.headers),{},{"Content-Type":"application/json",Authorization:n?`jwt ${n}`:"","Vimeo-Page":`${r}`,"Accept-Language":o??"en"})})),!1);s({type:"SUCCESS",payload:a})}catch(e){s({type:"FAILURE",payload:e})}},[t,r,n,o,s]),i]}"true"===n(173656).env.STORYBOOK&&(0,u.MR)(b,{endpoint:"/guest_users",method:"POST"});var g=n(580447),O=n(772425),h=n(228921),v=n(592063),w=n(700683),j=n(345449),_=n(397458);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let x=i()(async()=>await Promise.all([n.e(84702),n.e(97059),n.e(18361),n.e(48232),n.e(38806),n.e(8713),n.e(53280)]).then(n.bind(n,838561)),{loadableGenerated:{webpack:()=>[838561]}}),E=()=>Error("Function is not initialized"),$={xsrft:"",isActive:!1,isGuestCommentWithEmail:!0,isSubmitLoading:!1,emailErrorCode:null},S=(0,a.createContext)({modalState:$,updateModalState:E,toggleGuestLoginModal:E,setStashedGuestUser:E}),I=({children:e})=>{let{0:t,1:n}=(0,a.useState)($),r=(0,j.R)(),o=(0,h.K)(),{value:i,set:s}=(0,c.Z)(O.k8,null,.25,o),l=e=>{n(t=>C(C({},t),e))};return(0,a.useEffect)(()=>{r&&!t.xsrft&&l({xsrft:r.xsrft})},[t,r]),(0,_.jsx)(S.Provider,{value:{modalState:t,updateModalState:l,toggleGuestLoginModal:e=>{n(t=>C(C({},t),{},{isActive:e}))},guestUser:i,setStashedGuestUser:s},children:e})},k=()=>{let{modalState:e,updateModalState:t,guestUser:n,setStashedGuestUser:r}=(0,a.useContext)(S),[o,{loading:i,error:c,data:u}]=b(),d=(0,a.useCallback)(async(e,t)=>{o({select:["uri","name","metadata.interactions.comments"],variables:{name:e,email:t??""}})},[o]),p=(0,a.useCallback)(()=>{t($),window.location.reload()},[t]),m=(0,a.useCallback)(()=>{t({isActive:!1})},[t]),f=(0,a.useCallback)(e=>{t({emailErrorCode:e})},[t]);return(0,a.useEffect)(()=>{(async()=>{if(e.isSubmitLoading!==i&&t({isSubmitLoading:i}),i||c||!u||n){if(c instanceof l.F7&&!c.res.bodyUsed){let e=await c.res.json();t({emailErrorCode:e?.error_code})}}else r(JSON.stringify({guestUserName:u.name,guestUserId:u.uri.split("/").pop(),guestUserJwt:u.metadata.interactions.comments})),t({isActive:!1})})()},[e,i,c,u,t,r,n]),(0,_.jsx)(s.ThemeProvider,{theme:g.themes.light,children:(0,_.jsx)(x,C(C({},e),{},{closeModal:m,onSuccessfulLogin:p,submitCommentAsGuest:d,resetEmailErrorCode:f}))})},R=e=>t=>{let{privacy:n}=(0,v.V)(t.clipRequestId,t.showcaseId,t.reviewId),r=n?.view==="unlisted"||t.reviewId?k:w._A;return(0,_.jsx)(I,{children:(0,_.jsxs)(w.U2,{children:[(0,_.jsx)(e,C({},t)),(0,_.jsx)(r,{})]})})}},700683:function(e,t,n){n.d(t,{NK:function(){return O},U2:function(){return b},_A:function(){return g}});var r=n(706138),o=n(493965),i=n.n(o),a=n(652983),s=n(173898),c=n(580447),l=n(345449),u=n(397458);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let m=i()(async()=>{let{LoginJoinModal:e}=await Promise.all([n.e(84702),n.e(97059),n.e(18361),n.e(48232),n.e(38806),n.e(8713),n.e(1418)]).then(n.bind(n,848576));return e},{loadableGenerated:{webpack:()=>[848576]}}),f={type:"login",isShowing:!1,xsrft:"",onDismiss:()=>console.warn("Without dismiss function, LoginJoinModal isShowing props might be out of sync"),onSuccess:()=>console.warn("LoginJoinModal: onSuccess callback is not initialized")},y=(0,a.createContext)({modalState:f,setModalState:()=>Error("Setter function is not initialized"),toggleLoginModal:()=>Error("Toggle function is not initialized")}),b=({children:e})=>{let{0:t,1:n}=(0,a.useState)(f),r=(0,a.useCallback)(e=>n(t=>p(p({},t),e)),[]),o=(0,a.useCallback)((e,t)=>{r({isShowing:e,type:t||"login"})},[r]);return(0,u.jsx)(y.Provider,{value:{modalState:t,setModalState:r,toggleLoginModal:o},children:e})},g=()=>{let{modalState:e}=(0,a.useContext)(y);return(0,u.jsx)(s.ThemeProvider,{theme:c.themes.light,children:(0,u.jsx)(m,p({},e))})};function O(){let e=(0,l.R)(),{modalState:t,setModalState:n,toggleLoginModal:r}=(0,a.useContext)(y),o=t.redirectUrl;return(0,a.useEffect)(()=>{e&&n({xsrft:e.xsrft,onDismiss:()=>r(!1),onSuccess:()=>{o?window.location.assign(o):window.location.reload()}})},[e,n,r,o]),{toggleLoginModal:r,setRedirectUrl:e=>n({redirectUrl:e})}}},47379:function(e,t,n){n.d(t,{Q:function(){return l}});var r=n(27892),o=n(429259),i=n(639124),a=n(772425),s=n(96127),c=n(345449);function l(e,t,n){let{data:r}=u(e,t,n),o=(0,c.l)(),i=o?.user?.uri,a=r?.user?.uri,s=r?.metadata.interactions;return{isOwner:!!i&&a===i,canEdit:!!s?.edit,canDelete:!!s?.delete}}let u=(e,t,n)=>{let l=(0,c.R)(),u=(0,r.rw)(()=>{if(!l||!e||!n||t)return null;let r=(0,s.AE)(n);return{where:{videoId:e},select:a.V4,query:{reviewId:n,password:r}}},{revalidateOnFocus:!1}),d=(0,o.$)(t||null,Number((0,s.D1)(e)),(0,s.ye)(a.V4)),p=(0,i.m)(()=>!l||!e||t||n?null:{where:{videoId:e},select:a.V4},{revalidateOnFocus:!1});return n?u:t?{data:(0,s.B1)(d.data)}:p}},112298:function(e,t,n){n.d(t,{C:function(){return f}});var r=n(706138),o=n(846211),i=n(27892),a=n(429259),s=n(639124),c=n(772425),l=n(96127),u=n(345449);let d=["data","isLoading"];function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let f=(e,t,n)=>{let r=y(e,t,n),{data:i,isLoading:a}=r;return m({videoData:i,videoDataLoading:a||!i},(0,o.Z)(r,d))},y=(e,t,n)=>{let r=(0,u.R)(),o=(0,i.rw)(()=>{if(!r||!e||!n||t)return null;let o=(0,l.AE)(n);return{where:{videoId:e},select:c.fk,query:{reviewId:n,password:o}}},{revalidateOnFocus:!1}),d=(0,a.$)(t||null,Number((0,l.D1)(e)),(0,l.ye)(c.fk)),p=(0,s.m)(()=>!r||t||n?null:{where:{videoId:e},select:c.fk},{revalidateOnFocus:!1});return n?o:t?m(m({},d),{},{data:(0,l.B1)(d.data),isLoading:d.isLoading}):p}},345449:function(e,t,n){n.d(t,{R:function(){return i},l:function(){return a}});var r=n(652983),o=n(887877);function i(){return(0,r.useContext)(o.Z)}function a(){let e=(0,r.useContext)(o.Z),t=!!e?.user;return e&&t?e:null}},176617:function(e,t,n){n.d(t,{$s:function(){return R},KM:function(){return k},MO:function(){return x},OD:function(){return I},Or:function(){return T},SR:function(){return L},TC:function(){return $},WR:function(){return D},_x:function(){return Z},ez:function(){return M},f4:function(){return F},hk:function(){return A},kB:function(){return z},kp:function(){return U},lo:function(){return C},m4:function(){return Y},nn:function(){return N},oT:function(){return E},xH:function(){return S}});var r=n(706138),o=n(61593),i=n(329806),a=n(60266),s=n(737447),c=n(707033),l=n(927281),u=n(841433),d=n(490055),p=n(695426),m=n(724515),f=n(679276),y=n(96127);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let O=()=>(0,i.kD)({action_type:"click",feature:null}),h=e=>(0,a.g9)(g(g({page_name:e?.page_name,path:window.location.pathname},document.referrer&&{referrer:document.referrer}),e)),v=()=>(0,s.lg)({is_integration:!1,integration_id:null,integration_name:null,managed_user_id:null,app_id:null,integration_type:null,partner_bucket:null,is_partner:null}),w=(e={})=>(0,s.lg)(g({is_integration:!1,integration_id:null,integration_name:null,managed_user_id:null,app_id:null,integration_type:null,partner_bucket:null,is_partner:null},e)),j=e=>(0,c.ms)(g(g({},{comment_length:null,comment_owner_id:0,existing_reply_counts:null,allow_comment_toggle:null,is_mention:null,mentionee_email:null,mentionee_permission:null,mentionee_id:null,is_pending:null}),e)),_=e=>(0,l.TA)({viewer_home_session_id:e}),P=(e,t)=>{let n=O(),r=h(e),o=t?.teamUser?(0,u.Yr)(t?.teamUser):(0,u._X)(t?.team);return g(g(g({},n),r),o)},C=(e,t,n,r)=>{let i=P(n.webContextFields,r),a=n?.commentContextFields?j(n?.commentContextFields):{},s=(0,d.Qt)({video_id:parseFloat(e)}),c=(0,p.FI)(g({product:"viewer_home",feature:"comments",location:"comments_panel",modal_name:null,flow:null,element:"button",copy:null,device_type:(0,o.Z)()},n?.productContextFields)),l=_(t),u=g(g(g(g(g({},i),s),c),l),a);(0,m.Ou)("vimeo.select_user_profile_button",u)},x=(e,t,n,r,i,a,s)=>{let c=i?.user?.id||-1,l=(0,y.eZ)(s||""),u=P(r.webContextFields,i),f=(0,d.Qt)({video_id:parseFloat(e),video_privacy:t}),b=(0,p.FI)(g({product:"collaboration",feature:"comments",location:"comments_panel",modal_name:null,flow:null,element:"ellipses",copy:"Delete",entity_type:"video",device_type:(0,o.Z)(),is_user_facing_data:!1},r?.productContextFields)),O=w(r?.thirdPartyContextFields),h=r?.commentContextFields?j(r?.commentContextFields):{},v=g(g(g(g(g({},u),f),b),h),O),_=!i?.user?.uri;(0,m.Ou)("vimeo.delete_comment",v,13,{posted_by_uploader:c===l,posted_by_guest:_,is_timecoded:a,is_internal:!n,value:null,option:null,comments_format:null})},E=(e,t,n,r,i,a,s=!1)=>{let c=i?.user?.id||0,l=(0,y.eZ)(a||""),u=P(r.webContextFields,i),f=(0,d.Qt)({video_id:parseFloat(e),video_privacy:t}),b=(0,p.FI)(g({product:"collaboration",feature:"comments",location:"comments_panel",modal_name:null,flow:null,element:"ellipses",copy:"Edit",device_type:(0,o.Z)()},r?.productContextFields)),O=w(r?.thirdPartyContextFields),h=r?.commentContextFields?j(r?.commentContextFields):{},v=g(g(g(g(g({},u),f),b),h),O),_=!i?.user?.uri;(0,m.Ou)("vimeo.edit_comment",v,13,{posted_by_uploader:c===l,posted_by_guest:_,is_timecoded:s,is_internal:!n,value:null,option:null,comments_format:null})},$=(e,t,n,r,i,a=!1,s=!0)=>{let c=i?.user?.id||0;t&&(0,y.hu)(t);let l=P(r.webContextFields,i),u=(0,d.Qt)({video_id:parseFloat(e),video_privacy:t}),f=(0,p.FI)(g({product:"collaboration",feature:"comments",location:"comments_panel",modal_name:null,flow:null,element:"button",copy:"Comment",entity_type:"video",device_type:(0,o.Z)()},r?.productContextFields)),b=w(r?.thirdPartyContextFields),O=r?.commentContextFields?j(r?.commentContextFields):{},h=g(g(g(g(g({},l),u),f),O),b),v=!i?.user?.uri;(0,m.Ou)("vimeo.post_comment",h,6,{posted_by_uploader:c===n,posted_by_guest:v,is_timecoded:a,is_internal:!s,value:null})},S=(e,t,n,r,i,a,s)=>{let c=a?.user?.id||0,l=Number((n||"").match(/user(\d+)/)?.[1]||0),u=P(i.webContextFields,a),f=(0,d.Qt)({video_id:parseFloat(e),video_privacy:t}),y=(0,p.FI)({product:"collaboration",feature:"comments",location:"comments_panel",modal_name:null,flow:null,element:"ellipses",copy:"Copy link to comment",entity_type:"video",is_user_facing_data:!1,device_type:(0,o.Z)()}),b=v(),O=i?.commentContextFields?j(i?.commentContextFields):{},h=g(g(g(g(g({},u),f),y),O),b);(0,m.Ou)("vimeo.copy_comment_link",h,13,{posted_by_uploader:c===l,posted_by_guest:!c,is_timecoded:s,is_internal:!r,value:null,option:null,comments_format:null})},I=(e,t,n,r,i,a,s)=>{let c=a?.user?.id||0,l=Number((n||"").match(/user(\d+)/)?.[1]||0),u=P(i.webContextFields,a),f=(0,d.Qt)({video_id:parseFloat(e),video_privacy:t}),y=(0,p.FI)({product:"collaboration",feature:"comments",location:"comments_panel",modal_name:null,flow:null,element:"ellipses",copy:null,entity_type:"video",is_user_facing_data:!1,device_type:(0,o.Z)()}),b=v(),O=i?.commentContextFields?j(i?.commentContextFields):{},h=g(g(g(g(g({},u),f),y),O),b);(0,m.Ou)("vimeo.open_comment_options",h,13,{posted_by_uploader:c===l,posted_by_guest:!c,is_timecoded:s,is_internal:!r,value:null,option:null,comments_format:null})},k=(e,t="nobody",n,r,a)=>{let s=a?.user?.id||0,c=h(n.webContextFields),l=a?.teamUser?(0,u.Yr)(a?.teamUser):(0,u._X)(a?.team),f=(0,d.Qt)({video_id:e,video_privacy:t}),y=(0,i.kD)({action_type:"type",feature:null}),b=(0,p.FI)(g({product:"collaboration",feature:"comments",location:"comments_panel",modal_name:null,flow:null,element:"button",copy:null,device_type:(0,o.Z)()},n?.productContextFields)),O=v(),w=j(g({comment_owner_id:s,allow_comment_toggle:!0,is_mention:!0},n?.commentContextFields)),_=g(g(g(g(g(g(g({},y),b),O),f),w),l),c);(0,m.Ou)("vimeo.mention_box_impression",_,13,{posted_by_uploader:null,posted_by_guest:null,is_timecoded:null,is_internal:!r,value:null,option:null,comments_format:null})},R=(e,t="nobody",n,r,i,a)=>{let s=a?.user?.id||0,c=Number((n||"").match(/user(\d+)/)?.[1]||0),l=P(i.webContextFields,a),u=(0,d.Qt)({video_id:e,video_privacy:t}),f=(0,p.FI)(g({product:"collaboration",feature:"comments",location:"comments_panel",modal_name:null,flow:null,element:"text",copy:null,entity_type:"video",device_type:(0,o.Z)(),is_user_facing_data:!1},i?.productContextFields)),y=v(),b=j(g({comment_id:0,comment_owner_id:s,allow_comment_toggle:!0,is_mention:!0},i?.commentContextFields)),O=g(g(g(g(g({},l),u),f),b),y);(0,m.Ou)("vimeo.add_mentionee_to_comment",O,13,{posted_by_uploader:s===c,posted_by_guest:!s,is_timecoded:null,is_internal:!r,value:null,option:null,comments_format:null})},D=(e,t,n,r,i,a,s)=>{let c=s?.user?.id||0,l=Number((r||"").match(/user(\d+)/)?.[1]||0),u=P(a.webContextFields,s),f=(0,d.Qt)({video_id:parseFloat(t),video_privacy:n}),y=(0,p.FI)(g({product:"collaboration",feature:"comments",location:"comments_panel",modal_name:null,flow:null,element:"dropdown",copy:e,device_type:(0,o.Z)(),entity_type:"video",is_user_facing_data:!1},a?.productContextFields)),b=w(a?.thirdPartyContextFields),O=a?.commentContextFields?j(a?.commentContextFields):{},h=g(g(g(g(g({},u),f),y),O),b);(0,m.Ou)("vimeo.sort_comment",h,13,{posted_by_uploader:c===l,posted_by_guest:!c,is_timecoded:!1,is_internal:!i,value:null,option:e,comments_format:null})},T=(e,t,n,r,i,a,s,c="text")=>{let l=i?.user?.id||0,u=Number((s||"").match(/user(\d+)/)?.[1]||0),f=P(r.webContextFields,i),y=(0,d.Qt)({video_id:parseFloat(e),video_privacy:t}),b=(0,p.FI)(g({product:"collaboration",feature:"comments",location:"comments_panel",modal_name:null,flow:null,element:"button",copy:"Save",device_type:(0,o.Z)(),entity_type:"video",is_user_facing_data:!1},r?.productContextFields)),O=w(r?.thirdPartyContextFields),h=r?.commentContextFields?j(r?.commentContextFields):{},v=g(g(g(g(g({},f),y),b),h),O),_=!i?.user?.uri;(0,m.Ou)("vimeo.post_edited_comment",v,13,{posted_by_uploader:l===u,posted_by_guest:_,is_timecoded:!!a,is_internal:!n,value:null,option:c,comments_format:null})},F=(e,t,n,r,i,a,s)=>{let c=i?.user?.id||0,l=Number((s||"").match(/user(\d+)/)?.[1]||0),u=P(r.webContextFields,i),f=(0,d.Qt)({video_id:parseFloat(t),video_privacy:n}),y=(0,p.FI)(g({product:"collaboration",feature:"comments",location:"comments_panel",modal_name:null,flow:null,element:"check_box",copy:null,device_type:(0,o.Z)(),entity_type:"video",is_user_facing_data:!1},r?.productContextFields)),b=w(r?.thirdPartyContextFields),O=r?.commentContextFields?j(r?.commentContextFields):{},h=g(g(g(g(g({},u),f),y),O),b),v=!i?.user?.uri;(0,m.Ou)("vimeo.resolve_comment",h,13,{posted_by_uploader:c===l,posted_by_guest:v,is_timecoded:!!a,is_internal:!0,value:e,option:null,comments_format:null})},A=(e,t,n,r,i,a)=>{let s=P(i.webContextFields,a),c=(0,d.Qt)({video_id:parseFloat(n),video_privacy:r}),l=(0,p.FI)(g({product:"collaboration",feature:"comments",location:"comments_panel",modal_name:null,flow:null,element:"sub_menu",copy:e,device_type:(0,o.Z)(),entity_type:"video",is_user_facing_data:!1},i?.productContextFields)),u=w(i?.thirdPartyContextFields),f=i?.commentContextFields?j(i?.commentContextFields):{},y=g(g(g(g(g({},s),c),l),f),u);(0,m.Ou)("vimeo.open_comments_tab",y,13,{posted_by_uploader:null,posted_by_guest:null,is_timecoded:null,is_internal:!t,value:null,option:null,comments_format:null})},U=(e,t,n,r,i)=>{let a=P(r.webContextFields,i),s=(0,d.Qt)({video_id:parseFloat(t),video_privacy:n}),c=(0,p.FI)(g({product:"collaboration",feature:"comments",location:"comments_panel",modal_name:null,flow:null,element:"button",copy:"Resolved",device_type:(0,o.Z)(),entity_type:"video",is_user_facing_data:!1},r?.productContextFields)),l=w(r?.thirdPartyContextFields),u=r?.commentContextFields?j(r?.commentContextFields):{},f=g(g(g(g(g({},a),s),c),u),l);(0,m.Ou)("vimeo.toggle_show_resolved_comments",f,13,{posted_by_uploader:null,posted_by_guest:null,is_timecoded:null,is_internal:!0,value:e,option:null,comments_format:null})},Z=(e,t,n,r,i,a,s)=>{let c=P(a.webContextFields,s),l=(0,d.Qt)({video_id:parseFloat(n),video_privacy:i}),u=(0,p.FI)(g({product:"collaboration",feature:"comments",location:"comments_panel",modal_name:null,flow:null,element:"button",copy:t,device_type:(0,o.Z)(),entity_type:"video",is_user_facing_data:!1},a?.productContextFields)),f=w(a?.thirdPartyContextFields),y=a?.commentContextFields?j(a?.commentContextFields):{},b=g(g(g(g(g({},c),l),u),y),f);(0,m.Ou)("vimeo.filter_comments",b,13,{posted_by_uploader:null,posted_by_guest:null,is_timecoded:null,is_internal:!r,value:null,option:e,comments_format:null})},L=(e,t,n,r,i,a="text",s,c)=>{let l=c?.user?.id||0,u=Number((i||"").match(/user(\d+)/)?.[1]||0),f=P(r.webContextFields,c),y=(0,d.Qt)({video_id:e,video_privacy:t}),b=(0,p.FI)(g({product:"collaboration",feature:"comments",location:"comments_panel",modal_name:null,flow:null,element:a,copy:null,device_type:(0,o.Z)(),entity_type:"video"},r?.productContextFields)),O=w(r?.thirdPartyContextFields),h=r?.commentContextFields?j(r?.commentContextFields):{},v=g(g(g(g(g({},f),y),b),h),O),_=!c?.user?.uri;(0,m.Ou)("vimeo.start_comment",v,13,{posted_by_uploader:l===u,posted_by_guest:_,is_timecoded:s,is_internal:!n,value:null,option:null,comments_format:null})},N=(e,t,n,r,i,a,s,c)=>{let l=P(a.webContextFields,c),u=(0,d.Qt)({video_id:parseFloat(n),video_privacy:i,video_owner_id:(0,y._G)(s??"")}),f=(0,p.FI)(g({product:"collaboration",feature:"comments",location:"comments_panel",modal_name:null,flow:null,element:"dropdown",copy:t,device_type:(0,o.Z)(),entity_type:"video",is_user_facing_data:!1},a?.productContextFields)),b=w(a?.thirdPartyContextFields),O=a?.commentContextFields?j(a?.commentContextFields):{},h=g(g(g(g(g({},l),u),f),O),b);(0,m.Ou)("vimeo.allow_viewer_comments",h,13,{posted_by_uploader:null,posted_by_guest:null,is_timecoded:null,is_internal:!1,value:e,option:null,comments_format:null})},M=({isInternal:e,videoId:t,videoPrivacy:n,viewer:r,analyticsProps:o})=>{let i=P(o?.webContextFields,r),a=(0,p.FI)(g({product:"collaboration",feature:"comments",location:"comments_panel",element:"icon",entity_type:"video"},o?.productContextFields)),s=(0,d.Qt)(g({video_id:t,video_privacy:n},o?.videoContextFields)),c=o?.folderContextFields?(0,f.IN)(g({folder_id:o?.folderContextFields?.folder_id??0},o?.folderContextFields)):{},l=g(g(g(g({},i),a),s),c);(0,m.Ou)("vimeo.start_search_comment",l,13,{posted_by_uploader:null,posted_by_guest:null,is_timecoded:null,is_internal:e,value:null,option:null,comments_format:null})},Y=({eventName:e,copy:t,settingValue:n,settingOption:r,element:o,viewer:i,videoId:a,videoOwnerUri:s,videoPrivacy:c="nobody",modalName:l,location:u="comments_panel",comments_format:b,analyticsProps:O})=>{let h=P(g({page_name:"single_video_view_manage",referrer_page_name:"single_video_view_manage",referrer:document.referrer,path:window.location.pathname},O?.webContextFields),i),v=(0,p.FI)(g({product:"collaboration",feature:"comments",location:u,element:o??"dropdown",copy:t,entity_type:"video",modal_name:l??null},O?.productContextFields)),w="number"==typeof a?(0,d.Qt)(g({video_id:a,video_privacy:c,video_owner_id:(0,y.Pd)(s??"")},O?.videoContextFields)):{},j=O?.folderContextFields?(0,f.IN)(g({folder_id:O?.folderContextFields?.folder_id??0},O?.folderContextFields)):{},_=g(g(g(g({},h),v),w),j);(0,m.Ou)(e,_,13,{posted_by_uploader:null,posted_by_guest:null,is_timecoded:null,is_internal:null,value:n,option:r,comments_format:b??null})},z=({viewer:e,videoId:t,commentId:n,videoPrivacy:r="nobody",analyticsProps:o})=>{let i=P(o.webContextFields,e),a=(0,p.FI)({product:"collaboration",feature:"comments",location:"comments_panel",element:"button",entity_type:"video"}),s=(0,d.Qt)({video_id:parseInt(t),video_privacy:r}),c=j(g({comment_id:parseInt(n??"")},o?.commentContextFields)),l=g(g(g(g({},i),a),s),c);(0,m.Ou)("vimeo.open_report_comment_modal",l,13,{})}},772425:function(e,t,n){n.d(t,{Fl:function(){return d},Q0:function(){return p},RX:function(){return l},S0:function(){return a},UJ:function(){return u},V4:function(){return f},ZB:function(){return o},Zx:function(){return r},bn:function(){return s},dp:function(){return m},fO:function(){return i},fk:function(){return y},k8:function(){return c}});let r="anybody",o="password",i="contacts",a="users",s="stashed_comment",c="stashed_guest_user",l=["createdOn","metadata.connections.replies.total","text","richtext","metadata.connections.user.name","metadata.connections.user.link","metadata.connections.user.uri","metadata.connections.user.pictures.sizes","metadata.connections.user.badge","metadata.connections.user.isStaffPicked","metadata.connections.guestUser.name","metadata.connections.guestUser.uri","uri","replies.createdOn","replies.text","replies.richtext","replies.metadata.connections.user.link","replies.metadata.connections.user.name","replies.metadata.connections.user.uri","replies.metadata.connections.user.pictures.sizes","replies.metadata.connections.user.badge","replies.metadata.connections.user.isStaffPicked","replies.metadata.connections.guestUser.name","replies.metadata.connections.guestUser.uri","replies.uri","replies.lastEditedOn","textDecorations","deletedOn","lastEditedOn"],u=["createdOn","link","richtext","metadata.connections.replies.total","text","metadata.connections.user.name","metadata.connections.user.link","metadata.connections.user.uri","metadata.connections.user.pictures.sizes","metadata.connections.user.badge","uri","metadata","replies.createdOn","replies.link","replies.text","replies.richtext","replies.metadata.connections.user.name","replies.metadata.connections.user.link","replies.metadata.connections.user.uri","replies.metadata.connections.user.pictures.sizes","replies.metadata.connections.user.badge","replies.uri"],d=["createdOn","link","metadata.connections.replies.total","text","richtext","metadata.connections.user.name","metadata.connections.user.link","metadata.connections.user.uri","metadata.connections.user.pictures.sizes","metadata.connections.user.badge","uri","metadata"],p=["createdOn","link","metadata.connections.replies.total","text","richtext","metadata.connections.user.name","metadata.connections.user.link","metadata.connections.user.uri","metadata.connections.user.pictures.sizes","metadata.connections.user.badge","uri","metadata","replies.createdOn","replies.link","replies.text","replies.richtext","replies.metadata.connections.user.name","replies.metadata.connections.user.link","replies.metadata.connections.user.uri","replies.metadata.connections.user.pictures.sizes","replies.metadata.connections.user.badge","replies.uri"],m=["createdOn","link","metadata.connections.replies.total","text","richtext","metadata.connections.user.name","metadata.connections.user.link","metadata.connections.user.uri","metadata.connections.user.pictures.sizes","uri","metadata"],f=["user.uri","user.metadata.interactions.follow","metadata.interactions.edit","metadata.interactions.delete","metadata.interactions.watchlater","metadata.interactions.like","metadata.interactions.ask_ai_viewer","metadata.interactions.flag_clip","metadata.interactions.interact"],y=["app.uri","name","createdTime","stats.plays","contentRating","status","spatial.stereoFormat","privacy.comments","privacy.view","privacy.download","embed.badges.dolby_vision","embed.badges.hdr_10","embed.badges.hdr_10_plus","license","descriptionHtml","manageLink","metadata.is_screen_record","metadata.is_vimeo_create","metadata.connections.privateComments.isEnabled","type","tags.name","tags.canonical","user.backgroundVideo.aspectRatio","user.backgroundVideo.clipId","user.backgroundVideo.configUrl","user.backgroundVideo.endTime","user.backgroundVideo.firstFrameUrl","user.backgroundVideo.startTime","user.backgroundVideo.yPosition","user.link","user.name","user.capabilities","user.pictures.sizes.link","user.pictures.sizes.width","user.locationDetails.formattedAddress","user.skills","user.metadata.connections.followers.total","uploader.link","uploader.name","uploader.pictures.sizes","metadata.interactions.view_team_members","show_svv_footer_banner","metadata.connections.versions.latestIncompleteVersion","metadata.interactions.invite","metadata.ai_content","allow_guest_comments","page","metadata.interactions.edit","metadata.interactions.canComment"]},96127:function(e,t,n){n.d(t,{AE:function(){return D},B1:function(){return R},BO:function(){return I},CU:function(){return O},D1:function(){return m},Jv:function(){return T},KK:function(){return $},Or:function(){return j},Pd:function(){return l},Xc:function(){return S},Xg:function(){return w},YK:function(){return p},ZG:function(){return P},_G:function(){return b},b:function(){return f},eJ:function(){return h},eZ:function(){return u},ef:function(){return E},f4:function(){return g},hu:function(){return v},uv:function(){return x},vh:function(){return d},ye:function(){return k}});var r=n(706138),o=n(806298),i=n(761299),a=n(772425);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let l=e=>e?parseInt(e.substring(e.lastIndexOf("/")+1),10):0,u=e=>e?Number((e||"").match(/user(\d+)/)?.[1]):0,d=()=>{let e;if(!(e=new URLSearchParams(window.location.search).get("comment"))){let t=window.location.hash.match(/#comment_(\d+)/);e=t?t[1]:void 0}return e},p=()=>{let e=new URLSearchParams(window.location.search).get("reply");return e?Number(e):null},m=e=>e.split(":")[0],f=e=>{let t=e.match(/\/(?:comments|private_comments)\/(\d+)\//);return t?t[1]:null},y=e=>e?parseInt(e.split("/")[4]):null,b=e=>e?parseInt(e.split("/")[2]):null,g=e=>{let t,n,r;let{email:i,name:a,isTeamInvitePending:s,pictures:c,uri:l}=e;l.includes("/team_users/")?t=y(l):l.includes("/guest_users/")?r=l.split("/").pop():l.includes("/users/")&&(n=b(l));let[u,d]=(0,o.gp)(c?.sizes);return{name:a??void 0,email:i??void 0,isPending:s??void 0,teamUserId:t??void 0,userId:n??void 0,guestUserId:r??void 0,src:u,srcSet:d}},O=/^\w+([\+\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,})+$/,h=({name:e,email:t,userId:n,teamUserId:r,guestUserId:o})=>({label:e??t,userId:n,teamUserId:r,guestUserId:o}),v=e=>![a.Zx,a.ZB,a.S0,a.fO].includes(e),w={everyone:{copy:"Everyone",option:"everyone"},team:{copy:"Only from Team",option:"team_only"},non_team:{copy:"Only Guests",option:"guest_only"},mentions_replies:{copy:"Mentions and Replies",option:"mentions_replies"}};function j(e,t){if(t)return(function(e){let t=JSON.parse(e||"");return t.content?.map(e=>e.content?.map(e=>{let t="text"===e.type?e.text.trim():"";return("mention"===e.type?e.attrs?.label:t)??""}).filter(e=>!!e).join(" ")).join(" ")})(t).toLowerCase().includes(e)}let _=e=>e?e.split("/")[2]:null,P=(e="")=>{if(!C(e))return/(^|\W)@\w+(\.\w+)?\b/.test(e);let t=JSON.parse(e);return Array.isArray(t?.content)&&t.content.some(e=>e?.content?.some(e=>"mention"===e.type))},C=e=>{try{return JSON.parse(e),!0}catch{return!1}},x=e=>{let t=JSON.parse(e||""),n=t.content;if(n.length){let e=n[0],r=n[n.length-1];if(e.content){let n=(e=>{if(0===e.length)return e;for(;"hardBreak"===e[0].type;)e.shift();return"text"!==e[0].type||(e[0].text=e[0].text.trimStart(),e[0].text||e.shift()),e})(e.content);t.content[0].content=n}if(r.content){let e=(e=>{if(0===e.length)return e;for(;"hardBreak"===e[e.length-1].type;)e.pop();let t=e.length-1;return e.length>0&&"text"===e[t].type&&(e[t].text=e[t].text.trimEnd(),e[t].text||("mention"===e[t-1].type?e[t].text+=" ":e.pop())),e})(r.content);t.content[n.length-1].content=e}}return t&&JSON.stringify(t)},E=(e,t,n)=>({sort:t?.type,direction:t?.direction,password:e,includeDeletedComments:!0,commented_user_type:["team","non_team"].includes(n?.userType||"")?n?.userType:void 0,mentions_and_replies:n?.mentionAndReplies??void 0}),$=(e,t,n)=>c(c({commentId:e,perPage:25,sort:n?.type,direction:n?.direction},t?{password:t}:null),{},{includeDeletedComments:!0}),S=e=>({password:e,includeDeletedComments:!0,page:1,perPage:1}),I=e=>{let t=`${e}_albumpassword`;return(0,i.hL)(t)},k=e=>e.map(e=>`clip.${e}`),R=e=>{let t=e?.clip;if(t)return t},D=e=>{if(!e)return;let t=`${e}_password`;return(0,i.hL)(t)??void 0},T=(e,t,n,r)=>!!e&&e===n||!!t&&t===_(r)},228921:function(e,t,n){n.d(t,{K:function(){return i}});var r=n(706138);class o{constructor(){(0,r.Z)(this,"storage",new Map)}static getInstance(){return o.instance||(o.instance=new o),o.instance}get length(){return this.storage.size}clear(){this.storage.clear()}getItem(e){return this.storage.get(e)??null}key(e){let t=Array.from(this.storage.keys());return t.length>e?t[e]:null}removeItem(e){this.storage.delete(e)}setItem(e,t){this.storage.set(e,t)}}function i(){return!function(e){let t;try{t=window[e];let n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return!1}}("sessionStorage")?o.getInstance():window.sessionStorage}(0,r.Z)(o,"instance",void 0)},846959:function(e,t,n){n.d(t,{BA:function(){return w},Wh:function(){return j}});var r=n(706138),o=n(750042),i=n(846211),a=n(727926);let s=["baseUrl","select","where","query"],c=["baseUrl","where"],l=["baseUrl","where"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}async function p(e){let{baseUrl:t,select:n,where:{albumId:r,videoId:o},query:c}=e,l=(0,i.Z)(e,s),u=await fetch(`${t}/albums/${r}/videos/${o}?${(0,a.Ov)(c)}&fields=${n.map(a.Rb).join(",")}`,d(d({},l),{},{method:"GET"}));if(!u.ok)throw new a.F7("A network error occurred",u.status,u);if(204===u.status)return null;if(!u.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let p=await u.json();return(0,a.l_)(p)}async function m(e){let{baseUrl:t,where:{albumId:n,videoId:r}}=e,o=(0,i.Z)(e,c),s=await fetch(`${t}/albums/${n}/videos/${r}`,d(d({},o),{},{method:"PUT"}));if(!s.ok)throw new a.F7("A network error occurred",s.status,s);if(204===s.status)return null;if(!s.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let l=await s.json();return(0,a.l_)(l)}async function f(e){let{baseUrl:t,where:{albumId:n,videoId:r}}=e,o=(0,i.Z)(e,l),s=await fetch(`${t}/albums/${n}/videos/${r}`,d(d({},o),{},{method:"DELETE"}));if(!s.ok)throw new a.F7("A network error occurred",s.status,s);if(204===s.status)return null;if(!s.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let c=await s.json();return(0,a.l_)(c)}var y=n(652983),b=n(296638),g=n(458388),O=n(173656);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function w(e,t){let n="function"==typeof e?e():e,{baseUrl:r,jwt:i,xVimeoPage:a,locale:s}=(0,g.r)();return(0,b.ZP)(n?`/albums/${n.where.albumId}/videos/${n.where.videoId}${(0,o.Y$)(n)}`:()=>null,n?()=>p(v(v({},n),{},{headers:v(v({},n.headers),{},{"Content-Type":"application/json",Authorization:i?`jwt ${i}`:"","Vimeo-Page":`${a}`,"Accept-Language":s??"en"}),baseUrl:r})):null,t)}function j(){let{mutate:e}=(0,b.kY)(),{baseUrl:t,jwt:n,xVimeoPage:r,locale:i}=(0,g.r)(),[a,s]=(0,o.AC)();return[(0,y.useCallback)(async a=>{s({type:"REQUEST"});try{let c=await e(`/albums/${a.where.albumId}/videos/${a.where.videoId}${(0,o.Y$)(a)}`,p(v(v({},a),{},{baseUrl:t,headers:v(v({},a.headers),{},{"Content-Type":"application/json",Authorization:n?`jwt ${n}`:"","Vimeo-Page":`${r}`,"Accept-Language":i??"en"})})));s({type:"SUCCESS",payload:c})}catch(e){s({type:"FAILURE",payload:e})}},[t,r,n,i,s]),a]}"true"===O.env.STORYBOOK&&(0,o.MR)(w,{endpoint:"/albums/:albumId/videos/:videoId",method:"GET"}),"true"===O.env.STORYBOOK&&(0,o.MR)(j,{endpoint:"/albums/:albumId/videos/:videoId",method:"GET"}),"true"===O.env.STORYBOOK&&(0,o.MR)(function(){let{mutate:e}=(0,b.kY)(),{baseUrl:t,jwt:n,xVimeoPage:r,locale:i}=(0,g.r)(),[a,s]=(0,o.AC)();return[(0,y.useCallback)(async a=>{s({type:"REQUEST"});try{let c=await e(`/albums/${a.where.albumId}/videos/${a.where.videoId}${(0,o.Y$)(a)}`,m(v(v({},a),{},{baseUrl:t,headers:v(v({},a.headers),{},{"Content-Type":"application/json",Authorization:n?`jwt ${n}`:"","Vimeo-Page":`${r}`,"Accept-Language":i??"en"})})),!1);s({type:"SUCCESS",payload:c})}catch(e){s({type:"FAILURE",payload:e})}},[t,r,n,i,s]),a]},{endpoint:"/albums/:albumId/videos/:videoId",method:"PUT"}),"true"===O.env.STORYBOOK&&(0,o.MR)(function(){let{mutate:e}=(0,b.kY)(),{baseUrl:t,jwt:n,xVimeoPage:r,locale:i}=(0,g.r)(),[a,s]=(0,o.AC)();return[(0,y.useCallback)(async a=>{s({type:"REQUEST"});try{let c=await e(`/albums/${a.where.albumId}/videos/${a.where.videoId}${(0,o.Y$)(a)}`,f(v(v({},a),{},{baseUrl:t,headers:v(v({},a.headers),{},{"Content-Type":"application/json",Authorization:n?`jwt ${n}`:"","Vimeo-Page":`${r}`,"Accept-Language":i??"en"})})),!1);s({type:"SUCCESS",payload:c})}catch(e){s({type:"FAILURE",payload:e})}},[t,r,n,i,s]),a]},{endpoint:"/albums/:albumId/videos/:videoId",method:"DELETE"})},261896:function(e,t,n){n.d(t,{m:function(){return h},M:function(){return v}});var r=n(706138),o=n(750042),i=n(846211),a=n(727926);let s=["baseUrl","where","query"],c=["baseUrl","select","variables","where","query"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}async function d(e){let{baseUrl:t,where:{albumId:n,videoId:r,commentId:o},query:c}=e,l=(0,i.Z)(e,s),d=await fetch(`${t}/albums/${n}/videos/${r}/comments/${o}?${(0,a.Ov)(c)}`,u(u({},l),{},{method:"DELETE"}));if(!d.ok)throw new a.F7("A network error occurred",d.status,d);if(204===d.status)return null;if(!d.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let p=await d.json();return(0,a.l_)(p)}async function p(e){let{baseUrl:t,select:n,variables:r,where:{albumId:o,videoId:s,commentId:l},query:d}=e,p=(0,i.Z)(e,c),m=await fetch(`${t}/albums/${o}/videos/${s}/comments/${l}?${(0,a.Ov)(d)}&fields=${n.map(a.Rb).join(",")}`,u(u({},p),{},{method:"PATCH",body:JSON.stringify((0,a.mH)(r))}));if(!m.ok)throw new a.F7("A network error occurred",m.status,m);if(204===m.status)return null;if(!m.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let f=await m.json();return(0,a.l_)(f)}var m=n(652983),f=n(296638),y=n(458388),b=n(173656);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function h(){let{mutate:e}=(0,f.kY)(),{baseUrl:t,jwt:n,xVimeoPage:r,locale:i}=(0,y.r)(),[a,s]=(0,o.AC)();return[(0,m.useCallback)(async a=>{s({type:"REQUEST"});try{let c=await e(`/albums/${a.where.albumId}/videos/${a.where.videoId}/comments/${a.where.commentId}${(0,o.Y$)(a)}`,d(O(O({},a),{},{baseUrl:t,headers:O(O({},a.headers),{},{"Content-Type":"application/json",Authorization:n?`jwt ${n}`:"","Vimeo-Page":`${r}`,"Accept-Language":i??"en"})})),!1);s({type:"SUCCESS",payload:c})}catch(e){s({type:"FAILURE",payload:e})}},[t,r,n,i,s]),a]}function v(){let{mutate:e}=(0,f.kY)(),{baseUrl:t,jwt:n,xVimeoPage:r,locale:i}=(0,y.r)(),[a,s]=(0,o.AC)();return[(0,m.useCallback)(async a=>{s({type:"REQUEST"});try{let c=await e(`/albums/${a.where.albumId}/videos/${a.where.videoId}/comments/${a.where.commentId}${(0,o.Y$)(a)}`,p(O(O({},a),{},{baseUrl:t,headers:O(O({},a.headers),{},{"Content-Type":"application/json",Authorization:n?`jwt ${n}`:"","Vimeo-Page":`${r}`,"Accept-Language":i??"en"})})),!1);s({type:"SUCCESS",payload:c})}catch(e){s({type:"FAILURE",payload:e})}},[t,r,n,i,s]),a]}"true"===b.env.STORYBOOK&&(0,o.MR)(h,{endpoint:"/albums/:albumId/videos/:videoId/comments/:commentId",method:"DELETE"}),"true"===b.env.STORYBOOK&&(0,o.MR)(v,{endpoint:"/albums/:albumId/videos/:videoId/comments/:commentId",method:"PATCH"})},1945:function(e,t,n){n.d(t,{bG:function(){return w},hG:function(){return j},sr:function(){return _}});var r=n(846211),o=n(706138),i=n(750042),a=n(727926);let s=["baseUrl","select","where","query"],c=["baseUrl","select","variables","where","query"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}async function d(e){let{baseUrl:t,select:n,where:{albumId:o,videoId:i},query:c}=e,l=(0,r.Z)(e,s),d=await fetch(`${t}/albums/${o}/videos/${i}/comments?${(0,a.Ov)(c)}&fields=${n.map(a.Rb).join(",")}`,u(u({},l),{},{method:"GET"}));if(!d.ok)throw new a.F7("A network error occurred",d.status,d);if(204===d.status)return null;if(!d.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let p=await d.json();return(0,a.l_)(p)}async function p(e){let{baseUrl:t,select:n,variables:o,where:{albumId:i,videoId:s},query:l}=e,d=(0,r.Z)(e,c),p=await fetch(`${t}/albums/${i}/videos/${s}/comments?${(0,a.Ov)(l)}&fields=${n.map(a.Rb).join(",")}`,u(u({},d),{},{method:"POST",body:JSON.stringify((0,a.mH)(o))}));if(!p.ok)throw new a.F7("A network error occurred",p.status,p);if(204===p.status)return null;if(!p.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let m=await p.json();return(0,a.l_)(m)}var m=n(652983),f=n(296638),y=n(512959),b=n(458388),g=n(173656);let O=["perPage","page"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function w(e,t){let n="function"==typeof e?e():e,{baseUrl:r,jwt:o,xVimeoPage:a,locale:s}=(0,b.r)();return(0,f.ZP)(n?`/albums/${n.where.albumId}/videos/${n.where.videoId}/comments${(0,i.Y$)(n)}`:()=>null,n?()=>d(v(v({},n),{},{headers:v(v({},n.headers),{},{"Content-Type":"application/json",Authorization:o?`jwt ${o}`:"","Vimeo-Page":`${a}`,"Accept-Language":s??"en"}),baseUrl:r})):null,t)}function j(e,t){let n="function"==typeof e?e():e,{baseUrl:o,jwt:i,xVimeoPage:a,locale:s}=(0,b.r)();return(0,y.ZP)((e,t)=>{if(null===n||t&&!t.paging.next)return null;let o=n.query??{},{perPage:i=25,page:a}=o,s=(0,r.Z)(o,O),c=n.select.join(","),l=Object.entries(s??{}).filter(([,e])=>void 0!==e).map(([e,t])=>`${e}=${t}`).join("&");return[`/albums/${n.where.albumId}/videos/${n.where.videoId}/comments?page=${e+1}&perPage=${i}&fields=${c}&${l}`,e]},null!==n?([e,t])=>d(v(v({},n),{},{baseUrl:o,headers:v(v({},n.headers),{},{"Content-Type":"application/json",Authorization:i?`jwt ${i}`:"","Vimeo-Page":`${a}`,"Accept-Language":s??"en"}),query:v(v({},n.query),{},{page:t+1})})):null,t)}function _(){let{baseUrl:e,jwt:t,xVimeoPage:n,locale:r}=(0,b.r)(),[o,a]=(0,i.AC)();return[(0,m.useCallback)(async o=>{a({type:"REQUEST"});try{let i=await p(v(v({},o),{},{baseUrl:e,headers:v(v({},o.headers),{},{"Content-Type":"application/json",Authorization:t?`jwt ${t}`:"","Vimeo-Page":`${n}`,"Accept-Language":r??"en"})}));a({type:"SUCCESS",payload:i})}catch(e){a({type:"FAILURE",payload:e})}},[e,n,t,r,a]),o]}"true"===g.env.STORYBOOK&&(0,i.MR)(w,{endpoint:"/albums/:albumId/videos/:videoId/comments",method:"GET"}),"true"===g.env.STORYBOOK&&(0,i.MR)(function(){let{mutate:e}=(0,f.kY)(),{baseUrl:t,jwt:n,xVimeoPage:r,locale:o}=(0,b.r)(),[a,s]=(0,i.AC)();return[(0,m.useCallback)(async a=>{s({type:"REQUEST"});try{let c=await e(`/albums/${a.where.albumId}/videos/${a.where.videoId}/comments${(0,i.Y$)(a)}`,d(v(v({},a),{},{baseUrl:t,headers:v(v({},a.headers),{},{"Content-Type":"application/json",Authorization:n?`jwt ${n}`:"","Vimeo-Page":`${r}`,"Accept-Language":o??"en"})})));s({type:"SUCCESS",payload:c})}catch(e){s({type:"FAILURE",payload:e})}},[t,r,n,o,s]),a]},{endpoint:"/albums/:albumId/videos/:videoId/comments",method:"GET"}),"true"===g.env.STORYBOOK&&(0,i.MR)(j,{endpoint:"/albums/:albumId/videos/:videoId/comments",method:"GET"}),"true"===g.env.STORYBOOK&&(0,i.MR)(_,{endpoint:"/albums/:albumId/videos/:videoId/comments",method:"POST"})},27892:function(e,t,n){n.d(t,{Os:function(){return f},Yu:function(){return y},p4:function(){return m},rw:function(){return p}});var r=n(706138),o=n(750042),i=n(469625),a=n(652983),s=n(296638),c=n(458388),l=n(173656);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function p(e,t){let n="function"==typeof e?e():e,{baseUrl:r,jwt:a,xVimeoPage:l,locale:u}=(0,c.r)();return(0,s.ZP)(n?`/videos/${n.where.videoId}${(0,o.Y$)(n)}`:()=>null,n?()=>(0,i.om)(d(d({},n),{},{headers:d(d({},n.headers),{},{"Content-Type":"application/json",Authorization:a?`jwt ${a}`:"","Vimeo-Page":`${l}`,"Accept-Language":u??"en"}),baseUrl:r})):null,t)}function m(){let{mutate:e}=(0,s.kY)(),{baseUrl:t,jwt:n,xVimeoPage:r,locale:l}=(0,c.r)(),[u,p]=(0,o.AC)();return[(0,a.useCallback)(async a=>{p({type:"REQUEST"});try{let s=await e(`/videos/${a.where.videoId}${(0,o.Y$)(a)}`,(0,i.om)(d(d({},a),{},{baseUrl:t,headers:d(d({},a.headers),{},{"Content-Type":"application/json",Authorization:n?`jwt ${n}`:"","Vimeo-Page":`${r}`,"Accept-Language":l??"en"})})));p({type:"SUCCESS",payload:s})}catch(e){p({type:"FAILURE",payload:e})}},[t,r,n,l,p]),u]}function f(){let{mutate:e}=(0,s.kY)(),{baseUrl:t,jwt:n,xVimeoPage:r,locale:l}=(0,c.r)(),[u,p]=(0,o.AC)();return[(0,a.useCallback)(async a=>{p({type:"REQUEST"});try{let s=await e(`/videos/${a.where.videoId}${(0,o.Y$)(a)}`,(0,i.FM)(d(d({},a),{},{baseUrl:t,headers:d(d({},a.headers),{},{"Content-Type":"application/json",Authorization:n?`jwt ${n}`:"","Vimeo-Page":`${r}`,"Accept-Language":l??"en"})})),!1);p({type:"SUCCESS",payload:s})}catch(e){p({type:"FAILURE",payload:e})}},[t,r,n,l,p]),u]}function y(){let{mutate:e}=(0,s.kY)(),{baseUrl:t,jwt:n,xVimeoPage:r,locale:l}=(0,c.r)(),[u,p]=(0,o.AC)();return[(0,a.useCallback)(async a=>{p({type:"REQUEST"});try{let s=await e(`/videos/${a.where.videoId}${(0,o.Y$)(a)}`,(0,i.XE)(d(d({},a),{},{baseUrl:t,headers:d(d({},a.headers),{},{"Content-Type":"application/json",Authorization:n?`jwt ${n}`:"","Vimeo-Page":`${r}`,"Accept-Language":l??"en"})})),!1);p({type:"SUCCESS",payload:s})}catch(e){p({type:"FAILURE",payload:e})}},[t,r,n,l,p]),u]}"true"===l.env.STORYBOOK&&(0,o.MR)(p,{endpoint:"/videos/:videoId",method:"GET"}),"true"===l.env.STORYBOOK&&(0,o.MR)(m,{endpoint:"/videos/:videoId",method:"GET"}),"true"===l.env.STORYBOOK&&(0,o.MR)(f,{endpoint:"/videos/:videoId",method:"DELETE"}),"true"===l.env.STORYBOOK&&(0,o.MR)(y,{endpoint:"/videos/:videoId",method:"PATCH"})},926334:function(e,t,n){n.d(t,{qM:function(){return w},kS:function(){return j}});var r=n(706138),o=n(750042),i=n(846211),a=n(727926);let s=["baseUrl","select","where"],c=["baseUrl","where","query"],l=["baseUrl","select","variables","where","query"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}async function p(e){let{baseUrl:t,select:n,where:{videoId:r,commentId:o}}=e,c=(0,i.Z)(e,s),l=await fetch(`${t}/videos/${r}/comments/${o}?fields=${n.map(a.Rb).join(",")}`,d(d({},c),{},{method:"GET"}));if(!l.ok)throw new a.F7("A network error occurred",l.status,l);if(204===l.status)return null;if(!l.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let u=await l.json();return(0,a.l_)(u)}async function m(e){let{baseUrl:t,where:{videoId:n,commentId:r},query:o}=e,s=(0,i.Z)(e,c),l=await fetch(`${t}/videos/${n}/comments/${r}?${(0,a.Ov)(o)}`,d(d({},s),{},{method:"DELETE"}));if(!l.ok)throw new a.F7("A network error occurred",l.status,l);if(204===l.status)return null;if(!l.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let u=await l.json();return(0,a.l_)(u)}async function f(e){let{baseUrl:t,select:n,variables:r,where:{videoId:o,commentId:s},query:c}=e,u=(0,i.Z)(e,l),p=await fetch(`${t}/videos/${o}/comments/${s}?${(0,a.Ov)(c)}&fields=${n.map(a.Rb).join(",")}`,d(d({},u),{},{method:"PATCH",body:JSON.stringify((0,a.mH)(r))}));if(!p.ok)throw new a.F7("A network error occurred",p.status,p);if(204===p.status)return null;if(!p.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let m=await p.json();return(0,a.l_)(m)}var y=n(652983),b=n(296638),g=n(458388),O=n(173656);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function w(){let{mutate:e}=(0,b.kY)(),{baseUrl:t,jwt:n,xVimeoPage:r,locale:i}=(0,g.r)(),[a,s]=(0,o.AC)();return[(0,y.useCallback)(async a=>{s({type:"REQUEST"});try{let c=await e(`/videos/${a.where.videoId}/comments/${a.where.commentId}${(0,o.Y$)(a)}`,m(v(v({},a),{},{baseUrl:t,headers:v(v({},a.headers),{},{"Content-Type":"application/json",Authorization:n?`jwt ${n}`:"","Vimeo-Page":`${r}`,"Accept-Language":i??"en"})})),!1);s({type:"SUCCESS",payload:c})}catch(e){s({type:"FAILURE",payload:e})}},[t,r,n,i,s]),a]}function j(){let{mutate:e}=(0,b.kY)(),{baseUrl:t,jwt:n,xVimeoPage:r,locale:i}=(0,g.r)(),[a,s]=(0,o.AC)();return[(0,y.useCallback)(async a=>{s({type:"REQUEST"});try{let c=await e(`/videos/${a.where.videoId}/comments/${a.where.commentId}${(0,o.Y$)(a)}`,f(v(v({},a),{},{baseUrl:t,headers:v(v({},a.headers),{},{"Content-Type":"application/json",Authorization:n?`jwt ${n}`:"","Vimeo-Page":`${r}`,"Accept-Language":i??"en"})})),!1);s({type:"SUCCESS",payload:c})}catch(e){s({type:"FAILURE",payload:e})}},[t,r,n,i,s]),a]}"true"===O.env.STORYBOOK&&(0,o.MR)(function(e,t){let n="function"==typeof e?e():e,{baseUrl:r,jwt:i,xVimeoPage:a,locale:s}=(0,g.r)();return(0,b.ZP)(n?`/videos/${n.where.videoId}/comments/${n.where.commentId}${(0,o.Y$)(n)}`:()=>null,n?()=>p(v(v({},n),{},{headers:v(v({},n.headers),{},{"Content-Type":"application/json",Authorization:i?`jwt ${i}`:"","Vimeo-Page":`${a}`,"Accept-Language":s??"en"}),baseUrl:r})):null,t)},{endpoint:"/videos/:videoId/comments/:commentId",method:"GET"}),"true"===O.env.STORYBOOK&&(0,o.MR)(function(){let{mutate:e}=(0,b.kY)(),{baseUrl:t,jwt:n,xVimeoPage:r,locale:i}=(0,g.r)(),[a,s]=(0,o.AC)();return[(0,y.useCallback)(async a=>{s({type:"REQUEST"});try{let c=await e(`/videos/${a.where.videoId}/comments/${a.where.commentId}${(0,o.Y$)(a)}`,p(v(v({},a),{},{baseUrl:t,headers:v(v({},a.headers),{},{"Content-Type":"application/json",Authorization:n?`jwt ${n}`:"","Vimeo-Page":`${r}`,"Accept-Language":i??"en"})})));s({type:"SUCCESS",payload:c})}catch(e){s({type:"FAILURE",payload:e})}},[t,r,n,i,s]),a]},{endpoint:"/videos/:videoId/comments/:commentId",method:"GET"}),"true"===O.env.STORYBOOK&&(0,o.MR)(w,{endpoint:"/videos/:videoId/comments/:commentId",method:"DELETE"}),"true"===O.env.STORYBOOK&&(0,o.MR)(j,{endpoint:"/videos/:videoId/comments/:commentId",method:"PATCH"})},509738:function(e,t,n){n.d(t,{gV:function(){return w},mY:function(){return j},NE:function(){return _}});var r=n(846211),o=n(706138),i=n(750042),a=n(727926);let s=["baseUrl","select","where","query"],c=["baseUrl","select","variables","where","query"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}async function d(e){let{baseUrl:t,select:n,where:{videoId:o},query:i}=e,c=(0,r.Z)(e,s),l=await fetch(`${t}/videos/${o}/comments?${(0,a.Ov)(i)}&fields=${n.map(a.Rb).join(",")}`,u(u({},c),{},{method:"GET"}));if(!l.ok)throw new a.F7("A network error occurred",l.status,l);if(204===l.status)return null;if(!l.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let d=await l.json();return(0,a.l_)(d)}async function p(e){let{baseUrl:t,select:n,variables:o,where:{videoId:i},query:s}=e,l=(0,r.Z)(e,c),d=await fetch(`${t}/videos/${i}/comments?${(0,a.Ov)(s)}&fields=${n.map(a.Rb).join(",")}`,u(u({},l),{},{method:"POST",body:JSON.stringify((0,a.mH)(o))}));if(!d.ok)throw new a.F7("A network error occurred",d.status,d);if(204===d.status)return null;if(!d.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let p=await d.json();return(0,a.l_)(p)}var m=n(652983),f=n(296638),y=n(512959),b=n(458388),g=n(173656);let O=["perPage","page"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function w(e,t){let n="function"==typeof e?e():e,{baseUrl:r,jwt:o,xVimeoPage:a,locale:s}=(0,b.r)();return(0,f.ZP)(n?`/videos/${n.where.videoId}/comments${(0,i.Y$)(n)}`:()=>null,n?()=>d(v(v({},n),{},{headers:v(v({},n.headers),{},{"Content-Type":"application/json",Authorization:o?`jwt ${o}`:"","Vimeo-Page":`${a}`,"Accept-Language":s??"en"}),baseUrl:r})):null,t)}function j(e,t){let n="function"==typeof e?e():e,{baseUrl:o,jwt:i,xVimeoPage:a,locale:s}=(0,b.r)();return(0,y.ZP)((e,t)=>{if(null===n||t&&!t.paging.next)return null;let o=n.query??{},{perPage:i=25,page:a}=o,s=(0,r.Z)(o,O),c=n.select.join(","),l=Object.entries(s??{}).filter(([,e])=>void 0!==e).map(([e,t])=>`${e}=${t}`).join("&");return[`/videos/${n.where.videoId}/comments?page=${e+1}&perPage=${i}&fields=${c}&${l}`,e]},null!==n?([e,t])=>d(v(v({},n),{},{baseUrl:o,headers:v(v({},n.headers),{},{"Content-Type":"application/json",Authorization:i?`jwt ${i}`:"","Vimeo-Page":`${a}`,"Accept-Language":s??"en"}),query:v(v({},n.query),{},{page:t+1})})):null,t)}function _(){let{baseUrl:e,jwt:t,xVimeoPage:n,locale:r}=(0,b.r)(),[o,a]=(0,i.AC)();return[(0,m.useCallback)(async o=>{a({type:"REQUEST"});try{let i=await p(v(v({},o),{},{baseUrl:e,headers:v(v({},o.headers),{},{"Content-Type":"application/json",Authorization:t?`jwt ${t}`:"","Vimeo-Page":`${n}`,"Accept-Language":r??"en"})}));a({type:"SUCCESS",payload:i})}catch(e){a({type:"FAILURE",payload:e})}},[e,n,t,r,a]),o]}"true"===g.env.STORYBOOK&&(0,i.MR)(w,{endpoint:"/videos/:videoId/comments",method:"GET"}),"true"===g.env.STORYBOOK&&(0,i.MR)(function(){let{mutate:e}=(0,f.kY)(),{baseUrl:t,jwt:n,xVimeoPage:r,locale:o}=(0,b.r)(),[a,s]=(0,i.AC)();return[(0,m.useCallback)(async a=>{s({type:"REQUEST"});try{let c=await e(`/videos/${a.where.videoId}/comments${(0,i.Y$)(a)}`,d(v(v({},a),{},{baseUrl:t,headers:v(v({},a.headers),{},{"Content-Type":"application/json",Authorization:n?`jwt ${n}`:"","Vimeo-Page":`${r}`,"Accept-Language":o??"en"})})));s({type:"SUCCESS",payload:c})}catch(e){s({type:"FAILURE",payload:e})}},[t,r,n,o,s]),a]},{endpoint:"/videos/:videoId/comments",method:"GET"}),"true"===g.env.STORYBOOK&&(0,i.MR)(j,{endpoint:"/videos/:videoId/comments",method:"GET"}),"true"===g.env.STORYBOOK&&(0,i.MR)(_,{endpoint:"/videos/:videoId/comments",method:"POST"})},11422:function(e,t,n){n.d(t,{o:function(){return h},l:function(){return v}});var r=n(706138),o=n(750042),i=n(846211),a=n(727926);let s=["baseUrl","where","query"],c=["baseUrl","select","variables","where","query"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}async function d(e){let{baseUrl:t,where:{videoId:n,commentId:r},query:o}=e,c=(0,i.Z)(e,s),l=await fetch(`${t}/videos/${n}/private_comments/${r}?${(0,a.Ov)(o)}`,u(u({},c),{},{method:"DELETE"}));if(!l.ok)throw new a.F7("A network error occurred",l.status,l);if(204===l.status)return null;if(!l.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let d=await l.json();return(0,a.l_)(d)}async function p(e){let{baseUrl:t,select:n,variables:r,where:{videoId:o,commentId:s},query:l}=e,d=(0,i.Z)(e,c),p=await fetch(`${t}/videos/${o}/private_comments/${s}?${(0,a.Ov)(l)}&fields=${n.map(a.Rb).join(",")}`,u(u({},d),{},{method:"PATCH",body:JSON.stringify((0,a.mH)(r))}));if(!p.ok)throw new a.F7("A network error occurred",p.status,p);if(204===p.status)return null;if(!p.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let m=await p.json();return(0,a.l_)(m)}var m=n(652983),f=n(296638),y=n(458388),b=n(173656);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function h(){let{mutate:e}=(0,f.kY)(),{baseUrl:t,jwt:n,xVimeoPage:r,locale:i}=(0,y.r)(),[a,s]=(0,o.AC)();return[(0,m.useCallback)(async a=>{s({type:"REQUEST"});try{let c=await e(`/videos/${a.where.videoId}/private_comments/${a.where.commentId}${(0,o.Y$)(a)}`,d(O(O({},a),{},{baseUrl:t,headers:O(O({},a.headers),{},{"Content-Type":"application/json",Authorization:n?`jwt ${n}`:"","Vimeo-Page":`${r}`,"Accept-Language":i??"en"})})),!1);s({type:"SUCCESS",payload:c})}catch(e){s({type:"FAILURE",payload:e})}},[t,r,n,i,s]),a]}function v(){let{mutate:e}=(0,f.kY)(),{baseUrl:t,jwt:n,xVimeoPage:r,locale:i}=(0,y.r)(),[a,s]=(0,o.AC)();return[(0,m.useCallback)(async a=>{s({type:"REQUEST"});try{let c=await e(`/videos/${a.where.videoId}/private_comments/${a.where.commentId}${(0,o.Y$)(a)}`,p(O(O({},a),{},{baseUrl:t,headers:O(O({},a.headers),{},{"Content-Type":"application/json",Authorization:n?`jwt ${n}`:"","Vimeo-Page":`${r}`,"Accept-Language":i??"en"})})),!1);s({type:"SUCCESS",payload:c})}catch(e){s({type:"FAILURE",payload:e})}},[t,r,n,i,s]),a]}"true"===b.env.STORYBOOK&&(0,o.MR)(h,{endpoint:"/videos/:videoId/private_comments/:commentId",method:"DELETE"}),"true"===b.env.STORYBOOK&&(0,o.MR)(v,{endpoint:"/videos/:videoId/private_comments/:commentId",method:"PATCH"})},370966:function(e,t,n){n.d(t,{cz:function(){return w},rU:function(){return j},UQ:function(){return _}});var r=n(846211),o=n(706138),i=n(750042),a=n(727926);let s=["baseUrl","select","where","query"],c=["baseUrl","select","variables","where","query"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}async function d(e){let{baseUrl:t,select:n,where:{videoId:o},query:i}=e,c=(0,r.Z)(e,s),l=await fetch(`${t}/videos/${o}/private_comments?${(0,a.Ov)(i)}&fields=${n.map(a.Rb).join(",")}`,u(u({},c),{},{method:"GET"}));if(!l.ok)throw new a.F7("A network error occurred",l.status,l);if(204===l.status)return null;if(!l.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let d=await l.json();return(0,a.l_)(d)}async function p(e){let{baseUrl:t,select:n,variables:o,where:{videoId:i},query:s}=e,l=(0,r.Z)(e,c),d=await fetch(`${t}/videos/${i}/private_comments?${(0,a.Ov)(s)}&fields=${n.map(a.Rb).join(",")}`,u(u({},l),{},{method:"POST",body:JSON.stringify((0,a.mH)(o))}));if(!d.ok)throw new a.F7("A network error occurred",d.status,d);if(204===d.status)return null;if(!d.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let p=await d.json();return(0,a.l_)(p)}var m=n(652983),f=n(296638),y=n(512959),b=n(458388),g=n(173656);let O=["perPage","page"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function w(e,t){let n="function"==typeof e?e():e,{baseUrl:r,jwt:o,xVimeoPage:a,locale:s}=(0,b.r)();return(0,f.ZP)(n?`/videos/${n.where.videoId}/private_comments${(0,i.Y$)(n)}`:()=>null,n?()=>d(v(v({},n),{},{headers:v(v({},n.headers),{},{"Content-Type":"application/json",Authorization:o?`jwt ${o}`:"","Vimeo-Page":`${a}`,"Accept-Language":s??"en"}),baseUrl:r})):null,t)}function j(e,t){let n="function"==typeof e?e():e,{baseUrl:o,jwt:i,xVimeoPage:a,locale:s}=(0,b.r)();return(0,y.ZP)((e,t)=>{if(null===n||t&&!t.paging.next)return null;let o=n.query??{},{perPage:i=25,page:a}=o,s=(0,r.Z)(o,O),c=n.select.join(","),l=Object.entries(s??{}).filter(([,e])=>void 0!==e).map(([e,t])=>`${e}=${t}`).join("&");return[`/videos/${n.where.videoId}/private_comments?page=${e+1}&perPage=${i}&fields=${c}&${l}`,e]},null!==n?([e,t])=>d(v(v({},n),{},{baseUrl:o,headers:v(v({},n.headers),{},{"Content-Type":"application/json",Authorization:i?`jwt ${i}`:"","Vimeo-Page":`${a}`,"Accept-Language":s??"en"}),query:v(v({},n.query),{},{page:t+1})})):null,t)}function _(){let{baseUrl:e,jwt:t,xVimeoPage:n,locale:r}=(0,b.r)(),[o,a]=(0,i.AC)();return[(0,m.useCallback)(async o=>{a({type:"REQUEST"});try{let i=await p(v(v({},o),{},{baseUrl:e,headers:v(v({},o.headers),{},{"Content-Type":"application/json",Authorization:t?`jwt ${t}`:"","Vimeo-Page":`${n}`,"Accept-Language":r??"en"})}));a({type:"SUCCESS",payload:i})}catch(e){a({type:"FAILURE",payload:e})}},[e,n,t,r,a]),o]}"true"===g.env.STORYBOOK&&(0,i.MR)(w,{endpoint:"/videos/:videoId/private_comments",method:"GET"}),"true"===g.env.STORYBOOK&&(0,i.MR)(function(){let{mutate:e}=(0,f.kY)(),{baseUrl:t,jwt:n,xVimeoPage:r,locale:o}=(0,b.r)(),[a,s]=(0,i.AC)();return[(0,m.useCallback)(async a=>{s({type:"REQUEST"});try{let c=await e(`/videos/${a.where.videoId}/private_comments${(0,i.Y$)(a)}`,d(v(v({},a),{},{baseUrl:t,headers:v(v({},a.headers),{},{"Content-Type":"application/json",Authorization:n?`jwt ${n}`:"","Vimeo-Page":`${r}`,"Accept-Language":o??"en"})})));s({type:"SUCCESS",payload:c})}catch(e){s({type:"FAILURE",payload:e})}},[t,r,n,o,s]),a]},{endpoint:"/videos/:videoId/private_comments",method:"GET"}),"true"===g.env.STORYBOOK&&(0,i.MR)(j,{endpoint:"/videos/:videoId/private_comments",method:"GET"}),"true"===g.env.STORYBOOK&&(0,i.MR)(_,{endpoint:"/videos/:videoId/private_comments",method:"POST"})},796805:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(652983),o=n(758627),i=n(410116);function a(e,t,n,a,s=!0,c="540p",l=1,u){let{PlayerConstructor:d,playerType:p}=(0,r.useContext)(o.E),m=(0,r.useRef)(!1),{0:f,1:y}=(0,r.useState)(null),b=(0,r.useRef)(null),{0:g,1:O}=(0,r.useReducer)(e=>e+1,0),h=(0,r.useCallback)(()=>{if(m.current=!0,p===i.G.BarebonePlayer)new d(e.current,a).then(e=>{e.loop=s,e.quality=c,e.volume=l,y(e),b.current=e,m.current=!1}).catch(()=>{m.current=!1});else{let t=new d(e.current,a,!0,u||{});y(t),b.current=t,m.current=!1}},[d,e,a,p,s,c,l,u]),v=(0,r.useCallback)(()=>{b.current&&(b.current.unload?.(),y(null),b.current=null)},[]),w=()=>{b.current&&(b.current.destroy?.(),y(null),b.current=null)},j=(0,r.useCallback)(()=>{v(),O()},[v]);return(0,r.useEffect)(function(){if(f?.videoId!==Number(t)&&d&&n&&e.current&&t&&a&&!m.current){e.current.innerHTML="";let t=setTimeout(h,0);return()=>{clearTimeout(t)}}},[d,f?.videoId,g,e,t,a,n,s,c,h]),(0,r.useEffect)(function(){return()=>{w()}},[]),{player:f,flushPlayer:v,forceReload:j}}},429259:function(e,t,n){n.d(t,{$:function(){return h}});var r=n(706138),o=n(846959),i=n(597325);let a={forceCollectionUri:!0};var s=n(727926);let c=()=>{try{if(document?.referrer)return document.referrer;return document?.querySelector('meta[name="referrer"]')?.getAttribute("content")||""}catch(e){return""}},l=e=>document.querySelector(`meta[name=${e}]`)?.getAttribute("content"),u=e=>{let t=Object.entries(e).filter(([,e])=>void 0!==e).map(([e,t])=>`${e}=${t}`).join("&");return t?`?${t}`:""},d=async e=>{let t=await fetch(e);if(404===t.status)throw new s.F7("Not found",t.status,t);if(!t.ok){let e=await t.json();throw new s.F7("A network error occurred",t.status,(0,s.l_)(e))}let n=await t.json();return(0,s.l_)(n)},p=()=>new URLSearchParams(window.location.search);var m=n(296638);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let b=(e,t,n=!1)=>{let r=(0,i.R)(),o=p().get("sh");return(0,m.ZP)(()=>{if(!r||n)return null;let i=y(y({},o&&{sh:o}),t?.isShowcaseEmbedded&&{referrer:encodeURIComponent(c()||""),is_embed:!0});return e?`/showcase/${e}/auth${u(i)}`:"/auth"},d,{revalidateOnFocus:!1,shouldRetryOnError:!1})};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let h=(e,t,n,r=!1,s={})=>{let u=(0,i.R)(),d=l(`album-signature-${e}`),p=c(),{data:m,error:f,isLoading:y}=b(Number(e),{isShowcaseEmbedded:!1},r),g=f||y?"":m?.hashedPass,h={referrer:p};return(0,o.BA)(()=>!r&&u&&e&&t&&null!==d?{where:{albumId:e,videoId:t},select:n,query:O(O(O(O(O({},a),h),g&&{password:g}),d&&{albumSignature:d,albumUri:`albums/${e}`}),s&&O({},s)),headers:{Accept:"application/vnd.vimeo.albumvideo;version=3.4.12"}}:null,{revalidateOnFocus:!1})}},679276:function(e,t,n){n.d(t,{IN:function(){return c}});var r=n(706138),o=n(64451);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let s=(0,n(724515).LF)(["access_permission_to_folder","is_subfolder","folder_share_status","is_private_to_me","parent_folder_id","position_row","is_pinned","is_my_videos"]),c=e=>({folder_context:new o.EventContext("folder_context",1,a(a({},s),e))})},927281:function(e,t,n){n.d(t,{TA:function(){return c}});var r=n(706138),o=n(64451);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let s=(0,n(724515).LF)(["has_like_available","has_watch_later_available","has_share_available","has_comment_available","existing_like_counts","existing_comment_counts","existing_view_counts","listed_categories_counts","has_ai","viewer_home_view_mode"]),c=e=>({video_view_context:new o.EventContext("video_view_context",4,a(a({},s),e))})},639124:function(e,t,n){n.d(t,{m:function(){return c}});var r=n(706138),o=n(27892),i=n(603306);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(e,t){let n="function"==typeof e?e():e,r=n?(0,i.l)(n?.where.videoId):null,a=n?s(s({},n),{},{query:s(s({},n?.query),r&&{password:r})}):null;return(0,o.rw)(a,t)}},574623:function(e,t,n){n.d(t,{r:function(){return c}});var r=n(706138),o=n(27892),i=n(603306);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(){let[e,t]=(0,o.Yu)();return[async t=>{let n=(0,i.l)(t?.where.videoId);return e(s(s({},t),{},{query:s({},n&&{password:n})}))},t]}},603306:function(e,t,n){n.d(t,{l:function(){return o}});var r=n(761299);let o=e=>{let t=`${e}_password`;return(0,r.hL)(t)}}}]);
//# sourceMappingURL=66659-999430f807e11915.js.map