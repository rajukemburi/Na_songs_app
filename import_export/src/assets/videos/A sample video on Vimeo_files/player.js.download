/* VimeoPlayer - v4.45.8 - 2025-10-22 - https://player.vimeo.com/NOTICE.txt */
!function(e){"use strict";const t={MANIFEST:"manifest",SEGMENT:"segment"},n={method:"GET",async:!0,retry:0,throwHttpErrors:!0,headers:{},hooks:{beforeRequest:[],beforeRetry:[],afterResponse:[]},validateStatus:function(e){return e>=200&&e<300},retryStatus:function(e){return[408,413,429].includes(e)||e>=500&&e<600}};function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function o(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function a(e,t){return e.get(i(e,t))}function s(e,t,n){o(e,t),t.set(e,n)}function l(e,t,n){return e.set(i(e,t),n),n}function c(e,t){o(e,t),t.add(e)}function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=v(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){if(null==e)throw new TypeError("Cannot destructure "+e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){d(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function f(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function g(e){return(t,...n)=>(n.forEach(n=>{for(const r in n){const i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,Object.assign(i,e))}}),t)}const E=g({enumerable:!1,configurable:!0,writeable:!1}),b=g({enumerable:!1,configurable:!1,writeable:!1}),y=g({enumerable:!0,configurable:!0,writeable:!1}),T=e=>new Promise(t=>setTimeout(t,e));function S(e){return"webkitDisplayingFullscreen"in e&&e.webkitDisplayingFullscreen}function C(e){if(e&&S(e))return!0;const t=[document.fullscreenElement,document.webkitFullscreenElement,document.webkitCurrentFullScreenElement,document.mozFullScreenElement,document.msFullscreenElement].find(e=>void 0!==e);return Boolean(t)}const A=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(e){let t=!1;return function(n,r){var i=function(){if(/json=1/.test(e))return function(e,t){return void 0?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}(We(e).json(),function(e){const n=e.url;return t=!0,n})}();return i&&i.then?i.then(r):r(i)}(0,function(n){return t?n:e})});let L="";const I={defer:!0,async:!0};function P(e,t={}){t=Object.assign({},I,t);let n=window.vpimport__=window.vpimport__||{cache:{}};if(n.cache[e])return n.cache[e]._promise;const r=new Promise(function(r,i){const o=document.getElementsByTagName("head")[0],a=document.createElement("script");a.src=L+e,a.defer=t.defer,a.async=t.async,a.onload=()=>{const t=Object.keys(n).filter(e=>"cache"!==e)[0];n.cache[e]._module=n[t],delete n[t],r(n.cache[e]._module),o.removeChild(a)},a.onerror=function(t){i(t),delete n.cache[e],o.removeChild(a)},o.appendChild(a)});return n.cache[e]={_promise:r},r}const R=e=>Math.pow(e,2),w=e=>Math.sqrt(e),O=(e,t)=>{const n=(n,...r)=>{[`%c${e}`,t].concat(r)},r=e=>(...t)=>{n.apply(void 0,[e].concat(t))},i=r("log"),o=(...e)=>{i.apply(void 0,e)};return Object.assign(o,{log:i,warn:r("warn"),error:r("error")}),o};function k(e,...t){return t.reduce((e,t)=>(Object.keys(t||{}).forEach(n=>{const r=e[n],i=t[n];r&&void 0===i||(Array.isArray(i)?e[n]=(r||[]).concat(i):(e=>e&&"object"==typeof e)(i)?e[n]=k({},r,i):e[n]=i)}),e),e)}const D=(e=!1)=>e?window.MediaSource:N,N=void 0!==window.ManagedMediaSource?window.ManagedMediaSource:window.MediaSource,M=navigator.userAgent.toLowerCase(),x=["googlebot","google-inspectiontool"],V=["bingbot","bingpreview","yandex","slurp","facebookexternalhit","msnbot","feedly","parse.ly"];function B(e){e=e.toLowerCase();const t=new RegExp(e).test(M);return"safari"===e?t&&new RegExp("version").test(M):t}function U(e){const t=document.createElement("div"),n=e.charAt(0).toUpperCase()+e.slice(1),r=(e+" "+["Webkit","Moz","O","ms"].join(n+" ")+n).split(" ");for(let e in r){const n=r[e];if(void 0!==t.style[n])return n}return e}const F=!!B("android")&&(parseFloat(M.replace(/^.* android (\d+)\.(\d+).*$/,"$1.$2"))||!0),H=window.devicePixelRatio||1,W=!(!B("windows phone")&&!B("iemobile"))&&(parseFloat(M.replace(/^.* windows phone (os )?(\d+)\.(\d+).*$/,"$2.$3"))||!0),G=!!B("msie")&&parseFloat(M.replace(/^.*msie (\d+).*$/,"$1")),j=!!B("trident")&&parseFloat(M.replace(/^.*trident\/(\d+)\.(\d+).*$/,"$1.$2"))+4,Y=B("ipad;")||B("iphone;")||B("ipod touch;")?parseFloat(M.replace(/^.* os (\d+)_(\d+).*$/,"$1.$2")):navigator.userAgent.includes("Mac")&&"ontouchend"in document,$=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Version)/i.test(navigator.userAgent),q="MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,z=B("opera")||B("opr"),K=/^Mozilla\/5\.0 \(.* Mac OS X.*\(KHTML, like Gecko\)(?: Mobile\/[\S]*|)$/i.test(M),X=(B("safari")||$)&&B("apple")&&!B("chrome")&&!B("android");function Z(e){if(!X)return!1;const t=e.split("."),n=function(){if(!B("safari"))return[];const e=M.split(" ").find(function(e){return/version\//.test(e)});return e?e.replace("version/","").split(".").map(function(e){return parseInt(e,10)}):[]}();for(let e=0;e<3;e++){const r=parseInt(t[e],10)||0,i=n[e]||0;if(r<i)return!0;if(r>i)return!1}return!0}const J={autoplayPolicy:Z("11"),hevc:Z("11"),dolbyVision:Z("14.1"),spatial:Z("11.0.2"),fullscreenRequiresDataLoaded:Z("17.2")},Q={airPlay:"WebKitPlaybackTargetAvailabilityEvent"in window,android:F,appleMail:K,hasAutoplayPolicy:F||Y||J.autoplayPolicy||function(){if(!B("chrome"))return[];const e=M.split(" ").find(function(e){return Y?/CriOS\//.test(e):/chrome\//.test(e)});return e?e.replace("chrome/","").split(".").map(function(e){return parseInt(e,10)}):[]}()[0]>=66,iOS:Y,iPadOS:q,mobileAndroid:F&&B("mobile"),browser:{bb10:B("bb10"),chrome:B("chrome"),firefox:B("firefox"),ie:G||j,edge:B("edge"),opera:z,safari:X,chromium:"chrome"in window&&!B("crios"),webKit:X||B("crios")},mse:N,devicePixelRatio:H,iPhone:B("iphone;")||B("ipod touch;")||B("ipod;"),iPad:B("ipad;"),iPadNonRetina:B("ipad;")&&H<2,mac:B("mac os"),navigatorConnectionDownlink:!!window.navigator.connection?.downlink,pictureInPictureSupportType:function(){if("pictureInPictureEnabled"in document)return"pip-api";const e=document.createElement("video");return!("function"!=typeof e.webkitSetPresentationMode||!e.webkitSupportsPresentationMode("picture-in-picture"))&&"webkit-presentation-mode"}(),pointerEvents:window.navigator.pointerEnabled||window.navigator.msPointerEnabled||!1,passiveEvents:function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(e){}return e}(),svg:!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||B("windows phone")||window.navigator.maxTouchPoints>1||window.navigator.msMaxTouchPoints||!1,transformProperty:U("transform"),transitionProperty:U("transition"),webp:function(){const e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))&&0===e.toDataURL("image/webp").indexOf("data:image/webp")}(),windowsPhone:W,mediaCapabilities:"mediaCapabilities"in navigator,webShare:"canShare"in navigator&&"share"in navigator,isGoogleBot:(()=>{const e=M.toLowerCase();return x.some(t=>e.includes(t))})(),isCrawler:(()=>{const e=M.toLowerCase();return V.some(t=>e.includes(t))})(),storageAccessAPI:"requestStorageAccess"in document&&"hasStorageAccess"in document,clipboardAPI:"clipboard"in navigator&&"write"in navigator.clipboard,videoContentPreload:!B("iphone"),intersectionObserver:"IntersectionObserver"in window},ee=/mac os x 10_13/.test(M),te=Q.iOS&&Q.iOS>=11,ne="undefined"!=typeof matchMedia&&(matchMedia("(color-gamut: p3)").matches&&screen.pixelDepth>24||matchMedia("(dynamic-range: high), (video-dynamic-range: high)").matches);Q.hevc=function(e="hvc1"){return void 0!==N?N.isTypeSupported(`video/mp4; codecs="${e}"`):J.hevc&&(ee||te)}("hvc1.2.4.H150.90"),Q.hdr=ne,Q.dolbyVision=function(){const e='video/mp4; codecs="dvh1"';let t=void 0!==N&&N.isTypeSupported(e);if(!t){const n=document.createElement("video");"canPlayType"in n&&(t="probably"===n.canPlayType(e))}return!((q||Q.iOS)&&!J.dolbyVision)&&t}(),Q.vp9hdr=(window.matchMedia("(color-gamut: p3)").matches||window.matchMedia("(color-gamut: rec2020)").matches)&&screen.colorDepth>=48&&(N.isTypeSupported('video/webm; codecs="vp09.02.10.10.01.09.16.09.00"')||N.isTypeSupported('video/webm; codecs="vp09.02.10.10.01.09.16.09.01"')||N.isTypeSupported('video/webm; codecs="vp09.02.10.10.01.09.18.09.00"')||N.isTypeSupported('video/webm; codecs="vp09.02.10.10.01.09.18.09.01"')),Q.av1=void 0!==N&&N.isTypeSupported('video/mp4; codecs="av01.0.31M.08.0.110.01.01.01.0"'),Q.webvr=!(!window.navigator||!("getVRDisplays"in window.navigator)),Q.webxr=!!(window.navigator&&"xr"in window.navigator&&"supportsSession"in window.navigator.xr),Q.spatialPlayback=!!Q.mse,Q.stereoscopic=Q.spatialPlayback&&Q.mobileAndroid,Q.fullscreenRequiresDataLoaded=Q.iOS>=17||Q.iPadOS&&J.fullscreenRequiresDataLoaded;const re=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(e){return new Promise(t=>{const{cleanup:n}=ie(e,e=>{e&&(t(),n())})})});function ie(e,t){let n=!0,r=!0;function i(){return r=n&&"visible"===document.visibilityState,r}if(!Q.intersectionObserver)return null==t||t(!0),{cleanup:()=>{},isInView:!0};const o=new IntersectionObserver(e=>{const[o]=e;n=!(null==o||!o.isIntersecting),i(),null==t||t(r)},{threshold:.5});o.observe(e);const a=()=>{i(),null==t||t(r)};return document.addEventListener("visibilitychange",a),{cleanup:()=>{o.disconnect(),document.removeEventListener("visibilitychange",a)},get isInView(){return r}}}function oe(){let e,t,n=new Promise((n,r)=>{e=n,t=r});return Object.assign(n,{resolve:e,reject:t}),n}function ae(e,t){if(!t||!t.length)return 0;if(1===t.length&&t.end(0)-t.start(0)<1e-6)return 0;let n=0;for(let r=t.length-1;r>=0&&t.end(r)>e;--r)n+=t.end(r)-Math.max(t.start(r),e);return n}function se(e,t){let n=e;for(let r=0;r<t.length;r++)if(t.start(r)<=e&&t.end(r)>=e){n=t.end(r);break}return n-e}function le(){return void 0!==window.performance&&"function"==typeof window.performance.now?window.performance.now():Date.now()}function ce(){return Math.trunc(le()/1e3)}function ue(e){return ce()-e}function de(e){return le()-e}function _e(e){try{const t=new URLSearchParams;return Object.entries(e).forEach(([e,n])=>{void 0!==n&&t.append(e,String(n))}),t.toString()}catch(e){return""}}function he(e){if("string"!=typeof e)return{};try{const t=new URLSearchParams(e),n={};return t.forEach((e,t)=>{n[t]=e}),n}catch(e){return{}}}function pe(e){try{return new URL(e)}catch(e){return{}}}const me=(e,t,n=!1)=>{try{const r=new URL(e);return Object.entries(t).forEach(([e,t])=>{n&&void 0===t||r.searchParams.set(e,(null==t?void 0:t.toString())??"")}),r.toString()}catch(t){return e}},fe=e=>{try{const{username:t,password:n,host:r}=new URL(e);return r?t||n?`${t}:${n}@${r}`:r:null}catch(e){return null}};function ve(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^16*Math.random()>>e/4).toString(16))}const ge=()=>{var e;const t=null==(e=window.navigator.connection)?void 0:e.downlink;return void 0===t?null:1e3*t*1e3};function Ee(e,t){this.headers={},this.perfTimings={},k(this,t),this.ok=2==(this.status/100|0),this.body=e,this.text=()=>Promise.resolve(e),this.json=()=>Promise.resolve(JSON.parse(e)),this.blob=()=>Promise.resolve(new Blob([e])),this.arrayBuffer=()=>Promise.resolve(e),this.clone=()=>new Ee(e,this),this.isVimeoResponse=!0}class be extends Error{constructor(){super("The operation was aborted."),this.name="AbortError"}}class ye extends Error{constructor(e){super(e.statusText),this.name="HTTPError",this.response=e}}class Te extends Error{constructor(){super("A network error occurred."),this.name="NetworkError"}}class Se extends Error{constructor(e){super("Request timed out."),this.name="TimeoutError",this.timeoutMs=e}}function Ce(e,t){let{url:n,method:r,body:i,onDownloadProgress:o}=e,a=100;return new Promise(function(s,l){const c=t?new t:new XMLHttpRequest,u=window.performance;c.open(r.toUpperCase(),n,e.async),e.timeout&&(c.timeout=e.timeout),c.onload=function(){if(0===c.status&&(!c.responseURL||0!==c.responseURL.indexOf("file:")))return;const e={};c.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(t,n,r)=>{e[n]=e[n]?`${e[n]},${r}`:r});let t={};if(window.performance&&void 0!==window.performance.getEntriesByType){const e=window.performance.getEntriesByType("resource");if(e.length&&e.length>=a&&("function"==typeof u.clearResourceTimings&&u.clearResourceTimings(),"function"==typeof u.setResourceTimingBufferSize&&(u.setResourceTimingBufferSize(500),a=500)),e.length){const n=e.filter(e=>e.name===c.responseURL).sort((e,t)=>e.connectStart-t.connectStart);n.length&&(t=n[n.length-1].toJSON())}}s(new Ee(c.response,{headers:e,statusText:c.statusText,status:c.status,url:c.responseURL,perfTimings:t}))},c.onabort=function(){l(new be)},c.onerror=function(){l(new Te)},c.ontimeout=function(){l(new Se(e.timeout))},"function"==typeof o&&c.addEventListener("progress",o);for(let t in e.headers)c.setRequestHeader(t,e.headers[t]);e.withCredentials&&(c.withCredentials=!0),e.responseType&&(c.responseType=e.responseType),e.abort=c.abort.bind(c),c.send(i||null)})}const Ae=.3;function Le(){}function Ie(e,t,n){if(!e.s){if(n instanceof Pe){if(!n.s)return void(n.o=Ie.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(Ie.bind(null,e,t),Ie.bind(null,e,2));e.s=t,e.v=n;const r=e.o;r&&r(e)}}const Pe=function(){function e(){}return e.prototype.then=function(t,n){const r=new e,i=this.s;if(i){const e=1&i?t:n;if(e){try{Ie(r,1,e(this.v))}catch(e){Ie(r,2,e)}return r}return this}return this.o=function(e){try{const i=e.v;1&e.s?Ie(r,1,t?t(i):i):n?Ie(r,1,n(i)):Ie(r,2,i)}catch(e){Ie(r,2,e)}},r},e}();function Re(e){return e instanceof Pe&&1&e.s}function we(e){const t=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(r){return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(r,function(i){let o=!1;const a=function(t){if(!e.retryAbortErrors&&t instanceof be)return 0;if(t instanceof Se)return 0;if(n>=e.retry)return 0;if(t instanceof ye){if(!e.retryStatus(t.response.status))return 0;const n=function(e){const t="retry-after".toLowerCase();for(const n in e)if(n.toLowerCase()===t)return e[n];return null}(t.response.headers);if(n&&e.retryStatus(t.response.status)){let e=Number(n);return isNaN(e)?e=Date.parse(n)-Date.now():e*=1e3,e}if(413===t.response.status)return 0}return Ae*2**(n-1)*1e3}(i);return n++,function(s,l){var c=function(){if(0!==a&&n>0)return function(e,t){return void 0?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}(T(a),function(){var a;const s=(null==e||null==(a=e.hooks)?void 0:a.beforeRetry)||[];return function(e,t){return e&&e.then?e.then(t):t(e)}(function(e,t,n){var r,i,o=-1;return function a(s){try{for(;++o<e.length&&(!n||!n());)if((s=t(o))&&s.then){if(!Re(s))return void s.then(a,i||(i=Ie.bind(null,r=new Pe,2)));s=s.v}r?Ie(r,1,s):r=s}catch(e){Ie(r||(r=new Pe),2,e)}}(),r}(s,function(t){return function(e){if(!void 0)return e&&e.then?e.then(Le):Promise.resolve()}((0,s[t])(e,i,n))}),function(){const e=t(r);return o=!0,e})})}();return c&&c.then?c.then(l):l(c)}(0,function(t){if(o)return t;if(e.throwHttpErrors)throw i})})});let n=0;return t}function Oe(e,t){const n=e.then.bind(e);return Object.assign(e,{abort:t,then:(...e)=>Oe(n.apply(void 0,e),t)})}function ke(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function De(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function Ne(e,t,n){if(!e.s){if(n instanceof Me){if(!n.s)return void(n.o=Ne.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(Ne.bind(null,e,t),Ne.bind(null,e,2));e.s=t,e.v=n;const r=e.o;r&&r(e)}}const Me=function(){function e(){}return e.prototype.then=function(t,n){const r=new e,i=this.s;if(i){const e=1&i?t:n;if(e){try{Ne(r,1,e(this.v))}catch(e){Ne(r,2,e)}return r}return this}return this.o=function(e){try{const i=e.v;1&e.s?Ne(r,1,t?t(i):i):n?Ne(r,1,n(i)):Ne(r,2,i)}catch(e){Ne(r,2,e)}},r},e}();function xe(e){return e instanceof Me&&1&e.s}function Ve(e,t,n){var r,i,o=-1;return function a(s){try{for(;++o<e.length&&(!n||!n());)if((s=t(o))&&s.then){if(!xe(s))return void s.then(a,i||(i=Ne.bind(null,r=new Me,2)));s=s.v}r?Ne(r,1,s):r=s}catch(e){Ne(r||(r=new Me),2,e)}}(),r}function Be(e,t){return e&&e.then?e.then(t):t(e)}const Ue=["get","post","put","patch","head","delete"],Fe={json:"application/json",text:"text/plain",arrayBuffer:"*/*",blob:"*/*"},He=["get"];function We(e,t){const n=De(function(){let e=!1,n=!1;const r=t.hooks.beforeRequest||[];return Be(Ve(r,function(i){return ke((0,r[i])(t),function(r){if(r instanceof Ge)return t=r,void(n=!0);if(null!=r&&r.isVimeoResponse){const n=Promise.resolve(r).then(je(t));return e=!0,n}})},function(){return n||e}),function(n){return e?n:Ce(t).then(je(t))})});t=new Ge(e,t);const{method:r,json:i,jwt:o,searchParams:a}=t;i&&(t.headers["Content-Type"]=Fe.json,t.body=JSON.stringify(i)),o&&(t.headers.Authorization=`jwt ${o}`),a&&(t.url=me(t.url,a));const s=-1!==He.indexOf(r.toLowerCase())?we(t)(n):n();for(const e in Fe)s[e]=De(function(){return t.headers["Content-Type"]=Fe[e],ke(s,function(t){return t.clone()[e]()})});return Oe(s,()=>t.abort())}function Ge(e,t){k(this,n,e="string"==typeof e?{url:e}:e,t)}function je(e){const{validateStatus:t,throwHttpErrors:n,hooks:r}=e;return De(function(i){const o=r.afterResponse||[];return Be(Ve(o,function(t){return ke((0,o[t])(e,i.clone()),function(e){e instanceof Ee&&(i=e)})}),function(){if(!t||t(i.status))return i;if(n)throw new ye(i);return i})})}Ue.forEach(function(e){return We[e]=(t,n)=>We(t,p({method:e},n)),We[e]});const{get:Ye,post:$e,put:qe,patch:ze,head:Ke}=We,Xe={ARRAY_BUFFER:"arraybuffer"};var Ze=Object.freeze({__proto__:null,ContentTypes:t,defaults:n,requestMethods:Ue,responseTypes:Fe,retryMethods:He,request:We,Request:Ge,get:Ye,post:$e,put:qe,patch:ze,head:Ke,Response:Ee,ResponseTypes:Xe,AbortError:be,HTTPError:ye,NetworkError:Te,TimeoutError:Se,xhr:Ce}),Je=Array.isArray,Qe="object"==typeof global&&global&&global.Object===Object&&global,et="object"==typeof self&&self&&self.Object===Object&&self,tt=Qe||et||Function("return this")(),nt=tt.Symbol,rt=Object.prototype,it=rt.hasOwnProperty,ot=rt.toString,at=nt?nt.toStringTag:void 0,st=Object.prototype.toString,lt=nt?nt.toStringTag:void 0;function ct(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":lt&&lt in Object(e)?function(e){var t=it.call(e,at),n=e[at];try{e[at]=void 0;var r=!0}catch(e){}var i=ot.call(e);return r&&(t?e[at]=n:delete e[at]),i}(e):function(e){return st.call(e)}(e)}function ut(e){return null!=e&&"object"==typeof e}function dt(e){return"symbol"==typeof e||ut(e)&&"[object Symbol]"==ct(e)}var _t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ht=/^\w*$/;function pt(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function mt(e){if(!pt(e))return!1;var t=ct(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var ft=tt["__core-js_shared__"],vt=function(){var e=/[^.]+$/.exec(ft&&ft.keys&&ft.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),gt=Function.prototype.toString;function Et(e){if(null!=e){try{return gt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var bt=/^\[object .+?Constructor\]$/,yt=Function.prototype,Tt=Object.prototype,St=yt.toString,Ct=Tt.hasOwnProperty,At=RegExp("^"+St.call(Ct).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Lt(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!pt(e)||function(e){return!!vt&&vt in e}(e))&&(mt(e)?At:bt).test(Et(e))}(n)?n:void 0}var It=Lt(Object,"create"),Pt=Object.prototype.hasOwnProperty,Rt=Object.prototype.hasOwnProperty;function wt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ot(e,t){return e===t||e!=e&&t!=t}function kt(e,t){for(var n=e.length;n--;)if(Ot(e[n][0],t))return n;return-1}wt.prototype.clear=function(){this.__data__=It?It(null):{},this.size=0},wt.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},wt.prototype.get=function(e){var t=this.__data__;if(It){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Pt.call(t,e)?t[e]:void 0},wt.prototype.has=function(e){var t=this.__data__;return It?void 0!==t[e]:Rt.call(t,e)},wt.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=It&&void 0===t?"__lodash_hash_undefined__":t,this};var Dt=Array.prototype.splice;function Nt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Nt.prototype.clear=function(){this.__data__=[],this.size=0},Nt.prototype.delete=function(e){var t=this.__data__,n=kt(t,e);return!(n<0||(n==t.length-1?t.pop():Dt.call(t,n,1),--this.size,0))},Nt.prototype.get=function(e){var t=this.__data__,n=kt(t,e);return n<0?void 0:t[n][1]},Nt.prototype.has=function(e){return kt(this.__data__,e)>-1},Nt.prototype.set=function(e,t){var n=this.__data__,r=kt(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var Mt=Lt(tt,"Map");function xt(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Vt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Bt(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Bt.Cache||Vt),n}Vt.prototype.clear=function(){this.size=0,this.__data__={hash:new wt,map:new(Mt||Nt),string:new wt}},Vt.prototype.delete=function(e){var t=xt(this,e).delete(e);return this.size-=t?1:0,t},Vt.prototype.get=function(e){return xt(this,e).get(e)},Vt.prototype.has=function(e){return xt(this,e).has(e)},Vt.prototype.set=function(e,t){var n=xt(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Bt.Cache=Vt;var Ut=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ft=/\\(\\)?/g,Ht=function(){var e=Bt(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ut,function(e,n,r,i){t.push(r?i.replace(Ft,"$1"):n||e)}),t},function(e){return 500===t.size&&t.clear(),e}),t=e.cache;return e}(),Wt=nt?nt.prototype:void 0,Gt=Wt?Wt.toString:void 0;function jt(e){if("string"==typeof e)return e;if(Je(e))return function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}(e,jt)+"";if(dt(e))return Gt?Gt.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Yt(e){return null==e?"":jt(e)}function $t(e,t){return Je(e)?e:function(e,t){if(Je(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!dt(e))||ht.test(e)||!_t.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:Ht(Yt(e))}function qt(e){if("string"==typeof e||dt(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function zt(e,t){for(var n=0,r=(t=$t(t,e)).length;null!=e&&n<r;)e=e[qt(t[n++])];return n&&n==r?e:void 0}function Kt(e,t,n){var r=null==e?void 0:zt(e,t);return void 0===r?n:r}var Xt="object"==typeof global&&global&&global.Object===Object&&global,Zt="object"==typeof self&&self&&self.Object===Object&&self,Jt=(Xt||Zt||Function("return this")()).Symbol,Qt=Object.prototype,en=Qt.hasOwnProperty,tn=Qt.toString,nn=Jt?Jt.toStringTag:void 0,rn=Object.prototype.toString,on=Jt?Jt.toStringTag:void 0;var an=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object),sn=Function.prototype,ln=Object.prototype,cn=sn.toString,un=ln.hasOwnProperty,dn=cn.call(Object),_n=function(){var e,t=("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()).Symbol;return"function"==typeof t?t.observable?e=t.observable:(e=t("observable"),t.observable=e):e="@@observable",e}(),hn="@@redux/INIT";function pn(e,t,n){var r;if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(pn)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var i=e,o=t,a=[],s=a,l=!1;function c(){s===a&&(s=a.slice())}function u(){return o}function d(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return c(),s.push(e),function(){if(t){t=!1,c();var n=s.indexOf(e);s.splice(n,1)}}}function _(e){if(!function(e){if(!function(e){return null!=e&&"object"==typeof e}(e)||"[object Object]"!=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":on&&on in Object(e)?function(e){var t=en.call(e,nn),n=e[nn];try{e[nn]=void 0;var r=!0}catch(e){}var i=tn.call(e);return r&&(t?e[nn]=n:delete e[nn]),i}(e):function(e){return rn.call(e)}(e)}(e))return!1;var t=an(e);if(null===t)return!0;var n=un.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&cn.call(n)==dn}(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(l)throw new Error("Reducers may not dispatch actions.");try{l=!0,o=i(o,e)}finally{l=!1}for(var t=a=s,n=0;n<t.length;n++)(0,t[n])();return e}return _({type:hn}),(r={dispatch:_,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");i=e,_({type:hn})}})[_n]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[_n]=function(){return this},e},r}function mn(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}var fn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function vn(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,r,i){var o,a=e(n,r,i),s=a.dispatch,l={getState:a.getState,dispatch:function(e){return s(e)}};return o=t.map(function(e){return e(l)}),s=mn.apply(void 0,o)(a.dispatch),fn({},a,{dispatch:s})}}}var gn=new WeakMap,En=new WeakMap;class bn{constructor(){s(this,gn,Object.create(null)),s(this,En,void 0),d(this,"eventNames",()=>Object.keys(a(gn,this))),d(this,"fire",(e,...t)=>{if(!e)throw new Error("Tried to fire an undefined event.");if(e in a(gn,this)){const n=a(gn,this)[e].slice(0);for(let e=0,r=n.length;e<r;e++)if(n[e].apply(this,t),a(En,this)){l(En,this,!1);break}}return this}),d(this,"halt",()=>(l(En,this,!0),this)),d(this,"on",(e,t,n)=>{const r=[].concat(e);for(let e=0,i=r.length;e<i;e++){const i=r[e];if(!i)throw new Error("Tried to listen for an undefined event.");a(gn,this)[i]||(a(gn,this)[i]=[]),n?a(gn,this)[i].unshift(t):a(gn,this)[i].push(t)}return this}),d(this,"once",(e,t,n)=>{const r=(...n)=>{this.off(e,r),t.apply(this,n)};return r.handler=t,this.on(e,r,n)}),d(this,"off",(e,t)=>{if(!e)return l(gn,this,Object.create(null)),this;const n=[].concat(e);for(let e=0,r=n.length;e<r;e++){const r=n[e];if(!r)throw new Error("Tried to remove an undefined event.");if(r in a(gn,this)){const e=a(gn,this)[r];if(t){let n=e.indexOf(t);if(-1===n)for(let r=0,i=e.length;r<i;r++)if(e[r].handler===t){n=r;break}if(-1===n)return this;e.splice(n,1),0===e.length&&delete a(gn,this)[r]}else delete a(gn,this)[r]}}return this}),d(this,"prependOn",(e,t)=>this.on(e,t,!0))}static extend(e){return Object.assign(e,new bn),e}}function yn(e){var t=this.__data__=new Nt(e);this.size=t.size}yn.prototype.clear=function(){this.__data__=new Nt,this.size=0},yn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},yn.prototype.get=function(e){return this.__data__.get(e)},yn.prototype.has=function(e){return this.__data__.has(e)},yn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Nt){var r=n.__data__;if(!Mt||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Vt(r)}return n.set(e,t),this.size=n.size,this};var Tn=function(){try{var e=Lt(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();function Sn(e,t,n){"__proto__"==t&&Tn?Tn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var Cn=Object.prototype.hasOwnProperty;function An(e,t,n){var r=e[t];Cn.call(e,t)&&Ot(r,n)&&(void 0!==n||t in e)||Sn(e,t,n)}function Ln(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),i?Sn(n,s,l):An(n,s,l)}return n}function In(e){return ut(e)&&"[object Arguments]"==ct(e)}var Pn=Object.prototype,Rn=Pn.hasOwnProperty,wn=Pn.propertyIsEnumerable,On=In(function(){return arguments}())?In:function(e){return ut(e)&&Rn.call(e,"callee")&&!wn.call(e,"callee")},kn="object"==typeof e&&e&&!e.nodeType&&e,Dn=kn&&"object"==typeof module&&module&&!module.nodeType&&module,Nn=Dn&&Dn.exports===kn?tt.Buffer:void 0,Mn=(Nn?Nn.isBuffer:void 0)||function(){return!1},xn=/^(?:0|[1-9]\d*)$/;function Vn(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&xn.test(e))&&e>-1&&e%1==0&&e<t}function Bn(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}var Un={};function Fn(e){return function(t){return e(t)}}Un["[object Float32Array]"]=Un["[object Float64Array]"]=Un["[object Int8Array]"]=Un["[object Int16Array]"]=Un["[object Int32Array]"]=Un["[object Uint8Array]"]=Un["[object Uint8ClampedArray]"]=Un["[object Uint16Array]"]=Un["[object Uint32Array]"]=!0,Un["[object Arguments]"]=Un["[object Array]"]=Un["[object ArrayBuffer]"]=Un["[object Boolean]"]=Un["[object DataView]"]=Un["[object Date]"]=Un["[object Error]"]=Un["[object Function]"]=Un["[object Map]"]=Un["[object Number]"]=Un["[object Object]"]=Un["[object RegExp]"]=Un["[object Set]"]=Un["[object String]"]=Un["[object WeakMap]"]=!1;var Hn="object"==typeof e&&e&&!e.nodeType&&e,Wn=Hn&&"object"==typeof module&&module&&!module.nodeType&&module,Gn=Wn&&Wn.exports===Hn&&Qe.process,jn=function(){try{return Wn&&Wn.require&&Wn.require("util").types||Gn&&Gn.binding&&Gn.binding("util")}catch(e){}}(),Yn=jn&&jn.isTypedArray,$n=Yn?Fn(Yn):function(e){return ut(e)&&Bn(e.length)&&!!Un[ct(e)]},qn=Object.prototype.hasOwnProperty;function zn(e,t){var n=Je(e),r=!n&&On(e),i=!n&&!r&&Mn(e),o=!n&&!r&&!i&&$n(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var c in e)!t&&!qn.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Vn(c,l))||s.push(c);return s}var Kn=Object.prototype;function Xn(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Kn)}function Zn(e,t){return function(n){return e(t(n))}}var Jn=Zn(Object.keys,Object),Qn=Object.prototype.hasOwnProperty;function er(e){if(!Xn(e))return Jn(e);var t=[];for(var n in Object(e))Qn.call(e,n)&&"constructor"!=n&&t.push(n);return t}function tr(e){return null!=e&&Bn(e.length)&&!mt(e)}function nr(e){return tr(e)?zn(e):er(e)}var rr=Object.prototype.hasOwnProperty;function ir(e){return tr(e)?zn(e,!0):function(e){if(!pt(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Xn(e),n=[];for(var r in e)("constructor"!=r||!t&&rr.call(e,r))&&n.push(r);return n}(e)}var or="object"==typeof e&&e&&!e.nodeType&&e,ar=or&&"object"==typeof module&&module&&!module.nodeType&&module,sr=ar&&ar.exports===or?tt.Buffer:void 0,lr=sr?sr.allocUnsafe:void 0;function cr(e,t){if(t)return e.slice();var n=e.length,r=lr?lr(n):new e.constructor(n);return e.copy(r),r}function ur(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function dr(){return[]}var _r=Object.prototype.propertyIsEnumerable,hr=Object.getOwnPropertySymbols,pr=hr?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a)&&(o[i++]=a)}return o}(hr(e),function(t){return _r.call(e,t)}))}:dr;function mr(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var fr=Zn(Object.getPrototypeOf,Object),vr=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)mr(t,pr(e)),e=fr(e);return t}:dr;function gr(e,t,n){var r=t(e);return Je(e)?r:mr(r,n(e))}function Er(e){return gr(e,nr,pr)}function br(e){return gr(e,ir,vr)}var yr=Lt(tt,"DataView"),Tr=Lt(tt,"Promise"),Sr=Lt(tt,"Set"),Cr=Lt(tt,"WeakMap"),Ar="[object Map]",Lr="[object Promise]",Ir="[object Set]",Pr="[object WeakMap]",Rr="[object DataView]",wr=Et(yr),Or=Et(Mt),kr=Et(Tr),Dr=Et(Sr),Nr=Et(Cr),Mr=ct;(yr&&Mr(new yr(new ArrayBuffer(1)))!=Rr||Mt&&Mr(new Mt)!=Ar||Tr&&Mr(Tr.resolve())!=Lr||Sr&&Mr(new Sr)!=Ir||Cr&&Mr(new Cr)!=Pr)&&(Mr=function(e){var t=ct(e),n="[object Object]"==t?e.constructor:void 0,r=n?Et(n):"";if(r)switch(r){case wr:return Rr;case Or:return Ar;case kr:return Lr;case Dr:return Ir;case Nr:return Pr}return t});var xr=Mr,Vr=Object.prototype.hasOwnProperty,Br=tt.Uint8Array;function Ur(e){var t=new e.constructor(e.byteLength);return new Br(t).set(new Br(e)),t}var Fr=/\w*$/,Hr=nt?nt.prototype:void 0,Wr=Hr?Hr.valueOf:void 0;function Gr(e,t){var n=t?Ur(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var jr=Object.create,Yr=function(){function e(){}return function(t){if(!pt(t))return{};if(jr)return jr(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function $r(e){return"function"!=typeof e.constructor||Xn(e)?{}:Yr(fr(e))}var qr=jn&&jn.isMap,zr=qr?Fn(qr):function(e){return ut(e)&&"[object Map]"==xr(e)},Kr=jn&&jn.isSet,Xr=Kr?Fn(Kr):function(e){return ut(e)&&"[object Set]"==xr(e)},Zr="[object Arguments]",Jr="[object Function]",Qr="[object Object]",ei={};function ti(e,t,n,r,i,o){var a,s=1&t,l=2&t,c=4&t;if(n&&(a=i?n(e,r,i,o):n(e)),void 0!==a)return a;if(!pt(e))return e;var u=Je(e);if(u){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Vr.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!s)return ur(e,a)}else{var d=xr(e),_=d==Jr||"[object GeneratorFunction]"==d;if(Mn(e))return cr(e,s);if(d==Qr||d==Zr||_&&!i){if(a=l||_?{}:$r(e),!s)return l?function(e,t){return Ln(e,vr(e),t)}(e,function(e,t){return e&&Ln(t,ir(t),e)}(a,e)):function(e,t){return Ln(e,pr(e),t)}(e,function(e,t){return e&&Ln(t,nr(t),e)}(a,e))}else{if(!ei[d])return i?e:{};a=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return Ur(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return function(e,t){var n=t?Ur(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Gr(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,Fr.exec(e));return t.lastIndex=e.lastIndex,t}(e);case"[object Symbol]":return function(e){return Wr?Object(Wr.call(e)):{}}(e)}}(e,d,s)}}o||(o=new yn);var h=o.get(e);if(h)return h;o.set(e,a),Xr(e)?e.forEach(function(r){a.add(ti(r,t,n,r,e,o))}):zr(e)&&e.forEach(function(r,i){a.set(i,ti(r,t,n,i,e,o))});var p=u?void 0:(c?l?br:Er:l?ir:nr)(e);return function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n););}(p||e,function(r,i){p&&(r=e[i=r]),An(a,i,ti(r,t,n,i,e,o))}),a}function ni(e){return ti(e,5)}function ri(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function ii(e){return e}ei[Zr]=ei["[object Array]"]=ei["[object ArrayBuffer]"]=ei["[object DataView]"]=ei["[object Boolean]"]=ei["[object Date]"]=ei["[object Float32Array]"]=ei["[object Float64Array]"]=ei["[object Int8Array]"]=ei["[object Int16Array]"]=ei["[object Int32Array]"]=ei["[object Map]"]=ei["[object Number]"]=ei[Qr]=ei["[object RegExp]"]=ei["[object Set]"]=ei["[object String]"]=ei["[object Symbol]"]=ei["[object Uint8Array]"]=ei["[object Uint8ClampedArray]"]=ei["[object Uint16Array]"]=ei["[object Uint32Array]"]=!0,ei["[object Error]"]=ei[Jr]=ei["[object WeakMap]"]=!1;var oi=Math.max;function ai(e,t,n){return t=oi(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=oi(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),ri(e,this,s)}}function si(e){return function(){return e}}var li=Tn?function(e,t){return Tn(e,"toString",{configurable:!0,enumerable:!1,value:si(t),writable:!0})}:ii,ci=Date.now,ui=function(e){var t=0,n=0;return function(){var r=ci(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(li);function di(e,t){return ui(ai(e,t,ii),e+"")}function _i(e,t,n){(void 0!==n&&!Ot(e[t],n)||void 0===n&&!(t in e))&&Sn(e,t,n)}var hi=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var s=o[++r];if(!1===t(i[s],s,i))break}return e},pi=Function.prototype,mi=Object.prototype,fi=pi.toString,vi=mi.hasOwnProperty,gi=fi.call(Object);function Ei(e){if(!ut(e)||"[object Object]"!=ct(e))return!1;var t=fr(e);if(null===t)return!0;var n=vi.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&fi.call(n)==gi}function bi(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function yi(e,t,n,r,i){e!==t&&hi(t,function(o,a){if(i||(i=new yn),pt(o))!function(e,t,n,r,i,o,a){var s=bi(e,n),l=bi(t,n),c=a.get(l);if(c)_i(e,n,c);else{var u=o?o(s,l,n+"",e,t,a):void 0,d=void 0===u;if(d){var _=Je(l),h=!_&&Mn(l),p=!_&&!h&&$n(l);u=l,_||h||p?Je(s)?u=s:function(e){return ut(e)&&tr(e)}(s)?u=ur(s):h?(d=!1,u=cr(l,!0)):p?(d=!1,u=Gr(l,!0)):u=[]:Ei(l)||On(l)?(u=s,On(s)?u=function(e){return Ln(e,ir(e))}(s):pt(s)&&!mt(s)||(u=$r(l))):d=!1}d&&(a.set(l,u),i(u,l,r,o,a),a.delete(l)),_i(e,n,u)}}(e,t,a,n,yi,r,i);else{var s=r?r(bi(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),_i(e,a,s)}},ir)}function Ti(e,t,n,r,i,o){return pt(e)&&pt(t)&&(o.set(t,e),yi(e,t,void 0,Ti,o),o.delete(t)),e}function Si(e){return di(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&function(e,t,n){if(!pt(n))return!1;var r=typeof t;return!!("number"==r?tr(n)&&Vn(t,n.length):"string"==r&&t in n)&&Ot(n[t],e)}(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t})}var Ci=Si(function(e,t,n,r){yi(e,t,n,r)}),Ai=di(function(e){return e.push(void 0,Ti),ri(Ci,void 0,e)});const Li={h264:"video/mp4",hls:"application/vnd.apple.mpegurl",hlsLive:"application/x-mpegURL",dash:"application/vnd.vimeo.dash+json",dashMpd:"video/vnd.mpeg.dash.mpd",vp6:"video/x-flv",vp8:"video/webm",webm:"video/webm",hds:"application/f4m"};class Ii extends bn{static get displayName(){return"ExternalDisplay"}static get supported(){return!1}static get supportedVideoTypes(){return[]}constructor(e){super(),this._available=!1,this._active=!1,this._video=e}get active(){return this._active}get available(){return this._available}get element(){return document.createElement("div")}showPicker(){}getFile(){var e;const t=this.constructor.displayName.replace("ExternalDisplay","");if(null!=(e=this._video.externalDisplayFiles)&&e[t])return this._video.externalDisplayFiles[t];const n=this.constructor.supportedVideoTypes,r=this._video.files.filter(e=>-1!==n.indexOf(e.mime)).sort((e,t)=>e.mime===t.mime?e.priority-t.priority:n.indexOf(e.mime)-n.indexOf(t.mime));if(!r.length)throw new Error(`No files available for ${this.constructor.displayName} external display.`);return r[0]}}const Pi={ABORT:"abort",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",DURATION_CHANGE:"durationchange",EMPTIED:"emptied",ENDED:"ended",ENTER_PICTURE_IN_PICTURE:"enterpictureinpicture",LEAVE_PICTURE_IN_PICTURE:"leavepictureinpicture",ERROR:"error",LOADED_DATA:"loadeddata",LOADED_METADATA:"loadedmetadata",LOAD_START:"loadstart",PAUSE:"pause",PLAY:"play",PLAYING:"playing",PROGRESS:"progress",RATE_CHANGE:"ratechange",RESIZE:"resize",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",SUSPEND:"suspend",TIME_UPDATE:"timeupdate",VOLUME_CHANGE:"volumechange",WAITING:"waiting",WEBKIT_BEGIN_FULLSCREEN:"webkitbeginfullscreen",WEBKIT_END_FULLSCREEN:"webkitendfullscreen",WEBKIT_PRESENTATION_MODE_CHANGED:"webkitpresentationmodechanged"},Ri={ADD_TRACK:"addtrack",REMOVE_TRACK:"removetrack",CHANGE:"change"},wi={AVAILABLE:"externaldisplayavailable",UNAVAILABLE:"externaldisplayunavailable",ACTIVATED:"externaldisplayactivated",DEACTIVATED:"externaldisplaydeactivated"},Oi={AIRPLAY_AVAILABLE:"available",AIRPLAY_UNAVAILABLE:"unavailable",AIRPLAY_ACTIVATED:"activated",AIRPLAY_DEACTIVATED:"deactivated"},ki={SCANNER_CHANGE:"scannerchange",SCANNER_ERROR:"scannererror",FILE_ERROR:"fileerror",FILE_SRC_UPDATE:"filesrcupdate",DOWNLOAD_START:"downloadstart",DOWNLOAD_END:"downloadend",DOWNLOAD_ERROR:"downloaderror",DOWNLOAD_TIMEOUT:"downloadtimeout",DRM_AUTH_FAILURE:"drmauthfailure",DRM_AUTH_SUCCESS:"drmauthsuccess",DRM_CDM_CHANGE:"drmcdmchange",DRM_FAILURE:"drmfailure",DRM_KEY_SWITCH:"drmkeyswitch",DRM_OUTPUT_RESTRICTED:"drmoutputrestricted",EME_UNSUPPORTED:"emeunsupported",NO_SUPPORTED_CDM:"nosupportedcdm",CURRENT_FILE_CHANGE:"currentfilechange",MEDIA_URL_EXPIRED:"mediaurlexpired",MEDIA_URL_BAD_REQUEST:"mediaurlbadrequest",STREAM_CHANGE:"streamchange",STREAM_CHANGE_START:"streamchangestart",STREAM_UPDATED:"streamupdated",STREAM_BUFFER_START:"streambufferstart",STREAM_BUFFER_END:"streambufferend",AVAILABLE_STREAMS_CHANGED:"availablestreamschanged",MEDIA_CAPABILITY_STREAMS_UNSUPPORTED:"mediacapabilitystreamsunsupported",DROPPED_FRAMES:"droppedframes",BANDWIDTH:"bandwidth",STREAM_TARGET_CHANGE:"streamtargetchange",CUE_POINT:"cuepoint",BUFFER_OCCUPANCY:"bufferoccupancy",MANIFEST_TIMEOUT:"manifesttimeout",MANIFEST_LOADED:"manifestloaded",STREAMS_LOADED:"streamsloaded",TEXT_SRC_UPDATE:"texttracksrcupdate",TEXT_TRACKS_AVAILABLE:"texttracksavailable",AV_DURATION_MISMATCH:"avdurationmismatch",BUFFER_STARTED:"bufferstarted",BUFFER_ENDED:"bufferended",QUOTA_EXCEEDED_ERROR:"quotaexceedederror",CHAPTER_CUES_UPDATED:"chaptercuesupdated",APPEND_BUFFER_END:"appendbufferend",DROPPED_FRAME_PERCENT_EXCEEDED:"droppedframepercentexceeded",LOAD_SEGMENT_FAILED:"loadsegmentfailed",AUDIO_TRACK_CHANGED:"audiotrackchanged",SEGMENT_CUES_LOADED:"segmentcuesloaded",HLS_JS_ERROR:"hlsjserror"},Di={STREAM_ONLINE:"livestreamonline",STREAM_OFFLINE:"livestreamoffline",BUFFER_GAP_JUMP:"livebuffergapjump",BUFFER_GAP_JUMP_PREVENT:"livebuffergapjumpprevent",STALL_JUMP:"livestalljump",LATENCY_UPDATED:"latencyupdated"},Ni={CAMERA_UPDATE:"cameraupdate",CAMERA_CHANGE:"camerachange",MOTION_START:"motionstart",MOTION_END:"motionend",SPATIAL_UNSUPPORTED:"spatialunsupported",WEBVR_ENTER:"entervr",WEBVR_EXIT:"exitvr",WEBVR_HARDWARE_AVAILABLE:"webvrhardwareavailable",AMBISONIC_UNSUPPORTED:"ambisonicunsupported"},Mi={MEDIASESSION_PLAY:"mediasessionplay",MEDIASESSION_PAUSE:"mediasessionpause",MEDIASESSION_SEEK_FORWARD:"mediasessionseekforward",MEDIASESSION_SEEK_TO:"mediasessionseekto",MEDIASESSION_SEEK_BACKWARD:"mediasessionseekbackward"},xi=Object.assign({},Pi,Ri,wi,Oi,ki,Ni,Di,Mi),Vi="webkitplaybacktargetavailabilitychanged",Bi="webkitcurrentplaybacktargetiswirelesschanged";function Ui(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Fi(){}class AirPlayExternalDisplay extends Ii{static get displayName(){return"AirPlayExternalDisplay"}static get supported(){return"WebKitPlaybackTargetAvailabilityEvent"in window}static get supportedVideoTypes(){return[Li.hls,Li.h264]}constructor(e){super(e),this._listenerLoadedMetadata=null,this._listenerAvailability=null,this._listenerTarget=null,this._videoElement=document.createElement("video"),this.createEventListeners(),this.addVideoEventListeners()}createEventListeners(){this._listenerLoadedMetadata=e=>{this.fire(Pi.LOADED_METADATA,e)},this._listenerAvailability=e=>{switch(e.availability){case"available":this._available||(this._available=!0,this.fire(Oi.AIRPLAY_AVAILABLE));break;case"not-available":this._available&&(this._available=!1,this.fire(Oi.AIRPLAY_UNAVAILABLE))}},this._listenerTarget=e=>{this._active=!!e.target.webkitCurrentPlaybackTargetIsWireless,this._active&&this._videoElement.play(),this.fire(this._active?Oi.AIRPLAY_ACTIVATED:Oi.AIRPLAY_DEACTIVATED)}}addVideoEventListeners(e=this._videoElement){e.addEventListener(Pi.LOADED_METADATA,this._listenerLoadedMetadata),e.addEventListener(Vi,this._listenerAvailability),e.addEventListener(Bi,this._listenerTarget)}removeVideoEventListeners(e=this._videoElement){e.removeEventListener(Pi.LOADED_METADATA,this._listenerLoadedMetadata),e.removeEventListener(Vi,this._listenerAvailability),e.removeEventListener(Bi,this._listenerTarget)}get element(){return this._videoElement}set element(e){if(!(e instanceof HTMLVideoElement))throw new TypeError("The element for AirPlay must be a <video>.");e!==this._videoElement&&(this.removeVideoEventListeners(this._videoElement),this._videoElement=e,this.addVideoEventListeners(e))}showPicker(){this._videoElement.webkitShowPlaybackTargetPicker(),this.loadMetadata().then(()=>this._videoElement.webkitShowPlaybackTargetPicker()).catch(e=>{})}loadMetadata(){const e=this;return function(e){try{var t=Promise.resolve(e());return t}catch(e){return Promise.reject(e)}}(function(){return e._videoElement.readyState>=1?Promise.resolve():Ui(new Promise(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(t,n){return e._videoElement.addEventListener(Pi.LOADED_METADATA,()=>{t()},{once:!0}),function(e){if(e&&e.then)return e.then(Fi)}(function(t,n){try{var r=function(){let{src:t,mime:n}=e.getFile();const r=document.createElement("source");return r.type=n,Ui(A(t),function(t){r.src=t,e._videoElement.appendChild(r),e._videoElement.load()})}()}catch(e){return n(e)}return r&&r.then?r.then(void 0,n):r}(0,function(e){n(e)}))})))})}}const Hi=(()=>{const e=navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)\.([0-9]+)\./);return!!e&&{major:parseInt(e[1],10),minor:parseInt(e[2],10)}})(),Wi=function(e){for(let t=0,n=this.length;t<n;t++)if(this[t].id===`${e}`)return this[t];return null};function Gi(e=[]){return e.item=function(e){return this[e]},e.getTrackById=Wi,e}function ji(e){const t=window.atob(e),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.charCodeAt(e);return r}function Yi(e,t,n,r){let i=0,o=0,a=0,s=0;const l=e,c=t,u=n/r;return l/c>=u?(o=c,i=(u*c).toFixed(2)):(i=l,o=(l/u).toFixed(2)),a=Math.max((l-i)/2,0),s=Math.max((c-o)/2,0),{width:i,height:o,left:a,top:s}}function $i(e,t){let n=e;return t&&(n+=`;codecs="${t}"`),n}function qi(e,t=3){if(e=parseFloat(e),isNaN(e))return 0;const n=Math.pow(10,t);return Math.round(e*n)/n}const zi="telecine-snapshot",Ki=`[${zi}]`,Xi=(e,t)=>{let n=t.querySelector(Ki);n||(n=document.createElement("canvas"),n.setAttribute(zi,""),t.appendChild(n)),n.setAttribute("width",`${t.clientWidth}px`),n.setAttribute("height",`${t.clientHeight}px`),n.style.display="";const{width:r,height:i,left:o,top:a}=Yi(e.clientWidth,e.clientHeight,e.videoWidth,e.videoHeight);n.style.cssText=`position:absolute;width:${r}px;height:${i}px;left:${o}px;top:${a}px`;const s=n.getContext("2d");n.width>0&&n.height>0&&s.drawImage(e,0,0,n.width,n.height)},Zi=e=>{const t=e.querySelector(Ki);t&&(t.style.display="none")};class TelecineError{constructor(e,t){this.name=e,this.message=t,Object.freeze(this)}}const Ji=new WeakMap;class Qi{static fromVTTCue(e){if(Ji.has(e))return Ji.get(e);let t={};try{t=JSON.parse(e.text)}catch(e){}return new Qi(e.startTime,t)}constructor(e,t={}){const n=parseFloat(e);if(isNaN(n))throw new TypeError("Time must be a number.");if(n<0)throw new TypeError("Time must be a positive number.");this.time=e,this.data=t,this.id=ve();try{const n="undefined"==typeof VTTCue?TextTrackCue:VTTCue;this.vttCue=new n(e,e+.25,JSON.stringify(t)),this.vttCue.id=this.id}catch(e){throw new TelecineError("CuePointsNotSupported","Cue points are not supported in this browser.")}Ji.set(this.vttCue,this),Object.freeze(this)}}function eo(e,t,n){let r;try{document.removeChild({})}catch(i){r=Object.create(Object.getPrototypeOf(i),{name:{value:t,configurable:!0,writable:!0},code:{value:e,configurable:!0,writable:!0},message:{value:n,configurable:!0,writable:!0},toString:{value:()=>`${t}: DOM Exception ${e}`,configurable:!0,writable:!0}})}return Object.freeze(r)}const to=(e,t)=>{if(!e||void 0===e[t])throw eo(1,"INDEX_SIZE_ERR");return e[t]};function no(e=[],t=[]){return Object.freeze({get length(){return e.length},start:t=>to(e,t),end:e=>to(t,e),[Symbol.iterator]:()=>function(e,t){let n=0;return{[Symbol.iterator](){return this},next:()=>n<e.length?{done:!1,value:t?[e[n],t[n++]]:e[n++]}:{done:!0}}}(e,t)})}no.from=function(e){if(!(e instanceof TimeRanges))throw new TypeError("Can only create a TelecineTimeRange from a TimeRanges object.");const t=[],n=[];for(let r=0,i=e.length;r<i;r++)t.push(e.start(r)),n.push(e.end(r));return no(t,n)};const ro="DRMFailure",io="MediaUnknownError",oo="MediaUrlBadRequest",ao="PlayInterrupted",so="NoSupportedCDM",lo="inline",co="picture-in-picture";function uo(){}const _o=document.createElement("video"),ho={"application/vnd.apple.mpegurl":"application/vnd.apple.mpegurl","video/mp4":'video/mp4; codecs="avc1.64001E"',"video/webm":'video/webm; codecs="vp8, vorbis"',"video/x-flv":'video/x-flv; codecs="vp6"'},po=function(){const e="undefined"==typeof TextTrack?{}:TextTrack;return{disabled:"DISABLED"in e?e.DISABLED:"disabled",hidden:"HIDDEN"in e?e.HIDDEN:"hidden",showing:"SHOWING"in e?e.SHOWING:"showing"}}();function mo(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}const fo=function(){const e=document.createElement("track");return"track"in e&&"oncuechange"in e.track}();function vo(e,t,n){if(n)return t?t(e()):e();try{var r=Promise.resolve(e());return t?r.then(t):r}catch(e){return Promise.reject(e)}}const go=new WeakMap;class Eo extends bn{static get displayName(){return"HTMLScanner"}static get supportsMse(){return!1}static get supportsLive(){return!1}static supported(){return Eo.supportedVideoTypes.length>0}static get supportedVideoTypes(){const e=[];if("function"!=typeof _o.canPlayType)return e;for(const t in ho){const n=ho[t];Q.android&&t===Li.hls||(Q.android&&!Q.mobileAndroid&&t===Li.h264&&Q.android instanceof String?parseInt(Q.android.split(".")[0],10)>3&&e.push(t):_o.canPlayType(n).replace(/^no$/,"")&&e.push(t))}return e}static get supportedAudioTypes(){return[]}static get supportedExternalDisplays(){return[AirPlayExternalDisplay]}static get supportsAudioTracksFromScanner(){return void 0!==_o.audioTracks&&this.supportedVideoTypes.includes(Li.hls)}constructor(e,t={}){super(),this._element=e,this._options=t,this._telecineVideo=null,this._currentFile=null,this._externalDisplays=[];let n=e.querySelector("video");n||(n=document.createElement("video"),n.preload="none",this._element.appendChild(n)),n.setAttribute("tabindex","-1"),this._video=n,t.playRequest&&(this._playRequest=t.playRequest,this._playRequest.video=n),t.htmlScanner&&t.htmlScanner.controls&&(this._video.controls=!0),this._boundHandleVideoEvent=this.handleVideoEvent.bind(this),this._boundHandleAudioEvent=this.handleAudioEvent.bind(this),this.addVideoEventListeners(),this.addAudioEventListeners(),this._preload="none",this._externalDisplayActivated=!1,this._inFullscreen=!1,this._lastCurrentTime=-1,this._switchingVideo=!1,this._resetInViewTracking()}deactivate(){this._telecineVideo&&(this._telecineVideo.off(ki.FILE_SRC_UPDATE),this._telecineVideo.off("texttracksrcupdate")),this.removeVideoEventListeners(),this.removeAudioEventListeners(),this._switchingVideo||this.removeSnapshot(),this._video.style.display="none",this._cleanUpInViewTracking()}reactivate(){this.addVideoEventListeners(),this.addAudioEventListeners(),this._video.style.display="",this._resetInViewTracking()}addVideoEventListeners(e=this._video){Object.keys(Pi).forEach(t=>{const n=Pi[t];e.addEventListener(n,this._boundHandleVideoEvent)})}addAudioEventListeners(e=this._video){var t;null!=e&&e.audioTracks&&"function"==typeof(null==(t=e.audioTracks)?void 0:t.addEventListener)&&(e.audioTracks.addEventListener(Ri.ADD_TRACK,this._boundHandleAudioEvent),e.audioTracks.addEventListener(Ri.REMOVE_TRACK,this._boundHandleAudioEvent),e.audioTracks.addEventListener(Ri.CHANGE,this._boundHandleAudioEvent))}removeVideoEventListeners(e=this._video){Object.keys(Pi).forEach(t=>{const n=Pi[t];e.removeEventListener(n,this._boundHandleVideoEvent)})}removeAudioEventListeners(e=this._video){var t;null!=e&&e.audioTracks&&"function"==typeof(null==(t=e.audioTracks)?void 0:t.removeEventListener)&&(e.audioTracks.removeEventListener(Ri.ADD_TRACK,this._boundHandleAudioEvent),e.audioTracks.removeEventListener(Ri.REMOVE_TRACK,this._boundHandleAudioEvent),e.audioTracks.removeEventListener(Ri.CHANGE,this._boundHandleAudioEvent))}play(e){return this._playRequest.start(e).catch(e=>{var t;if("sd-fallback"!==(null==(t=this._telecineVideo.drmHandler)?void 0:t.state)||"AbortError"!==e.name)throw this._onPlayError(e),e})}_onPlayError(e){this.fire(Pi.ERROR,new TelecineError(null==e?void 0:e.name,null==e?void 0:e.message))}pause(){this._playRequest.cancel(),this._video.pause()}onpause(){}ontimeupdate(){this._lastCurrentTime=this.currentTime}addTextTrack(e){let t,n;return e.src?(t=document.createElement("track"),t.kind=e.kind,t.src=e.src,t.id=`telecine-track-${e.id}`,t.srclang=e.language,t.label=e.label,this._video.appendChild(t),n=t.track):(n=this._video.addTextTrack(e.kind,e.label,e.language),this._textTracks=this._textTracks||{},this._textTracks[`telecine-track-${e.id}`]=n),this._addTextTrackListeners(e,n,t),n}_addTextTrackListeners(e,t,n){t.addEventListener("cuechange",()=>e.dispatchEvent("cuechange")),this._video.addEventListener(Pi.TIME_UPDATE,()=>{C(this._video)&&(e.mode=t.mode)});const r=()=>{const n=Q.iOS&&C(this._video);!e._modeHasBeenSet||n?e.mode=t.mode:t.mode=po[e.mode]},i=[];if(n?n.addEventListener("load",r):r(),[Pi.LOADED_DATA,Pi.SEEKING].forEach(e=>{this._video.addEventListener(e,r),i.push([e,r])}),e._modeHasBeenSet&&(t.mode=po[e.mode]),!fo){let n=[];const r=()=>{if(t&&"disabled"!==po[t.mode]){if(n.length!==t.activeCues.length)return e.dispatchEvent("cuechange"),void(n=Array.from(t.activeCues));for(let r=0,i=t.activeCues.length;r<i;r++)if(t.activeCues[r].startTime!==n[r].startTime)return e.dispatchEvent("cuechange"),void(n=Array.from(e.activeCues))}};this._video.addEventListener(Pi.TIME_UPDATE,r),i.push([Pi.TIME_UPDATE,r])}return go.set(e,i),t}removeTextTrack(e){const t=this._video.querySelector(`#telecine-track-${e.id}`);t&&this._video.removeChild(t);const n=go.get(e);Array.isArray(n)&&n.forEach(([e,t])=>{this._video.removeEventListener(e,t)})}getCuesForTrack(e){const t=this.getTrackById(`telecine-track-${e.id}`);return t?Array.from(t.cues):[]}getActiveCuesForTrack(e){const t=this.getTrackById(`telecine-track-${e.id}`);return t&&t.activeCues?Array.from(t.activeCues):[]}setModeForTrack(e,t){const n=this.getTrackById(`telecine-track-${e.id}`);return n&&n.mode!==po[t]&&(n.mode=po[t],fo||"disabled"===t||e.dispatchEvent("cuechange")),this}setSrcForTrack(e,t){const n=this._video.querySelector(`#telecine-track-${e.id}`);return n&&null===n.track.cues&&(n.src=t),this}get audioTracks(){return this._video.audioTracks}enableAudioTrack(e){if(!this.constructor.supportsAudioTracksFromScanner||!this.audioTracks)return null;if(!e)return null;if(!this.audioTracks.getTrackById(e))return null;let t=null;for(let n=0;n<this.audioTracks.length;n++){const r=this.audioTracks[n].id===e;this.audioTracks[n].enabled=r,r&&(t=this.audioTracks[n])}return t}get chaptersTrack(){return this._chaptersTrack}_createChapterCue(e,t,n=null){let r;this._chaptersTrack||(this._chaptersTrack=this._video.addTextTrack("chapters"),this._chaptersTrack.mode="hidden");const i=e.timecode,o=n?n.timecode:t,a=window.VTTCue||window.TextTrackCue;try{r=new a(i,o,e.title)}catch(e){throw new TelecineError("ChaptersNotSupported","Chapters are not supported in this browser.")}r.size=(o-i)/t,r.id=i,this._chaptersTrack.addCue(r)}addChapter(e,t){const n=this.video.chapters,r={timecode:e,title:t};n.push(r),n.sort((e,t)=>e.timecode-t.timecode);const i=n[n.indexOf(r)+1];this._createChapterCue(r,this.video.duration,i),this._updateChapterCues(this._chaptersTrack,this.video.duration)}removeChapter(e){try{this._chaptersTrack.removeCue(e)}catch(e){throw new TelecineError("ChaptersNotSupported","Chapters are not supported in this browser.")}const t=this.video.chapters.find(t=>t.timecode===e.timecode);this.video.chapters.splice(t,1),this._updateChapterCues(this._chaptersTrack,this.video.duration)}_updateChapterCues(e,t){for(let n=0;n<e.cues.length;n++){let r=e.cues[n],i=e.cues[n+1];const o=i?i.startTime:t;r.endTime=o,r.size=(o-r.startTime)/t}this.fire(ki.CHAPTER_CUES_UPDATED)}addChapters(e,t){0!==e.length&&t&&(e=e.filter(e=>this._isValidChapter(e,t))).sort((e,t)=>e.timecode-t.timecode).forEach((n,r)=>this._createChapterCue(n,t,e[r+1]))}addCuePoint(e,t={}){if(this._cuePointTrack||(this._cuePointTrack=this._video.addTextTrack("metadata"),this._cuePointTrack.mode="hidden",this._cuePointTrack.addEventListener("cuechange",e=>{Array.from(e.target.activeCues).forEach(e=>{this.fire(ki.CUE_POINT,Qi.fromVTTCue(e))})}),this._video.addEventListener(Pi.CAN_PLAY,e=>{this._cuePointTrack.mode="hidden"})),e=parseFloat(e),isNaN(e))throw new TypeError("Time must be a number.");if(e<0||e>=this.duration)throw new TypeError("Time must be a positive number less than the duration of the video.");const n=new Qi(e,t);return this._cuePointTrack.addCue(n.vttCue),n}removeCuePoint(e){if(!e)throw new TelecineError("InvalidCuePoint","The specified cue point is not valid.");return this._cuePointTrack.removeCue(e.vttCue),!0}removeAllCuePoints(){return this._cuePointTrack&&this._cuePointTrack.length&&Array.from(this._cuePointTrack.cues).forEach(e=>{this._cuePointTrack.removeCue(e)}),!0}get manifest(){return this._manifest}get manifestLoaded(){return!!this._manifest}get buffered(){return no.from(this._video.buffered)}get cuePoints(){var e,t;return null!=(e=this._cuePointTrack)&&e.cues&&"function"==typeof(null==(t=this._cuePointTrack)?void 0:t.cues[Symbol.iterator])?Array.from(this._cuePointTrack.cues).map(e=>Qi.fromVTTCue(e)):[]}get currentFile(){return this._currentFile}set currentFile(e){const t=!this._video.paused,n=this.currentTime,r=!this._currentFile||e.video.id!==this._currentFile.video.id;if(r||this.takeSnapshot(),this._currentFile=e,r&&(this._video.preload=this._preload),this.constructor===Eo&&this._video.readyState>0&&(this._video.currentTime=0),(Q.iOS||Q.android)&&this._currentFile.video.title){let e=this._currentFile.video.title;this._currentFile.video.subtitle&&(e=`${e} ${this._currentFile.video.subtitle}`),this._video.setAttribute("title",e)}else this._video.removeAttribute("title");this.setVideoSrc(this._currentFile.src,r),this.fire(ki.CURRENT_FILE_CHANGE,e),Q.iOS&&!r&&this.play().catch(this._onPlayError.bind(this)),this.constructor!==Eo||r?t&&this.play().catch(this._onPlayError.bind(this)):(this.seekToTime(n).then(e=>(t&&this.play().catch(this._onPlayError.bind(this)),e)).catch(()=>{}),this.once(Pi.CAN_PLAY,()=>this.removeSnapshot()),this.once(Pi.PLAYING,()=>this.removeSnapshot()))}get currentTime(){return this._video.currentTime}set currentTime(e){this.seekToTime(e)}get disableRemotePlayback(){return this._video.disableRemotePlayback}set disableRemotePlayback(e){this._video.disableRemotePlayback=e,e?this._video.setAttribute("disableRemotePlayback",""):this._video.removeAttribute("disableRemotePlayback")}get duration(){return this._video.duration}get ended(){return this._video.ended}get externalDisplayAvailable(){return this._externalDisplays.some(e=>e.available)}get externalDisplayActive(){return this._externalDisplays.some(e=>e.active)}get loop(){return this._video.loop}set loop(e){this._video.loop=e}get isLowerProfileAvailable(){return null}get muted(){return this._video.muted}set muted(e){this._video.muted=e}get playsinline(){return this._video.playsinline}set playsinline(e){this._video.playsinline=e,e?this._video.setAttribute("playsinline",""):this._video.removeAttribute("playsinline")}get paused(){return this._video.paused}get defaultPlaybackRate(){return this._video.defaultPlaybackRate}set defaultPlaybackRate(e){this._video.defaultPlaybackRate=e}get playbackRate(){return this._video.playbackRate}set playbackRate(e){this._video.playbackRate=e}get played(){return this._video.played}get seekable(){return this._video.seekable}get seeking(){return this._video.seeking}get preload(){return this._preload}set preload(e){this._video.preload=e,this._preload=e}get autoPictureInPicture(){return this._video.autoPictureInPicture}set autoPictureInPicture(e){this._video.autoPictureInPicture=e}get disablePictureInPicture(){return this._video.disablePictureInPicture}set disablePictureInPicture(e){this._video.disablePictureInPicture=e}get pictureInPictureActive(){return this._video.webkitPresentationMode===co||!!document.pictureInPictureElement}get isPlayRequestActive(){var e;return(null==(e=this._playRequest)?void 0:e.active)??!1}requestPictureInPicture(){const e=this;return vo(function(){return mo(function(t,n){var r=function(){if(e._video.readyState<1)return function(e){if(!void 0)return e&&e.then?e.then(uo):Promise.resolve()}(e._initPreload())}();return r&&r.then?r.then(n):n()}(0,function(){switch(Q.pictureInPictureSupportType){case"pip-api":return e._video.requestPictureInPicture();case"webkit-presentation-mode":return e._video.webkitSetPresentationMode(co);default:throw new Error("Picture-in-picture is not supported by this browser")}}))})}_initPreload(){return this.preload="auto",new Promise(e=>{this.once(Pi.LOADED_METADATA,e)})}exitPictureInPicture(){const e=this;return vo(function(){switch(Q.pictureInPictureSupportType){case"pip-api":return mo(document.exitPictureInPicture());case"webkit-presentation-mode":return mo(e._video.webkitSetPresentationMode(lo));default:throw new Error("Picture-in-picture is not supported by this browser")}return mo()})}isInView(){var e;return(null==(e=this._playerInViewTracker)?void 0:e.isInView)??!0}get pictureInPictureEnabled(){if(this.disablePictureInPicture)return!1;switch(Q.pictureInPictureSupportType){case"pip-api":return document.pictureInPictureEnabled;case"webkit-presentation-mode":return!0;default:return!1}}get video(){return this._telecineVideo}get videoElement(){return this._video}set video(e){if(this.reactivate(),this._telecineVideo!==e){if(this._telecineVideo&&(this._telecineVideo.off(ki.FILE_SRC_UPDATE),this._telecineVideo.off("texttracksrcupdate")),this.removeAllCuePoints(),this._telecineVideo=e,this._files=e.files.filter(e=>-1!==this.constructor.supportedVideoTypes.indexOf(e.mime)),this._telecineVideo.on(ki.FILE_SRC_UPDATE,e=>{e===this._currentFile&&this._updateCurrentFile()}),this._telecineVideo.on("texttracksrcupdate",e=>{this.video.currentScanner&&this.video.currentScanner.setSrcForTrack(e,e.src)}),this._options.externalDisplays&&this._options.externalDisplays.length){this._externalDisplays=[];let t=this.constructor.supportedExternalDisplays;Array.isArray(t)||(t=[]);const n=t.map(e=>e.displayName);this._options.externalDisplays.filter(e=>e.supported&&-1!==n.indexOf(e.displayName)).forEach(t=>{const n=new t(e),r=t.displayName.replace("ExternalDisplay","");n.on(Pi.LOADED_METADATA,e=>this.fire(Pi.LOADED_METADATA,e)),n.on("available",()=>this.fire(wi.AVAILABLE,{type:r})),n.on("unavailable",()=>this.fire(wi.UNAVAILABLE,{type:r})),n.on("activated",()=>{"function"==typeof this.onexternaldisplayactivated&&this.onexternaldisplayactivated(n),this.fire(wi.ACTIVATED,{type:r})}),n.on("deactivated",()=>{"function"==typeof this.onexternaldisplaydeactivated&&this.onexternaldisplaydeactivated(n),this.fire(wi.DEACTIVATED,{type:r})}),this._externalDisplays.push(n)})}this._updateCurrentFile(),Q.iOS&&this._externalDisplays.forEach(e=>{"AirPlay"===e.constructor.displayName&&(e.element=this._video)}),this.initDrm()}}get videoWidth(){return this._video.videoWidth}get videoHeight(){return this._video.videoHeight}get volume(){return w(this._video.volume)}set volume(e){this._video.volume=R(e)}get readyState(){return this._video.readyState}onerror(){if(!this._video.error)return!1;switch(this._video.error.code){case this._video.error.MEDIA_ERR_SRC_NOT_SUPPORTED:return this._fireVideoError("MediaSrcNotSupportedError","The media was not suitable."),this._switchToNextFile(),!1;case this._video.error.MEDIA_ERR_DECODE:return-1!==this._lastCurrentTime&&Q.iOS?(this._video.load(),this.currentTime=this._lastCurrentTime,this._lastCurrentTime=-1,!1):(this._fireVideoError("MediaDecodeError","The media could not be decoded."),this._switchToNextFile(),!1);case this._video.error.MEDIA_ERR_NETWORK:return this._fireVideoError("MediaNetworkError","A network error occurred while fetching the media."),!1;case this._video.error.MEDIA_ERR_ABORTED:return this._fireVideoError("MediaAbortedError","The user agent aborted the fetching of the media."),!1;default:return this._fireVideoError(io,"An unknown error occurred."),!1}}_fireVideoError(e,t){this.fire(Pi.ERROR,new TelecineError(e,t))}onended(){if(this._video.paused||this._video.pause(),this.currentTime<this._video.duration)return!1}onwaiting(){return!1}onwebkitbeginfullscreen(){this._inFullscreen=!0}onwebkitendfullscreen(){this._video.webkitPresentationMode===lo&&!0===this._video.controls&&(this._video.controls=!1),this._inFullscreen=!1}onwebkitpresentationmodechanged(){this.fire(this.pictureInPictureActive?Pi.ENTER_PICTURE_IN_PICTURE:Pi.LEAVE_PICTURE_IN_PICTURE)}shouldHandleVideoEvent(e){return!0}handleVideoEvent(e){e.target===this._video&&!1!==this.shouldHandleVideoEvent(e)&&("function"==typeof this[`on${e.type}`]&&!1===this[`on${e.type}`](e)||this.fire(e.type))}handleAudioEvent(){this.fire(ki.AUDIO_TRACK_CHANGED)}swapVideo(e,t){const n=e.paused;this.removeVideoEventListeners(e),this.removeAudioEventListeners(e),e.parentElement.replaceChild(t,e),e.pause(),this._playRequest&&(this._playRequest.video=t),t.currentTime=e.currentTime,n||t.play(),this.addVideoEventListeners(t),this.addAudioEventListeners(t),this._video=t}onexternaldisplayactivated(e){this._externalDisplayActivated||(this._video!==e.element&&(this._originalVideo=this._video,this.swapVideo(this._video,e.element)),this._externalDisplayActivated=!0)}onexternaldisplaydeactivated(e){this._externalDisplayActivated&&(this._originalVideo&&(this.swapVideo(e.element,this._originalVideo),this._originalVideo=null),this._externalDisplayActivated=!1)}setVideoSrc(e){this._video.src=e}canSeekTo(e){const t=this.duration;if(t&&e>t&&(e=t),this._video.seekable.length>0)for(let t=0,n=this._video.seekable.length;t<n;t++)if(this._video.seekable.start(t)<=e&&this._video.seekable.end(t)>=e)return!0;return!1}seekToTime(e){return this.canSeekTo(e)?(this._video.currentTime=e,Promise.resolve(this._video.currentTime)):new Promise(t=>{const n=()=>{this.canSeekTo(e)&&(Object.keys(Pi).forEach(e=>{const t=Pi[e];this._video.removeEventListener(t,n)}),this._video.currentTime=e,t(this._video.currentTime))};Object.keys(Pi).forEach(e=>{const t=Pi[e];this._video.addEventListener(t,n)})})}takeSnapshot(){Xi(this._video,this._element)}removeSnapshot(){Zi(this._element)}getTrackById(e){if(this._textTracks&&this._textTracks[e])return this._textTracks[e];if("function"==typeof this._video.textTracks.getTrackById)return this._video.textTracks.getTrackById(e);const t=document.getElementById(e);return t?t.track:null}initDrm(){const e=this._telecineVideo.drmHandler;e&&e.init(this)}showExternalDisplayPicker(e){if(!this._externalDisplays.length)throw new TelecineError("ExternalDisplayUnavailable","No external displays are available.");if(!e)return void this._externalDisplays[0].showPicker();const t=this._externalDisplays.filter(t=>t.constructor.displayName.replace("ExternalDisplay","")===e)[0];if(!t)throw new TelecineError("InvalidExternalDisplay","The specified external display is not available.");t.showPicker()}setCaptionsShouldDisplay(e){}setCaptionsShouldLoad(e){}_pickFile(){if(this._files.length<1)return null;const e=this._files.slice(0).sort((e,t)=>e.priority-t.priority);return e[0]}_updateCurrentFile(){const e=this._pickFile();e?this.currentFile=e:this.fire(ki.SCANNER_ERROR,{reason:"all files failed"})}_isValidChapter(e,t){return void 0!==e.timecode&&e.timecode>=0&&e.timecode<=t&&void 0!==e.title}_switchToNextFile(){const e=this._files.indexOf(this._currentFile);this._files.splice(e,1),this._updateCurrentFile()}_cleanUpInViewTracking(){var e;null==(e=this._playerInViewTracker)||e.cleanup()}_resetInViewTracking(){this._cleanUpInViewTracking(),this._playerInViewTracker=ie(this._element)}}function bo(e,t=[]){if(0===e.length)return 0;let n=0,r=0;for(let i=0;i<e.length;i++){const o=t[i]||1;r+=o,n+=e[i]*o}return n/r}function yo(e){const t=f(e).sort((e,t)=>e-t),n=Math.floor(t.length/2);return t.length%2?t[n]:(t[n-1]+t[n])/2}class To extends Error{}function So(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}const Co=Ao(function(e,t){const n=this;return function(e,t){var r=function(){if(!a(Vo,n))return So(i(Yo,n,oa).call(n),function(e){l(Vo,n,new e({keepOriginalTimestamps:!0}))})}();return r&&r.then?r.then(t):t()}(0,function(){return new Promise(r=>{a(Vo,n).on("data",t=>{a(Vo,n).off("data");let i=new Uint8Array(t.initSegment.byteLength+t.data.byteLength);i.set(t.initSegment,0),i.set(t.data,t.initSegment.byteLength),r(e.data.isInitSegmentRequest?t.initSegment:i)}),a(Vo,n).push(new Uint8Array(t)),a(Vo,n).flush()})})});function Ao(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}const Lo=Ao(function(){const e=this;return function(){var t=function(){if(a(Bo,e))return function(e){if(!void 0)return e&&e.then?e.then(Io):Promise.resolve()}(a(Bo,e))}();if(t&&t.then)return t.then(Io)}()});function Io(){}var Po=new WeakMap,Ro=new WeakMap,wo=new WeakMap,Oo=new WeakMap,ko=new WeakMap,Do=new WeakMap,No=new WeakMap,Mo=new WeakMap,xo=new WeakMap,Vo=new WeakMap,Bo=new WeakMap,Uo=new WeakMap,Fo=new WeakMap,Ho=new WeakMap,Wo=new WeakMap,Go=new WeakMap,jo=new WeakMap,Yo=new WeakSet;class $o extends bn{constructor(e={}){super(),c(this,Yo),s(this,Po,void 0),s(this,Ro,void 0),s(this,wo,100),s(this,Oo,void 0),s(this,ko,void 0),s(this,Do,void 0),s(this,No,new Set),s(this,Mo,void 0),s(this,xo,!1),s(this,Vo,void 0),s(this,Bo,void 0),s(this,Uo,!1),s(this,Fo,[]),s(this,Ho,[]),s(this,Wo,[]),s(this,Go,[]),s(this,jo,[]),l(Po,this,O("Fetcher","color: #586e75"));const{parallel:t=1,retryAbortErrors:n=!0,retryCount:r=3,timeout:o=0}=e;l(Ro,this,t),l(Oo,this,n),l(ko,this,r),l(Do,this,o),i(Yo,this,zo).call(this)}getPercentileSpeed(e=5,t=.8){return function(e,t){if(0===e.length)return 0;const n=f(e).sort((e,t)=>e-t);if(t<=0)return n[0];if(t>=1)return n[n.length-1];const r=n.length*t,i=Math.floor(r),o=i+1,a=r%1;return o>=n.length?n[i]:n[i]*(1-a)+n[o]*a}(a(jo,this).slice(-e),t)}getAverageSpeed(e=5,t=[]){return bo(a(jo,this).slice(-e),t)}getHarmonicAverageSpeed(e=5){return function(e){if(0===e.length)return 0;let t=0;for(let n=0;n<e.length;n++)t+=1/e[n];return e.length/t}(a(jo,this).slice(-e))}getMedianSpeed(e=5){return yo(a(jo,this).slice(-e))}getResponseSpeeds(){return a(jo,this)}getProgressSpeeds(){return a(Go,this)}getFailedSegments(){return a(Ho,this)}getSuccessfulSegments(){return a(Wo,this)}resetResponseSpeeds(){a(jo,this).length=0}get pendingFetches(){const e=[];return a(No,this).forEach(t=>{const n=a(Mo,this).get(t);n&&(n.elapsedTime=le()-t.data.requestSendTime,e.push(n))}),e}add(e){return new Promise((t,n)=>{const r=i(Yo,this,Zo).call(this,e,t,n);i(Yo,this,Ko).call(this,r),a(xo,this)&&!a(Uo,this)&&i(Yo,this,Xo).call(this)})}abort(e=null){a(Fo,this).filter(t=>!e||e===t.stream).forEach(e=>{e.reject(new To("Stream manually aborted")),this.fire("downloadabort",e.identifier)}),l(Fo,this,a(Fo,this).filter(t=>e&&e!==t.stream)),a(No,this).forEach(t=>{e&&e!==t.stream||t.request.abort()})}start(){a(xo,this)||(l(xo,this,!0),i(Yo,this,Xo).call(this))}stop(){l(xo,this,!1)}saveResponseSpeeds(e,t,n){if(!e.includeWithBandwidthChecks)return;const r=i(Yo,this,na).call(this,e,t,n),o=n<15e4&&Q.navigatorConnectionDownlink?Math.max(ge(),r):r;a(jo,this).push(o),a(jo,this).length>100&&a(jo,this).shift()}}function qo(e){let t=0;for(;t<a(Fo,this).length&&!(a(Fo,this)[t].priority>e.priority);t++);a(Fo,this).splice(t,0,e)}function zo(){if(l(Mo,this,new WeakMap),window.addEventListener("online",()=>{this.start(),a(Bo,this)&&(a(Bo,this).resolve(),l(Bo,this,null))}),window.addEventListener("offline",()=>{this.stop(),this.abort(),l(Bo,this,oe())}),Q.navigatorConnectionDownlink){const e=ge();a(jo,this).push(e)}}function Ko(e){e.hasOwnProperty("priority")?i(Yo,this,qo).call(this,e):a(Fo,this).push(e)}function Xo(){if(!a(xo,this))return;l(Uo,this,!0);const e=a(Ro,this)-a(No,this).size;for(let t=0;t<e;t++)i(Yo,this,Qo).call(this)}function Zo(e,t,n){let r=e;return"object"==typeof e&&e.id&&(r=e.id),Object.assign({},e,{identifier:r,resolve:t,reject:n})}function Jo(){0!==a(No,this).size||0!==a(Fo,this).length?a(No,this).size<a(Ro,this)&&i(Yo,this,Xo).call(this):l(Uo,this,!1)}function Qo(){if(0===a(Fo,this).length)return void l(Uo,this,!1);const e=a(Fo,this).shift(),{url:n,byteRange:r,isInitSegmentRequest:o,identifier:s,stream:c,timeout:u}=e,d={stream:c,data:{url:n,isInitSegmentRequest:o,requestSendTime:le(),uuid:ve()}};let _=a(Do,this);"number"==typeof u&&u>=0&&(_=u);const h={url:n,type:t.SEGMENT,responseType:Xe.ARRAY_BUFFER,retry:a(ko,this),hooks:{beforeRetry:[i(Yo,this,Lo).bind(this)]},onDownloadProgress:i(Yo,this,ea).call(this,s,d),headers:r&&{Range:`bytes=${r}`},retryAbortErrors:a(Oo,this),timeout:_};this.fire("downloadstart",s),d.request=We(h).then(i(Yo,this,ta).call(this,d,e)).catch(i(Yo,this,ia).call(this,d,e)),a(No,this).add(d)}function ea(e,t){let n=0,r=0,i=le();return o=>{if(o.lengthComputable){const s=8*(o.loaded-r),l=le(),c=l-i,u={startTime:i,length:c,bitrate:s/(c/1e3),index:n};n>0&&(a(Go,this).length>=a(wo,this)&&a(Go,this).shift(),a(Go,this).push(u)),i=l,r=o.loaded,n+=1,a(Mo,this).set(t,{bytesTotal:o.total,bytesLoaded:o.loaded,percent:o.loaded/o.total,identifier:e}),this.fire("progress",e)}}}function ta(e,t){const n=this,r=le(),{identifier:o,resolve:s}=t;return Ao(function(l){let c=le()-r;return So(l.arrayBuffer(),function(r){return Object.prototype.hasOwnProperty.call(l,"perfTimings")&&Object.prototype.hasOwnProperty.call(l.perfTimings,"responseStart")&&(t.perfTimings=l.perfTimings),e.data.duration=le()-e.data.requestSendTime,a(No,n).delete(e),a(Mo,n).delete(e),n.saveResponseSpeeds(t,c,r.byteLength),n.fire("downloadend",o,{request:e,response:l}),a(Wo,n).push({url:e.data.url,status:200,duration:e.data.duration}),So(i(Yo,n,ra).call(n,e,r),function(e){s(r=e),i(Yo,n,Jo).call(n)})})})}function na(e,t,n){const r=2e5,i=t/1e3,o=e.perfTimings;let a=n/i;const s=o&&n<=16e3;if(e.excludeConnectTime&&n>16e3&&n<=r){const e=(50*Math.max(0,1-n/r)+150)/1e3;a=n/Math.max(.1,i-e)}else if(s){const e=o.fetchStart||o.workerStart||o.requestStart||0;a=n/(i-Math.max(0,o.responseStart-e)/1e3)}return 8*a}function ra(e,t){return e.data.url&&e.data.url.split("?")[0].endsWith(".ts")?i(Yo,this,Co).call(this,e,t):Promise.resolve(new Uint8Array(t))}function ia(e,t){const{identifier:n,reject:r,size:o}=t;return t=>{const s=le()-e.data.requestSendTime;if(e.data.duration=s,t instanceof be)a(Ho,this).push({url:e.data.url,status:"abort",duration:s}),this.fire("downloadabort",n);else if(t instanceof ye){const r=t.response.status;a(Ho,this).push({url:e.data.url,status:r,duration:s}),this.fire("downloaderror",n,r)}else if(t instanceof Se){if(a(Ho,this).push({url:e.data.url,status:"timeout",duration:s}),"number"==typeof o&&o>0&&t.timeoutMs>0){let e=8*o/(t.timeoutMs/1e3);e*=.5,a(Po,this).call(this,"Adding degraded speed of",e,"after timeout of",t.timeoutMs,"ms"),a(jo,this).push(e)}this.fire("downloadtimeout",n,{timeoutMs:t.timeoutMs})}a(Mo,this).delete(e),a(No,this).delete(e),r(t),i(Yo,this,Jo).call(this)}}function oa(){return P("module/mux-mp4.js")}var aa=new WeakMap,sa=new WeakMap,la=new WeakMap,ca=new WeakMap,ua=new WeakMap,da=new WeakMap,_a=new WeakMap,ha=new WeakMap,pa=new WeakMap,ma=new WeakMap,fa=new WeakMap,va=new WeakMap,ga=new WeakMap,Ea=new WeakMap,ba=new WeakMap,ya=new WeakMap,Ta=new WeakMap,Sa=new WeakMap,Ca=new WeakMap,Aa=new WeakMap,La=new WeakMap,Ia=new WeakMap,Pa=new WeakMap,Ra=new WeakSet;class wa extends bn{constructor(e,t){super(),c(this,Ra),s(this,aa,void 0),s(this,sa,void 0),s(this,la,void 0),s(this,ca,void 0),s(this,ua,void 0),s(this,da,void 0),s(this,_a,-1),s(this,ha,!1),s(this,pa,!1),s(this,ma,{}),s(this,fa,void 0),s(this,va,!0),s(this,ga,null),s(this,Ea,!0),s(this,ba,!1),s(this,ya,!1),s(this,Ta,void 0),s(this,Sa,null),s(this,Ca,void 0),s(this,Aa,null),s(this,La,[]),s(this,Ia,void 0),s(this,Pa,[]),l(da,this,O("Buffer","color: #586e75")),l(ua,this,t),l(Ca,this,e),l(aa,this,i(Ra,this,ka).bind(this)),l(sa,this,i(Ra,this,Va).bind(this)),l(la,this,i(Ra,this,xa).bind(this)),l(ca,this,i(Ra,this,Ha).bind(this)),a(Ca,this).on("durationset",a(aa,this))}get activeStream(){return a(La,this)[a(_a,this)]||null}get activeStreamIndex(){return a(_a,this)}get endTime(){if(!a(Aa,this))return void a(da,this).warn("SourceBuffer is not set.");const e=a(Aa,this).buffered;return e.length>0?e.end(e.length-1):void 0}get sourceBuffer(){return a(Aa,this)}set sourceBuffer(e){l(Aa,this,e),i(Ra,this,Da).call(this),this.fire("sourcebufferattach")}get streams(){return a(La,this)}addStream(e){e.on("segmentadd",a(ca,this));const t=a(La,this).push(e)-1;e.index=t,-1===a(_a,this)&&(i(Ra,this,Ma).call(this,t),l(ba,this,!0))}getBufferState(){return a(ma,this)}setBufferState(e){l(ma,this,e)}streamIndexAtTime(e){if(a(ma,this)[void 0])return this.activeStreamIndex;const t=i(Ra,this,Oa).call(this,e)-1,n=a(ma,this)[t];return(null==n?void 0:n.stream)||-1}switchTo(e,t=!0,n={}){let r;r="number"==typeof e?e:e.index;let o=a(_a,this)!==r;const s=o;if(!o&&a(ba,this)&&(o=!0),o){l(ba,this,!1);const e=a(_a,this),n=a(La,this)[e];this.fire("streamchangestart",e,r),n&&s&&t&&n.abort(),l(Ia,this,r),i(Ra,this,Ma).call(this,r)}return i(Ra,this,Ha).call(this),new Promise(e=>{o?l(Sa,this,()=>{a(Ia,this)===r&&(l(Sa,this,null),e(),this.fire("streamchange",r,n))}):e()})}isTimeInBuffer(e){if(!a(Aa,this))return a(da,this).warn("SourceBuffer is not set."),!1;for(let t=0;t<a(Aa,this).buffered.length;t++){const n=a(Aa,this).buffered.start(t),r=a(Aa,this).buffered.end(t);if(n<=e&&r>=e)return!0}return!1}hasAppendedFinalSegment(){return void 0!==a(fa,this)&&this.isTimeInBuffer(a(fa,this))}clear(){a(La,this).forEach(e=>e.clear())}remove(e,t=a(Ca,this).mediaSource.duration){return new Promise(n=>{a(Pa,this).push([e,t,n]),i(Ra,this,Ha).call(this)})}removeEventListeners(){a(Aa,this)&&(a(Aa,this).removeEventListener("updateend",a(la,this)),i(Ra,this,Na).call(this,a(Aa,this))&&a(Aa,this).removeEventListener("bufferedchange",a(sa,this)))}removeSorcerer(){a(Ca,this).off("durationset",a(aa,this)),l(Ca,this,null)}}function Oa(e){let t=Math.floor(e/6);return e>6&&e%6>=2?t+=1:e<8&&(t=1),t}function ka(){const e=a(Ca,this).mediaSource.duration,t=i(Ra,this,Oa).call(this,e);for(let e=0;e<t;e++)a(ma,this)[e]={segment:e,stream:null,type:a(ua,this)}}function Da(){a(Aa,this)?(a(Aa,this).addEventListener("updateend",a(la,this)),i(Ra,this,Na).call(this,a(Aa,this))&&a(Aa,this).addEventListener("bufferedchange",a(sa,this))):a(da,this).warn("SourceBuffer is not set.")}function Na(e){return"undefined"!=typeof ManagedSourceBuffer&&e instanceof ManagedSourceBuffer}function Ma(e){l(Ea,this,!0),l(_a,this,e),a(Ca,this).setStreamIndex(e)}function xa(){i(Ra,this,Ua).call(this),i(Ra,this,Fa).call(this),i(Ra,this,Ha).call(this)}function Va(e){var t;(null==(t=e.removedRanges)?void 0:t.length)>0&&a(da,this).call(this,"Browser removed %s buffer:",a(ua,this),(e=>{const t=[];for(let n=0;n<e.length;n++)t.push(`${e.start(n)}-${e.end(n)}`);return t.join(", ")})(e.removedRanges))}function Ba(){if(a(Aa,this))try{const e=a(Aa,this).buffered,t=a(Ca,this)._video.buffered;if(e.length&&t.length){const n=e.start(0),r=t.start(0);n<r&&a(Ca,this).removeBuffer(0,r)}}catch(e){a(da,this).error("Error failed to handle mismatch between video and sourceBuffer.")}else a(da,this).warn("SourceBuffer is not set.")}function Ua(){if(a(pa,this)&&this.endTime)return l(pa,this,!1),l(fa,this,this.endTime),a(Ca,this).checkEndOfStream(),void i(Ra,this,Ba).call(this);this.activeStream&&!this.activeStream.hasNextSegment()&&void 0!==a(fa,this)&&a(fa,this)>0&&"open"===a(Ca,this).readyState&&a(Ca,this).checkEndOfStream()}function Fa(){a(ga,this)&&(this.fire("appendbufferend",a(ga,this)),l(ga,this,null),a(Sa,this)&&a(Sa,this).call(this))}function Ha(){if(!a(Aa,this))return a(da,this).log("SourceBuffer is not set. Waiting for sourcebufferattach event."),void this.on("sourcebufferattach",a(ca,this));this.activeStream&&"closed"!==a(Ca,this).readyState&&(a(Aa,this).updating||(a(Pa,this).length?i(Ra,this,Wa).call(this):a(ya,this)||a(ha,this)||(a(Ea,this)?i(Ra,this,Ga).call(this):i(Ra,this,ja).call(this))))}function Wa(){const e=a(Aa,this),t=a(Pa,this).shift();if(!t||!e)return void a(da,this).warn("No entries to remove or sourceBuffer is not set.");const[n,r,o]=t,s=()=>{e.removeEventListener("updateend",s),o(),void 0!==a(Ta,this)&&clearTimeout(a(Ta,this)),l(Ta,this,setTimeout(()=>{l(ya,this,!1),i(Ra,this,Ha).call(this)},5e3))};e.addEventListener("updateend",s),e.remove(n,r)}function Ga(){l(Ea,this,!1),l(ha,this,!0),this.activeStream?this.activeStream.getInitSegment().then(e=>(l(ga,this,null),a(Aa,this)&&e&&a(Aa,this).appendBuffer(e),l(ha,this,!1),e)).catch(e=>{a(da,this).error("Error appending init segment to the buffer:",e),l(Ea,this,!0),l(ha,this,!1)}):a(da,this).error("No active stream to append init segment.")}function ja(){if(!this.activeStream||!a(Aa,this))return void a(da,this).error("No active stream or sourceBuffer to append segment.");const e=this.activeStream.getNextSegment();if(!e)return;const t=this.activeStream.getIdForSegment(e);this.activeStream.isFinal(e)&&l(pa,this,!0),l(ga,this,t),this.fire("appendbufferstart",t);try{a(Aa,this).appendBuffer(e),a(ma,this)[t.segment]=t,a(va,this)&&(l(va,this,!1),this.fire("initialbufferstart"))}catch(t){if("QuotaExceededError"===t.name){l(ya,this,!0),this.fire("quotaexceedederror",a(Aa,this).buffered),a(da,this).error("Error QuotaExceededError.");const t=6;if(a(Ca,this)._video.currentTime>t){const e=0,n=a(Ca,this)._video.currentTime-t;a(da,this).call(this,`Removing buffer from ${e} to ${n}…`),a(Ca,this).removeBuffer(e,n)}this.activeStream.dequeueSegment(e)}}}function Ya(){}var $a=new WeakMap,qa=new WeakMap,za=new WeakMap,Ka=new WeakMap,Xa=new WeakMap,Za=new WeakMap,Ja=new WeakMap;class Qa extends bn{static isValidSegmentUrl(e){return"string"==typeof e||"object"==typeof e&&"url"in e&&"byteRange"in e&&"string"==typeof e.url&&"string"==typeof e.byteRange}constructor(e,t="",n=new $o){super(),d(this,"codec",void 0),d(this,"index",NaN),s(this,$a,void 0),s(this,qa,new WeakMap),s(this,za,void 0),s(this,Ka,void 0),s(this,Xa,!0),s(this,Za,[]),s(this,Ja,{}),l($a,this,O("Stream","color: #586e75")),l(Ka,this,e),this.codec=t,l(za,this,n),a(za,this).start()}get pendingFetches(){return a(za,this).pendingFetches}getIdForSegment(e){return Qa.isValidSegmentUrl(e)?a(Ja,this)[e]:a(qa,this).get(e).id}getSegmentUrl(e){return"object"==typeof e&&"url"in e?e.url:e}getSegmentByteRange(e){return"object"==typeof e&&"byteRange"in e?e.byteRange:void 0}isFinal(e){return a(qa,this).get(e).final}addSegment(e,{identifier:t=null,isFinalSegment:n=!1,loadOnly:r=!1,priority:i=0,includeWithBandwidthChecks:o=!0,excludeConnectTime:s=!1,timeout:l=null,size:c=null}={}){if(a(Xa,this)&&this.getInitSegment(),Qa.isValidSegmentUrl(e)){a(Ja,this)[e]=t||e;const u=this.getIdForSegment(e);return this.fire("queued",u),a(za,this).add({byteRange:this.getSegmentByteRange(e),excludeConnectTime:s,id:u,includeWithBandwidthChecks:o,isInitSegmentRequest:!1,priority:i,size:c,stream:this,timeout:l,url:this.getSegmentUrl(e)}).then(i=>{a(qa,this).set(i,{id:t||e,final:n}),a(Za,this).push(i),this.fire("bufferqueueadd",u),r||this.fire("segmentadd")})}return a(qa,this).set(e,{id:t,final:n}),a(Za,this).push(e),this.fire("bufferqueueadd",t),Promise.resolve()}clear(){l(Za,this,[])}abort(){const e=this;return function(e){try{var t=Promise.resolve(e());return t}catch(e){return Promise.reject(e)}}(function(){return function(e){return e&&e.then||(e=Promise.resolve(e)),e}(function(t,n){var r=function(){if(a(Xa,e))return function(e){if(e&&e.then)return e.then(Ya)}(function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(function(){return function(e){if(!void 0)return e&&e.then?e.then(Ya):Promise.resolve()}(e.getInitSegment())},function(t){a($a,e).error("Error getting init segment:",t)}))}();return r&&r.then?r.then(n):n()}(0,function(){a(za,e).abort(e)}))})}hasNextSegment(){return a(Za,this).length>0}getNextSegment(){return a(Za,this).shift()}dequeueSegment(e){a(Za,this).unshift(e)}getInitSegment(){const e=this.getSegmentUrl(a(Ka,this));return e?(l(Xa,this,!1),Qa.isValidSegmentUrl(e)?a(za,this).add({byteRange:this.getSegmentByteRange(a(Ka,this)),id:null,isInitSegmentRequest:!0,priority:0,stream:this,url:e}).then(e=>(l(Ka,this,e),a(Ka,this))):Promise.resolve(a(Ka,this))):Promise.resolve(null)}}var es=new WeakMap,ts=new WeakMap,ns=new WeakMap,rs=new WeakMap,is=new WeakMap,os=new WeakMap,as=new WeakMap,ss=new WeakMap,ls=new WeakMap,cs=new WeakMap,us=new WeakMap,ds=new WeakSet;class _s{constructor(e,t=-1){c(this,ds),d(this,"streamIndex",void 0),s(this,es,void 0),s(this,ts,void 0),s(this,ns,void 0),s(this,rs,void 0),s(this,is,!1),s(this,os,void 0),s(this,as,{}),s(this,ss,{}),s(this,ls,0),s(this,cs,0),s(this,us,!1),l(rs,this,e),this.streamIndex=t,l(es,this,this.start.bind(this)),l(ts,this,this.stop.bind(this)),l(ns,this,i(ds,this,fs).bind(this))}init(){i(ds,this,hs).call(this)}start(){l(is,this,!0),i(ds,this,ms).call(this)}stop(){l(is,this,!1)}destroy(){this.stop(),i(ds,this,ps).call(this)}getDroppedFrameRate(e,t=-1,n="average"){const r=a(as,this)[t];if(!r||r.length<e)return 0;const i=r.slice(-e);return"median"===n?yo(i):bo(i)}getDroppedFrameTotal(){return{dropped:i(ds,this,vs).call(this),total:i(ds,this,gs).call(this)}}}function hs(){a(us,this)||(a(rs,this).addEventListener("playing",a(es,this)),a(rs,this).addEventListener("pause",a(ts,this)),a(rs,this).addEventListener("ended",a(ts,this)),document.addEventListener("visibilitychange",a(ns,this)),l(us,this,!0))}function ps(){a(rs,this).removeEventListener("playing",a(es,this)),a(rs,this).removeEventListener("pause",a(ts,this)),a(rs,this).removeEventListener("ended",a(ts,this)),document.removeEventListener("visibilitychange",a(ns,this)),l(us,this,!1)}function ms(){if(!a(is,this)||-1===this.streamIndex)return;if(Q.browser.safari&&(document.hidden||"hidden"===document.visibilityState))return;void 0!==a(os,this)&&clearTimeout(a(os,this));const e=i(ds,this,vs).call(this),t=e-a(ls,this);l(ls,this,e);const n=i(ds,this,Es).call(this),r=n-a(cs,this);l(cs,this,n),a(as,this)[this.streamIndex]||(a(as,this)[this.streamIndex]=[]),a(ss,this)[this.streamIndex]||(a(ss,this)[this.streamIndex]=[]),a(as,this)[this.streamIndex].length>100&&a(as,this)[this.streamIndex].shift(),a(ss,this)[this.streamIndex].length>100&&a(ss,this)[this.streamIndex].shift(),a(as,this)[this.streamIndex].push(t),a(ss,this)[this.streamIndex].push(r),l(os,this,setTimeout(()=>{i(ds,this,ms).call(this)},1e3))}function fs(){!Q.browser.safari||document.hidden&&"hidden"===document.visibilityState||i(ds,this,ms).call(this)}function vs(){return"function"==typeof a(rs,this).getVideoPlaybackQuality?a(rs,this).getVideoPlaybackQuality().droppedVideoFrames:a(rs,this).webkitDroppedFrameCount||0}function gs(){return"function"==typeof a(rs,this).getVideoPlaybackQuality?a(rs,this).getVideoPlaybackQuality().totalVideoFrames:a(rs,this).webkitDecodedFrameCount||0}function Es(){if("function"==typeof a(rs,this).getVideoPlaybackQuality){const e=a(rs,this).getVideoPlaybackQuality();return e.totalVideoFrames-e.droppedVideoFrames}return a(rs,this).webkitDecodedFrameCount||0}var bs=new WeakMap,ys=new WeakMap,Ts=new WeakMap,Ss=new WeakMap,Cs=new WeakMap,As=new WeakMap,Ls=new WeakMap,Is=new WeakMap,Ps=new WeakMap,Rs=new WeakMap,ws=new WeakMap;class Os extends bn{constructor(e,t={}){super(),d(this,"_video",void 0),d(this,"allowSegmentRequests",void 0),s(this,bs,void 0),s(this,ys,void 0),s(this,Ts,void 0),s(this,Ss,void 0),s(this,Cs,void 0),s(this,As,void 0),s(this,Ls,void 0),s(this,Is,void 0),s(this,Ps,void 0),s(this,Rs,void 0),s(this,ws,void 0),d(this,"isInstanceofManagedMediaSource",e=>"undefined"!=typeof ManagedMediaSource&&e instanceof ManagedMediaSource),l(As,this,O("MediaSorcerer","color: #586e75")),this._video=e,l(Is,this,t),this.allowSegmentRequests=!0;const n=a(Is,this).disableMMS;l(Ls,this,new(D(n))),a(As,this).log("Media Source API: "+this._mediaSourceAPIName(a(Ls,this)));const{fetcherTimeout:r=0,fetcherRetryAbortErrors:i=!0}=a(Is,this);l(Ps,this,new _s(e)),l(Cs,this,new $o({parallel:1,timeout:r,retryAbortErrors:i})),l(bs,this,this._onMSSourceClose.bind(this)),l(ys,this,this._onMSSourceOpen.bind(this)),l(Ss,this,{audio:null,video:null}),l(Ts,this,[]),l(ws,this,null),this._attachEvents()}setStreamIndex(e){a(Ps,this).streamIndex=e}get activeStreamIndex(){return 1===a(Ts,this).length&&this.video?this.video.activeStreamIndex:(a(As,this).warn("The activeStreamIndex property on MediaSorcerer only works with single streams"),-1)}get mediaSource(){return a(Ls,this)}get pendingFetches(){return a(Cs,this).pendingFetches}get readyState(){return a(Ls,this).readyState}get streams(){return 1===a(Ts,this).length&&this.video?this.video.streams:(a(As,this).warn("The streams property on MediaSorcerer only works with single streams"),!1)}get audio(){return a(Ss,this).audio?a(Ss,this).audio:(a(As,this).warn("No audio streams have been added to MediaSorcerer"),!1)}get video(){return a(Ss,this).video?a(Ss,this).video:(a(As,this).warn("No video streams have been added to MediaSorcerer"),!1)}getCurrentSpeed({type:e="average",howMany:t=10,weights:n=[],percentile:r}={}){switch(e){case"harmonicAverage":return a(Cs,this).getHarmonicAverageSpeed(t);case"percentile":return a(Cs,this).getPercentileSpeed(t,r);case"median":return a(Cs,this).getMedianSpeed(t);case"average":return a(Cs,this).getAverageSpeed(t,n)}}getResponseSpeeds(){return a(Cs,this).getResponseSpeeds()}getFailedSegments(){return a(Cs,this).getFailedSegments()}getSuccessfulSegments(){return a(Cs,this).getSuccessfulSegments()}getDroppedFrameRate(e,t=this.activeStreamIndex,n="average"){return a(Ps,this).getDroppedFrameRate(e,t,n)}getDroppedFrameTotal(){return a(Ps,this).getDroppedFrameTotal()}clear(){a(Ts,this).forEach(e=>e.clear())}initFrameDropper(){a(Ps,this).init()}streamIndexAtTime(e,t){const n=a(Ss,this)[t];return n?n.streamIndexAtTime(e):-1}removeBuffer(e=0,t=this._video.duration){if(e>=(t=t||0))return Promise.resolve();const n=a(Ts,this).map(n=>n.remove(e,t));return Promise.all(n)}setLiveSeekableRange(e,t){var n;"open"===(null==(n=a(Ls,this))?void 0:n.readyState)&&a(Ls,this).setLiveSeekableRange(e,t)}addStream(e,t){const n=this._getCodecType(e);if(!a(Ss,this)[n]){const t=new wa(this,n);a(Ss,this)[n]=t,a(Ts,this).push(t),a(Rs,this).then(()=>{let r;try{r=a(Ls,this).addSourceBuffer(e)}catch(e){if(22!==e.code)return a(As,this).error(e),void this.fire("srcnotsupported",e);r=a(Ss,this)[n]}if(a(Is,this).duration){const e=.1;r.appendWindowEnd=a(Is,this).duration+e}t.sourceBuffer=r}).catch(e=>{a(As,this).error(e)}),["appendbufferstart","appendbufferend","streamchange","streamchangestart","initialbufferstart","quotaexceedederror"].forEach(e=>{t.on(e,(...t)=>{this.fire.apply(this,[e].concat(t))})})}const r=new Qa(t,e,a(Cs,this));["queued","bufferqueueadd"].forEach(e=>{r.on(e,t=>{this.fire(e,t)})});const i=a(Ss,this)[n];return i&&i.addStream(r),r}checkEndOfStream(){if(!a(Ts,this).every(e=>e.hasAppendedFinalSegment()))return;const e=()=>{this._video.removeEventListener("timeupdate",e),this.endOfStream()};this._video.addEventListener("timeupdate",e)}abortFetches(){a(Cs,this).abort()}endOfStream(){if(!a(Ts,this).every(e=>e.isTimeInBuffer(this._video.currentTime))){const e=1;if(!(Q.browser.firefox&&this._video.currentTime<e))return}"open"===a(Ls,this).readyState&&(this._sourceBuffersAreUpdating()||(a(As,this).log("Firing MediaSource.endOfStream()"),a(Ls,this).endOfStream(),this.fire("endofstream")))}destroy(){this.clear(),this._removeEventListeners(),this.off(),a(Ps,this).destroy(),a(Cs,this).abort();const e=this._video.querySelectorAll("source");(this._video.src||e.length>0)&&(this._video.removeAttribute("src"),e.forEach(e=>{this._video.removeChild(e)}),this._video.load())}_mediaSourceAPIName(e){return this.isInstanceofManagedMediaSource(e)?"ManagedMediaSource":"MediaSource"}_attachEvents(){l(Rs,this,new Promise(e=>{l(ws,this,e),a(Ls,this).addEventListener("sourceopen",a(ys,this)),a(Ls,this).addEventListener("sourceclose",a(bs,this))})),["downloadstart","downloadend","downloadabort","downloaderror","downloadtimeout","progress"].forEach(e=>{a(Cs,this).on(e,(...t)=>{this.fire.apply(this,[e].concat(t))})}),this.isInstanceofManagedMediaSource(a(Ls,this))&&(a(Ls,this).addEventListener("startstreaming",()=>{a(As,this).log("startstreaming event fired"),this.allowSegmentRequests=!0}),a(Ls,this).addEventListener("endstreaming",()=>{a(As,this).log("endstreaming event fired"),this.allowSegmentRequests=!1}))}_sourceBuffersAreUpdating(){for(let e=0;e<a(Ls,this).sourceBuffers.length;e++)if(a(Ls,this).sourceBuffers[e].updating)return!0;return!1}_onMSSourceOpen(){a(As,this).log("MediaSource open"),a(Ls,this).removeEventListener("sourceopen",a(ys,this)),URL.revokeObjectURL(this._video.src),this._video.querySelectorAll("source").forEach(e=>{var t;0===(null==(t=e.src)?void 0:t.indexOf("blob"))&&URL.revokeObjectURL(e.src)}),a(Is,this).duration&&(a(Ls,this).duration=a(Is,this).duration,this.fire("durationset")),a(ws,this)&&a(ws,this).call(this)}_onMSSourceClose(){a(As,this).log("MediaSource closed"),a(Ls,this).removeEventListener("sourceclose",a(bs,this)),this.fire("sourceclose")}_removeEventListeners(){a(Ts,this).forEach(e=>e.removeEventListeners())}_getCodecType(e){return 0===e.indexOf("audio")?"audio":"video"}}class ks{get displayName(){return"Brain"}constructor(e){this.scanner=e,this.STREAM_TYPE_VIDEO="video",this.STREAM_TYPE_AUDIO="audio"}destroy(){}shouldPowerUp(e,t){return!1}shouldPowerDown(e,t){return!1}canPowerUp(e,t){return 1!==e.length&&t<e.length-1}canPowerDown(e,t){return 1!==e.length&&t>0}filterStreams(e){return e}}class Ds extends ks{get displayName(){return"MediaSource"}constructor(e,t={}){super(e),this._options=t,this.blacklisted=[],this.whitelisted=[],this.SEGMENT_DURATION=6,this._bufferTargetSeconds=t.bufferTarget||6}isTimeInBuffer(e,t,n){return this._timesAreInRange(e,e,t,n,1)}getDistanceFromBuffer(e,t){let n=e;for(let r=0;r<t.length;r++)if(t.start(r)<=e&&t.end(r)>=e){n=t.end(r);break}return n-e}blacklist(e){this.blacklisted[e]=1}lock(e=[]){this.whitelisted=e}filterStreams(e,t,n,r=null){const i=[];let o,a=!1;for(let s=0;s<e.length;s++)if(o&&o[0]===e[s].width&&o[1]===e[s].height)i.push(e[s]);else{if(a)break;this.blacklisted[s]&&-1===this.whitelisted.indexOf(s)||this.whitelisted.length&&-1===this.whitelisted.indexOf(s)||(this.whitelisted.length?i.push(e[s]):(this._getScaleFromDimensions(t,n,e[s].width,e[s].height,r)>=(n<1e3/(window.devicePixelRatio||1)?1.75:1)&&(a=!0),i.push(e[s]),o=[e[s].width,e[s].height]))}return i}getCurrentSpeed(e="average"){let t=3,n=[1,2,5];return this._options.tests&&this._options.tests.harmonic_average&&this._options.tests.harmonic_average.group&&(e="harmonicAverage",t=this._getMaxLoadableSegmentsAuto(),n=[]),this.scanner.sorcerer.getCurrentSpeed({type:e,howMany:t,weights:n})}shouldUseSurroundSound(e,t){return"240p"!==e[t].quality}getAudioIndexFromVideo(e,t,n){if(0===t.length)return!1;if(!e[n])return 0;const r=t.filter(({channels:e})=>e>2);if(r.length>0&&this.shouldUseSurroundSound(e,n)){const e=r[r.length-1];return t.indexOf(e)}return t.length>1&&0===n&&e[n].height<=360&&e.length>1?"mp4a.40.2"===t[0].codecs&&t[0].bitrate<8e4&&"240p"!==e[n].quality?1:0:t.length-1}_getVisibleDimensions(e,t,n,r){const i=n/r,o=e-t*i,a=t-e/i;let s=e-o,l=t-a;return o>0&&(l=t),a>0&&(s=e),[s,l]}_getScaleFromDimensions(e,t,n,r,i=null){const o=this._getVisibleDimensions(e,t,n,r);let a=n*r;i&&(a*=i);const s=window.devicePixelRatio||1;return a/(o[0]*o[1]*s*s)}_getMaxLoadableSegmentsAuto(){const e=function(e,t){return e&&e.tests&&e.tests[t]?e.tests[t]:null}(this._options,"lookahead_count");return e&&e.group&&e.data.count?e.data.count:e&&e.data.segment_lookahead_count?e.data.segment_lookahead_count:3}getBufferTarget(){return this._bufferTargetSeconds}_getSecondsToLoadAhead(e,t,n,r=!1){if(r)this._bufferTargetSeconds=1*this.SEGMENT_DURATION;else if(1===this.whitelisted.length){const e=11e6,t=n&&n.bitrate>e;this._bufferTargetSeconds=t?30:15*this.SEGMENT_DURATION}else this._bufferTargetSeconds=this._getMaxLoadableSegmentsAuto()*this.SEGMENT_DURATION;return this._bufferTargetSeconds}_timesAreInRange(e,t,n,r,i=0){if(!n)return!1;t=Math.min(t,r);for(let r=0;r<n.length;r++){const o=n.start(r),a=n.end(r),s=qi(o)-i,l=qi(a)+i;if(s<=e&&l>=t){if(t<o||e>a)continue;return!0}}return!1}_hasSeparateStreams(e){return e.video.length>0&&e.audio.length>0}_isSegmentInBuffer(e,t,n,r){let i=1;return this._hasSeparateStreams(r)&&(i=.1),this._timesAreInRange(e.start,e.end,t,n,i)}}class Ns extends Ds{get displayName(){return"Skyfire"}constructor(e,t={}){super(e,t),this.BANDWIDTH_UPSWITCH_THRESHOLD=.85,this.BANDWIDTH_DOWNSWITCH_THRESHOLD=.9,this.DEFAULT_TIMEOUT=8e3,this.SEGMENT_RELATIVE_TIMEOUT_RATIO=4/3,this.MINIMUM_TIMEOUT=1e3,this.FRAME_DROP_WINDOW_SECONDS=10}shouldPowerUp(e,t,n){n&&this._options.startingBandwidthThreshold&&(this.BANDWIDTH_UPSWITCH_THRESHOLD=this._options.startingBandwidthThreshold);let r=e.indexOf(t);if(-1===r&&(r=0),!this.canPowerUp(e,r))return Promise.resolve({index:!1,reasonForSwitch:null});const i=this.getCurrentSpeed();if(!i)return Promise.resolve({index:!1,reasonForSwitch:null});const o=this.getStreamFromSpeed(i,e,this.BANDWIDTH_UPSWITCH_THRESHOLD);return o===r||!n&&o>r&&se(this.scanner.currentTime,this.scanner._video.buffered)<1.5*this.SEGMENT_DURATION?Promise.resolve({index:!1,reasonForSwitch:null}):Promise.resolve({index:o,reasonForSwitch:3})}shouldPowerDown(e,t){const n=e.indexOf(t);if(-1===n){const t=this.isTimeInBuffer(this.scanner._video.duration,this.scanner._video.buffered,this.scanner._video.duration);return this.whitelisted.length||this.blacklisted.length||!t?Promise.resolve({index:e.length-1,reasonForSwitch:6}):Promise.resolve({index:!1,reasonForSwitch:null})}if(!this.canPowerDown(e,n))return Promise.resolve({index:!1,reasonForSwitch:null});const r=this.getCurrentSpeed();if(!r)return Promise.resolve({index:!1,reasonForSwitch:null});if(this.hasTooManyDroppedFrames(n,t,this._options.droppedFrameSwitchPercent))return this.blacklist(n),Promise.resolve({index:n-1,reasonForSwitch:2});const i=this.getStreamFromSpeed(r,e,this.BANDWIDTH_DOWNSWITCH_THRESHOLD);return i===n?Promise.resolve({index:!1,reasonForSwitch:null}):Promise.resolve({index:i,reasonForSwitch:1})}hasTooManyDroppedFrames(e,t,n){return this.scanner.sorcerer.getDroppedFrameRate(this.FRAME_DROP_WINDOW_SECONDS,e,"median")/t.framerate*100>=n}getTimeEstimateToLoad(e,t){var n;const r=null==t||null==(n=t.segments)?void 0:n[e];if(!r)return 3;const i=this.getCurrentSpeed(),o=r.end-r.start;return r.size?(8*r.size+t.audioBitrate*o)/i*1.3:o*(t.avg_bitrate+t.audioBitrate)/i*1.3}canPlayFromTimeInStream(e,t){if(!this.isTimeInBuffer(e,this.scanner._video.buffered,this.scanner._video.duration))return!1;if(!t)return!1;const n=this.getSegmentsToLoad(!1,this.STREAM_TYPE_VIDEO,t);if(0===n.length)return!0;const r=se(e,this.scanner._video.buffered);return this.getTimeEstimateToLoad(n[0],t)<r}getSegmentsToLoad(e,t=this.STREAM_TYPE_VIDEO,n,r=!1){const i=this.scanner._video;if(i.webkitCurrentPlaybackTargetIsWireless)return[];const o=this.scanner.currentTime,a=[],s=o+this._getSecondsToLoadAhead(o,i.duration,n,r),l=this.scanner.sorcerer[t].activeStreamIndex,c=this.scanner._streams[t][l];if(!c)return a;const u=this.scanner.sorcerer[t].sourceBuffer;let d=null;u&&(d=u.buffered);for(let t=0;t<c.segments.length;t++){const n=c.segments[t];if(n.end<o||n.start>s)continue;const r=o>=n.start&&o<n.end,i=this._isSegmentInBuffer(n,d,this.scanner._video.duration,this.scanner._streams);!e&&i||e&&i&&r||(r||s>=n.start)&&a.push(t)}return a}getSegmentRelativeTimeout(e,t,n){var r;const i=null==t?void 0:t.avg_bitrate,o=null==(r=e[0])?void 0:r.avg_bitrate;if(!i||!o||!n)return this.DEFAULT_TIMEOUT;if(i===o)return this.DEFAULT_TIMEOUT;const a=n*this.SEGMENT_RELATIVE_TIMEOUT_RATIO;return Math.max(this.MINIMUM_TIMEOUT,Math.min(this.DEFAULT_TIMEOUT,a))}getStreamFromSpeed(e,t,n=this.BANDWIDTH_UPSWITCH_THRESHOLD){let r=0;for(let i=r;i<t.length;i++)e*n>t[i].avg_bitrate+t[i].audioBitrate&&(r=i);return r}}class Ms{constructor(e,t){this._video=e,this._getCurrentStream=t}start(){return clearInterval(this._checkGapInterval),this._checkGapInterval=setInterval(this._checkGap.bind(this),200),this._checkGap()}stop(){clearInterval(this._checkGapInterval)}onSegmentAppended(){this._checkGap()}_checkGap(){const e=this._video.buffered,t=this._video.currentTime,n=this._getGapIndex(e,t);if(0===this._video.readyState)return!1;if(this._video.paused)return!1;const r=this._video.duration;if(t>=r)return this._video.currentTime=r-.1,!0;if(e.length<=n)return!1;const i=e.start(n);return!(i>=r)&&!(i-t>.5||0!==n||(this.stop(),this._correctFirstSegmentStart("audio",i),this._correctFirstSegmentStart("video",i),this._video.currentTime=i,0))}_getGapIndex(e,t){if(!e||!e.length)return null;let n=0;for(;n<e.length;n++){const r=e.start(n),i=e.end(n);if(r>t&&(0===n||i-t<=.1))break}return n>=0?n:null}_correctFirstSegmentStart(e,t){const n=this._getCurrentStream(0,e);n&&n.segments&&n.segments[0]&&(n.segments[0].start=t)}}const xs="br",Vs="bl",Bs="pr",Us="sid",Fs="cid",Hs="sf",Ws="st",Gs="ot",js="HLSLiveScanner",Ys="HlsJsScanner",$s="MediaSourceScanner",qs="NativeHLSLiveScanner";class zs{constructor(e,t={}){this._scanner=e,this.sessionId=t.sessionId,this.clipId=t.clipId}getLogAsQueryParam(e,t){return this._buildCMCDQueryParam(this._getLog(e,t))}_getLog(e,t){let n={};return Object.assign(n,this._getStaticSessionData()),Object.assign(n,this._getDynamicSessionData(e,t)),n}_buildCMCDQueryParam(e){return _e({CMCD:this._getObjectAsAlphabetizedString(e)})}_getStaticSessionData(){return{[Us]:`"${this.sessionId}"`,[Fs]:`"${this.clipId}"`,[Ws]:this._getStreamType(),[Hs]:this._getStreamingFormat()}}_getDynamicSessionData(e,t){return{[Bs]:this._scanner.playbackRate,[xs]:this._scanner.getBitrateAtTime(this._scanner.currentTime,t,"max")/1e3,[Gs]:this._getObjectType(t),[Vs]:this._getBufferLength(e)}}_getObjectType(e){switch(e){case"audio":return"a";case"video":return"v";default:return"av"}}_getBufferLength(e){return Math.round(1e3*(parseFloat(e.end)-parseFloat(e.start)))}_getStreamType(){switch(this._scanner.displayName){case js:case qs:case Ys:return"l";default:return"v"}}_getStreamingFormat(){switch(this._scanner.displayName){case js:case qs:case Ys:return'"hls"';default:return'"dash"'}}_getObjectAsAlphabetizedString(e){let t=[],n="";for(var r=0,i=Object.entries(e);r<i.length;r++){const[e,n]=i[r];t.push({key:e,value:n})}return t.sort((e,t)=>e.key.localeCompare(t.key)).forEach(({key:e,value:t})=>{n+=`${e}=${t},`}),n.replace(/,\s*$/,"")}}function Ks(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}const Xs=["supported"];function Zs(e,t){var n=e();return n&&n.then?n.then(t):t(n)}const Js=new Map;function Qs(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}const el=O("MediaCapabilities","color: white; background-color: green"),tl=Qs(function(e){let t;const n=il(e);return Js.get(n)||Zs(function(){if(Q.mediaCapabilities){const r=e.codecs.replace(/,.+/,""),i={type:"media-source",video:{contentType:`${e.mime_type}; codecs=${r}`,width:e.width,height:e.height,bitrate:e.bitrate,framerate:e.framerate}};return Ks(navigator.mediaCapabilities.decodingInfo(i),function(e){t=e,Js.set(n,t)})}},function(){return t})}),nl=Qs(function(e=[]){let t=!1,n=e,r=[],i=[];return Zs(function(){if(Q.mediaCapabilities)return function(){if(0!==e.length)return function(o,a){try{var s=Ks(Promise.all(e.map(function(e){return Ks(tl(e))})),function(o){if(o){if(n=function(e,t){return e.filter((e,n)=>Xs.every(e=>t[n][e])||(el(`Stream ${e.quality} is not supported`,t[n]),!1))}(e,o),0===n.length)return el("No compatible streams found. Returning all available streams as safeguard."),t=!0,{compatibleStreams:e,incompatibleStreams:r,incompatibleStreamsAttributes:i};n.length<e.length?(r=e.filter(e=>-1===n.indexOf(e)),i=r.map(rl),el("Some streams are not supported. Returning compatible streams.")):el("All streams are supported.")}})}catch(e){return a(e)}return s&&s.then?s.then(void 0,a):s}(0,function(e){el("Error checking stream capabilities",e)});el("No streams to check for MediaCapabilities support")}();el("MediaCapabilities API not supported")},function(e){return t?e:{compatibleStreams:n,incompatibleStreams:r,incompatibleStreamsAttributes:i}})});function rl(e){const t=il(e),n=Js.get(t);return n?Xs.filter(e=>!n[e]):[]}function il(e){return`${e.mime_type};${e.codecs};${e.width};${e.height};${e.bitrate};${e.framerate}`}function ol(){}function al(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}function sl(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function ll(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}const cl=sl(function(e,t,n){const r=function(e){const t=e.audio||[],n=e.video||[];return[{video:"HW_SECURE_ALL",audio:"SW_SECURE_CRYPTO"},{video:"HW_SECURE_DECODE",audio:"SW_SECURE_CRYPTO"},{video:"HW_SECURE_CRYPTO",audio:"SW_SECURE_CRYPTO"},{video:"SW_SECURE_DECODE",audio:"SW_SECURE_CRYPTO"},{video:"SW_SECURE_CRYPTO",audio:"SW_SECURE_CRYPTO"}].map(e=>{const r={persistentState:"optional",sessionTypes:["temporary"],videoCapabilities:[],audioCapabilities:[]};return n.length&&(r.videoCapabilities=n.map(t=>({contentType:t,robustness:e.video}))),t.length&&(r.audioCapabilities=t.map(t=>({contentType:t,robustness:e.audio}))),r})}(n);return Promise.all(Object.keys(e).map(sl(function(n){const i=e[n].id;let o=null;return function(e,t){return e&&e.then?e.then(t):t()}(al(function(){return function(){var e=function(){if(!t)return ll(navigator.requestMediaKeySystemAccess(i,r),function(e){return ll(e.createMediaKeys(),function(e){o=e})});o=new window.WebKitMediaKeys(i)}();if(e&&e.then)return e.then(ol)}()},function(e){}),function(){return{name:i,mediaKeys:o}})})))});const ul=sl(function(e,t){return function(e){if(e&&e.then)return e.then(ol)}(al(function(){return function(e){return e&&e.then?e.then(ol):Promise.resolve()}(t.setServerCertificate(ji(e)))},function(e){}))});function dl(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}const _l="video";function hl(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}const pl="audio";class ml extends Eo{static get displayName(){return"MediaSourceScanner"}static get supportsMse(){return!0}static get supportsLive(){return!1}static supported(e){const t=D(e);return void 0!==t&&t.isTypeSupported}static get supportedVideoTypes(){return[Li.dash,Li.dashMpd]}constructor(e,t={}){super(e,t),this.reset(),this.manifestLoadDurations=[],this._preserveCurrentTime=!1,this._preloadStreamIndex=null,this._drmSetupError=null}deactivate(){super.deactivate(),this.sorcerer&&this.sorcerer.destroy(),this.reset()}reset(){this._waitingOnSet=new Set,this._streamsForSegment={},Q.browser.safari&&(this._gapJumper=new Ms(this._video,this._getCurrentStream.bind(this))),this.resetBrain(),this._setupCMCDLogger(),this._ready=!1,this._startedPlaying=!1,this._manifest=null,this._streams={},this._streams[pl]=[],this._streams[_l]=[],this._audioStreams=[],this._onReady=null,this._baseUrl=null,this._lastTargetStreamId=null,this._timeToSeekTo=null,this._seekInProgressPromise=null,this._resolveSeek=null,this._resolveStartPreload=null,this._reloadingExistingVideo=!1,this._lastStreamIndex=null,this._checkSwitchUp=!1,this._clearBufferAtTime=!1,this._preloadStream=null,this._removeBufferPromise=null,this._ranIntoBuffer=!1,this._restrictedStreamIndexes=[],this._switching={},this._lastDownloadBitrate=0,this._preloadSegmentStreamIndex=null,this._preserveCurrentTime=!1,this._preloadStreamIndex=null,this._drmSetupError=null,clearInterval(this._loadSegmentsInterval),clearTimeout(this._slowLoadSegmentTimeout)}resetBrain(){const e=this._options.mediaSourceScanner||{};e.tests=this._options.tests,this._brain&&this._brain.destroy(),this._brain=new Ns(this,e)}preloadStream(){if(this._preloadStream)return this._preloadStream;let e=0,t=1;this._streams.audio.length&&(t=2);let n=this._getStartingStreamIndex(),r=0;const i=this._brain.getSegmentsToLoad(!1,_l,n);i.length>0&&(r=i[0]);let o=()=>{};const a=(e=!1)=>{e&&(n=this.sorcerer.video.activeStreamIndex),this._preloadSegmentStreamIndex=n,this._restartLoadSegmentsIntervalWithBackoff(!0)},s=n=>{e+=1,e<t||(n.segment===r&&1!==this._restrictedStreamIndexes.length&&null===this._preloadStreamIndex?this._getStreamIndexToLoadAndSwitchReason(!0).then(t=>{let{index:r,reasonForSwitch:i}=t,s={reasonForSwitch:i};if(!1!==r&&r>n.stream){if(this.sorcerer.video.switchTo(r,!1,s),this._streams.audio.length){const e=this._brain.getAudioIndexFromVideo(this._streams.video,this._streams.audio,r);this.sorcerer.audio.switchTo(e,!1)}return e=0,void a(!0)}o()}).catch(console.error):o())};return this._preloadStream=new Promise(e=>{o=()=>{const t=this._getCurrentStream(n).segments[0].end,r=this._getDuration(!0);if(this.currentTime>=r&&(this.currentTime=r),this.currentTime>t&&(this.sorcerer.clear(),this._waitingOnSet=new Set),this.sorcerer.video.switchTo(n,!1),this._streams.audio.length){const e=this._brain.getAudioIndexFromVideo(this._streams.video,this._streams.audio,n);this.sorcerer.audio.switchTo(e,!1)}this.sorcerer.off("bufferqueueadd",s),this._preloadSegmentStreamIndex=null,this._ready=!0,e()},this.sorcerer.on("bufferqueueadd",s),a()}),this._preloadStream}loadManifest(e){const n=this;return function(e){try{var t=Promise.resolve(e());return t}catch(e){return Promise.reject(e)}}(function(){return dl(n.video.metadata.p2pReady,function(){const r=Date.now();return Q.browser.ie&&e&&-1!==e.indexOf("archive_playlist")?(setTimeout(()=>{n._fireVideoError(io,"An unknown error occurred.")},250),new Promise(()=>{})):We({url:e,timeout:1e4,type:t.MANIFEST}).then(t=>(t.url&&t.url!==e&&-1!==t.url.indexOf("live-archive")&&(n._baseUrl=t.url.split("/").slice(0,-2).join("/")),n.manifestLoadDurations.push({url:e,status:t.status,duration:Date.now()-r}),n.fire(ki.MANIFEST_LOADED),t.text())).then(hl(function(t){let r;return function(i,o){var a=function(){if(-1!==e.indexOf(".mpd"))return dl(n._loadMediaManifest(),function({parseMPD:i}){const o=n._telecineVideo.enabledAudioTrack,a={audioLang:null==o?void 0:o.language};r=i(t,e,a)});r=JSON.parse(t)}();return a&&a.then?a.then(o):o()}(0,function(){return r})})).catch(t=>{if(n.manifestLoadDurations.push({url:e,status:t.response&&t.response.status,duration:Date.now()-r}),n.reset(),t instanceof ye&&410===t.response.status)return n.fire(ki.MEDIA_URL_EXPIRED),new Promise(()=>{});throw t instanceof ye&&400===t.response.status?n.fire(ki.MEDIA_URL_BAD_REQUEST,t.response.url):t instanceof Se&&n.fire(ki.MANIFEST_TIMEOUT),t})})})}setVideoSrc(e,t,n=!0){if(n&&!t&&this._onReady){if(("metadata"===this._preload||"none"===this._preload&&!this.paused)&&!this._ready)return void this._onReady.then(()=>{const t=this.paused;this.setVideoSrc(e,t,!1)}).catch(console.error);const t=this._telecineVideo.drmHandler;if(t&&"sd-fallback"===t.state&&!t.hasFallbackSourceUpdated)return void this._onReady.then(()=>{this.setVideoSrc(e,!0,!1)}).catch(console.error);if("auto"===this._preload)return void this._onReady.then(()=>{this.setVideoSrc(e,!1,!1)}).catch(console.error)}t&&this.reset(),t||!this.paused||this.sorcerer||(t=!0);let r=this._initializeManifest;t&&(r=this._initialize);const i=e.split("/");i.pop();const o=`${i.join("/")}/`;this._reloadingExistingVideo=!t,this._onReady=this._startPreload(e,this._preload).then(this.loadManifest.bind(this)).then(e=>"string"==typeof this._baseUrl&&-1!==this._baseUrl.indexOf("live-archive")?e:(this._baseUrl=o,{manifest:e,isConfigRefresh:!t})).then(r.bind(this)),t&&"auto"===this._preload&&(this._onReady=this._addCallbackToPromise(this._onReady,this.preloadStream.bind(this),!1)),this._onReady=this._addCatchToPromise(this._onReady)}get preload(){return this._preload}set preload(e){this._handlePreloadChanged(this._preload,e),this._preload=e}get videoElement(){return this._video}get videoWidth(){const e=this._getCurrentStream();return e?e.width:this._video.videoWidth}get videoHeight(){const e=this._getCurrentStream();return e?e.height:this._video.videoHeight}get restrictedStreamIndexes(){return this._restrictedStreamIndexes}set restrictedStreamIndexes(e){this._restrictedStreamIndexes.join(",")!==e.join(",")&&(this._restrictedStreamIndexes=e,this._onReady.then(()=>this.lockStreamIndexes()).catch(console.error))}get preloadStreamIndex(){return this._preloadStreamIndex}set preloadStreamIndex(e){this._preloadStreamIndex=e;const t=null!==e?[this._preloadStreamIndex]:this._restrictedStreamIndexes;this._brain.lock(t)}get currentTime(){return null!==this._timeToSeekTo?this._timeToSeekTo:this._video.currentTime}set currentTime(e){(this._startedPlaying||0!==e)&&(this._hasAudioVideoMismatch&&this._audioDuration&&e>this._audioDuration-1&&!this._brain.isTimeInBuffer(e,this._video.buffered,this._video.duration)&&(e=this._audioDuration-1),this.seekToTime(e))}get downloadSpeed(){return this._lastDownloadBitrate}get brainDebug(){const e=this.sorcerer&&this._brain&&this._brain.getCurrentSpeed?this._brain.getCurrentSpeed():null;let t=this.sorcerer&&this.sorcerer.getResponseSpeeds?this.sorcerer.getResponseSpeeds():null;return t=t?t.slice(-20):[],{currentSpeed:e,responseSpeeds:t}}get isLowerProfileAvailable(){return this.sorcerer?this.sorcerer[_l].activeStreamIndex>0:null}get videoStreams(){return this._streams[_l]}getBufferTarget(){if(this._brain&&this._brain.getBufferTarget)return this._brain.getBufferTarget()}getBitrateAtTime(e,t="video",n="average"){if(!this.sorcerer)return 0;const r=this.sorcerer.streamIndexAtTime(e,t),i=this._streams[t][r];return i?i["average"===n?"avg_bitrate":"bitrate"]??i.bitrate:0}lockStreamIndexes(){const e=this._restrictedStreamIndexes.map(e=>this._streams[_l].indexOf(this._streams[_l][e])),t=!this.paused;if(t&&(this._ignorePauseEvent=!0,this._video.pause()),this._switching[_l]=!1,this._brain.lock(e),!this._startedPlaying&&"auto"!==this._preload)return;const n=Math.max(this.currentTime-7,0),r=Math.min(this.currentTime+7,this._video.duration);this.sorcerer.removeBuffer(n,r).then(()=>{!this._startedPlaying&&"auto"===this._preload||this.ended?this._loadSegments():(this.seekToTime(this.currentTime),t&&this.paused&&(this._ignorePlayEvent=!0,this._video.play()))}).catch(console.error)}seekToTime(e){if(e===this.currentTime)return Promise.resolve();if(null===this._timeToSeekTo||(this._lastSeekReject&&(this._lastSeekReject(),this._lastSeekReject=null),this._seekInProgressPromise=null,this._timeToSeekTo=null,this._resolveSeek=null),this._timeToSeekTo=e,this._handleScrubbing(),this._ready)for(const e in this._streams)if(this._streams[e].length>0){const t=this.sorcerer[e].activeStreamIndex;this.sorcerer[e].streams[t].abort()}return this._seekInProgressPromise=this._getSeekReadyPromiseForTime(e),Promise.all([this._onReady,this._removeBufferPromise]).then(()=>{this._loadSegments()}).catch(console.error),this._paused&&0===e&&this.fire(Pi.SEEKING),this._onReady.then(()=>this._seekInProgressPromise).catch(e=>{})}takeSnapshot(){this._switchingVideo&&super.takeSnapshot()}initDrm(){}onstalled(){return!1}onseeked(e){this._startedPlaying&&this._restartLoadSegmentsIntervalWithBackoff()}onended(e){return super.onended(e),!0}onseeking(e){this._startedPlaying}_handleScrubbing(){this._scrubStart(),clearTimeout(this._scrubTimeout),this._scrubTimeout=setTimeout(()=>{this._scrubEnd()},200)}_scrubStart(){this._scrubbing||(this._scrubbing=!0)}_scrubEnd(){this._scrubbing=!1}ontimeupdate(e){if(!this.sorcerer)return!1;if(super.ontimeupdate(),this._gapJumper&&this._gapJumper.stop(),0===this.currentTime)return this._startedPlaying;if(this._timeToSeekTo)return!1;if(this._startedPlaying||(this._startedPlaying=!0),this._clearBufferAtTime&&this.currentTime>=this._clearBufferAtTime){const e=2;this.sorcerer.removeBuffer(0,this._clearBufferAtTime-e),this._clearBufferAtTime=!1}const t=this.sorcerer.getDroppedFrameTotal();this.fire(ki.DROPPED_FRAMES,t);const n=this.sorcerer.getResponseSpeeds(),r=this._streams[_l][this.sorcerer.video.activeStreamIndex],i=this._options.tests&&this._options.tests.download_bitrate;if((!i||!i.group)&&r&&this._brain.getCurrentSpeed){const e={speed:this._brain.getCurrentSpeed(),bitrate:r.avg_bitrate,speeds:n};this.fire(ki.BANDWIDTH,e)}const o=this._video.buffered.length;if(!o)return!0;const a=this._video.buffered.end(o-1);return Math.ceil(a)===Math.ceil(this._video.duration)||(Math.abs(this.currentTime-a)<.2?(this._ranIntoBuffer||(this.fire(ki.STREAM_BUFFER_START,{hasLowerStreamIndex:this.sorcerer[_l].activeStreamIndex>0}),this._ranIntoBuffer=!0),!1):void 0)}_isEnded(){return!!this.ended||Math.ceil(this.currentTime)===Math.ceil(this._video.duration)}_loadSegmentsIntervalTick(){if(!this.sorcerer)return!1;if("closed"===this.sorcerer.readyState)return!1;if(this._video.webkitCurrentPlaybackTargetIsWireless)return!1;if(this._isEnded())return!1;if(null!==this._preloadSegmentStreamIndex){try{this._loadPreloadSegments()}catch(e){return this._handleLoadSegmentFailures(e),!1}return!0}if(0===this.currentTime&&!this._ready)return this._startedPlaying;const e=this._loadSegments();return e&&"function"==typeof e.catch&&e.catch(this._handleLoadSegmentFailures.bind(this)),!0}_handleLoadSegmentFailures(e){e.code===DOMException.INVALID_STATE_ERR?this.fire(ki.SCANNER_ERROR,{reason:e}):this.fire(ki.LOAD_SEGMENT_FAILED,new TelecineError(`${ki.LOAD_SEGMENT_FAILED} - ${e.name}`,e.message)),clearInterval(this._loadSegmentsInterval)}onprogress(){this._brain.canPlayFromTimeInStream(this.currentTime,this._getCurrentStream())&&this._ranIntoBuffer&&(this.fire(ki.STREAM_BUFFER_END),this._ranIntoBuffer=!1)}onwaiting(){return!this._gapJumper||!this._gapJumper.start()}onerror(){return!!this._video.error&&(this._video.error.code===this._video.error.MEDIA_ERR_DECODE?(this.fire(ki.SCANNER_ERROR,{reason:`encountered media decode error. Message: "${this._video.error.message}"`}),!1):this._video.error.code===this._video.error.MEDIA_ERR_SRC_NOT_SUPPORTED?(this._preserveCurrentTime=!0,this.fire(ki.SCANNER_ERROR,{reason:`encountered media source not supported error. Message: "${this._video.error.message}"`}),!1):super.onerror())}pause(){super.pause()}play(){return null!==this._drmSetupError?(this._fireVideoError(ro,{text:null,code:this._drmSetupError}),Promise.reject()):(this._restartLoadSegmentsIntervalWithBackoff(),super.play(()=>(this._resolveStartPreload&&this._resolveStartPreload(),(!this._reloadingExistingVideo&&!this._ready&&"auto"!==this._preload||this._video.webkitCurrentPlaybackTargetIsWireless)&&(this._onReady=this._addCallbackToPromise(this._onReady,this.preloadStream.bind(this))),this._onReady.then(()=>Promise.resolve(this._seekInProgressPromise)))))}onpause(){return this._ignorePauseEvent?(this._ignorePauseEvent=!1,!1):(super.onpause(),!0)}onplay(){return!this._ignorePlayEvent||(this._ignorePlayEvent=!1,!1)}_addCallbackToPromise(e,t,n=!0){let r=e.then(t);return n&&(r=this._addCatchToPromise(r)),r}_addCatchToPromise(e){return e.catch(e=>(this.fire(ki.FILE_ERROR,{reason:e}),new Promise(()=>{})))}_handleBufferForSeek(){this._ready&&this._streams[_l][this.sorcerer.video.activeStreamIndex].bitrate/1e3>12e3&&(this._removeBufferPromise=this.sorcerer.removeBuffer())}_startPreload(e,t){return new Promise(n=>{var r;"none"!==t||this._reloadingExistingVideo&&!this.paused||"sd-fallback"===(null==(r=this._telecineVideo.drmHandler)?void 0:r.state)?n(e):this._resolveStartPreload=()=>{n(e),this._resolveStartPreload=null}})}_getSeekReadyPromiseForTime(e=this._timeToSeekTo){return new Promise(t=>{const n=this._startedPlaying&&0===e,r=this._brain.canPlayFromTimeInStream(e,this._getCurrentStream());n||r?t(e):(this._handleBufferForSeek(),this._resolveSeek=t)}).then(e=>{this._timeToSeekTo=null,this._seekInProgressPromise=null;const t=new Promise((e,t)=>{this._lastSeekReject=t;const n=()=>{e(this._video.currentTime),this._video.removeEventListener("seeked",n)};this._video.addEventListener("seeked",n)});return this._video.currentTime=e,t})}_handlePreloadChanged(e,t){"auto"!==e&&"auto"===t&&(this._onReady=this._addCallbackToPromise(this._onReady,this.preloadStream.bind(this))),e!==t&&"none"!==t&&this._resolveStartPreload&&this._resolveStartPreload()}_avDurationDifference(e){const t=e.audio.reduce((e,t)=>e+t.duration,0),n=e.video.reduce((e,t)=>e+t.duration,0),r=t/e.audio.length,i=n/e.video.length;return r+4<i?i-r:0}_checkAVMismatch(e){if(!e.audio)return;const t=this._avDurationDifference(e);t>0&&(this._hasAudioVideoMismatch=!0,this.fire(ki.AV_DURATION_MISMATCH,t),this._audioDuration=e.audio.reduce((e,t)=>Math.max(e,t.duration),0))}_processVideoStreams(e){const t=this;return new Promise(hl(function(n){return dl(nl(e),function({compatibleStreams:e,incompatibleStreams:r,incompatibleStreamsAttributes:i}){r.length&&(t.fire(ki.AVAILABLE_STREAMS_CHANGED),t.fire(ki.MEDIA_CAPABILITY_STREAMS_UNSUPPORTED,{incompatibleStreams:r,incompatibleStreamsAttributes:i})),n(e)})}))}_manifestContainsSegmentSizes(e){return e.video.every(e=>e.segments.every(e=>"size"in e))}_initializeManifest(e){const t=this;return new Promise(hl(function(n,r){const{manifest:i,isConfigRefresh:o}=e;return i.video||t.fire(ki.SCANNER_ERROR,{reason:"no video streams found in manifest"}),t._manifest=i,t._checkAVMismatch(i),dl(t._processVideoStreams(i.video),function(e){t._streams[_l]=t._sortVideoStreams(e);const r=(e=>{if(!e||!e.length)return[];const t=(e=>e.filter(e=>"opus"===e.codecs&&(!e.ambisonic_order||!Q.browser.chromium||e.ambisonic_order<=1)))(e),n=e.filter(e=>"opus"!==e.codecs);return Q.browser.safari||Q.iOS||Q.iPadOS||!D().isTypeSupported('audio/mp4; codecs="opus"')||!t.length?n:t})(i.audio);t._streams[pl]=t._sortAudioStreams(r);for(let e=0;e<t._streams[_l].length;e++){let n=0;if(i.audio){const r=t._brain.getAudioIndexFromVideo(t._streams.video,t._streams.audio,e),i=t._streams[pl][r];i&&(n=i.avg_bitrate)}t._streams[_l][e].audioBitrate=n}o||t._initDrm(t._streams[_l],t._streams[pl],t._manifest.key_info),t._manifestContainsSegmentSizes(i)||t.resetBrain(),t.fire(ki.STREAMS_LOADED,t._streams),n()})}))}_setUpSorcerer(e,t){if(this.sorcerer&&this.sorcerer.destroy(),this.sorcerer=new Os(e,t),this.sorcerer.isInstanceofManagedMediaSource(this.sorcerer.mediaSource)){const t=document.createElement("source");t.type="video/mp4",t.src=URL.createObjectURL(this.sorcerer.mediaSource),e.appendChild(t);const{src:n,mime:r}=this._telecineVideo.externalDisplayFiles.AirPlay,i=document.createElement("source");i.type=r,i.src=n,e.appendChild(i)}else e.src=URL.createObjectURL(this.sorcerer.mediaSource);this.successfulSegments=this.sorcerer.getSuccessfulSegments(),this.failedSegments=this.sorcerer.getFailedSegments(),this._restartLoadSegmentsIntervalWithBackoff()}_restartLoadSegmentsIntervalWithBackoff(e=!1){this._restartLoadSegmentsInterval(500),clearTimeout(this._slowLoadSegmentTimeout),this._slowLoadSegmentTimeout=setTimeout(()=>{this._restartLoadSegmentsInterval(5e3)},6e4),e&&this._loadSegmentsIntervalTick()}_restartLoadSegmentsInterval(e){clearInterval(this._loadSegmentsInterval),this._loadSegmentsInterval=setInterval(()=>{this._loadSegmentsIntervalTick()},e)}_getDuration(e=!1){let t=e?1/0:0;for(const n in this._streams)this._streams[n].length&&(t=Math[e?"min":"max"](t,this._streams[n][0].duration));return t}_initialize(e){return this._initializeManifest(e).then(()=>{this._setUpSorcerer(this._video,{duration:this._getDuration(),fetcherTimeout:8e3,fetcherRetryAbortErrors:!1,disableMMS:this._options.disableMMS}),this.sorcerer.on("srcnotsupported",()=>{this.fire(ki.SCANNER_ERROR,{reason:"this codec is not supported for mediasource playback"})}),this._video.addEventListener(Bi,e=>{const t=!this._video.webkitCurrentPlaybackTargetIsWireless,n="closed"===this.sorcerer.readyState;t&&n&&this.fire(ki.SCANNER_ERROR,{reason:"MediaSource was closed during AirPlay, falling back to Native HLS playback."})});const e=this._getStartingStreamIndex();for(const e in this._streams)this._streams[e].forEach((t,n)=>{let r=this._getSegmentUrl(n,"init",e);this._useRangeRequests(n,e)&&this._streams[e][n].init_segment_range&&(r={url:r,byteRange:this._getRangeForSegment(n,"init",e)}),this.sorcerer.addStream(`${t.mime_type}; codecs="${this._streams[e][n].codecs}"`,r)});this.sorcerer.video.switchTo(e,!0,{reasonForSwitch:7}),this.sorcerer.on("queued",this._handleQueued.bind(this)),this.sorcerer.on("downloadabort",this._handleAborted.bind(this)),this.sorcerer.on("appendbufferend",this._handleAppendBufferEnd.bind(this)),this.sorcerer.on("downloadstart",this._handleDownloadStart.bind(this)),this.sorcerer.on("downloadend",this._handleDownloadEnd.bind(this)),this.sorcerer.on("downloaderror",this._handleDownloadError.bind(this)),this.sorcerer.on("downloadtimeout",this._handleDownloadTimeout.bind(this)),this.sorcerer.on("quotaexceedederror",this._handleQuotaExceededError.bind(this)),this.sorcerer.video.on("streamchange",this._handleStreamChange.bind(this)),this.sorcerer.video.on("streamchangestart",this._handleStreamChangeStart.bind(this)),this.sorcerer.mediaSource.addEventListener("sourceended",()=>{this.fire(Pi.PROGRESS)})})}_getStartingStreamIndex(){if(null!==this._preloadStreamIndex)return this._preloadStreamIndex;let e=this._streams[_l],t=this.sorcerer.video.activeStreamIndex>0?this.sorcerer.video.activeStreamIndex:0;this._restrictedStreamIndexes.length&&(e=this._restrictedStreamIndexes.map(e=>this._streams[_l][e]),t=this._restrictedStreamIndexes.includes(this.sorcerer.video.activeStreamIndex)?this._restrictedStreamIndexes.indexOf(this.sorcerer.video.activeStreamIndex):0);const n=this._brain.getCurrentSpeed();n&&(t=this._brain.getStreamFromSpeed(n,e));const r=e[t];return this._streams[_l].indexOf(r)}_sortVideoStreams(e){const t=e.slice(0);return t.sort(function(e,t){const n=e.width*e.height*e.avg_bitrate,r=t.width*t.height*t.avg_bitrate;return e.width===t.width&&e.height===t.height?e.framerate-t.framerate:n-r}),t}_sortAudioStreams(e){const t=e.slice(0);return t.sort(function(e,t){return e.avg_bitrate*e.channels-t.avg_bitrate*t.channels}),t}_useRangeRequests(e,t){return!!this._streams[t][e].segments[0].range}_getRangeForSegment(e,t,n){return"init"===t?this._streams[n][e].init_segment_range:this._streams[n][e].segments[t].range}_getSegmentPriority(e,t,n=_l){return"init"===t?0:this._streams[n][e].segments[t].start}_getSegmentUrl(e,t,n=_l,r=!1){if("init"===t&&!this._streams[n][e].init_segment_url)return function(e){return ji(e).buffer}(this._streams[n][e].init_segment);let i=this._baseUrl;const o=this._manifest.base_url&&-1!==this._manifest.base_url.indexOf("//");if(o&&(i=this._manifest.base_url),this._manifest.base_url&&!o&&(i+=this._manifest.base_url),this._streams[n][e].base_url&&(i+=this._streams[n][e].base_url),this._useRangeRequests(e,n))return i;if("init"===t)return i+=this._streams[n][e].init_segment_url,i;const a=this._streams[n][e].segments[t];a.url&&(i+=a.url);const s="akfire_interconnect_quic"===this._telecineVideo.currentFile.metadata.cdn,l=-1===i.indexOf("?")?"?":"&";return r&&this.CMCDLogger&&s&&(i+=`${l}${this.CMCDLogger.getLogAsQueryParam(a,n)}`),i}_key(e,t,n){return`${e}:${t}:${n}`}_isFinalSegment(e,t,n){return t===this._streams[n][e].segments.length-1}_getCurrentlyLoadingStreamsForSegment(e,t){const n=[],r=this._streamsForSegment[e];if(!r)return n;for(let i=0;i<r.length;i++)this._waitingOnSet.has(this._key(r[i],e,t))&&n.push(r[i]);return n}getCurrentStream(e="video"){return this._getCurrentStream(0,e)}_getCurrentStream(e=0,t=_l){return void 0!==this.sorcerer&&(e=this.sorcerer[t].activeStreamIndex),this._streams[t][e]}_getStreamIndexToLoadAndSwitchReason(e){let t=this._streams[_l];const n=this.video&&this.video.metadata.percentShown?this.video.metadata.percentShown:null;if(t=this._brain.filterStreams(t,this._video.clientWidth,this._video.clientHeight,n),0===t.length)return Promise.resolve({index:!1,reasonForSwitch:null});if(this._switching[_l])return Promise.resolve({index:!1,reasonForSwitch:null});const r=t[t.length-1];if(r.id!==this._lastTargetStreamId){this._lastTargetStreamId=r.id;const e={index:this._streams[_l].indexOf(r),streams:this._streams[_l]};this.fire(ki.STREAM_TARGET_CHANGE,e)}const i=this._getCurrentStream();return this._brain.shouldPowerUp(t,i,e).then(e=>!1===e.index?this._brain.shouldPowerDown(t,i).then(e=>!1===e.index?{index:e.index,reasonForSwitch:e.reasonForSwitch}:{index:this._streams[_l].indexOf(t[e.index]),reasonForSwitch:e.reasonForSwitch}):{index:this._streams[_l].indexOf(t[e.index]),reasonForSwitch:e.reasonForSwitch})}_loadSegmentsForType(e=_l){return this.sorcerer.allowSegmentRequests?this._getStreamIndexToLoadAndSwitchReason(!1).then(t=>{let{index:n,reasonForSwitch:r}=t,i={reasonForSwitch:r};e===pl&&(!1===n&&(n=this.sorcerer[_l].activeStreamIndex),n=this._brain.getAudioIndexFromVideo(this._streams.video,this._streams.audio,n),this.sorcerer[pl].activeStreamIndex===n&&(n=!1));let o=!1;!1!==n&&(o=n>this.sorcerer[e].activeStreamIndex,this._switching[e]=!0,this.sorcerer[e].switchTo(n,!0,i).then(()=>{this._switching[e]=!1}).catch(console.error));let a=o;const s="auto"===this._preload&&!this._startedPlaying,l=this._brain.getSegmentsToLoad(a,e,this._getCurrentStream(),s),c=this.sorcerer[e].activeStreamIndex;for(let t=0;t<l.length;t++){const n=this._getSegmentUrl(c,l[t],e,!0),r=this._getCurrentlyLoadingStreamsForSegment(l[t],e);if(r.length>1)continue;if(1===r.length&&c<=r[0])continue;const i=this._isFinalSegment(c,l[t],e),o={stream:c,segment:l[t],type:e},a=this.sorcerer[e].streams[c];let s=n;this._useRangeRequests(c,e)&&(s={url:s,byteRange:this._getRangeForSegment(c,l[t],e)});const u=this._getSegmentPriority(c,l[t],e),d=e===_l;let _=null;0===c&&e===_l&&(_=16e3);let h=null;try{h=this._streams[e][c].segments[l[t]].size}catch(e){}a.addSegment(s,{identifier:o,isFinalSegment:i,priority:u,includeWithBandwidthChecks:d,timeout:_,size:h}).catch(e=>{})}}).catch(e=>{throw e}):Promise.resolve()}_loadPreloadSegments(){for(const e in this._streams){if(0===this._streams[e].length)continue;let t=0;const n=this._brain.getSegmentsToLoad(!1,e,this._getCurrentStream());n.length>0&&(t=n[0]);let r=this._preloadSegmentStreamIndex;e===pl&&(r=this._brain.getAudioIndexFromVideo(this._streams.video,this._streams.audio,this._preloadSegmentStreamIndex));const i=this._key(r,t,e);if(this._waitingOnSet.has(i))continue;const o=this._getSegmentUrl(r,t,e),a=this._isFinalSegment(r,t,e),s=this.sorcerer[e].streams[r],l={stream:r,segment:t,type:e},c=!0;let u=o;this._useRangeRequests(r,e)&&(u={url:u,byteRange:this._getRangeForSegment(r,t,e)}),s.addSegment(u,{identifier:l,isFinalSegment:a,loadOnly:c,priority:0}).catch(e=>{})}}_loadSegments(){const e=this._video.webkitCurrentPlaybackTargetIsWireless,t="closed"===this.sorcerer.readyState;return e||t?Promise.resolve():this._onReady&&this._onReady.then(()=>{const e=[];for(const t in this._streams)this._streams[t].length>0&&e.push(this._loadSegmentsForType(t));return Promise.all(e)})}_handleQueued(e){this._waitingOnSet.add(this._key(e.stream,e.segment,e.type)),this._streamsForSegment[e.segment]||(this._streamsForSegment[e.segment]=[]),-1===this._streamsForSegment[e.segment].indexOf(e.stream)&&this._streamsForSegment[e.segment].push(e.stream)}_clearWaitingOn(e){(this._streamsForSegment[e.segment]||[]).forEach(t=>{this._waitingOnSet.delete(this._key(t,e.segment,e.type))})}_handleAborted(e){this._streamsForSegment[e.segment]&&this._clearWaitingOn(e)}_handleAppendBufferEnd(e){this.fire(ki.APPEND_BUFFER_END,{identifier:e}),this.preloadStreamIndex=null,this._restartLoadSegmentsIntervalWithBackoff(),this._checkSwitchUp&&e.stream===this._lastStreamIndex&&(this._checkSwitchUp=!1,this._clearBufferAtTime=this._streams[_l][e.stream].segments[e.segment].start),this._streamsForSegment[e.segment]&&this._clearWaitingOn(e);const t=this._brain.canPlayFromTimeInStream(this._timeToSeekTo,this._getCurrentStream());null!==this._timeToSeekTo&&this._resolveSeek&&t&&(this._resolveSeek(this._timeToSeekTo),this._resolveSeek=null),this._gapJumper&&this._gapJumper.onSegmentAppended()}_handleDownloadStart(e){this.fire(ki.DOWNLOAD_START,{identifier:e})}_handleDownloadEnd(e,t){this.fire(ki.DOWNLOAD_END,{identifier:e,data:t})}_handleDownloadError(e,t){this._clearWaitingOn(e);let n=ki.DOWNLOAD_ERROR;410===t&&(n=ki.MEDIA_URL_EXPIRED),502===t&&this.video.metadata.drm&&(n=ki.DRM_FAILURE),this.fire(n,{identifier:e,status:t})}_handleDownloadTimeout(e,t){this.fire(ki.DOWNLOAD_TIMEOUT,{identifier:e,data:t}),this._streamsForSegment[e.segment]&&this._clearWaitingOn(e),e.type===_l?this._switching[_l]=!1:e.type===pl&&(this._switching[pl]=!1)}_handleQuotaExceededError(e){this.fire(ki.QUOTA_EXCEEDED_ERROR,{buffered:e})}_handleStreamChangeStart(e,t){const n={previousStreamIndex:this._manifest.video.indexOf(this._streams[_l][e]),index:this._manifest.video.indexOf(this._streams[_l][t]),streams:this._manifest.video};this.fire(ki.STREAM_CHANGE_START,n)}_handleStreamChange(e,t){var n;if(null==(n=this._manifest)||!n.video)return;e>this._lastStreamIndex&&this.currentTime>0&&(this._checkSwitchUp=!0),this._lastStreamIndex=e;const r={index:this._manifest.video.indexOf(this._streams[_l][e]),streams:this._manifest.video,metadata:t};this.fire(ki.STREAM_CHANGE,r)}_initDrm(e=[],t=[],n={}){const r=this._telecineVideo.drmHandler;if(!r)return;const i=function(e,t){const n={audio:e.map(e=>`${e.mime_type};codecs="${e.codecs}"`),video:[]};for(let e=0;e<t.length;e++){const[r,i]=t[e].codecs.split(",");n.video[e]=`${t[e].mime_type};codecs="${r}"`,i&&n.audio.push(`audio/mp4;codecs="${i}"`)}return n}(t,e);r.init(this,i,n).catch(e=>(e===so&&(this._drmSetupError=e,this.fire(ki.NO_SUPPORTED_CDM)),Promise.reject(e))),r.setFallbackCallback(()=>{this.paused||(this._video.pause(),this.once(ki.CURRENT_FILE_CHANGE,()=>{this.play()}))})}_setupCMCDLogger(){var e;(null!=(e=this._options.tests)&&null!=(e=e.cmcd)&&e.group||this._options.enableCMCD)&&(this.CMCDLogger=new zs(this,this._options.sessionMetadata))}_loadMediaManifest(){return P("module/media-manifest.js")}}class fl{constructor(e){this._scanner=e,this._currentTime=0,this._latencyInterval=setInterval(this._onLatencyInterval.bind(this),500)}get latency(){return this._latency}get liveSyncPosition(){const e=this._estimateLiveEdge(),t=this._scanner.presentationDelay,n=this._scanner.getCurrentStream();return null===e||null===t||null===n?0:e-t-this.edgeStalled}get edgeStalled(){const e=this._scanner.getCurrentStream();if(!e)return 0;const t=3*(this._scanner.lowLatencyMode&&e.partTargetDuration||e.targetDuration);return Math.max(e.age-t,0)}destroy(){clearInterval(this._latencyInterval)}_onLatencyInterval(){const e=this._scanner.videoElement,t=this._scanner.getCurrentStream();if(!e||!t)return;this._currentTime=e.currentTime;const n=this._computeLatency();null!==n&&(this._latency=n,this._scanner.fire(Di.LATENCY_UPDATED,n),this._scanner.lowLatencyMode&&(Q.browser.ie||Q.browser.safari||null!==this._scanner.presentationDelay&&(e.playbackRate=1)))}_estimateLiveEdge(){const e=this._scanner.getCurrentStream();return e?e.edge+e.age:null}_computeLatency(){const e=this._estimateLiveEdge();return null===e||0===this._currentTime?null:e-this._currentTime}_getForwardBufferLength(){const e=this._scanner.videoElement,t=this._scanner.getCurrentStream();if(!e||!t)return 0;const n=e.buffered.length;return n?e.buffered.end(n-1):t.edge-this._currentTime}}const vl=[1,2,5];class gl extends Ns{get displayName(){return"Live"}constructor(e,t={}){super(e,t),this._UPSHIFT_BANDWIDTH_THRESHOLD=.4,this._DOWNSHIFT_BANDWIDTH_THRESHOLD=.6,this.consecutiveStreamIndex={},this.isNewPlayback=!0}optimalStream(e,t){var n,r;this.isNewPlayback&&((null==(r=this.scanner.sorcerer)?void 0:r.getResponseSpeeds().length)>=2&&(this.isNewPlayback=!1));if(1===e.length)return{index:0,reasonForSwitch:6};if(this.isNewPlayback){let t=0,n=0,r=this.scanner.videoElement.clientHeight,i=[];for(let o=0;o<e.length;o++){let a=e[o].height;i.push(a),a<r&&a>n&&(t=o,n=e[o].height)}return t=Math.max(0,t-1),{index:t,reasonForSwitch:4}}const i=this.getCurrentSpeed();let o=t,a=t;for(let t=0;t<e.length;t++)i*this._UPSHIFT_BANDWIDTH_THRESHOLD>e[t].bandwidth&&(o=t),i*this._DOWNSHIFT_BANDWIDTH_THRESHOLD>e[t].bandwidth&&(a=t);const s=t<o?o:a;this._clearConsecutiveStreamIndexes(s),this.consecutiveStreamIndex[s]++;const l=this.scanner.lowLatencyMode?.5:1.5,c=this.scanner.segmentLength*l,u=this.scanner.videoElement,d=u.buffered,_=null==(n=this._options.mediaSourceScanner)?void 0:n.droppedFrameSwitchPercent;return d&&0!==d.length?d.end(d.length-1)-u.currentTime<c?{index:0!==t?t-1:0,reasonForSwitch:1}:t>0&&!isNaN(_)&&this.hasTooManyDroppedFrames(t,this.scanner.getCurrentStream(),_)?(this.blacklist(t),this.scanner.fire(ki.DROPPED_FRAME_PERCENT_EXCEEDED),{index:t-1,reasonForSwitch:2}):this.consecutiveStreamIndex[s]>2&&s!==t?{index:s,reasonForSwitch:3}:{index:t,reasonForSwitch:null}:{index:0,reasonForSwitch:5}}getCurrentSpeed(){var e;return null==(e=this.scanner.sorcerer)?void 0:e.getCurrentSpeed({type:"average",howMany:5,weights:vl})}_clearConsecutiveStreamIndexes(e){this.consecutiveStreamIndex[e]||(this.consecutiveStreamIndex[e]=0);for(const t in this.consecutiveStreamIndex)this.consecutiveStreamIndex.hasOwnProperty(t)&&parseInt(t,10)!==e&&(this.consecutiveStreamIndex[t]=0)}getAvailabilityStart(e,t){return this._getSegmentAvailabilityStart(e,t.edge)}getAvailabilityEnd(e,t){return this._getSegmentAvailabilityEnd(e,t.edge)}canPlayFromTimeInStream(e,t){return!!t&&this.isTimeInBuffer(e,this.scanner._video.buffered,this.scanner._video.duration)}getSegmentsToLoad(e,t,n){var r,i;const{currentTime:o,liveTailTime:a,sorcerer:s,bufferTarget:l,atLiveEdge:c}=this.scanner,u=null==(r=s[t])||null==(r=r.sourceBuffer)?void 0:r.buffered,d=null!=u&&u.length?u.start(u.length-1):0,_=ae(Math.max(o,d),u);if(!e&&_>=l)return[];const h=Math.max(o,a),p=c?n.edge:h,m=this._getSegmentAvailabilityStart(p,n.edge),v=this._getSegmentAvailabilityEnd(p,n.edge),g=this.scanner.lowLatencyMode&&(null==(i=n.parts)?void 0:i.length),E=[].concat(f(n.segments),f(n.parts??[])),b=(g?n.parts:E).filter(t=>!!t.uri&&(e||!this.scanner.isSegmentAdded(t))&&!(t.end<m||t.start>v));return g&&b.forEach((e,t)=>{for(;e=e.dependentOn;)b.includes(e)||this.scanner.isStreamSegmentAdded(e)||b.splice(t,0,e)}),s[t].activeStreamIndex,b}_getSegmentAvailabilityStart(e,t){const n=t-this._getPresentationDelay();return Math.max(0,Math.min(e,n))}_getSegmentAvailabilityEnd(e,t){const n=e+this.scanner.bufferTarget;return Math.min(n,t)}_getPresentationDelay(){return this.scanner.presentationDelay||this.scanner.manifest.presentationDelay}}const El=["disabled","hidden","showing"],bl=["subtitles","captions","descriptions","chapters","metadata"],yl=["ar","fa","he","iw","ku","ps","sd","ur","yi"],Tl=new WeakMap,Sl=new WeakMap;class TelecineTextTrack extends bn{constructor({kind:e,src:t=null,label:n="",language:r="",id:i=ve(),provenance:o=""},a){if(super(),-1===bl.indexOf(e))throw eo(12,"SYNTAX_ERR","Syntax Error");Object.defineProperties(this,{kind:{value:e,enumerable:!0},label:{value:n,enumerable:!0},language:{value:r,enumerable:!0},id:{value:`${i}`,enumerable:!0},rtl:{value:-1!==yl.indexOf(r.substr(0,2)),enumerable:!0},provenance:{value:o,enumerable:!0}}),this.video=a,this.src=t,this._modeHasBeenSet=!1,Tl.set(this,"disabled")}dispatchEvent(e){this.fire(e,{target:this})}get mode(){return Tl.get(this)}set mode(e){if(El.indexOf(e)>-1){if(this._modeHasBeenSet=!0,Tl.get(this)===e)return;Tl.set(this,e),this.video.currentScanner&&this.video.currentScanner.setModeForTrack(this,e),this.dispatchEvent("modechange")}}get src(){return Sl.get(this)}set src(e){Sl.set(this,e),this.video.fire(ki.TEXT_SRC_UPDATE,this)}get cues(){return this.video.currentScanner?this.video.currentScanner.getCuesForTrack(this):[]}get activeCues(){return this.video.currentScanner?this.video.currentScanner.getActiveCuesForTrack(this):[]}get trackElement(){return document.getElementById(`telecine-track-${this.id}`)}}function Cl(e){var t=/^(?:(\d{2,}):)?(\d{2}):(\d{2})[,.](\d{3})$/.exec(e);if(!t)return-1;var n=parseInt(t[4],10)/1e3;return n+=parseInt(t[3],10),t[2]&&(n+=60*parseInt(t[2],10)),t[1]&&(n+=60*parseInt(t[1],10)*60),n}function Al(e){var t=0,n=e.split(/(?:(?:\r\n|\n){2,})/),r=[],i=null;do{0===t&&/^\uFEFF?WEBVTT(?: .*)?/.test(n[t])&&t++,(i=/^(?:(.*)(?:\r\n|\n))?([\d:,.]+) --> ([\d:,.]+)(.*)?(?:\r\n|\n)([\s\S]*)/.exec(n[t]))&&r.push({startTime:Cl(i[2]),endTime:Cl(i[3]),text:i[5]}),t++}while(t<n.length);return r}function Ll(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Il(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}function Pl(e,t){return e&&e.then?e.then(t):t(e)}function Rl(e,t,n){if(n)return t?t(e()):e();try{var r=Promise.resolve(e());return t?r.then(t):r}catch(e){return Promise.reject(e)}}function wl(){}function Ol(e,t){var n=e();return n&&n.then?n.then(t):t(n)}function kl(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function Dl(e,t){if(!t)return e&&e.then?e.then(wl):Promise.resolve()}const Nl=Q.browser.ie||Q.browser.edge?.5:.2,Ml=8e3;class xl extends Eo{static get displayName(){return"HLSLiveScanner"}static get supportsMse(){return!0}static get supportsLive(){return!0}static supported(e){const t=D(e);return void 0!==t&&t.isTypeSupported}static get supportedVideoTypes(){return[Li.hlsLive]}constructor(e,t={}){var n;super(e,t),this._playInitiated=!1,this._captionsVisible=!1,this._captionsLoading=!1,this._atLiveEdge=!0,this._atLiveTail=!1,this._STREAM_SWITCH_CHECK_INTERVAL=2e3,this._DOWN_SHIFT_CHECK_INTERVAL=1e4,this.reset(),this.defaultPresentationDelay=t.presentationDelay??(t.lowLatencyMode?3:12),this.defaultBufferTarget=t.lowLatencyMode?3:12,this.bufferTarget=this.defaultBufferTarget,this.presentationDelay=this.defaultPresentationDelay,this.lowLatencyMode=t.lowLatencyMode??!1,this.disableDeltaUpdates=t.disableDeltaUpdates??!1,this._preloadStreamIndex=null,Object.defineProperty(this,"eventIsLowLatency",{value:t.lowLatencyMode??!1,writable:!1}),Object.defineProperty(this,"eventHasDVREnabled",{value:t.dvrEnabled??!1,writable:!1}),this._timeoutTest=null==(n=this._options.tests)||null==(n=n.llhls_timeout)?void 0:n.group,window.addEventListener("online",()=>{this.play()})}deactivate(){super.deactivate(),this.reset()}reset(){var e,t,n;null==(e=this._sorcerer)||e.destroy(),null==(t=this._manifestLoader)||t.stop(),null==(n=this._latencyController)||n.destroy(),this._videoReady=oe(),this._sorcerer=null,this._streams={},this._streams.video=[],this._streams.audio=[],this._lastStreamIndex=0,this._isOnline=!1,this._hasLiveEventEnded=!1,this._timeSinceLastStreamSwitchCheck=0,this._timeSinceLastDownShift=Number.NEGATIVE_INFINITY,this._lastStallCurrentTime=-1,this._timeToSeekTo=null,this._resolveSeek=null,this._abr=new gl(this,this._options),this._latencyController=new fl(this),this._restrictedStreamIndexes=[],this._preloadStreamIndex=null,this._switching={},this._segmentsAdded={},this._captionsAddedToTextTrack={},this._captionsAddedToTranscript={},this._fetchedCues={}}endLive(){var e;this._isOnline=!1,this._hasLiveEventEnded=!0,this.eventHasDVREnabled&&!this.atLiveEdge||(null==(e=this._manifestLoader)||e.stop(),this._sorcerer&&(this._sorcerer.abortFetches(),this._sorcerer.endOfStream()),this.eventHasDVREnabled||super.deactivate(),this.fire(Pi.ENDED))}_signalOnline(){this._isOnline||(this._isOnline=!0,this.fire(Di.STREAM_ONLINE))}_signalOffline(){this._isOnline&&(this._isOnline=!1,this.fire(Di.STREAM_OFFLINE))}_setConnection(e){e?this._signalOnline():this._signalOffline()}_loadManifest(e){const t=this;return Rl(function(){if(t._hasLiveEventEnded)return Ll();t._manifestLoader&&(t._manifestLoader.stop(),t._manifestLoader.off());let n=[t._loadMediaManifest()];return t.video.metadata.p2pReady&&n.push(t.video.metadata.p2pReady),Ll(Promise.allSettled(n),function([n]){const{M3U8Loader:r,PLAYLIST_UPDATE:i,PLAYLIST_ERROR:o,convertTsCodecs:a}=n.value;return t._manifestLoader=new r({disableDeltaUpdates:t.disableDeltaUpdates}),t._manifestLoader.lowLatencyMode=t.lowLatencyMode,t._manifestLoader.dvrEnabled=t.eventHasDVREnabled,t._manifestLoader.on(i,t._onPlaylistUpdate.bind(t)),t._manifestLoader.on(o,e=>{t._signalOffline()}),Pl(Il(function(){const n=t.video.metadata.playlistRefreshUrl;return Ll(t._manifestLoader.start(e,n),function(e){t._manifest=e,t._signalOnline()})},function(e){throw t._signalOffline(),t.endLive(),e}),function(e){t._streams.video=Vl(function(e){return e.filter(t=>t.codecs.split(".")[0]===e[0].codecs.split(".")[0])}(function(e){const t=e.slice(0);return t.sort(function(e,t){const n=e.width*e.height*e.avg_bitrate,r=t.width*t.height*t.avg_bitrate;return e.width===t.width&&e.height===t.height?e.framerate-t.framerate:n-r}),t}(t._manifest.video))),t._streams.audio=Vl(function(e){return e.filter((e,t,n)=>n.indexOf(e)===t)}(function(e){return e.reduce((e,t,n,r)=>e.concat((({audio:e})=>e)(t)),[])}(t._streams.video)));const{index:n,reasonForSwitch:r}=t._getStream("video",!0);let i={reasonForSwitch:r};return Ll(t._manifestLoader.switchTo("video",n),function(){let e,r=[];if(t._streams.audio.length){let{index:n}=t._getStream("audio",!0);e=n,r.push(t._manifestLoader.switchTo("audio",e))}if(t.manifest.captions&&t.manifest.captions.length>0){const{index:e}=t._getStream("subtitles",!0);r.push(t._manifestLoader.switchTo("subtitles",e))}return Ll(Promise.all(r),function(){var r,o;null==(r=t._sorcerer)||r.destroy(),t._sorcerer=new Os(t._video,{fetcherRetryAbortErrors:!1,fetcherTimeout:Ml,disableMMS:t._options.disableMMS}),t._sorcerer.initFrameDropper(),t._streams.video.forEach(e=>{t._sorcerer.addStream(a($i(t._manifestLoader.activeStream("video").mimeType,e.codecs)),e.initSegment)}),t._streams.audio.forEach(e=>{t._sorcerer.addStream(a($i(t._manifestLoader.activeStream("audio").mimeType,e.codecs)),e.initSegment)}),t.fire(ki.STREAMS_LOADED,t._streams),t.manifest.captions&&t.manifest.captions.length>0&&(t.manifest.captions.forEach(t._loadTextTrack.bind(t)),t.fire(ki.TEXT_TRACKS_AVAILABLE)),t._setUpMediaSorcererEvents(),t._sorcerer.video.switchTo(n,!1,i),t._streams.audio.length&&(null==(o=t._sorcerer.audio)||o.switchTo(e,!1))})})})})})}_refreshManifest(){const e=this;return Rl(function(){return Ll(function(e){if(e&&e.then)return e.then(wl)}(Il(function(){return Ll(e._manifestLoader.update(),function(){e._signalOnline()})},function(){e._signalOffline()})))})}_setUpMediaSorcererEvents(){this._sorcerer.video.on("streamchange",this._handleStreamChange.bind(this)),this._sorcerer.video.on("streamchangestart",this._handleStreamChangeStart.bind(this)),this._sorcerer.on("downloadend",this._handleDownloadEnd.bind(this)),this._sorcerer.on("downloadtimeout",this._handleDownloadTimeout.bind(this)),this._sorcerer.on("downloadabort",this._handleDownloadAbort.bind(this)),this._sorcerer.on("appendbufferend",this._handleBufferAppend.bind(this))}_handleDownloadEnd(e,t){if(e&&e.isInitSegmentRequest)return;const n=this._getCurrentStream();t.extraContext={liveAvail:{start:this._abr.getAvailabilityStart(this.currentTime,n),end:this._abr.getAvailabilityEnd(this.currentTime,n)}},this.fire(ki.DOWNLOAD_END,{identifier:e,data:t})}_handleDownloadTimeout(e,t){e&&e.isInitSegmentRequest||(this._key(e),this._clearSegment(e),this._switching[e.type]=!1,this.fire(ki.DOWNLOAD_TIMEOUT,{identifier:e,data:t}))}_handleDownloadAbort(e){e&&e.isInitSegmentRequest||(this._key(e),this._clearSegment(e))}_handleStreamChangeStart(e,t){const n={previousStreamIndex:this._streams.video.indexOf(this._streams.video[e]),index:this._streams.video.indexOf(this._streams.video[t]),streams:this._streams.video};this.fire(ki.STREAM_CHANGE_START,n)}_handleStreamChange(e,t={}){this.fire(ki.STREAM_CHANGE,{index:e,streams:this._streams.video,metadata:t})}_firstBufferAheadIndex(e,t){for(let n=0;n<(null==t?void 0:t.length);n++)if(t.start(n)>e)return n}_handleBufferAppend(e){const{type:t,stream:n}=e,r=this.sorcerer[t].sourceBuffer.buffered,i=this._getSegmentById(e);if(i&&r.length&&(this._streams[t][n].playlist.timeOffset=r.end(r.length-1)-(i.end-i.timeOffset)),null===this._timeToSeekTo||!this._resolveSeek)return;const o=this._firstBufferAheadIndex(this.currentTime,r),a=(null==r?void 0:r.start(o))??0,s=ae(a,r);if(void 0!==o&&s>this.bufferTarget)return Number((a-this.currentTime).toFixed(3)),void(this.currentTime=a);this._timeToSeekTo<this.liveTailTime&&(this._timeToSeekTo=this.liveTailTime),this._abr.canPlayFromTimeInStream(this._timeToSeekTo,this._getCurrentStream())&&(this._resolveSeek(this._timeToSeekTo),this._resolveSeek=null)}_key({type:e,segment:t,part:n}){return`${e}_${t}_${n}`}_getSegmentById({type:e,stream:t,segment:n,part:r}){const i=this._streams[e][t].getSegmentBySN(n);return(null==i?void 0:i.getPart(r))||i}_clearSegment(e){if(e.part>0){const t=p(p({},e),{},{part:e.part-1});this._clearSegment(t)}const t=this._key(e);delete this._segmentsAdded[t]}isSegmentAdded(e){return!!this._segmentsAdded[this._key(e)]}isStreamSegmentAdded(e){const t=this._key(e),n=this._sorcerer[e.type].activeStreamIndex;return!!this._segmentsAdded[t]&&this._segmentsAdded[t].stream===n}_onPlaylistUpdate(e,t){const n=this;return Rl(function(){const{type:r}=e;var i,o;if(n.eventHasDVREnabled&&(null==(i=n._sorcerer)||i.setLiveSeekableRange(n.liveTailTime,n.liveEdgeTime)),n.fire(ki.STREAM_UPDATED,e),"subtitles"===r)return(n._captionsVisible||n._captionsLoading)&&(null==(o=n.manifest.captions)?void 0:o.length)>0&&n._addTextTrackCue(),Ll();t||n._loadSegmentsForType(r);const a=n._hasNewSegments(r)||!n._atDurationEnd();return n._setConnection(a),n._checkForPlaybackGap(),(n.lowLatencyMode||n.video.metadata.p2pReady)&&n._checkForPlaybackStall(),Ll()})}_loadTextTrack({label:e,language:t},n){if(!this._captionsTrack){const r=new TelecineTextTrack({label:e,id:n,kind:"captions",language:t},this._telecineVideo);this._telecineVideo.textTracks=Gi([r]),this._captionsTrack=this.addTextTrack(r)}}_getSegmentIdentifier(e){return`${e.type}_${e.mediaSequenceNumber}`}_getVideoTimeOffset(){return this._getCurrentStream("video").playlist.timeOffset}_shouldAddSegmentCuesToTextTrack(e){const t=this._getSegmentIdentifier(e),n=this._captionsAddedToTextTrack[t],r=this._getVideoTimeOffset(),i=e.end+r>=this.currentTime&&e.start+r<=this.currentTime+this.bufferTarget;return this._captionsVisible&&!n&&i}_shouldAddSegmentCuesToTranscript(e){const t=this._getSegmentIdentifier(e),n=this._captionsAddedToTranscript[t],r=this._getVideoTimeOffset(),i=e.end+r>=this.liveEdgeTime-e.duration&&e.start+r<=this.liveEdgeTime+this.bufferTarget;return this._captionsLoading&&!n&&i}_getSegmentCues(e){const t=this;return Rl(function(){const n=t._getSegmentIdentifier(e);return Ll(Ol(function(){if(!t._fetchedCues[n])return Ll(We(e.url).text(),function(e){const r=Al(e),i=function(e){const t=e.match(/=MPEGTS:(\d+),/);return(t&&t[1]||0)/9e4}(e),o=r.map(e=>(e.startTime=i+e.startTime,e.endTime=i+e.endTime,new(window.VTTCue||window.TextTrackCue)(e.startTime,e.endTime,e.text)));t._fetchedCues[n]=o})},function(){return t._fetchedCues[n]}))})}_addTextTrackCue(){const e=this;return Rl(function(){return Ll(e._videoReady,function(){e.manifest.captions&&e.manifest.captions[0].segments.forEach(kl(function(t){const n=e._getSegmentIdentifier(t),r=e._shouldAddSegmentCuesToTextTrack(t),i=e._shouldAddSegmentCuesToTranscript(t);return function(){var o=function(){if(r||i)return Ll(e._getSegmentCues(t),function(t){r&&(e._captionsAddedToTextTrack[n]=!0,t.forEach(t=>{e._captionsTrack.addCue(t)})),i&&(e._captionsAddedToTranscript[n]=!0,e.fire(ki.SEGMENT_CUES_LOADED,t))})}();if(o&&o.then)return o.then(wl)}()}))})})}_hasNewSegments(e){var t;const n=this._getCurrentStream(e),r=3*(this.lowLatencyMode?3:1);return(null==(t=n.playlist)?void 0:t.misses)<r}_loadSegments(){const e=this;return Rl(function(){return Ll(e._videoReady,function(){const t=e._video.webkitCurrentPlaybackTargetIsWireless,n="closed"===e._sorcerer.readyState;if(!t&&!n)for(const t in e._streams)e._streams[t].length>0&&e._loadSegmentsForType(t)})})}_loadSegmentsForType(e){const t=this;return Rl(function(){return Ll(t._videoReady,function(){if(!t._sorcerer.allowSegmentRequests)return;const{index:n,reasonForSwitch:r}=t._getStream(e);let i;return Ol(function(){if(n>=0&&n!==t.sorcerer[e].activeStreamIndex)return i=n>t.sorcerer[e].activeStreamIndex,t._switching[e]=!0,Ll(t._manifestLoader.switchTo(e,n),function(){let i={reasonForSwitch:r};t.sorcerer[e].switchTo(n,!0,i).then(()=>{t._switching[e]=!1}).catch(console.error)})},function(){return Ll(T(0),function(){const n=t.lowLatencyMode&&void 0!==i,r=t._sorcerer[e].activeStreamIndex,o=t._getCurrentStream(e,r),a=t._abr.getSegmentsToLoad(n,e,o),s=t._getSegmentTimeoutMs();a.forEach(n=>{const i=t._key(n),a={type:e,stream:r,segment:n.segment,part:n.part},l="video"===e&&!n.hint;let c=s;if(n.hint&&t._playInitiated&&n.start>t.currentTime){const e=1e3*(n.start-t.currentTime);c=Math.min(Ml,e+s)}const u=o.avg_bitrate/8*n.duration,d=t.sorcerer[e].streams[r],_=t._preventExpiredSegmentUsage(n);d.addSegment(_,{identifier:a,includeWithBandwidthChecks:l,priority:n.programDateTime,excludeConnectTime:t.lowLatencyMode,timeout:t._timeoutTest||t.lowLatencyMode?c:Ml,size:t._timeoutTest||t.lowLatencyMode?u:void 0}).catch(e=>{e instanceof To||e instanceof be||t._clearSegment(a)}),t._segmentsAdded[i]=a})})})})})}_preventExpiredSegmentUsage(e){var t;let n=null==e?void 0:e.url;const r=null==(t=this._manifestLoader)?void 0:t.baseUrl;return r&&n&&!n.startsWith(r)&&(n=`${r}${e.uri}`),n}_getStream(e,t=!1){var n;let r;if(this._switching[e])return{index:-1,reasonForSwitch:null};if("subtitles"===e)return r=this._manifestLoader.activeStream("video"),{index:r.subtitles[r.currentRenditions.subtitles].index,reasonForSwitch:null};if("audio"===e)return r=this._manifestLoader.activeStream("video"),{index:r.audio[r.currentRenditions.audio].index,reasonForSwitch:null};if(!t&&de(this._timeSinceLastStreamSwitchCheck)<this._STREAM_SWITCH_CHECK_INTERVAL)return{index:this._lastStreamIndex,reasonForSwitch:null};this._timeSinceLastStreamSwitchCheck=le();const i=null==(n=this.video)||null==(n=n.metadata)?void 0:n.percentShown,o=this._abr.filterStreams(this._streams.video,this._video.clientWidth,this._video.clientHeight,i);if(0===o.length)return{index:this._lastStreamIndex,reasonForSwitch:null};const{index:a,reasonForSwitch:s}=this._abr.optimalStream(o,this._lastStreamIndex),l=o[a],c=this._streams.video.indexOf(l);if(c>=0&&(t||c!==this._lastStreamIndex)){if(c>this._lastStreamIndex&&de(this._timeSinceLastDownShift)<this._DOWN_SHIFT_CHECK_INTERVAL)return{index:this._lastStreamIndex,reasonForSwitch:s};c<this._lastStreamIndex&&(this._timeSinceLastDownShift=le());const e={index:c,streams:this._streams.video};return this.fire(ki.STREAM_TARGET_CHANGE,e),this._lastStreamIndex=c,{index:c,reasonForSwitch:s}}return{index:this._lastStreamIndex,reasonForSwitch:s}}getCurrentStream(e="video"){return this._getCurrentStream(e)}_getCurrentStream(e="video",t=0){return void 0!==this._sorcerer&&null!==this._sorcerer&&(t=this._sorcerer[e].activeStreamIndex),this._streams[e][t]}_checkForPlaybackStall(){if(this._video.currentTime===this._lastStallCurrentTime&&le()-this._lastStallCheckTime>=1e3&&this._shouldBeMakingProgress()){const e=`Jumping forward 0.1s because of stall at time of ${this._video.currentTime}`;this.fire(Di.STALL_JUMP,{msg:e}),this._video.currentTime+=.1}this._lastStallCurrentTime=this._video.currentTime,this._lastStallCheckTime=le()}_shouldBeMakingProgress(){return this._video.readyState!==this._video.HAVE_NOTHING&&!!this._video.buffered.length&&!this._video.paused&&this._hasContentFor(this._video.buffered,this._video.currentTime)}_hasContentFor(e,t){for(let n=0;n<e.length;n++)if(!(t<e.start(n)-.1||t>e.end(n)-.5))return!0;return!1}_checkForPlaybackGap(){const e=this.buffered;if(!e.length)return;const t=e.length,n=this._video.currentTime;let r,i,o,a;try{r=function(e,t){if(!e||!e.length)return null;if(1===e.length&&e.end(0)-e.start(0)<1e-6)return null;let n;for(let r=0;r<e.length;r++)if(e.start(r)>t&&(0===r||e.end(r-1)-t<=.5)){n=r;break}return n>=0?n:null}(e,n)}catch(e){throw DOMException,e}if(null===r)return;if(this._video.readyState===this._video.HAVE_NOTHING)return;if(this._video.paused)return;if(t<=r)return;try{i=e.start(r),o=e.end(t-1)}catch(e){throw DOMException,e}const s=i-n,l=o-i,c=this.lowLatencyMode?1:2;if(l>0&&l<=this.segmentLength*c)return a=`Preventing jump too close to buffered end time. Would have jumped to: ${i}. Last buffered end time ${o}.`,void this.fire(Di.BUFFER_GAP_JUMP_PREVENT,{msg:a});0===r?(a=`Jumping forward ${s} seconds because of gap before start time of ${i}`,this.fire(Di.BUFFER_GAP_JUMP,{msg:a})):(a=`Jumping forward ${s} seconds because of gap starting at ${e.end(r-1)} and ending at ${i}`,this.fire(Di.BUFFER_GAP_JUMP,{msg:a})),this._video.currentTime=i+.1}_atDurationEnd(){const e=this.buffered;return!!(e&&e.length&&this._video.currentTime+Nl>e.end(e.length-1))}setVideoSrc(e){const t=this;return Rl(function(){return Ll(t._startPreload(t._preload),function(){return Ll(t._loadManifest(e),function(){return Ol(function(){if(t.sorcerer.isInstanceofManagedMediaSource(t.sorcerer.mediaSource)){const e=document.createElement("source");e.type="video/mp4",e.src=URL.createObjectURL(t.sorcerer.mediaSource),t._video.appendChild(e);let{src:n,mime:r}=t._telecineVideo.externalDisplayFiles.AirPlay;const i=document.createElement("source");return i.type=r,Ll(A(n),function(e){i.src=e,t._video.appendChild(i)})}t._video.src=URL.createObjectURL(t.sorcerer.mediaSource)},function(){t._videoReady.resolve()})})})})}get preload(){return this._preload}set preload(e){this._preload!==e&&"none"!==e&&this._preloadReady.resolve(),this._preload=e}_startPreload(e){const t=this;return Rl(function(){return t._preloadReady=oe(),"none"===e&&t.paused||t._preloadReady.resolve(),Ll(t._preloadReady)})}get latency(){var e;return null==(e=this._latencyController)?void 0:e.latency}get lowLatencyMode(){return this._lowLatencyMode}set lowLatencyMode(e){this._lowLatencyMode=e,this._manifestLoader&&(this._manifestLoader.lowLatencyMode=e)}get downloadSpeed(){return this._abr.getCurrentSpeed()}getBitrateAtTime(e,t="video",n="average"){if(!this._sorcerer)return 0;const r=this._sorcerer.streamIndexAtTime(e,t),i=this._streams[t][r];return i?i["average"===n?"avg_bitrate":"bitrate"]??i.bitrate:0}onprogress(){this._checkForPlaybackGap()}ondurationchange(){this._checkForPlaybackGap()}ontimeupdate(){if(!this._sorcerer)return;if(super.ontimeupdate(),null!==this._timeToSeekTo)return;this.atLiveTail=this._isNearLiveTail(this._video.currentTime),this._shouldSnapToLiveEdge(this._video.currentTime)?this.atLiveEdge=!0:(this._video.playbackRate<1||this._hasDriftedBehindLiveEdge())&&(this.atLiveEdge=!1),this.fire(ki.DROPPED_FRAMES,this._sorcerer.getDroppedFrameTotal());const e=this._getCurrentStream();if(e){const t={speed:this._abr.getCurrentSpeed(),bitrate:e.avg_bitrate,speeds:this._sorcerer.getResponseSpeeds()};this.fire(ki.BANDWIDTH,t)}!this._isOnline&&this._atDurationEnd()&&this.fire(Di.STREAM_OFFLINE),!this.lowLatencyMode&&de(this._timeSinceLastStreamSwitchCheck)>this._STREAM_SWITCH_CHECK_INTERVAL&&this._loadSegments()}get restrictedStreamIndexes(){return this._restrictedStreamIndexes}set restrictedStreamIndexes(e){this._restrictedStreamIndexes.join(",")!==e.join(",")&&(this._restrictedStreamIndexes=e,this._abr.lock(this._restrictedStreamIndexes))}get preloadStreamIndex(){return this._preloadStreamIndex}set preloadStreamIndex(e){this._preloadStreamIndex=e;const t=null!==e?[this._preloadStreamIndex]:this._restrictedStreamIndexes;this._abr.lock(t)}get videoWidth(){return this._stream?this._stream.width:this._video.videoWidth}get videoHeight(){return this._stream?this._stream.height:this._video.videoHeight}get currentTime(){return null!==this._timeToSeekTo?this._timeToSeekTo:this._video.currentTime}set currentTime(e){this._video.readyState<=this._video.HAVE_NOTHING||(this.eventHasDVREnabled&&this._playInitiated?this._shouldSnapToLiveEdge(e)?(this.atLiveEdge=!0,this.seekToTime(this.liveEdgeTime)):(this.atLiveEdge=!1,this.seekToTime(Math.max(e,this.liveTailTime))):this._video.currentTime=e)}get liveEdgeTime(){return this._latencyController.liveSyncPosition}get atLiveEdge(){return this._atLiveEdge}set atLiveEdge(e){this.atLiveEdge!==e&&this.eventHasDVREnabled&&(this._atLiveEdge=e,this._video.playbackRate>1&&e&&(this._video.playbackRate=1),this.lowLatencyMode=!!this.eventIsLowLatency&&e,this.bufferTarget=e?this.defaultBufferTarget:18,e&&(this.presentationDelay=this.defaultPresentationDelay))}get atLiveTail(){return this._atLiveTail}set atLiveTail(e){this.atLiveTail!==e&&this.eventHasDVREnabled&&(this._atLiveTail=e,this._video.playbackRate<1&&e&&(this._video.playbackRate=1))}get liveTailTime(){var e;const t=(null==(e=this._getCurrentStream())||null==(e=e.segments)||null==(e=e[0])?void 0:e.start)??0;return Math.max(t,0)}get ended(){return this._hasLiveEventEnded}get isLowerProfileAvailable(){return this._sorcerer?this._sorcerer.video.activeStreamIndex>0:null}get sorcerer(){return this._sorcerer}get segmentLength(){var e,t;return this.lowLatencyMode&&(null==(e=this._manifestLoader)||null==(e=e.activeStream("video"))?void 0:e.partTargetDuration)||(null==(t=this._manifestLoader)||null==(t=t.activeStream("video"))?void 0:t.targetDuration)}_shouldSnapToLiveEdge(e){return e>=this.liveEdgeTime-1*this.segmentLength}_hasDriftedBehindLiveEdge(e){return e>=this.liveEdgeTime-2*this.segmentLength}_isNearLiveTail(e){return e<=this.liveTailTime+2*this.segmentLength}_getSeekReadyPromiseForTime(e=this._timeToSeekTo){return new Promise(t=>{this._abr.canPlayFromTimeInStream(e,this._getCurrentStream())?t(e):this._resolveSeek=t}).then(e=>(this._timeToSeekTo=null,this._seekInProgressPromise=null,this._video.currentTime=e,new Promise((e,t)=>{this._lastSeekReject=t;const n=()=>{e(this._video.currentTime),this._video.removeEventListener("seeked",n)};this._video.addEventListener("seeked",n)})))}seekToTime(e){if(!this.eventHasDVREnabled||e===this.currentTime)return Promise.resolve();let t;if(null===this._timeToSeekTo||(this._lastSeekReject&&(this._lastSeekReject(),this._lastSeekReject=null),this._seekInProgressPromise=null,this._timeToSeekTo=null,this._resolveSeek=null),this._timeToSeekTo=e,!this._abr.canPlayFromTimeInStream(e,this._getCurrentStream()))try{this._segmentsAdded={};for(const e in this._streams)if(this._streams[e].length>0){const t=this.sorcerer[e].activeStreamIndex;this.sorcerer[e].streams[t].abort()}t=this._sorcerer.removeBuffer()}catch(e){}return this._seekInProgressPromise=this._getSeekReadyPromiseForTime(e),Promise.all([this._videoReady,t]).then(()=>(this._loadSegments(),this._seekInProgressPromise)).catch(e=>{})}onpause(){var e;super.onpause(),this.eventHasDVREnabled?this.atLiveEdge=!1:(null==(e=this._manifestLoader)||e.stop(),this._sorcerer&&(this._sorcerer.abortFetches(),this._segmentsAdded={},this._sorcerer.removeBuffer().catch(()=>{})))}onplay(){this.eventHasDVREnabled||this._playInitiated&&this._refreshManifest()}pause(){this.eventHasDVREnabled&&(this.atLiveEdge=!1),super.pause()}play(){const e=this;return super.play(kl(function(){return e._preloadReady.resolve(),null!==e._timeToSeekTo?Promise.resolve(e._seekInProgressPromise):Ol(function(){if(e._playInitiated&&!e.eventHasDVREnabled)return e._segmentsAdded={},Pl(Il(function(){return Dl(e._sorcerer.removeBuffer())},function(e){}),function(){return Dl(e._refreshManifest())})},function(){return Ll(e._videoReady,function(){return e._loadSegments(),Ll(e._bufferAvailable(),function(){const t=Math.max(e._latencyController.liveSyncPosition,e._video.buffered.start(0));return e._atLiveEdge?e.currentTime=t:e.currentTime=e._video.currentTime,e._playInitiated=!0,Promise.resolve()})})})}))}_bufferAvailable(){return new Promise(e=>{const t=()=>{this.buffered.length&&(this._sorcerer.off("appendbufferend",t),this.preloadStreamIndex=null,e())};this._sorcerer.on("appendbufferend",t),t()})}_getSegmentTimeoutMs(){return this._abr.getSegmentRelativeTimeout(this._streams.video,this._getCurrentStream("video"),1e3*this.segmentLength)}_loadMediaManifest(){return P("module/media-manifest.js")}setCaptionsShouldDisplay(e){this._captionsVisible=e}setCaptionsShouldLoad(e){this._captionsLoading=e}}function Vl(e){return e.forEach((e,t)=>{e.index=t}),e}function Bl(e,t){return e.bitrate-t.bitrate}const Ul=(e,t)=>({audio:e.map((t,n)=>p(p({},t),{},{avg_bitrate:t.bitrate,codec:t.audioCodec,codecs:t.audioCodec,id:t.attrs.URI,index:e.length-n,isDefault:t.default,label:t.name,language:t.attrs.LANGUAGE,segments:[],type:t.attrs.TYPE??"audio",uri:t.attrs.URI})).sort(Bl),video:t.map((e,n)=>p(p({},e),{},{avg_bitrate:e.bitrate,bitrate:e.bitrate,codec:e.videoCodec,codecs:e.videoCodec,framerate:parseInt(e.attrs["FRAME-RATE"]),height:e.height,id:n,index:t.length-n,label:e.name||`${e.height}p`,segments:[],width:e.width})).sort(Bl)});function Fl(e){const t={};for(var n,r=u(e.split("\r\n").map(e=>null==e?void 0:e.trim()).filter(Boolean));!(n=r()).done;){const e=n.value,[r,i]=e.split(": ");t[r]=i}return t}function Hl(e){var t,n,r;let i="main";return null!=(t=e.characteristics)&&t.includes("public.accessibility.describes-video")?i="descriptions":null!=(n=e.characteristics)&&n.includes("public.accessibility.commentary")?i="commentary":null!=(r=e.characteristics)&&r.includes("public.translation.dubbed")&&(i="translation"),i}function Wl(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Gl(){const e=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(){return function(e,r){try{var i=function(){if(n)return Wl(We(n).json(),function(e){return Wl(A(e.url.hls),function(e){t=function(e){return e.split("/").slice(0,-2).join("/")}(e)})})}()}catch(e){return}return i&&i.then?i.then(void 0,r):i}(0,function(e){})});let t=null,n=null;return{setPlaylistRefreshUrl(e){n=e},createCustomLoader:({baseLoader:n})=>function({baseLoader:n}){return class extends n{load(n,r,i){const o=function(e,t){return!!e&&e-t<Date.now()}(function(e){const t=pe(e),n=t&&t.pathname.match(/^\/(exp=)?(\d{10,})/);if(n&&n[2])return 1e3*Number(n[2])}(t??n.url),12e4),a="type"in n&&"level"===n.type;o&&a&&e(),n.url=function(e,t){if(!t)return e;const n=e.split("/"),r=t.split("/");return t+"/"+n.slice(r.length).join("/")}(n.url,t),super.load(n,r,i)}}}({baseLoader:n})}}function jl(e,t){return Array.from(e).indexOf(t)}function Yl(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function $l(e,t,n){if(n)return t?t(e()):e();try{var r=Promise.resolve(e());return t?r.then(t):r}catch(e){return Promise.reject(e)}}function ql(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}function zl(){}function Kl(e){if(e&&e.then)return e.then(zl)}class Xl extends bn{static get displayName(){return"HlsJsScanner"}static get supportsMse(){return!0}static get supportsLive(){return!0}static get hlsJsVersion(){var e;return null==(e=window.Hls)?void 0:e.version}static supported(e){var t;return null==(t=window.Hls)?void 0:t.isSupported()}static get supportedVideoTypes(){return[Li.hlsLive]}static get supportsAudioTracksFromScanner(){return!0}constructor(e,t){super(),d(this,"_airPlayAvailable",void 0),d(this,"_airPlayVideoElement",void 0),d(this,"_brain",void 0),d(this,"_captionsLoading",void 0),d(this,"_captionsTrack",void 0),d(this,"_captionsVisible",void 0),d(this,"_currentFile",void 0),d(this,"_customLoader",void 0),d(this,"_debugMode",void 0),d(this,"_enableMultiAudioLive",void 0),d(this,"_eventHandlers",void 0),d(this,"_eventStartTimeOffset",void 0),d(this,"_externalDisplayActivated",void 0),d(this,"_files",void 0),d(this,"_hls",void 0),d(this,"_hlsConfig",void 0),d(this,"_hlsEventHandlers",void 0),d(this,"_listenerAirPlay",void 0),d(this,"_listenerCaptionsCue",void 0),d(this,"_listenerWebKitFullscreenEnter",void 0),d(this,"_listenerWebKitFullscreenExit",void 0),d(this,"_options",void 0),d(this,"_originalVideo",void 0),d(this,"_playerInViewTracker",void 0),d(this,"_pollingTimeoutId",void 0),d(this,"_preload",void 0),d(this,"_streamOnline",void 0),d(this,"_streams",void 0),d(this,"_telecineVideo",void 0),d(this,"_totalFrames",void 0),d(this,"_video",void 0),d(this,"_videoWrapper",void 0),d(this,"_AirPlayListenerAvailability",void 0),d(this,"_AirPlayListenerLoadedMetadata",void 0),d(this,"_AirPlayListenerTarget",void 0),d(this,"hlsJsError",(e,t)=>{this.fire(ki.HLS_JS_ERROR,t),t.fatal&&this._handleFatalError(t.type)}),d(this,"handleManifestLoaded",(e,t)=>{this._streams=Ul(t.audioTracks,t.levels),this.fire(ki.STREAMS_LOADED,this._streams),this._streamOnline=!0,this.fire(Di.STREAM_ONLINE),this._loadAirPlayMetadata().catch(e=>{})}),d(this,"handleLevelLoaded",(e,t)=>{let n="";-1===this._hls.currentLevel&&this._onStreamChange(t),0===this._eventStartTimeOffset&&this._setEventStartTimeOffset();const r=this._options.lowLatencyMode?9:3,i=t.details.misses<r;(!t.details.live||this._streamOnline&&!i)&&(this._streamOnline=!1,this.fire(Di.STREAM_OFFLINE)),!this._streamOnline&&i&&(this._streamOnline=!0,this.fire(Di.STREAM_ONLINE))}),d(this,"handleLevelSwitched",(e,t)=>{this._onStreamChange(t)}),d(this,"_onStreamChange",e=>{const t=this._streams.video.findIndex(t=>t.bitrate===this._hls.levels[e.level].bitrate);this.fire(ki.STREAM_CHANGE,{index:t,streams:this._streams.video,metadata:null})}),d(this,"handleFPSDrop",(e,{currentDropped:t,currentDecoded:n,totalDroppedFrames:r})=>{this._totalFrames=this._totalFrames+t+n,this.fire(ki.DROPPED_FRAMES,{dropped:r,total:this._totalFrames})}),d(this,"handleNonNativeTextTracksFound",(e,t)=>{t.tracks.forEach((e,t)=>{var n;return this.loadTextTrack(e.label,null==(n=e.subtitleTrack)?void 0:n.lang,t)}),this.fire(ki.TEXT_TRACKS_AVAILABLE)}),d(this,"handleCuesParsed",(e,t)=>{t.cues.length&&(this._video.textTracks.length>0&&t.cues.forEach(e=>{this._video.textTracks[0].addCue(e)}),(this._captionsVisible||this._captionsLoading)&&this.fire(ki.SEGMENT_CUES_LOADED,t.cues))}),d(this,"handleFragmentLoaded",(e,t)=>{var n;const{frag:r}=t;if(!r)return;const i=this.getCurrentStream("video");var o;i&&this.fire(ki.BANDWIDTH,{speed:(null==(o=this._hls)?void 0:o.bandwidthEstimate)||0,bitrate:i.avg_bitrate||0});const a=null==(n=t.networkDetails)||null==n.getAllResponseHeaders?void 0:n.getAllResponseHeaders();this.fire(ki.DOWNLOAD_END,(({frag:e,liveEdge:t,liveTail:n,headers:r})=>{var i,o;return{identifier:{type:"main"===e.type?"video":e.type,stream:e.level,segment:e.sn},data:{request:{data:{url:e.url,duration:(null==(i=e.stats)?void 0:i.loading.end)-(null==(o=e.stats)?void 0:o.loading.start)}},response:{headers:r?Fl(r):{},arrayBuffer:()=>({byteLength:e.byteLength})},extraContext:{liveAvail:{start:n,end:t}}}}})({frag:r,liveEdge:this.liveEdgeTime,liveTail:this.liveTailTime,headers:a}))}),d(this,"handleAudioTracksUpdated",(e,t)=>{this.fire(ki.AUDIO_TRACK_CHANGED)}),d(this,"handleBufferAppended",(e,t)=>{var n;const r="initSegment"===(null==t||null==(n=t.frag)?void 0:n.sn);"video"!==t.type||r||null===this.preloadStreamIndex||(this.preloadStreamIndex=null)}),this._videoWrapper=e,this._options=t,this._video=e.querySelector("video"),this._airPlayAvailable=!1,this._airPlayVideoElement=null,this._captionsLoading=!1,this._captionsTrack=null,this._captionsVisible=!1,this._currentFile=null,this._customLoader=null,this._debugMode=this._options.hlsJsDebugMode??null,this._enableMultiAudioLive=this._options.enableMultiAudioLive,this._eventHandlers={},this._eventStartTimeOffset=0,this._externalDisplayActivated=!1,this._files=[],this._hls=null,this._hlsEventHandlers={},this._listenerAirPlay=null,this._listenerCaptionsCue=null,this._listenerWebKitFullscreenEnter=null,this._listenerWebKitFullscreenExit=null,this._originalVideo=this._video,this._playerInViewTracker=null,this._streamOnline=!1,this._telecineVideo=null,this._totalFrames=0,this._streams={video:[],audio:[]},this._video||(this._video=document.createElement("video"),this._video.preload="none",this._videoWrapper.appendChild(this._video)),this._updatePlayRequestVideo(),this.reactivate()}deactivate(){this._detachEventProxies(this._video),this._detachHlsJsEvents(),this._cleanUpAirPlay(),this._detachAirPlayEvents(),this._cleanUpInViewTracking(),this._hls&&(this._hls.destroy(),this._hls=null)}reactivate(){this._initHlsJs(),this._initVideoEventHandlers(),this._attachEventProxies(this._video),this._attachHlsJsEvents(),this._setUpAirPlay(),this._attachAirPlayEvents(),this._setUpInViewTracking(),this._video.style.display=""}isInView(){var e;return(null==(e=this._playerInViewTracker)?void 0:e.isInView)??!0}_cleanUpAirPlay(){this._airPlayVideoElement&&(this._airPlayVideoElement.removeEventListener(Pi.LOADED_METADATA,this._AirPlayListenerLoadedMetadata),this._airPlayVideoElement.removeEventListener(Vi,this._AirPlayListenerAvailability),this._airPlayVideoElement.removeEventListener(Bi,this._AirPlayListenerTarget),this._airPlayVideoElement=null)}_setUpAirPlay(){const e="AirPlay";this._airPlayVideoElement=document.createElement("video"),this._airPlayVideoElement.playsInline=!0,this._AirPlayListenerLoadedMetadata=e=>{this.fire(Pi.LOADED_METADATA,e)},this._AirPlayListenerAvailability=t=>{switch(t.availability){case"available":this._airPlayAvailable||(this._airPlayAvailable=!0,this.fire(Oi.AIRPLAY_AVAILABLE),this.fire(wi.AVAILABLE,{type:e}));break;case"not-available":this._airPlayAvailable&&(this._airPlayAvailable=!1,this.fire(Oi.AIRPLAY_UNAVAILABLE),this.fire(wi.UNAVAILABLE,{type:e}))}},this._AirPlayListenerTarget=t=>{t.target.webkitCurrentPlaybackTargetIsWireless?(this.onexternaldisplayactivated(),this.fire(Oi.AIRPLAY_ACTIVATED),this.fire(wi.ACTIVATED,{type:e})):(this.onexternaldisplaydeactivated(),this.fire(Oi.AIRPLAY_DEACTIVATED),this.fire(wi.DEACTIVATED,{type:e}))},this._airPlayVideoElement.addEventListener(Pi.LOADED_METADATA,this._AirPlayListenerLoadedMetadata),this._airPlayVideoElement.addEventListener(Vi,this._AirPlayListenerAvailability),this._airPlayVideoElement.addEventListener(Bi,this._AirPlayListenerTarget)}_attachAirPlayEvents(){this._listenerAirPlay=()=>{this._video.webkitCurrentPlaybackTargetIsWireless?this._hls.stopLoad():this._hls.startLoad()},this._video.addEventListener(Bi,this._listenerAirPlay)}_detachAirPlayEvents(){this._video.removeEventListener(Bi,this._listenerAirPlay),this._listenerAirPlay=null}_initHlsJs(){const e=window.Hls;if(!e)return;this._brain=function(){let e=null,t=[],n=[],r=null;return{lock:e=>{n=e||[],o()},createAugmentedController:({baseABRController:n})=>function({baseABRController:n}){return class extends n{constructor(t){super(t),t&&(e=t)}get nextAutoLevel(){var r;if(1===t.length)return t[0];const i=Object.getOwnPropertyDescriptor(n.prototype,"nextAutoLevel").get.call(this);if(0===t.length||t.includes(i))return i;const o=(null==(r=e.levels[i])?void 0:r.bitrate)||0,a=t.map(t=>{var n;return(null==(n=e.levels[t])?void 0:n.bitrate)||0}),s=Math.min.apply(Math,f(a)),l=Math.max.apply(Math,f(a));return o<s?t[a.indexOf(s)]:o>l?t[a.indexOf(l)]:i}set nextAutoLevel(e){Object.getOwnPropertyDescriptor(n.prototype,"nextAutoLevel").set.call(this,e)}}}({baseABRController:n}),setPreloadStreamIndex:e=>{if(r=e,null!==e){const n=i([e]);t=n.length?[n[0]]:[]}else o()},getPreloadStreamIndex:()=>r,getWhitelist:()=>n};function i(t){var n;const r=(null==(n=e)?void 0:n.levels)||[];if(!e||!r.length||null==t||!t.length)return[];const i=Ul(e.audioTracks||[],e.levels).video.filter((e,n)=>t.includes(n));return((e,t)=>e.map(e=>t.findIndex(t=>t.bitrate===e.bitrate)))(i,e.levels)}function o(){t=i(n)}}();const t=this._brain.createAugmentedController({baseABRController:e.DefaultConfig.abrController});this._customLoader=Gl();const n=this._customLoader.createCustomLoader({baseLoader:e.DefaultConfig.loader});this._hlsConfig={debug:"debug"===this._debugMode,liveDurationInfinity:!0,lowLatencyMode:this._options.lowLatencyMode??!0,capLevelToPlayerSize:!0,capLevelOnFPSDrop:!0,renderTextTracksNatively:!1,liveSyncMode:this._options.dvrEnabled?"buffered":"edge",loader:n,abrController:t,backBufferLength:30,audioPreference:void 0},this._hls=new e(this._hlsConfig),this._hls.attachMedia(this._video),this._hls.subtitleDisplay=!1,this._video.webkitCurrentPlaybackTargetIsWireless&&this._hls.stopLoad(),"window"!==this._debugMode&&"debug"!==this._debugMode||(window._hls=this._hls)}_synchronizeTextTracksState(e,t){const n=jl(e.textTracks,t);"showing"===t.mode&&-1===this._hls.subtitleTrack&&(this._hls.subtitleTrack=n),"disabled"===t.mode&&-1!==this._hls.subtitleTrack&&(this._captionsTrack.mode="hidden"),"disabled"===t.mode&&this._telecineVideo.textTracks[n].dispatchEvent("cuechange")}_handleNativeFullscreenEnter(){if(this._captionsTrack){this._hls.subtitleDisplay=!0;const e=()=>{S(this._video)&&(this._synchronizeTextTracksState(this._video,this._captionsTrack),this._pollingTimeoutId=setTimeout(e,250))};e()}}_handleNativeFullscreenExit(){if(this._captionsTrack){const e=jl(this._video.textTracks,this._captionsTrack);this._telecineVideo.textTracks[e].mode="hidden",this._hls.subtitleDisplay=!1}clearTimeout(this._pollingTimeoutId),this._pollingTimeoutId=null}_cleanUpInViewTracking(){var e;null==(e=this._playerInViewTracker)||e.cleanup()}_setUpInViewTracking(){this._cleanUpInViewTracking(),this._playerInViewTracker=ie(this._video)}_updatePlayRequestVideo(){var e;null!=(e=this._options)&&e.playRequest&&(this._options.playRequest.video=this._video)}_setEventStartTimeOffset(){var e;if(null==(e=this._hls)||!e.latestLevelDetails)return;const{startSN:t,targetduration:n,age:r}=this._hls.latestLevelDetails;this._eventStartTimeOffset=t*n+r}_getAirPlayFile(){var e;const t="AirPlay";if(null!=(e=this._telecineVideo.externalDisplayFiles)&&e[t])return this._telecineVideo.externalDisplayFiles[t];const n=this.constructor.prototype.supportedVideoTypes,r=this._telecineVideo.files.filter(e=>-1!==n.indexOf(e.mime)).sort((e,t)=>e.mime===t.mime?e.priority-t.priority:n.indexOf(e.mime)-n.indexOf(t.mime));if(!r.length)throw new Error("No files available for AirPlay.");return r[0]}_loadAirPlayMetadata(){const e=this;return $l(function(){return e._airPlayVideoElement.readyState>=e._airPlayVideoElement.HAVE_METADATA?Promise.resolve():Yl(new Promise(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(t,n){return e._airPlayVideoElement.addEventListener(Pi.LOADED_METADATA,()=>t(),{once:!0}),Kl(ql(function(){let{src:t,mime:n}=e._getAirPlayFile();const r=document.createElement("source");return r.type=n,Yl(A(t),function(t){r.src=t,e._airPlayVideoElement.appendChild(r),e._airPlayVideoElement.load()})},function(e){n(e)}))})))})}_initVideoEventHandlers(){void 0!==this._video.webkitPresentationMode&&this._video.addEventListener(Pi.WEBKIT_PRESENTATION_MODE_CHANGED,()=>{this.fire(this.pictureInPictureActive?Pi.ENTER_PICTURE_IN_PICTURE:Pi.LEAVE_PICTURE_IN_PICTURE)})}_attachEventProxies(e){Object.values(Pi).forEach(t=>{const n=e=>this._onVideoEvent(t,e);e.addEventListener(t,n),this._eventHandlers[t]=n}),this._listenerWebKitFullscreenEnter=()=>{this._handleNativeFullscreenEnter()},this._listenerWebKitFullscreenExit=()=>{this._handleNativeFullscreenExit()},this._video.addEventListener(Pi.WEBKIT_BEGIN_FULLSCREEN,this._listenerWebKitFullscreenEnter),this._video.addEventListener(Pi.WEBKIT_END_FULLSCREEN,this._listenerWebKitFullscreenExit)}_detachEventProxies(e){Object.entries(this._eventHandlers).forEach(([t,n])=>{e.removeEventListener(t,n)}),this._eventHandlers={},this._video.removeEventListener(Pi.WEBKIT_BEGIN_FULLSCREEN,this._listenerWebKitFullscreenEnter),this._video.removeEventListener(Pi.WEBKIT_END_FULLSCREEN,this._listenerWebKitFullscreenExit),clearTimeout(this._pollingTimeoutId),this._pollingTimeoutId=null}_onVideoEvent(e,t){this.fire(e,t)}get preload(){return this._preload}set preload(e){this._preload=e}get currentTime(){return this._video?this._video.currentTime+this._eventStartTimeOffset:0}set currentTime(e){this._isNearLiveEdge(e)&&(e=this.liveEdgeTime),this._video.currentTime=Math.max(e-this._eventStartTimeOffset,0)}get paused(){return this._video.paused}get ended(){return this._video.ended}get videoWidth(){return this._video.videoWidth}get videoHeight(){return this._video.videoHeight}get duration(){return this._video.duration}get buffered(){return this._video.buffered}get playbackRate(){return this._video.playbackRate}set playbackRate(e){this._video.playbackRate=e}set muted(e){this._video.muted=e}get muted(){return this._video.muted}get volume(){return w(this._video.volume)}set volume(e){this._video.volume=R(e)}get played(){return this._video.played}get audioTracks(){if(!this._enableMultiAudioLive)return[];const{audioTrack:e,audioTracks:t}=this._hls;return t.length?function(e,t){if(!e.length)return[];const n=e.find(e=>e.default),r=n?n.id:e[0].id,i=-1!==t;return e.map(e=>{const n=i?e.id===t:e.id===r;return{id:`${e.id}`,language:e.lang,label:e.name,kind:Hl(e),provenance:"PROVENANCE_USER_UPLOADED",enabled:n}})}(t,e):[]}get autoPictureInPicture(){return this._video.autoPictureInPicture}set autoPictureInPicture(e){this._video.autoPictureInPicture=e}get disablePictureInPicture(){return this._video.disablePictureInPicture}set disablePictureInPicture(e){this._video.disablePictureInPicture=e}requestPictureInPicture(){const e=this;return $l(function(){return Yl(function(t,n){var r=function(){if(e._video.readyState<e._video.HAVE_METADATA)return function(e){if(!void 0)return e&&e.then?e.then(zl):Promise.resolve()}(e._initPreload())}();return r&&r.then?r.then(n):n()}(0,function(){try{return e._video.requestPictureInPicture()??e._video.webkitSetPresentationMode("picture-in-picture")}catch(e){throw new Error("Picture-in-picture is not supported by this browser",e)}}))})}play(){return this._video.play()}pause(){this._video.pause()}set currentFile(e){this._currentFile=e,this.setVideoSrc(e.src)}get currentFile(){return this._currentFile}get video(){return this._telecineVideo}set video(e){this._telecineVideo!==e&&(this._captionsTrack&&this._captionsTrack.removeEventListener("cuechange",this._listenerCaptionsCue),this._telecineVideo=e,this._files=e.files.filter(e=>-1!==Xl.supportedVideoTypes.indexOf(e.mime)),this._customLoader.setPlaylistRefreshUrl(e.metadata.playlistRefreshUrl),this._updateCurrentFile())}setVideoSrc(e){const t=this;return $l(function(){return Yl(Kl(ql(function(){return Yl(A(e),function(e){t.fire(ki.CURRENT_FILE_CHANGE,t._currentFile),t._hls.loadSource(e),t._video.webkitCurrentPlaybackTargetIsWireless&&t._hls.stopLoad()})},function(e){t._handleFatalError(`error setting video src: ${e}`)})))})}getCurrentStream(e="video"){var t,n;let r=null==(t=this._hls)?void 0:t.currentLevel;var i,o;return"audio"===e?(r=null==(i=this._hls)?void 0:i.audioTrack,(null==(o=this._streams.audio)?void 0:o[r])||null):(null==(n=this._streams.video)?void 0:n[r])||null}_pickFile(){if(this._files.length<1)return null;const e=this._files.slice(0).sort((e,t)=>e.priority-t.priority);return e[0]}_updateCurrentFile(){const e=this._pickFile();e?this.currentFile=e:this._handleFatalError("all files failed")}_initPreload(){return new Promise(e=>{this.once(Pi.LOADED_METADATA,e)})}get externalDisplayAvailable(){return!0}get externalDisplayActive(){return this._externalDisplayActivated}get latency(){var e;return(null==(e=this._hls)?void 0:e.latency)||0}get lowLatencyMode(){var e;return(null==(e=this._hls)?void 0:e.lowLatencyMode)??!1}set lowLatencyMode(e){this._hls&&(this._hls.lowLatencyMode=e)}get presentationDelay(){var e;return(null==(e=this._hls)?void 0:e.targetLatency)||0}get videoElement(){return this._video}get manifest(){const{audio:e,video:t}=this._streams;return{audio:e.toReversed(),video:t.toReversed()}}get atLiveEdge(){return this._isNearLiveEdge(this.currentTime)}get liveEdgeTime(){var e;return((null==(e=this._hls)?void 0:e.liveSyncPosition)||0)+this._eventStartTimeOffset}get atLiveTail(){return this._isNearLiveTail(this.currentTime)}get liveTailTime(){var e;if(null!=(e=this._hls)&&e.latestLevelDetails){const e=this._hls.latestLevelDetails.fragments[0];return((null==e?void 0:e.start)||0)+this._eventStartTimeOffset}return this._eventStartTimeOffset}_isNearLiveEdge(e){return e>=this.liveEdgeTime-3}_isNearLiveTail(e){return e<=this.liveTailTime+3}get pictureInPictureActive(){return"picture-in-picture"===this._video.webkitPresentationMode||!!document.pictureInPictureElement}exitPictureInPicture(){const e=this;return $l(function(){return"picture-in-picture"===e._video.webkitPresentationMode?Yl(e._video.webkitSetPresentationMode("inline")):Yl(document.exitPictureInPicture())})}get restrictedStreamIndexes(){var e;return null==(e=this._brain)?void 0:e.getWhitelist()}set restrictedStreamIndexes(e){var t;null==(t=this._brain)||t.lock(e)}get preloadStreamIndex(){var e;return null==(e=this._brain)?void 0:e.getPreloadStreamIndex()}set preloadStreamIndex(e){var t;null==(t=this._brain)||t.setPreloadStreamIndex(e)}getBitrateAtTime(e,t="video",n="average"){var r;const i=null==(r=this._hls)?void 0:r.currentLevel;if(-1===i||void 0===i)return 0;const o="average"===n?"averageBitrate":"bitrate";var a;return"video"===t?null==(a=this._hls.levels[i])?void 0:a[o]:this._hls.audioTracks[this._hls.audioTrack].bitrate}getHlsJs(){return this._hls}endLive(){this._streamOnline=!1,this.fire(Pi.ENDED)}takeSnapshot(){Xi(this._video,this._videoWrapper)}removeSnapshot(){Zi(this._videoWrapper)}swapVideo(e,t){const n=e.paused;e.pause(),this._detachEventProxies(e),e.parentElement.replaceChild(t,e),this._updatePlayRequestVideo(),this._attachEventProxies(t),this._video=t,t.currentTime=e.currentTime,n||t.play()}onexternaldisplayactivated(){this._externalDisplayActivated||(this._video!==this._airPlayVideoElement&&(this._originalVideo=this._video,this.swapVideo(this._video,this._airPlayVideoElement)),this._externalDisplayActivated=!0)}onexternaldisplaydeactivated(){this._externalDisplayActivated&&(this._originalVideo&&(this.swapVideo(this._airPlayVideoElement,this._originalVideo),this._originalVideo=null),this._externalDisplayActivated=!1)}showExternalDisplayPicker(){this._airPlayVideoElement.webkitShowPlaybackTargetPicker(),this._loadAirPlayMetadata().then(()=>this._airPlayVideoElement.webkitShowPlaybackTargetPicker()).catch(e=>{})}addTextTrack(e){return this._captionsTrack||this.loadTextTrack(e.label,e.language,e.id),this._captionsTrack}removeTextTrack(e){}getCuesForTrack(e){return this._video.textTracks[e.id].cues||[]}getActiveCuesForTrack(e){var t;return(null==(t=this._video.textTracks[e.id])?void 0:t.activeCues)||[]}setModeForTrack(e,t){this._captionsTrack.mode=t;const n="disabled"===t&&!this._captionsLoading;this._hls.subtitleTrack=n?-1:parseInt(e.id)}loadTextTrack(e,t,n){if(!this._captionsTrack){const r=new TelecineTextTrack({label:e,id:`${n}`,kind:"captions",language:t},this._telecineVideo);this._telecineVideo.textTracks=Gi([r]),this._captionsTrack=this._video.addTextTrack(r.kind,r.label,r.language),this._listenerCaptionsCue=()=>{this._telecineVideo.textTracks[0].dispatchEvent("cuechange")},this._captionsTrack.addEventListener("cuechange",this._listenerCaptionsCue)}}setCaptionsShouldDisplay(e){this._captionsVisible=e}setCaptionsShouldLoad(e){this._captionsLoading=e,this._hls.subtitleTrack=0}_handleFatalError(e){this.fire(ki.SCANNER_ERROR,{reason:`hls.js fatal error: ${e}`})}enableAudioTrack(e){if(!e)return null;const t=parseInt(e,10);if(isNaN(t)||!this._hls.audioTracks||t<0||t>=this._hls.audioTracks.length)return null;this._hls.audioTrack!==t&&(this._hls.audioTrack=t);const n=this.audioTracks;let r=null;for(let t=0;t<n.length;t++){const i=n[t].id===e;n[t].enabled=i,i&&(r=n[t])}return this.fire(ki.AUDIO_TRACK_CHANGED),r}_attachHlsJsEvents(){const e=window.Hls.Events,t={[e.ERROR]:this.hlsJsError,[e.MANIFEST_LOADED]:this.handleManifestLoaded,[e.LEVEL_LOADED]:this.handleLevelLoaded,[e.LEVEL_SWITCHED]:this.handleLevelSwitched,[e.FPS_DROP]:this.handleFPSDrop,[e.FRAG_LOADED]:this.handleFragmentLoaded,[e.NON_NATIVE_TEXT_TRACKS_FOUND]:this.handleNonNativeTextTracksFound,[e.CUES_PARSED]:this.handleCuesParsed,[e.BUFFER_APPENDED]:this.handleBufferAppended,[e.AUDIO_TRACKS_UPDATED]:this.handleAudioTracksUpdated};for(const e in t){const n=t[e];n&&(this._hls.on(e,n),this._hlsEventHandlers[e]=n)}}_detachHlsJsEvents(){if(!this._hls)return;const e=window.Hls.Events;Object.entries(this._hlsEventHandlers).forEach(([t,n])=>{this._hls.off(e[t],n)}),this._hlsEventHandlers={}}}const Zl=document.createElement("video");class Jl extends Eo{static get displayName(){return"NativeHLSLiveScanner"}static get supportsMse(){return!1}static get supportsLive(){return!0}static supported(){return Jl.supportedVideoTypes.length>0}static get supportedVideoTypes(){const e=[];return"function"!=typeof Zl.canPlayType||Zl.canPlayType(Li.hlsLive).replace(/^no$/,"")&&e.push(Li.hlsLive),e}constructor(e,t={}){super(e,t),this._apiManifestUrl=null,this._playInitiated=!1,this._atLiveEdge=!0,this._atLiveTail=!1,this._secondsBehindPlaylistStart=0,this._playlistOffsetSet=!1,this.reset(),this.dvrEnabled=t.dvrEnabled??!1,this.getLiveEventStartTimeEpoch=t.getLiveEventStartTimeEpoch,window.addEventListener("online",()=>{this.play()})}deactivate(){super.deactivate(),this.reset()}reset(){this._manifestRefreshTimeout&&clearTimeout(this._manifestRefreshTimeout),this._onReady=null,this._isOnline=!1,this._hasLiveEventEnded=!1,this._hlsAvailabilityCheckTimeout=null,this._manifestRefreshTimeout=null,this._secondsBehindPlaylistStart=0,this._playlistOffsetSet=!1,this._abr=new gl(this,this._options),this._restrictedStreamIndexes=[]}endLive(){this._isOnline=!1,this._hasLiveEventEnded=!0,clearTimeout(this._manifestRefreshTimeout),this._video.pause(),function(e){setTimeout(e,0)}(()=>{super.deactivate(),this.fire(Pi.ENDED)})}_setUpRefreshTimer(){const e=he(this.video.metadata.playlistRefreshUrl.split("?")[1]);e.expires&&(this._manifestRefreshTimeout=setTimeout(()=>{this._refreshLiveApiPlaylistUrl()},1e3*(e.expires-10)))}_refreshLiveApiPlaylistUrl(e=0){const t=this.video.metadata.playlistRefreshUrl;return We(t).json().then(n=>{if(!("url"in n))throw new Error(`Error parsing 'url' key from player live API refresh endpoint: ${t} ${n}`);return this._loadNativeHlsManifest(n.url.hls).then(()=>(this.play(),this._checkHlsAvailability(5e3),null)).catch(()=>this._refreshLiveApiPlaylistUrl(++e))}).catch(()=>{if(e>=3)throw new Error(`Manifest failed to load after ${e} attempts.`);return++e,this._refreshLiveApiPlaylistUrl(e)})}_setUpLiveEventListeners(){this.on(Di.STREAM_OFFLINE,()=>{this._isOnline=!1})}_setUpNativeHls(e){return this._setUpLiveEventListeners(),this._isOnline=!0,this.fire(Di.STREAM_ONLINE),this._checkHlsAvailability(5e3),Promise.resolve(e)}_loadNativeHlsManifest(e){return this._apiManifestUrl=e,/json=1/.test(e)?We(e).json().then(e=>{if(!("url"in e))throw new Error(`Error parsing 'url' key from Live API manifest endpoint: ${this._apiManifestUrl} ${e}`);this._video.src=this._getUrlWithMinSecondsParam(e.url),this._setUpRefreshTimer()}).catch(e=>{const t=this.video.metadata.playlistRefreshUrl;return We(t).json().then(e=>{if(!("url"in e))throw new Error(`Error parsing 'url' key from player live API refresh endpoint: ${t} ${e}`);this._apiManifestUrl=e.url.ios,this._video.src=this._getUrlWithMinSecondsParam(e.url.ios),this._setUpRefreshTimer()})}):(this._video.src=this._getUrlWithMinSecondsParam(e),this._setUpRefreshTimer(),Promise.resolve())}_getUrlWithMinSecondsParam(e){if(this.dvrEnabled)return e;const t=new URL(e);return t.searchParams.set("min_seconds","30"),t.toString()}_loadTextTracks(){const e=this._video.textTracks;if(null!=e&&e.length)for(let t=0;t<e.length;t++){const n=e[t];this._loadTextTrack(n)}}_loadTextTrack(e){if(e&&!this._captionsTrack){const{label:t,kind:n,language:r,id:i}=e,o=new TelecineTextTrack({label:t,kind:n,language:r,id:i},this._telecineVideo);this._telecineVideo.textTracks=Gi([o]),this._addTextTrackListeners(o,e),this.fire(ki.TEXT_TRACKS_AVAILABLE),this._captionsTrack=e}}setModeForTrack(e,t){return this._captionsTrack&&this._captionsTrack.mode!==t&&(this._captionsTrack.mode=t),this}getActiveCuesForTrack(e){return this._captionsTrack&&"disabled"!==this._captionsTrack.mode?this._captionsTrack.activeCues:[]}addTextTrack(e){return this._captionsTrack||this._loadTextTracks(),this._captionsTrack}_checkHlsAvailability(e){"number"==typeof Q.iOS&&Q.iOS<9||this._hlsAvailabilityCheckTimeout||(this._hlsAvailabilityCheckTimeout=setTimeout(()=>{if(!this._isOnline)return;const e=new XMLHttpRequest;e.onload=()=>{410!==e.status?(200!==e.status&&this.fire(Di.STREAM_OFFLINE),e.response.match(/^#EXTM3U\n#EXT-X-VERSION:3\n$/)&&this.fire(Di.STREAM_OFFLINE)):this._refreshLiveApiPlaylistUrl()},e.onerror=()=>{this.fire(Di.STREAM_OFFLINE)},/json=1/.test(this._apiManifestUrl)?We(this._apiManifestUrl).json().then(t=>{"url"in t||this.fire(Di.STREAM_OFFLINE),e.open("GET",t.url),e.send()}).catch(()=>{e.open("GET",this._apiManifestUrl),e.send()}):(e.open("GET",this._apiManifestUrl),e.send())},e))}_shouldSnapToLiveEdge(e){return e>=this.liveEdgeTime-3}_hasDriftedBehindLiveEdge(e){return e>=this.liveEdgeTime-6}_isNearLiveTail(e){return e<=this.liveTailTime+6}setVideoSrc(e){this._onReady=this._setUpNativeHls(e).then(()=>(this._apiManifestUrl=e,this._loadNativeHlsManifest(e)))}ontimeupdate(){super.ontimeupdate(),this.atLiveTail=this._isNearLiveTail(this._video.currentTime),this._shouldSnapToLiveEdge(this._video.currentTime)?this.atLiveEdge=!0:(this._video.playbackRate<1||this._hasDriftedBehindLiveEdge())&&(this.atLiveEdge=!1)}onplaying(){this._playInitiated=!0}oncanplay(){if(!this._playInitiated){const e=this._video.seekable.length;e>0&&(this._video.currentTime=this._video.seekable.end(e-1))}if(!this._playlistOffsetSet){this._playlistOffsetSet=!0;const e=this._video.getStartDate().getTime()/1e3;this._secondsBehindPlaylistStart=e-this.getLiveEventStartTimeEpoch()}this._loadTextTracks()}onprogress(){this._hlsAvailabilityCheckTimeout&&(clearTimeout(this._hlsAvailabilityCheckTimeout),this._hlsAvailabilityCheckTimeout=null)}onstalled(){this._checkHlsAvailability(1e4)}onerror(){return this._video.error.code===this._video.error.MEDIA_ERR_SRC_NOT_SUPPORTED?(We(this._apiManifestUrl).then(()=>{super.onerror()}).catch(e=>{e instanceof Te?this.fire(Pi.ERROR,new TelecineError("MediaNetworkError","A network error ocurred while fetching the media.")):super.onerror()}),!1):super.onerror()}onwaiting(){this._checkHlsAvailability(1e4)}get currentTime(){return this._secondsBehindPlaylistStart+this._video.currentTime}set currentTime(e){if(this.liveEdgeTime){const t=e>=this.liveEdgeTime-3;this.atLiveEdge=t}this._video.currentTime=e-this._secondsBehindPlaylistStart}get liveEdgeTime(){const e=this._video.seekable.length;return e>0?this._secondsBehindPlaylistStart+this._video.seekable.end(e-1):0}get atLiveEdge(){return this._atLiveEdge}set atLiveEdge(e){this.dvrEnabled&&(this._atLiveEdge=e,this._video.playbackRate>1&&e&&(this._video.playbackRate=1))}get atLiveTail(){return this._atLiveTail}set atLiveTail(e){this.dvrEnabled&&(this._atLiveTail=e,this._video.playbackRate<1&&e&&(this._video.playbackRate=1))}get liveTailTime(){return this._video.seekable.length>0?this._secondsBehindPlaylistStart+this._video.seekable.start(0):0}get ended(){return this._hasLiveEventEnded}get supportsPlaybackRate(){return super.supportsPlaybackRate&&this.dvrEnabled}pause(){this.dvrEnabled&&(this.atLiveEdge=!1),super.pause()}play(){return super.play(()=>this._onReady)}}class Ql{static get displayName(){return"Effect"}static get supported(){return!1}static get supportedScanners(){return[]}constructor(e,t={}){this._telecine=e,this._element=e._element,this._options=t}activate(){throw new TelecineError("NotImplemented","The effect must implement the activate method.")}deactivate(){throw new TelecineError("NotImplemented","The effect must implement the deactivate method.")}}const ec=new WeakMap,tc=new WeakMap;class TelecineFile{constructor({src:e,mime:t,id:n=ve(),priority:r=0,metadata:i={}},o){if(!e)throw new TypeError("Must provide a src for the file.");if(!t)throw new TypeError("Must provide a mime type for the file.");Object.defineProperties(this,{mime:{value:t,enumerable:!0},id:{value:`${n}`,enumerable:!0},metadata:{value:i,enumerable:!0}}),this.video=o,this.priority=r,this.src=e}get priority(){return ec.get(this)}set priority(e){if(!("number"==typeof(e=parseInt(e,10))&&isFinite(e)&&Math.floor(e)===e&&e>=0))throw new TypeError("The file priority must be an integer greater than or equal to 0.");ec.set(this,e)}get src(){return tc.get(this)}set src(e){tc.set(this,e),this.video.fire(ki.FILE_SRC_UPDATE,this)}get restrictedStreamIndexes(){if(!Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.video.currentScanner),"restrictedStreamIndexes"))throw new ReferenceError("The current scanner does not support streams.");return this.video.currentScanner.restrictedStreamIndexes}set restrictedStreamIndexes(e){if(!Array.isArray(e))throw new TypeError("Indexes must be an array.");if(!Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.video.currentScanner),"restrictedStreamIndexes"))throw new ReferenceError("The current scanner does not support streams.");this.video.currentScanner.restrictedStreamIndexes=e}}class nc extends bn{constructor({enabled:e=!1,id:t=ve(),kind:n="",label:r="",language:i="",provenance:o=""},a){super(),this._enabled=e,Object.defineProperties(this,{kind:{value:n,enumerable:!0},label:{value:r,enumerable:!0},language:{value:i,enumerable:!0},id:{value:`${t}`,enumerable:!0},provenance:{value:o,enumerable:!0}}),this.video=a}get enabled(){return this._enabled}get active(){return this._enabled}set enabled(e){this._enabled=e}dispatchEvent(e){this.fire(e,{target:this})}}const rc="default";class ic{constructor(){this._cdmList={},this._preferredKeySystems={},this._licenseTokenUrls={},this._licenseUrls={},this._certificateUrls={},this._keySessions={},this._keyChainState=rc,this._keyTypes={KEYCHAIN_DEFAULT:rc,KEYCHAIN_SD_FALLBACK:"sd-fallback"}}get state(){return this._keyChainState}set state(e){Object.values(this._keyTypes).indexOf(e)<0||(this._keyChainState=e)}get activeKeySession(){return this._keySessions[this._keyChainState]}get activeKeySystem(){return this._preferredKeySystems[this._keyChainState]}get keyTypes(){return this._keyTypes}get activeLicenseTokenUrl(){return this._licenseTokenUrls[this._keyChainState]}get activeLicenseUrl(){return this._licenseUrls[this._keyChainState]}getAllKeySessions(){return Object.values(this._keySessions)||[]}getCdms(e){return this._cdmList[e]}getKeySystem(e){return this._preferredKeySystems[e]}getAllPreferredKeySystems(){return this._preferredKeySystems}addCdms(e,t){this._cdmList[t]=e}addKeySession(e,t){this._keySessions[t]=e}addLicenseTokenUrl(e,t){this._licenseTokenUrls[t]=e}addLicenseUrl(e,t){this._licenseUrls[t]=e}addPreferredKeySystem(e,t){this._preferredKeySystems[t]=e}closeAllKeySessions(){for(let e in this._keySessions)this._keySessions[e]&&this._keySessions[e].sessionId&&this._keySessions[e].close()}}const oc="com.apple.fps.1_0",ac="com.microsoft.playready";function sc(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function lc(e,t){var n=e();return n&&n.then?n.then(t):t(n)}function cc(e,t,n){if(n)return t?t(e()):e();try{var r=Promise.resolve(e());return t?r.then(t):r}catch(e){return Promise.reject(e)}}function uc(){}class dc{constructor(e,t,n={}){this.logPrefix="DrmHandler 🔒:",this._hasFallbackAssets=!!e.fallback_asset,this._useHls=t,this._drmLaUrlParams=n,this._fallbackCallback=()=>null,this._currentTime=0,this._firstLaUrlRequest=!0,this._hasFallbackSourceUpdated=!1,this._encryptedEventName=null,this._boundGenerateRequest=this._generateRequest.bind(this),this._boundOnKeyStatus=this._onKeyStatus.bind(this),this._boundUpdateTimeRef=this.updateTimeRef.bind(this),this._keyChain=new ic,this._keyTypes=this._keyChain.keyTypes,this._keyChain.state=this._keyTypes.KEYCHAIN_DEFAULT,this.updateLAUrls(e)}init(e,t={},n={}){const r=this;return cc(function(){let i=!1;return r._video=e._video,r._scanner=e,window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration||window.WebKitMediaKeys?(n=r._initDataToArray(n),sc(lc(function(){if(r._keyChain.state===r._keyTypes.KEYCHAIN_SD_FALLBACK)return r._scanner.once(Pi.SEEKING,r._boundUpdateTimeRef),r._hasFallbackSourceUpdated=!0,sc(r.waitForPlayAttempt(),function(){const e=r.setUpKeySystem(t,n,r._keyTypes.KEYCHAIN_SD_FALLBACK).then(()=>{r._scanner.currentTime=r._currentTime,r._scanner.play()});return i=!0,e})},function(e){if(i)return e;const o=r._keyChain.getCdms(r._keyTypes.KEYCHAIN_DEFAULT);return o?sc(cl(o,r._useHls,t),function(e){let i=!1;const a=r.getPreferredMediaKeySystem(e);return a&&a.mediaKeys?(r._scanner.fire(ki.DRM_CDM_CHANGE,a.name),lc(function(){if(r._hasFallbackAssets){var e;const t=a.name===o.widevine.id,n=(()=>{try{return window.location.origin!==window.parent.location.origin}catch(e){return!0}})(),s=t&&n&&!window.location.hostname.includes("embed.criterionchannel.com"),l=null==(e=a.mediaKeys)?void 0:e.getStatusForPolicy;return sc(l?a.mediaKeys.getStatusForPolicy({minHdcpVersion:"1.0"}):"usable",function(e){if(s||"output-restricted"===e){const e=r._fallBackToSD();return i=!0,e}},!l)}},function(e){return i?e:sc(r.waitForPlayAttempt(),function(){return r.setUpKeySystem(t,n)})})):Promise.reject(so)}):Promise.reject("No CDMs set for keyType: "+r._keyTypes.KEYCHAIN_DEFAULT)}))):(r._scanner.fire(ki.EME_UNSUPPORTED),Promise.reject("Encrypted Media Extensions are not supported!"))})}updateTimeRef(){this._currentTime=this._scanner.currentTime}updateLAUrls(e){this._keyChain.addCdms(e.cdms,this._keyTypes.KEYCHAIN_DEFAULT),e.fallback_asset&&this._keyChain.addCdms(e.fallback_cdms,this._keyTypes.KEYCHAIN_SD_FALLBACK)}waitForPlayAttempt(){const e=this;return cc(function(){return sc(new Promise(t=>{e._scanner.paused&&!e._scanner.isPlayRequestActive?(e._scanner.once(Pi.PLAY,()=>t()),e._scanner.once(Pi.SEEKING,()=>t())):t()}))})}_initDataToArray(e={}){if(void 0===e||void 0===e.inits)return e;const t=ni(e);for(var n=0,r=Object.entries(t.inits);n<r.length;n++){const[t,a]=r[n];for(var i=0,o=Object.entries(a);i<o.length;i++){const[t,n]=o[i];if(void 0===n||void 0===n.initData)return e;n.initData=ji(n.initData)}}return t}getPreferredMediaKeySystem(e){let t=e.find(e=>(e.name===oc||e.name===ac)&&null!==e.mediaKeys);return t||(t=e.find(e=>null!==e.mediaKeys)),t}setUpKeySystem(e,t,n=this._keyTypes.KEYCHAIN_DEFAULT){const r=this,i=this._keyChain.getCdms(n);return i?cl(i,this._useHls,e).then(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(e){const o=r.getPreferredMediaKeySystem(e);if(!o||!o.mediaKeys)throw r._scanner.fire(ki.EME_UNSUPPORTED),new Error(so);r._keyChain.addPreferredKeySystem(o,n);const a=r._keyChain.activeKeySystem&&function(e,t){let n=null;return Object.keys(e).forEach(r=>{t.name===e[r].id&&(n=e[r])}),n}(i,r._keyChain.activeKeySystem);if(r._scanner.fire(ki.DRM_CDM_CHANGE,o.name),!a)throw r._scanner.fire(ki.EME_UNSUPPORTED),new Error("No valid key system was found.");return lc(function(){if(a.certificate)return function(e){return e&&e.then?e.then(uc):Promise.resolve()}(ul(a.certificate,o.mediaKeys))},function(){r._keyChain.addLicenseTokenUrl(a.license_url,n);const e=t&&t.inits&&t.inits[a.id];return e||r._addEncryptedHandler(a,n),r._setMediaKeys(n).then(()=>{const t=r._keyChain.state===n;return e&&t&&r._boundGenerateRequest(e.cenc,n)})})})):Promise.reject("No CDMs set for keyType: "+n)}destroy(){this._keyChain&&this._keyChain.closeAllKeySessions(),this._video&&this._video.removeEventListener(this._encryptedEventName,this._boundGenerateRequest)}_switchKeyChainState(e){const t=this;return cc(function(){var n;return t._keyChain.state=e,null==(n=t._keyChain.activeKeySession)||n.addEventListener("message",e=>t._getLicense(e)),sc()})}_addEncryptedHandler(e,t){this._encryptedEventName="encrypted",this._keyChain.addLicenseUrl(e.license_url,t),this._useHls&&(this._certificateUrl=e.certificate_url,this._encryptedEventName="webkitneedkey"),this._video.addEventListener(this._encryptedEventName,this._boundGenerateRequest)}_setMediaKeys(e){if(this._useHls)this._video.webkitSetMediaKeys(this._keyChain.activeKeySystem.mediaKeys);else{this._video.mediaKeys;const t=this._video.mediaKeys||this._keyChain.activeKeySystem.mediaKeys;if(this._keyChain.addKeySession(this._createSession(t),e),e===this._keyChain.state&&this._keyChain.activeKeySession.addEventListener("message",e=>this._getLicense(e)),!this._video.mediaKeys)return this._video.setMediaKeys(this._keyChain.activeKeySystem.mediaKeys)}return Promise.resolve()}_createSession(e,t,n){const r=t&&n?e.createSession(t,n):e.createSession();if(!r)throw new Error("Could not create media key session");return r}_generateRequest(e,t){return t=t||this._keyChain.state,this._keyChain.activeKeySystem.name===oc?(this._loadFairPlayCertificate(this._certificateUrl).then(n=>{this._contentId=function(e){const t=function(e){const t=new Uint16Array(e.buffer);return String.fromCharCode.apply(null,t)}(e),n=document.createElement("a");return n.href=t,n.hostname}(e.initData);const r=function(e,t,n){const r=new Uint8Array(function(e){const t=new ArrayBuffer(2*e.length),n=new Uint16Array(t);for(let t=0,r=e.length;t<r;t++)n[t]=e.charCodeAt(t);return n}(t).buffer);let i=0;const o=new ArrayBuffer(e.byteLength+4+r.byteLength+4+n.byteLength),a=new DataView(o);new Uint8Array(o,i,e.byteLength).set(e),i+=e.byteLength,a.setUint32(i,r.byteLength,!0),i+=4;const s=new Uint8Array(o,i,r.byteLength);return s.set(r),i+=s.byteLength,a.setUint32(i,n.byteLength,!0),i+=4,new Uint8Array(o,i,n.byteLength).set(n),new Uint8Array(o,0,o.byteLength)}(e.initData,this._contentId,n);return this._keyChain.addKeySession(this._createSession(this._keyChain.activeKeySystem.mediaKeys,"video/mp4",r),t),this._keyChain.activeKeySession.contentId=this._contentId,this._keyChain.activeKeySession.addEventListener("webkitkeymessage",e=>this._getLicense(e)),this._keyChain.activeKeySession.addEventListener("webkitkeyerror",e=>{this._hasFallbackAssets?this._fallBackToSD():this._scanner.fire(ki.DRM_OUTPUT_RESTRICTED)}),n}).catch(e=>{this._scanner.fire(e.error,e.payload)}),!0):!this._keyChain.activeKeySession.sessionId&&!this._activeKeySession&&(this._keyChain.activeKeySession.addEventListener("keystatuseschange",this._boundOnKeyStatus),this._activeKeySession=this._keyChain.activeKeySession.generateRequest(e.initDataType,e.initData).catch(()=>{this._scanner.fire(ki.DRM_FAILURE)}),!0)}_onKeyStatus(){let e=!1;const t=Array.from(this._keyChain.activeKeySession.keyStatuses.values());if(t.forEach((t,n)=>{"expired"===t&&(e=!0)}),t.length&&t.every(e=>"output-restricted"===e)){if(this._hasFallbackAssets)return void this._fallBackToSD();this._scanner.fire(ki.DRM_OUTPUT_RESTRICTED)}e&&this._keyChain.activeKeySession.close()}_getLicense(e){return this._getLicenseUrl(this._keyChain.activeLicenseTokenUrl).then(t=>new Promise((n,r)=>{this._keyChain.addLicenseUrl(t,this._keyChain.state),this._activeKeySession=null;const i=new XMLHttpRequest;i.keySession=e.target,i.open("POST",this._keyChain.activeLicenseUrl),i.responseType="arraybuffer";let o=e.message;if(this._keyChain.activeKeySystem.name===ac){const t=function(e){const t=e,n=String.fromCharCode.apply(null,new Uint16Array(t)),r=(new DOMParser).parseFromString(n,"application/xml"),i={},o=r.getElementsByTagName("HttpHeader");for(let e=0;e<o.length;++e){const t=o[e].querySelector("name"),n=o[e].querySelector("value");t&&n&&(i[t.textContent]=n.textContent)}return[i,ji(r.querySelector("Challenge").textContent)]}(e.message),n=t[0];Object.keys(n).forEach(e=>{i.setRequestHeader(e,n[e])}),o=t[1]}this._keyChain.activeKeySystem.name===oc&&(o=new Uint8Array(o),i.setRequestHeader("Content-type","application/octet-stream")),i.onload=()=>{if(403!==i.status)if(i.status>=400)r(new TelecineError(ki.DRM_FAILURE));else try{this._scanner.fire(ki.DRM_AUTH_SUCCESS);const e=new Uint8Array(i.response);i.keySession.update(e),n()}catch(e){r(new TelecineError(ki.DRM_FAILURE,`Error updating key session: ${e}`))}else r(new TelecineError(ki.DRM_AUTH_FAILURE))},i.onerror=r,i.send(o)}).catch(e=>{this._scanner.fire(e.name,{text:e.message||"License request failed."})}))}_getLicenseUrl(e){const t=((e,t)=>{const{atid:n,dnt:r,context:i,leadUUID:o,playerLocation:a,firstLog:s,playbackRoute:l,referrer:c}=t;return me(e,{atid:n,context:i,referrer:c,dnt:1===r?r:void 0,first_log:s?"1":void 0,lead_uuid:o,player_location:a,playback_route:l},!0)})(e,p(p({},this._drmLaUrlParams),{},{firstLog:this._firstLaUrlRequest}));return new Promise((e,n)=>{const r=new XMLHttpRequest;r.withCredentials=!0,r.open("GET",t),r.onload=()=>{if(r.status>=400)n(new TelecineError(ki.DRM_FAILURE));else try{try{const t=JSON.parse(r.response),{licenseAcquisitionUrl:n,token:i}=t;if(!n&&!i)throw new Error;e(`${n}?ExpressPlayToken=${i}`)}catch(t){e(r.response)}}catch(e){n(new TelecineError(ki.DRM_FAILURE,`Error retrieving License Acquisition URL (LA_URL): ${e}`))}},r.onerror=n,r.send(),this._firstLaUrlRequest=!1})}_loadFairPlayCertificate(e){return new Promise((t,n)=>{const r=new XMLHttpRequest;r.open("GET",e),r.responseType="arraybuffer",r.setRequestHeader("Pragma","no-cache"),r.setRequestHeader("Cache-Control","max-age=0"),r.onload=()=>{if(403!==r.status)if(r.status>=400)n({error:ki.DRM_FAILURE});else try{t(new Uint8Array(r.response))}catch(e){n(e)}else n({error:ki.DRM_AUTH_FAILURE})},r.onerror=n,r.send()})}_switchKeyChainToFallback(){return this._switchKeyChainState(this._keyTypes.KEYCHAIN_SD_FALLBACK).then(()=>{this._fallbackCallback(),this._scanner.fire(ki.DRM_KEY_SWITCH,this._keyTypes.KEYCHAIN_SD_FALLBACK)}).catch(e=>{this._scanner.fire(ki.DRM_OUTPUT_RESTRICTED)})}_fallBackToSD(){var e,t;this.updateTimeRef(),this._useHls?(null==(e=this._keyChain)||e.closeAllKeySessions(),null==(t=this._video)||t.removeEventListener(this._encryptedEventName,this._boundGenerateRequest),this._scanner.once(Pi.SEEKING,this._boundUpdateTimeRef),this._hasFallbackSourceUpdated=!0,this._switchKeyChainToFallback(),this.waitForPlayAttempt().then(()=>{this.setUpKeySystem({},{},this._keyTypes.KEYCHAIN_SD_FALLBACK).then(()=>{this._scanner.currentTime=this._currentTime,this._scanner.play()})})):this._switchKeyChainToFallback()}setFallbackCallback(e){this._fallbackCallback=()=>e()}get state(){return this._keyChain.state}get hasFallbackAssets(){return this._hasFallbackAssets}get hasFallbackSourceUpdated(){return this._hasFallbackSourceUpdated}set hasFallbackSourceUpdated(e){this._hasFallbackSourceUpdated=e}}const _c=document.createElement("video"),hc={settingPlaybackRate:(()=>{if(Q.android&&Hi&&"object"==typeof Hi&&Hi.major<52)return!1;const e=_c.playbackRate;_c.playbackRate=.5*e;const t=e!==_c.playbackRate;return _c.playbackRate=e,t})(),settingVolume:(()=>{if(Q.android||Q.iOS||Q.iPadOS)return!1;const e=_c.volume;return _c.volume=.5*e,_c.volume!==e})(),textTracks:void 0!==_c.textTracks&&"undefined"!=typeof TextTrackList&&_c.textTracks instanceof TextTrackList},pc=new WeakMap;class TelecineVideo extends bn{constructor({files:e,id:t=ve(),title:n=null,subtitle:r=null,metadata:i={},textTracks:o=Gi(),audioTracks:a=Gi(),externalDisplayFiles:s={},chapters:l=[],duration:c}){if(super(),!e||!Array.isArray(e))throw new TypeError("Must provide files for the video.");const u=function(e=[]){return e.getFileById=Wi,e}(e.map(e=>e instanceof TelecineFile?(e.video=this,e):new TelecineFile(e,this))),d=Gi(o.map(e=>e instanceof TelecineTextTrack?(e.video=this,e):new TelecineTextTrack(e,this)));if(this._audioTracksFromConfig=a,Object.keys(s).forEach(e=>{!s[e]||s[e]instanceof TelecineFile||(s[e]=new TelecineFile(s[e],this))}),Object.defineProperties(this,{id:{value:`${t}`,enumerable:!0},title:{value:n,enumerable:!0},subtitle:{value:r,enumerable:!0},metadata:{value:i,enumerable:!0},files:{value:u,enumerable:!0},textTracks:{value:d,enumerable:!0,writable:!0},chapters:{value:l,enumerable:!0},duration:{value:c,enumerable:!0},externalDisplayFiles:{value:s,enumerable:!0}}),i.drm){const{drm:e,useHls:t,drmLaUrlParams:n}=i;this._drmHandler=new dc(e,t,n)}}get drmHandler(){return this._drmHandler||null}get currentFile(){return this.currentScanner.currentFile}set currentFile(e){this.currentScanner.currentFile=e}get currentScanner(){return pc.get(this)}set currentScanner(e){this.currentScanner&&hc.textTracks&&this.textTracks.forEach(e=>this.currentScanner.removeTextTrack(e)),hc.textTracks&&this.textTracks.forEach(t=>e.addTextTrack(t)),pc.set(this,e)}get audioTracks(){let e=[];return e=this.currentScanner.constructor.supportsAudioTracksFromScanner?Array.from(this.currentScanner.audioTracks):this._audioTracksFromConfig,Gi(e.map(e=>e instanceof nc?(e.video=this,e):new nc(e,this)))}get enabledAudioTrack(){return this.audioTracks.find(e=>!!e.enabled)}deactivate(){this._drmHandler&&this._drmHandler.destroy(),this.textTracks.forEach(e=>this.currentScanner.removeTextTrack(e))}}class mc extends bn{constructor(e,t={}){super(),this._telecine=e,this._options=t,this._bufferInterval=null,this._lastBufferCheckVideoTime=this._options.embedTime?this._options.embedTime:0,this._isBuffering=!1,this._isSeeking=!1,this._userPlayState=!1,this.playInitiated=!1,this._isLiveStreamOnline=!1,this._checkInterval=250,this._boundEndBuffering=this._endBuffering.bind(this),this._boundOnPause=this._onPause.bind(this),this._boundOnSeeking=this._onSeeking.bind(this),this._boundOnSeeked=this._onSeeked.bind(this),this._boundOnLiveOnline=this._onLiveOnline.bind(this),this._boundOnLiveOffline=this._onLiveOffline.bind(this),this._toggleEvents(this._telecine.on),this._options.noInterval||this._setUpRebufferMonitor()}get userPlayState(){return this._userPlayState}set userPlayState(e){this._userPlayState=e,e||this._endBuffering()}destroy(){clearInterval(this._bufferInterval),this._toggleEvents(this._telecine.off),this._endBuffering()}_toggleEvents(e){e(Pi.PAUSE,this._boundOnPause),e(Pi.PLAYING,this._boundEndBuffering),e(Pi.SEEKING,this._boundOnSeeking),e(Pi.SEEKED,this._boundOnSeeked),e(Di.STREAM_ONLINE,this._boundOnLiveOnline),e(Di.STREAM_OFFLINE,this._boundOnLiveOffline)}_onPause(){this.userPlayState=!1}_endBuffering(){this._isBuffering&&(this._isBuffering=!1,this.fire(ki.BUFFER_ENDED))}_onSeeking(){this._isSeeking=!0}_onSeeked(){this._isSeeking=!1}_onLiveOnline(){this._isLiveStreamOnline=!0}_onLiveOffline(){this._isLiveStreamOnline=!1}_setUpRebufferMonitor(){clearInterval(this._bufferInterval),this._bufferInterval=setInterval(this.runIntervalCheck.bind(this),this._checkInterval)}runIntervalCheck(){if(!this._telecine.video)return;const e=this._telecine.video.currentScanner;if(!e)return;const t=this._telecine.isLive(),n=e.videoElement.currentTime,r=this._checkInterval/2/1e3;if(this.playInitiated&&(!this._isSeeking||t)&&(!this._telecine.paused||this.userPlayState)&&!this._isBuffering&&n<this._lastBufferCheckVideoTime+r){if(t&&!this._isLiveStreamOnline)return;const e=this._telecine.buffered;for(let t=0;t<e.length;t++)if(n>=e.start(t)&&n+.2<=e.end(t))return void(this._lastBufferCheckVideoTime=n);if(n+r>=this._telecine.duration)return;this._isBuffering=!0,this.fire(ki.BUFFER_STARTED)}(this.playInitiated&&this._isBuffering&&n>this._lastBufferCheckVideoTime+r||t&&!this._isLiveStreamOnline&&this._isBuffering)&&(this._isBuffering=!1,this.fire(ki.BUFFER_ENDED)),this._lastBufferCheckVideoTime=n}}function fc(){let e,t;function n(){if(!t)return Promise.reject();e.preload="";let n=e.play();return void 0===n&&(n=new Promise(t=>{e.addEventListener("playing",t)})),n}function r(){t&&(t.resolve(),t=null)}function i(e){t&&(t.reject(e),t=null)}return{set video(t){e=t},get video(){return e},get active(){return!!t},start:function(o=Promise.resolve.bind(Promise)){return t||(t=oe()),e.currentSrc?document.createElement("video").load():e.load(),o().then(n).then(r).catch(i),t},cancel:function(){t&&(t.reject(new TelecineError(ao,"The play() request was interrupted by a call to pause()")),t=null)}}}class vc extends bn{constructor(e,t,n={}){super(),this._element=e,this._scanners=t,this._options=n,this._video=null,this._textTracks=Gi(),this._properties={},this._currentScanner=new Eo(e),this._options.playRequest=new fc,this._blacklistedScanners=[],this._activeEffects=[],this._previousScanner=null,this._switchingVideo=!1,this._snapshotDisplayed=!1}get element(){return this._element}get videoElement(){return this._currentScanner.videoElement}get hlsJsVersion(){return this._currentScanner.constructor.hlsJsVersion??null}get manifest(){return this._currentScanner.manifest||{video:[]}}get supportsAudioTracksFromScanner(){return this._currentScanner.constructor.supportsAudioTracksFromScanner}supportsEffect(e){return!!e.supported&&e.supportedScanners.some(e=>this.currentScannerName===e.displayName)}get activeEffects(){return this._activeEffects}getEffectByName(e){let t=null;return this._activeEffects.forEach(n=>{e===this._getEffectName(n)&&(t=n)}),t}activateEffect(e,t){const n=new e(this,t);return n.activate(),this._activeEffects.push(n),n}deactivateEffect(e){return this._activeEffects.some((t,n)=>t.constructor===e&&(t.deactivate(),this._activeEffects.splice(n,1),!0))}deactivateEffects(){this._activeEffects.forEach(e=>this.deactivateEffect(e.constructor))}play(){if(!this._video||this._video.files.length<1)throw new TelecineError("NoFiles","There are no files to play.");this._rebufferMonitor.playInitiated||(this._rebufferMonitor.playInitiated=!0),this._rebufferMonitor.userPlayState=!0;const e=this._currentScanner.play();return this._properties.paused=!1,e}pause(){if(!this._video||this._video.files.length<1)throw new TelecineError("NoFiles","There are no files to play.");return this._rebufferMonitor.userPlayState=!1,this._currentScanner.pause(),this._properties.paused=!0,this}isLive(){return this._currentScanner.constructor.supportsLive}endLive(){this._currentScanner.endLive()}get latency(){return this._currentScanner.latency}get downloadSpeed(){return this._currentScanner.downloadSpeed||0}getBitrateAtTime(e,t="video",n="average"){var r,i;return this._currentScanner.constructor.supportsMse?"audio"===t&&this._currentScanner._streams[t].length<=1?0:(null==(r=(i=this._currentScanner).getBitrateAtTime)?void 0:r.call(i,e,t,n))||0:0}getCurrentStream(e="video"){var t,n;return null==(t=(n=this._currentScanner).getCurrentStream)?void 0:t.call(n,e)}showExternalDisplayPicker(e){this._currentScanner.showExternalDisplayPicker(e)}get pictureInPictureActive(){return this._currentScanner.pictureInPictureActive}requestPictureInPicture(){return this._currentScanner.requestPictureInPicture()}exitPictureInPicture(){return this._currentScanner.exitPictureInPicture()}get pictureInPictureEnabled(){return this._currentScanner.pictureInPictureEnabled}addChapter(e,t){this._currentScanner.addChapter(e,t)}removeChapter(e){this._currentScanner.removeChapter(e)}addCuePoint(e,t){return this._currentScanner.addCuePoint(e,t)}removeCuePoint(e){return this._currentScanner.removeCuePoint(e)}removeAllCuePoints(){return this._currentScanner.removeAllCuePoints()}enableAudioTrack(e){return this._currentScanner.enableAudioTrack(e)}addVideoEventListeners(){return this._currentScanner.addVideoEventListeners()}removeVideoEventListeners(){return this._currentScanner.removeVideoEventListeners()}get isLowerProfileAvailable(){return this._currentScanner.isLowerProfileAvailable}get buffered(){return this._currentScanner.buffered}get bufferTarget(){return this._currentScanner.bufferTarget}set bufferTarget(e){this._properties.bufferTarget=e,this._currentScanner.bufferTarget=e}get presentationDelay(){return this._currentScanner.presentationDelay}set presentationDelay(e){this._properties.presentationDelay=e,this._currentScanner.presentationDelay=e}get lowLatencyMode(){return this._currentScanner.lowLatencyMode}set lowLatencyMode(e){this._properties.lowLatencyMode=e,this._currentScanner.lowLatencyMode=e}get manifestLoadDurations(){return this._currentScanner.manifestLoadDurations?this._currentScanner.manifestLoadDurations:[]}get successfulSegments(){return this._currentScanner.successfulSegments?this._currentScanner.successfulSegments:[]}get failedSegments(){return this._currentScanner.failedSegments?this._currentScanner.failedSegments:[]}get cuePoints(){return this._currentScanner.cuePoints}get currentChapterID(){if(this._currentScanner&&this._currentScanner.chaptersTrack&&this._currentScanner.chaptersTrack.activeCues.length){const{activeCues:e}=this._currentScanner.chaptersTrack;return e[e.length-1].id}return null}get chapters(){return this._currentScanner.chaptersTrack?this._currentScanner.chaptersTrack.cues:[]}get chaptersTrack(){return this._currentScanner.chaptersTrack}get currentFile(){return this._currentScanner.currentFile}set currentFile(e){if("string"==typeof e&&(e=this._files.filter(t=>t.id===e)[0]),!e)throw new TelecineError("FileNotValid","The file is not valid.");this._currentScanner.currentFile=e}get currentScannerName(){return this._getScannerName(this._currentScanner)}get currentScanner(){return this._currentScanner}get currentTime(){return this._currentScanner.currentTime}set currentTime(e){this._properties.currentTime=e,this._currentScanner.currentTime=e}get liveEdgeTime(){const e=this._currentScanner.liveEdgeTime;return null==e?this._previousLiveEdgeTime:(this._previousLiveEdgeTime=e,e)}get atLiveEdge(){return this._currentScanner.atLiveEdge??this.isLive()}get liveTailTime(){const e=this._currentScanner.liveTailTime;return null==e?this._previousLiveTailTime:(this._previousLiveTailTime=e,e)}get atLiveTail(){return this._currentScanner.atLiveTail??!1}get disableRemotePlayback(){return this._properties.disableRemotePlayback}set disableRemotePlayback(e){this._properties.disableRemotePlayback=!!e,this._currentScanner.disableRemotePlayback=!!e}get duration(){return this._currentScanner.duration}get ended(){return this._currentScanner.ended}get externalDisplayAvailable(){return this._currentScanner.externalDisplayAvailable}get externalDisplayActive(){return this._currentScanner.externalDisplayActive}get loop(){return this._currentScanner.loop}set loop(e){this._properties.loop=e,this._currentScanner.loop=e}get muted(){return this._currentScanner.muted}set muted(e){this._properties.muted=!!e,this._currentScanner.muted=!!e}get playsinline(){return this._currentScanner.playsinline}set playsinline(e){this._properties.playsinline=!!e,this._currentScanner.playsinline=!!e}get paused(){return this._currentScanner.paused}get played(){return this._currentScanner.played}get seekable(){return this._currentScanner.seekable}get seeking(){return this._currentScanner.seeking}get defaultPlaybackRate(){return this._currentScanner.defaultPlaybackRate}set defaultPlaybackRate(e){this._properties.defaultPlaybackRate=e,this._currentScanner.defaultPlaybackRate=e}get playbackRate(){return this._currentScanner.playbackRate}set playbackRate(e){this._properties.playbackRate=e,this._currentScanner.playbackRate=e}get preload(){return this._currentScanner.preload}set preload(e){this._properties.preload=e,this._currentScanner.preload=e}get autoPictureInPicture(){return this._currentScanner.autoPictureInPicture}set autoPictureInPicture(e){this._properties.autoPictureInPicture=!!e,this._currentScanner.autoPictureInPicture=!!e}get disablePictureInPicture(){return this._currentScanner.disablePictureInPicture}set disablePictureInPicture(e){this._properties.disablePictureInPicture=!!e,this._currentScanner.disablePictureInPicture=!!e}get video(){return this._video}set video(e){this._video&&this._video.deactivate(),this._blacklistedScanners=[],this._setUpRebufferMonitor(),null===e?(this._video=null,this._resetScanner()):(this._video=new TelecineVideo(e),this._updateScanner())}get videoWidth(){return this._currentScanner.videoWidth}get videoHeight(){return this._currentScanner.videoHeight}get volume(){return this._currentScanner.volume}set volume(e){if(e<0||e>1)throw new TelecineError("IndexSizeError",`Failed to set the 'volume' property: The volume provided (${e}) is outside of the range [0, 1].`);this._properties.volume=e,this._currentScanner.volume=e}get audioTracks(){return this._currentScanner.audioTracks}get brainDebug(){return this._currentScanner.brainDebug}_findScanner({textTrackSupport:e=!1}={}){if(e&&!hc.textTracks)return null;const t=this._video.files.sort((e,t)=>e.priority-t.priority),n=this._scanners;for(const e in t){let r=t[e];for(const e in n){let t=n[e];if(t.supported(this._options.disableMMS)&&-1===this._blacklistedScanners.indexOf(this._getScannerName(t))&&t.supportedVideoTypes.some(e=>r.mime===e))return t}}return null}reactivate(){var e;null!=(e=this._currentScanner)&&e.reactivate&&this._currentScanner.reactivate(),this.play()}checkRebuffer(e,t){this._rebufferMonitor&&(this._rebufferMonitor.playInitiated=e,this._rebufferMonitor.userPlayState=t,this._rebufferMonitor.runIntervalCheck())}_initScanner(e,t){var n;if(this._currentScanner.constructor===e&&this._currentScanner.video===t)return;const r=!this.isLive()&&this._currentScanner._preserveCurrentTime;this._switchingVideo?(this._previousScanner=this._currentScanner,this._previousScanner._switchingVideo=!0,this._snapshotDisplayed||(Xi(this._previousScanner.videoElement,this._element),this._snapshotDisplayed=!0),this._previousScanner.deactivate()):this._currentScanner.deactivate();const i=new e(this._element,this._options);Object.keys(xi).forEach(e=>{const t=xi[e];i.on(t,e=>this._handleEvent(t,e,i))}),this._currentScanner=i,t.currentScanner=i,this._currentScanner.video=t;const o=Object.keys(this._properties);for(let e=0;e<o.length;e++){const t=o[e];"paused"!==t?("currentTime"!==t||r)&&(this._currentScanner[t]=this._properties[t]):!1===this._properties.paused&&this._currentScanner.play()}var a,s;(null==(n=t.chapters)?void 0:n.length)>0&&(null==(a=(s=this._currentScanner).addChapters)||a.call(s,t.chapters,t.duration)),this.fire(ki.SCANNER_CHANGE,this.currentScannerName),this._currentScanner.on([Pi.CAN_PLAY,Pi.PLAYING],()=>{this._previousScanner&&(this._previousScanner._switchingVideo=!1,Zi(this._element),this._previousScanner=null,this._snapshotDisplayed=!1)})}_updateScanner(){if(null===this._video)return;const e=this._findScanner({textTrackSupport:this._video.textTracks.length>0});e?this._initScanner(e,this._video):this._fireVideoError("FilesNotPlayable","None of the files could be played in this browser.")}_resetScanner(){this._currentScanner.deactivate(),this._currentScanner=new Eo(this._element)}_handleEvent(e,t,n){if(n===this._currentScanner){switch(e){case Pi.ERROR:return void(t instanceof TelecineError&&this.fire(Pi.ERROR,t));case ki.SCANNER_ERROR:this._fireVideoError("ScannerError",`The current scanner can no longer be used because ${t.reason}`),this._blacklistedScanners.push(this.currentScannerName),this._updateScanner([]);break;case ki.FILE_ERROR:this._fireVideoError("FileError",`The current file can no longer be used because ${t.reason}`),this._currentScanner._switchToNextFile();break;case ki.DOWNLOAD_ERROR:this._fireVideoError("DownloadError",t),this._currentScanner._switchToNextFile();break;case ki.EME_UNSUPPORTED:this._fireVideoError(ro,{text:null,code:"emeunsupported"});break;case ki.DRM_FAILURE:case ki.DRM_AUTH_FAILURE:this._fireVideoError(ro,{text:t.text,code:t.code});break;case ki.DRM_OUTPUT_RESTRICTED:this._fireVideoError(ro,{text:null,code:"outputrestricted"});break;case ki.DRM_AUTH_SUCCESS:this.fire(ki.DRM_AUTH_SUCCESS);break;case ki.NO_SUPPORTED_CDM:this._rebufferMonitor.destroy();break;case Pi.TIME_UPDATE:this._properties.currentTime=this._currentScanner.currentTime;break;case ki.MEDIA_URL_EXPIRED:this._fireVideoError("MediaUrlExpired",t);break;case ki.MEDIA_URL_BAD_REQUEST:this._fireVideoError(oo,t);break;case Ni.SPATIAL_UNSUPPORTED:this.getEffectByName("ThreeSixtyEffect").deactivate();break;case Pi.ENDED:const e=!this._options.dvrEnabled||this.atLiveEdge;this._properties.paused=e;break;case Pi.WAITING:this.fire(Pi.WAITING)}this._activeEffects.forEach(t=>{"function"==typeof t[`on${e}`]&&t[`on${e}`]()}),this.fire(e,t)}}_fireVideoError(e,t){this.fire(Pi.ERROR,new TelecineError(e,t))}_getScannerName(e){return e.constructor.displayName??e.prototype.constructor.displayName}_setUpRebufferMonitor(){this._rebufferMonitor&&this._rebufferMonitor.destroy(),this._rebufferMonitor=new mc(this,this._options),this._rebufferMonitor.on(ki.BUFFER_STARTED,()=>{this.fire(ki.BUFFER_STARTED)}),this._rebufferMonitor.on(ki.BUFFER_ENDED,()=>{this.fire(ki.BUFFER_ENDED)})}_getEffectName(e){return e instanceof Ql?e.constructor.displayName:e.prototype.constructor.displayName}_isLiveMse(){return this._currentScanner.constructor.supportsMse&&this._currentScanner.constructor.supportsLive}updateBufferTarget(){this._currentScanner&&this._currentScanner.getBufferTarget&&(this.bufferTarget=this._currentScanner.getBufferTarget())}setCaptionsShouldDisplay(e){this._isLiveMse()&&this._currentScanner.setCaptionsShouldDisplay(e)}setCaptionsShouldLoad(e){this._isLiveMse()&&this._currentScanner.setCaptionsShouldLoad(e)}}class gc extends Ql{static get displayName(){return"CanvasEffect"}static get supported(){return!0}static get supportedScanners(){return[Eo,ml]}constructor(e,t={}){super(e,t),this._activated=!1,this._video=this._telecine._currentScanner._video}activate(){this._activated=!0,this._canvas=document.createElement("canvas"),this._canvas.className="vp-canvas-effect",this._canvas.style.cssText="\n            position: absolute;\n            top:0;\n            left:0;\n            bottom:0;\n            right:0;\n        ",this._ctx=this._canvas.getContext("2d",{alpha:!1}),this._element.appendChild(this._canvas),this._startRendering()}deactivate(){this._canvas&&this._element.removeChild(this._canvas),this._stopRendering(),this._activated=!1}_startRendering(){this._requestFrame()}_requestFrame(){this._animationFrame=window.requestAnimationFrame(this._renderFrame.bind(this))}_renderFrame(){const e=this._video,t=this._canvas;t.width=e.clientWidth,t.height=e.clientHeight;const n=Math.floor(this._videoContentWidth()),r=Math.floor(this._videoContentHeight()),i=Math.floor((e.clientWidth-n)/2),o=Math.floor((e.clientHeight-r)/2);this._ctx.fillStyle="#000",this._ctx.fillRect(0,0,t.width,t.height),this._ctx.drawImage(e,i,o,n,r),this._requestFrame()}_videoRatio(){return this._video.videoHeight/this._video.videoWidth}_videoContentWidth(){return Math.min(this._video.clientHeight/this._videoRatio(),this._video.clientWidth)}_videoContentHeight(){return Math.min(this._video.clientWidth*this._videoRatio(),this._video.clientHeight)}_stopRendering(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=null)}}class Ec{static get Equirect(){return"equirectangular"}}class bc{static get Mono(){return"mono"}static get TopBottom(){return"top-bottom"}static get LeftRight(){return"left-right"}}class yc{constructor(e,t,n){this.isStereo=t!==bc.Mono,this._leftEye=null,this._rightEye=null,e===Ec.Equirect?this.createEquirectProjection(n,t):this.createEquirectProjection(n,bc.Mono)}get left(){return this._leftEye}get right(){return this._rightEye}createEquirectProjection(e,t){t!==bc.Mono?(this._leftEye=this._createEquirectangularSphereMesh(e),this._rightEye=this._createEquirectangularSphereMesh(e),this._leftEye.layers.set(1),this._rightEye.layers.set(2),t===bc.TopBottom&&(this._chopGeometryUvs(this._leftEye.geometry,.5,.5),this._chopGeometryUvs(this._rightEye.geometry,.5,0)),t===bc.LeftRight&&(this._chopGeometryUvs(this._leftEye.geometry,.5,0,0),this._chopGeometryUvs(this._rightEye.geometry,.5,.5,0))):this._leftEye=this._createEquirectangularSphereMesh(e)}_createEquirectangularSphereMesh(e,t,n,r){const i=new THREE.SphereBufferGeometry(t||yc.SPHERE_RADIUS,n||yc.TESSELATION_WIDTH,r||yc.TESSELATION_HEIGHT);i.scale(-1,1,1);const o=new THREE.MeshBasicMaterial({map:e});return new THREE.Mesh(i,o)}_chopGeometryUvs(e,t,n,r=1){for(let i=0;i<e.attributes.uv.array.length;i+=2)e.attributes.uv.array[i+r]*=t,e.attributes.uv.array[i+r]+=n}static get TESSELATION_WIDTH(){return 120}static get TESSELATION_HEIGHT(){return 80}static get SPHERE_RADIUS(){return 500}}class Tc{constructor(e){this._renderer=e}get supported(){return Q.webvr}get device(){return this._renderer&&this._renderer.vr.getDevice()?this._renderer.vr.getDevice():null}get isPresenting(){return!(!this._renderer||!this._renderer.vr.getDevice())&&this._renderer.vr.getDevice().isPresenting}hasVRHeadset(){return Q.webvr?navigator.getVRDisplays().then(e=>e.length>0?(this._renderer.vr.setDevice(e[0]),e[0]):null):null}enter(){return this._renderer.vr.getDevice()&&this._renderer.vr.getDevice().requestPresent([{source:this._renderer.domElement}])}exit(){return this._renderer.vr.getDevice()&&this._renderer.vr.getDevice().exitPresent()}}class Sc extends Ql{static get displayName(){return"ThreeSixtyEffect"}static get supported(){try{const e=document.createElement("canvas");return!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){return this._telecine._currentScanner.fire(Ni.SPATIAL_UNSUPPORTED),!1}}static get supportedScanners(){return[Eo,ml]}set isUserInteracting(e){e!==this._isUserInteracting&&(this._isUserInteracting=e,e?this._options.isMobile||this._telecine.fire(Ni.MOTION_START):this._options.isMobile||this._telecine.fire(Ni.MOTION_END))}get isUserInteracting(){return this._isUserInteracting}constructor(e,t={}){super(e,t),this._activated=!1,this._camera=null,this._scene=null,this._renderer=null,this.isUserInteracting=!1,this._onMouseDownMouseX=0,this._onMouseDownMouseY=0,this._coordinates={lat:0,long:0},this._previousCoordinates={lat:0,long:0},this._onMouseDownCoordinates={lat:0,long:0},this._previousCameraProps=this.cameraProps,this._phi=0,this._theta=0,this._rotation=0,this._video=this._telecine._currentScanner._video,this._videoRefreshLoop=null,this._gyroVector={x:0,y:0},this._offset={lat:0,long:0},this._writeSpeeds={videoFps:this._options.fps,motionRenderSpeed:60},this._maxTimeBetweenWrites=1e3/this._writeSpeeds.videoFps,this._motionTimeouts=[],this._movingAutomatically=!1,this._deviceMotionHasOccurred=!1,this._updateFromGyroscopePending=!1,this._keysPressed={up:!1,down:!1,left:!1,right:!1}}get currentCoordinates(){return this._coordinates}set currentCoordinates([e,t]){if(e>90||e<-90)throw new RangeError("Latitude should be a float between -90 and 90.");if(t<0||t>360)throw new RangeError("Longitude should be a float between 0 and 360.");this._updateViewpoint(e,t),this._update()}get cameraProps(){return{yaw:this._coordinates.long,pitch:this._coordinates.lat,roll:this.roll,fov:this.fieldOfView}}set cameraProps(e){e=p(p({},this.cameraProps),e),this.fieldOfView=e.fov,this.roll=e.roll,this.currentCoordinates=[e.pitch,e.yaw]}get roll(){return 180*this._rotation/Math.PI}set roll(e){if(e<-180||e>180)throw new RangeError("Roll should be a float between -180 and 180.");this._rotation=THREE.Math.degToRad(e)}get isVRPresenting(){return this._webvr&&this._webvr.isPresenting}get fieldOfView(){return this._camera?this._camera.fov:this._options.fieldOfView}set fieldOfView(e){this._camera.fov=e,this._camera.updateProjectionMatrix(),this._renderer.render(this._scene,this._camera)}static frustumSurfaceArea(e,t,n){const r=2*yc.SPHERE_RADIUS*2*Math.sin(Math.PI/180*(e/2));return r*(r*t/n)/(4*Math.PI*Math.pow(yc.SPHERE_RADIUS,2))}activate(){return new Promise(e=>{if(window.THREE)return void e();const t=document.createElement("script");t.src=this._options.threeUrl,document.body.appendChild(t),t.onload=()=>{e()}}).then(()=>this._initialize())}_initialize(){this._activated=!0,this._camera=new THREE.PerspectiveCamera(this._options.fieldOfView,this._video.clientWidth/this._video.clientHeight,1,2*yc.SPHERE_RADIUS),this._camera.target=new THREE.Vector3(0,0,0),this._camera.layers.enable(1),this._initializeAutoMovement(this._options.directorTimeline),this._scene=new THREE.Scene,this._texture=new THREE.VideoTexture(this._video),this._texture.generateMipmaps=!1,this._texture.minFilter=THREE.NearestFilter,this._texture.maxFilter=THREE.NearestFilter,this._texture.format=THREE.RGBFormat,this._projector=new yc(this._options.projection,this._options.stereoMode,this._texture),this._projector.isStereo&&this._scene.add(this._projector.right),this._scene.add(this._projector.left),this._renderer=new THREE.WebGLRenderer,this._renderer.vr.enabled=!0,this._renderer.setPixelRatio(window.devicePixelRatio),this._output=document.createElement("div"),this._renderer.domElement.style.margin="0 auto",this._output.appendChild(this._renderer.domElement),this._element.appendChild(this._output),this._hideOutput(),this._telecine._currentScanner._video.setAttribute("crossorigin","anonymous"),this._startRendering(),this._telecine._currentScanner.paused||this._showOutput(),this._webvr=new Tc(this._renderer),this._webvr.supported&&this._webvr.hasVRHeadset().then(e=>{setTimeout(()=>{this._telecine.fire(Ni.WEBVR_HARDWARE_AVAILABLE,this._webvr.device)},100)}).catch(e=>{})}get hasVRHeadset(){return this._webvr&&!!this._webvr.device}toggleVR(){if(this._webvr.isPresenting)this._webvr.exit().then(()=>{this.adjustRenderSize()}).catch(e=>{});else{if(this._telecine._currentScanner.paused)return;this._webvr.enter().then(()=>{this.adjustRenderSize()}).catch(e=>{})}}onplay(){this._activated&&(this._showOutput(),this.adjustRenderSize())}deactivate(){this._output&&this._element.removeChild(this._output),this._stopRendering(),this._activated=!1}snapToCenter(){this._motionTimeouts.forEach(e=>clearTimeout(e));const e=((this._coordinates.long>=180?360:0)-this._coordinates.long)/11,t=(0-this._coordinates.lat)/11;this._rotation=0;for(let n=0;n<50;n++)this._motionTimeouts.push(setTimeout(()=>{0===n&&(this._movingAutomatically=!0,this._options.isMobile||(this._maxTimeBetweenWrites=1e3/this._writeSpeeds.motionRenderSpeed)),49===n&&(this._movingAutomatically=!1,this._options.isMobile||(this._maxTimeBetweenWrites=1e3/this._writeSpeeds.videoFps)),this._updateViewpoint(this._coordinates.lat+t/Math.pow(1.1,n),this._coordinates.long+e/Math.pow(1.1,n)),this._offset.lat=THREE.Math.radToDeg(this._gyroVector.x)+this._coordinates.lat+t/Math.pow(1.1,n),this._offset.long=THREE.Math.radToDeg(this._gyroVector.y)+this._coordinates.long+t/Math.pow(1.1,n)},n*this._maxTimeBetweenWrites))}isStereo(){return!!this._projector&&this._projector.isStereo}_initializeAutoMovement(e){e&&e[0]&&void 0!==e[0].p&&"undefined"!==e[0].y&&this._updateViewpoint(e[0].p,e[0].y)}_updateViewpoint(e,t){this._previousCoordinates.long=this._coordinates.long,this._previousCoordinates.lat=this._coordinates.lat,e%=360,this._coordinates.lat=Math.max(-85,Math.min(85,e)),t=(t%=360)>=0?t:360+t,this._coordinates.long=t}makeContact(e){this.isUserInteracting=!0,this._motionTimeouts.forEach(e=>clearTimeout(e)),this._movingAutomatically=!1,this._contactPoint={x:e.x,y:e.y},this._onMouseDownCoordinates.long=this._coordinates.long,this._onMouseDownCoordinates.lat=this._coordinates.lat,this._motionStart={long:this._coordinates.long,lat:this._coordinates.lat},this._options.isMobile||(this._maxTimeBetweenWrites=1e3/this._writeSpeeds.motionRenderSpeed)}move(e){this._offset.lat=THREE.Math.radToDeg(this._gyroVector.x)+this._previousCoordinates.lat,this._offset.long=THREE.Math.radToDeg(this._gyroVector.y)+this._previousCoordinates.long;const t=this._motionStart.lat-.2*(this._contactPoint.y-e.y),n=.2*(this._contactPoint.x-e.x)+this._motionStart.long;this._updateViewpoint(t,n)}moveWheel(e){this._offset.lat=THREE.Math.radToDeg(this._gyroVector.x)+this._previousCoordinates.lat,this._offset.long=THREE.Math.radToDeg(this._gyroVector.y)+this._previousCoordinates.long;const t=this._coordinates.lat-.1*e.y,n=this._coordinates.long+.1*e.x;this._updateViewpoint(t,n)}moveDevice(e,t,n,r){this._updateFromGyroscopePending=!0;const i=new THREE.Quaternion;let o=window.orientation;null===o&&(o=this._video.clientWidth>this._video.clientHeight?90:0),e=e?THREE.Math.degToRad(e):0,t=t?THREE.Math.degToRad(t):0,n=n?THREE.Math.degToRad(n):0;const a=o?THREE.Math.degToRad(o):0,s=new THREE.Vector3(0,0,1),l=new THREE.Euler,c=new THREE.Quaternion,u=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));l.set(t,e,-n,"YXZ"),i.setFromEuler(l),i.multiply(u),i.multiply(c.setFromAxisAngle(s,-a)),this._gyroVector=(new THREE.Euler).setFromQuaternion(i,"YXZ"),this._rotation=this._gyroVector.z,this.isUserInteracting||this._movingAutomatically||this._updateViewpoint(THREE.Math.radToDeg(this._gyroVector.x)-this._offset.lat,-THREE.Math.radToDeg(this._gyroVector.y)+this._offset.long),this._deviceMotionHasOccurred||(this.snapToCenter(),this._telecine.fire(Ni.MOTION_START),this._deviceMotionHasOccurred=!0)}releaseContact(e){if(this._offset.lat=THREE.Math.radToDeg(this._gyroVector.x)-this._coordinates.lat,this._offset.long=THREE.Math.radToDeg(this._gyroVector.y)+this._coordinates.long,this.isUserInteracting=!1,this._motionStart&&!e){const e=Math.hypot(this._coordinates.long-this._motionStart.long,this._coordinates.lat-this._motionStart.lat);this._moveDueToMomentum(e)}}abandonMotion(){this.isUserInteracting=!1,this._motionStart=null}keyPress(e){this._options.keyboardDisabled||(this._keyIsDown()||(this.isUserInteracting=!0,this._motionTimeouts&&this._motionTimeouts.forEach(e=>clearTimeout(e))),this._keysPressed[e]||(this._keysPressed[e]=!0))}keyUp(e){this._keysPressed[e]=!1,this._keyIsDown()||(this.isUserInteracting=!1,this._moveDueToMomentum(1/0))}_moveFromKeyPress(){Object.keys(this._keysPressed).forEach(e=>{if(this._keysPressed[e])switch(e){case"up":this._updateViewpoint(this._coordinates.lat+2,this._coordinates.long);break;case"down":this._updateViewpoint(this._coordinates.lat-2,this._coordinates.long);break;case"left":this._updateViewpoint(this._coordinates.lat,this._coordinates.long-2);break;case"right":this._updateViewpoint(this._coordinates.lat,this._coordinates.long+2)}})}_keyIsDown(){return Object.keys(this._keysPressed).map(e=>this._keysPressed[e]).some(e=>e)}_moveDueToMomentum(e){if(e>=20){const t={long:this._coordinates.long-this._previousCoordinates.long,lat:this._coordinates.lat-this._previousCoordinates.lat};e===1/0&&(t.long/=2,t.lat/=2);for(let e=1;e<50;e++)this._motionTimeouts.push(setTimeout(()=>{1===e&&(this._movingAutomatically=!0),49===e&&(this._movingAutomatically=!1,this._maxTimeBetweenWrites=1e3/this._writeSpeeds.videoFps);const n=2/Math.pow(e,1.5);this._offset.lat=THREE.Math.radToDeg(this._gyroVector.x)+this._coordinates.lat+t.lat,this._offset.long=THREE.Math.radToDeg(this._gyroVector.y)+this._coordinates.long+t.long,this._updateViewpoint(this._coordinates.lat+t.lat*n,this._coordinates.long+t.long*n)},e*this._maxTimeBetweenWrites))}}onseeked(){this._activated&&this._update()}onresize(){this.adjustRenderSize(),this.isUserInteracting=!1}_update(){if(!this.isVRPresenting){this._phi=THREE.Math.degToRad(90+this._coordinates.lat),this._theta=THREE.Math.degToRad(this._coordinates.long),this._camera.position.set(Math.sin(this._phi)*Math.cos(this._theta),Math.cos(this._phi),Math.sin(this._phi)*Math.sin(this._theta)),this._camera.lookAt(this._camera.target),this._camera.rotation.z+=this._rotation;const e=this.cameraProps;this._telecine.fire(Ni.CAMERA_UPDATE,e),this._previousCameraProps.yaw===e.yaw&&this._previousCameraProps.pitch===e.pitch&&this._previousCameraProps.roll===e.roll&&this._previousCameraProps.fov===e.fov||(this._previousCameraProps=e,this._telecine.fire(Ni.CAMERA_CHANGE,e))}this._renderer.render(this._scene,this._camera)}adjustRenderSize(){if(this.isVRPresenting)this._camera.aspect=this._video.clientWidth/this._video.clientHeight,this._camera.updateProjectionMatrix(),this._renderer.setSize(this._video.clientWidth,this._video.clientHeight);else{this._video.clientWidth>this._video.clientHeight?this._camera.aspect=Math.max(1,Math.min(2,this._video.clientWidth/this._video.clientHeight)):this._camera.aspect=Math.max(1/3,Math.min(3,this._video.clientWidth/this._video.clientHeight)),this._camera.updateProjectionMatrix();const e=Yi(this._video.clientWidth,this._video.clientHeight,this._camera.aspect,1);this._renderer.setSize(e.width,e.height),this._output.style.paddingTop=`${e.top}px`}}_startRendering(){this._renderer.setAnimationLoop(()=>{this._keyIsDown()&&this._moveFromKeyPress(),this._update()})}_stopRendering(){this._renderer.setAnimationLoop(null)}_showOutput(){this._styleOutput({backgroundColor:"#000",display:"block"})}_hideOutput(){this._styleOutput({backgroundColor:"#000",display:"none"})}_styleOutput({backgroundColor:e,display:t}={}){this._output.style.cssText=`position:absolute;left:0;top:0;margin-left:auto;margin-right:auto;padding:0;background:${e};width:100%;height:100%;text-align:center;display:${t}`}}class Cc extends Ql{static get displayName(){return"AmbisonicEffect"}static get supported(){return void 0!==window.AudioContext}static get supportedScanners(){return[Eo,ml]}constructor(e,t={}){super(e,t),this.connected=!1,this._context=null,this._source=null,this._mirror=null,this._rotator=null,this._decoder=null}activate(){return this._context=new AudioContext,new Promise((e,t)=>{if("undefined"!=typeof ambisonics)return void e();const n=document.createElement("script");n.src=this._options.ambisonicsUrl,document.body.appendChild(n),n.onload=()=>e(),n.onerror=()=>t()}).then(()=>this.toggleAmbisonics()).catch(()=>{this._telecine._currentScanner.fire(Ni.AMBISONIC_UNSUPPORTED)})}deactivate(){this._disconnect(!0)}toggleAmbisonics(){var e;((null==(e=this._telecine.getCurrentStream("audio"))?void 0:e.ambisonic_order)??0)<1?this._disconnect():this._connect()}_connect(){var e;if(!this._context)return;const t=(null==(e=this._telecine.getCurrentStream("audio"))?void 0:e.ambisonic_order)??0;if(this.connected||t<1)return;const n=this._telecine._currentScanner._video;this._source=this._context.createMediaElementSource(n),this._mirror=new ambisonics.sceneMirror(this._context,t),this._rotator=new ambisonics.sceneRotator(this._context,t),this._decoder=new ambisonics.binDecoder(this._context,t),this._source.connect(this._mirror.in),this._mirror.out.connect(this._rotator.in),this._rotator.out.connect(this._decoder.in),this._decoder.out.connect(this._context.destination),this._mirror.mirror(1),this.connected=!0}_disconnect(e=!1){this._source&&this._source.disconnect(),e&&this._context&&(this._context.close(),this._context=null),this._source=null,this._mirror=null,this._rotator=null,this._decoder=null,this.connected=!1}updateRotation(e,t,n){this._rotator&&(this._rotator.yaw!==e||this._rotator.pitch!==t||this._rotator.roll!==n)&&(this._rotator.yaw=e,this._rotator.pitch=t,this._rotator.roll=n,this._rotator.updateRotMtx())}}function Ac(){return P("module/hls-js.js")}const Lc={"application/vnd.apple.mpegurl":"hls","application/vnd.vimeo.dash+json":"dash","video/vnd.mpeg.dash.mpd":"dash","video/mp4":"progressive","video/webm":"progressive","video/x-flv":"progressive","application/x-mpegURL":"hlslive"},Ic="pending",Pc="active",Rc="started",wc="ended",Oc="started",kc="done",Dc="error";var Nc=/\s/,Mc=/^\s+/;var xc=/^[-+]0x[0-9a-f]+$/i,Vc=/^0b[01]+$/i,Bc=/^0o[0-7]+$/i,Uc=parseInt;function Fc(e){if("number"==typeof e)return e;if(dt(e))return NaN;if(pt(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=pt(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&Nc.test(e.charAt(t)););return t}(e)+1).replace(Mc,""):e}(e);var n=Vc.test(e);return n||Bc.test(e)?Uc(e.slice(2),n?2:8):xc.test(e)?NaN:+e}var Hc=1/0;var Wc=tt.isFinite,Gc=Math.min,jc=function(){var e=Math.round;return function(t,n){if(t=Fc(t),(n=null==n?0:Gc(function(e){var t=function(e){return e?(e=Fc(e))===Hc||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),n=t%1;return t==t?n?t-n:t:0}(n),292))&&Wc(t)){var r=(Yt(t)+"e").split("e");return+((r=(Yt(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}();function Yc(e){return!isNaN(e)}function $c(e){return jc(e,3)}let qc=0;function zc(e="b"){return`${e}${++qc}`}zc(),zc();const Kc=zc(),Xc=zc(),Zc=zc(),Jc=zc(),Qc=zc(),eu=zc(),tu=Symbol("CONFIG_CHANGED"),nu=Symbol("TELECINE_READY"),ru=Symbol("TELECINE_VIDEO_INIT"),iu=Symbol("PLAY_INITIATED"),ou=Symbol("QUALITY_CHANGED"),au=Symbol("CUE_CHANGED"),su=Symbol("CAPTIONS_CHANGED"),lu=Symbol("SPATIAL_PLAYBACK_TOGGLED"),cu=Symbol("PICTURE_IN_PICTURE_AVAILABLE_SAFARI"),uu=Symbol("HLS_QUALITY_CHANGED"),du=Symbol("REQUEST_COMPLETE_LIVE_SUBTITLES"),_u=Symbol("COMPLETE_LIVE_SUBTITLES_LOADED"),hu=Symbol("COMPLETE_LIVE_SUBTITLES_ERROR");var pu=Object.freeze({__proto__:null,CONFIG_CHANGED:tu,TELECINE_READY:nu,TELECINE_VIDEO_INIT:ru,PLAY_INITIATED:iu,QUALITY_CHANGED:ou,CUE_CHANGED:au,CAPTIONS_CHANGED:su,SPATIAL_PLAYBACK_TOGGLED:lu,PICTURE_IN_PICTURE_AVAILABLE_SAFARI:cu,HLS_QUALITY_CHANGED:uu,REQUEST_COMPLETE_LIVE_SUBTITLES:du,COMPLETE_LIVE_SUBTITLES_LOADED:_u,COMPLETE_LIVE_SUBTITLES_ERROR:hu});const mu=Symbol("liveeventpending"),fu=Symbol("liveeventactive"),vu=Symbol("liveeventstarting"),gu=Symbol("liveeventstarted"),Eu=Symbol("liveeventended"),bu=Symbol("livearchivestarted"),yu=Symbol("livearchivedone"),Tu=Symbol("livearchiveerror"),Su=Symbol("livesettingsupdated"),Cu=Symbol("lowlatencyfallback"),Au=Symbol("livestatssuccess"),Lu=Symbol("livestatsfailure");var Iu=Object.freeze({__proto__:null,EVENT_PENDING:mu,EVENT_ACTIVE:fu,EVENT_STARTING:vu,EVENT_STARTED:gu,EVENT_ENDED:Eu,ARCHIVE_STARTED:bu,ARCHIVE_DONE:yu,ARCHIVE_ERROR:Tu,SETTINGS_UPDATED:Su,LOW_LATENCY_FALLBACK:Cu,LIVE_STATS_SUCCESS:Au,LIVE_STATS_FAILURE:Lu});p(p(p(p(p(p(p(p({},Pi),ki),Di),Iu),Ni),wi),Mi),pu);const Pu=p(p({},Di),Iu);function Ru(e){var t;return(null==e||null==(t=e.archive)?void 0:t.status)===kc}function wu(e){return(null==e?void 0:e.status)===Ic}function Ou(e){return(null==e?void 0:e.status)===Rc}function ku(e){return(null==e?void 0:e.status)===wc}function Du(e,t){var n;const r=null==(n=e.request.files.hls)?void 0:n.default_cdn,{signature:i,timestamp:o,expires:a}=e.request;return`https://${e.player_url}/live/${e.video.id}${t}?signature=${i}&time=${o}&expires=${a}&cdn=${r}`}var Nu=Object.prototype.hasOwnProperty;function Mu(e){if(null==e)return!0;if(tr(e)&&(Je(e)||"string"==typeof e||"function"==typeof e.splice||Mn(e)||$n(e)||On(e)))return!e.length;var t=xr(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Xn(e))return!er(e).length;for(var n in e)if(Nu.call(e,n))return!1;return!0}function xu(e){const t=this;let n={};const r={get attributes(){return Object.assign({},t)},get previousAttributes(){return n},clear(){i();var e=t.attributes;for(var n in e)delete t[n]},set(e){for(var n in i(),e=ni(e))t[n]=e[n]},clone:()=>new xu(t.attributes),toJSON:()=>ni(t.attributes)};function i(){Mu(t.attributes)||(n=ni(t.attributes))}return r.set(e),E(t,r)}function Vu(e,t){const n=new xu(Ai(e,t));let r=!1;return b(n,{reset:function(e){return n.clear(),function(e){r=!0,n.set(e),Ai(n,t)}(e),n},isNewVideo:function(){const e=n.previousAttributes;return!r||e.video.id!==n.video.id||e.video.version.current!==n.video.version.current||!!e.video.live_event&&!Ru(e.video.live_event)&&(!n.video.live_event||Ru(n.video.live_event))}})}function Bu(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=Fc(n))==n?n:0),void 0!==t&&(t=(t=Fc(t))==t?t:0),function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}(Fc(e),t,n)}function Uu(e=[],t=null,n=null){if(!t&&!n)return e;if(!e.length)return e;if(t===n&&-1!==e.indexOf(t))return[t];const r=parseFloat(t),i=parseFloat(n);if(r&&i&&i<r)return e;const o=e.filter(e=>{const t=parseFloat(e);return!(r&&t<r||i&&t>i)});return o.length?o:e}function Fu(e=[],t=null){const n=Uu(e,t,t);return 1===n.length?n[0]:null}function Hu(e){return e.quality||e.metadata.quality}function Wu(e,t,n=!1){return n?Gu(e,t):function(e,t){e.embed.settings.audio_tracks||(t=null);const n=e.request.files,r=zu(n),i=ed(e),o=e.request.cookie.quality||i||function(e){const t=zu(e.request.files);let n=t.some(Ju);Q.mobileAndroid&&(n=!1);let r="720p";if(n){const e=t.map(Hu);-1!==e.indexOf("1080p")&&-1===e.indexOf("720p")&&(r="1080p")}return e.request.cookie.hd||e.video.default_to_hd?r:"360p"}(e);let a=function({files:e=[],preference:t="360p",priorityOffset:n=0}){(e=Array.from(e)).sort(td());const r=e.map(Hu);if(t){-1===r.indexOf(t)&&(r.push(t),r.sort((e,t)=>Qu(t)-Qu(e)));const e=r.indexOf(t),n=r.splice(0,e);n.reverse(),r.push.apply(r,f(n))}return e.map(e=>({id:e.id,src:e.url,mime:e.mime,priority:r.indexOf(e.quality)+1+n,metadata:{profile:e.profile,cdn:e.cdn,origin:e.origin,quality:e.quality,fps:e.fps}}))}({files:r,preference:o,priorityOffset:3});return n.hls&&(a=a.concat($u(e,!1,t)),e.request.drm&&Q.browser.webKit)||n.dash&&(a=a.concat(qu(e,!1,t))),a}(e,t)}function Gu(e,t){const n=e.request.files;let r=[];const i=e.request.drm&&Q.browser.webKit;return(n.hls&&(Q.iPhone||Q.iPad)||i)&&(r=r.concat($u(e,!0,t))),n.dash&&!i&&(r=r.concat(qu(e,!0,t))),r}function ju(e,t=!1,n=!1){let r=e.url;if("avc_url"in e&&(r=e.avc_url),t)return r;const i=Q.dolbyVision,o=Q.hdr&&Q.hevc,a=Q.hevc;return n||(i&&"hevc_dvh1_url"in e?r=e.hevc_dvh1_url:o&&"hevc_hdr_url"in e?r=e.hevc_hdr_url:a&&"hevc_sdr_url"in e&&(r=e.hevc_sdr_url)),Q.av1&&"av1_url"in e&&(r=e.av1_url),r}function Yu(e){return e.fallback_url}function $u(e,t=!1,n=null){var r;const i=e.request.files,o=i.hls.default_cdn,a=e.request.drm,s=i.hls.cdns[o],l=(null==s||null==(r=s.alternatives)?void 0:r[n])||s,c=t?Yu(l):ju(l,a);return{id:`hls-${o}-${e.video.id}`,src:c,mime:Li.hls,priority:3,metadata:{cdn:o,origin:i.hls.cdns[o].origin,quality:"sd"}}}function qu(e,t=!1,n=null){const r=e.request.files;return Mu(r.dash)?[]:Object.keys(r.dash.cdns).map(i=>{var o;const a=r.dash.cdns[i],s=(null==a||null==(o=a.alternatives)?void 0:o[n])||a,l=(Q.browser.chrome||Q.browser.firefox)&&e.request.drm,c=t?Yu(s):ju(s,!1,l);return{id:`dash-${i}-${e.video.id}`,src:c,mime:e.request.drm?Li.dashMpd:Li.dash,priority:i===r.dash.default_cdn?1:2,metadata:{cdn:i,origin:r.dash.cdns[i].origin,quality:"sd"}}})}function zu(e){if(Mu(e.progressive))return[];let t=e.progressive;return"progressive_avc"in e&&(t=e.progressive_avc),t.filter(Xu(t))}function Ku(e){if("number"==typeof e)return e;const t=e.split("-");return 5===t.length?t[0]:parseInt(t[0],10)}function Xu(e){const t=e.filter(Zu).map(Hu);return e=>-1===t.indexOf(Hu(e))||Zu(e)}function Zu(e){let t=e.fps;return"metadata"in e&&(t=e.metadata.fps),t>30}function Ju(e){return Qu(e)>=720}function Qu(e){return"string"!=typeof e&&(e=Hu(e)),parseInt(e,10)}function ed(e){const t=zu(e.request.files).map(e=>e.quality);return e.embed.on_site?null:Fu(t,e.embed.quality)}function td(e="desc"){return(t,n)=>{const r=Qu(t),i=nd(t),o=Qu(n),a=nd(n);return"asc"===e?r-o||i-a:o-r||a-i}}function nd(e){return"object"!=typeof e?0:"fps"in e?e.fps:"metadata"in e&&"fps"in e.metadata?e.metadata.fps:0}function rd(e){const t=e.video.live_event,n=e.request.files;if(!Mu(n.hls)){var r,i;const o=n.hls.default_cdn,a=n.hls.cdns[o].hevc_url||(null==t||null==(r=t.playback_urls)||null==(r=r[o])||null==(r=r.codecs)||null==(r=r.hevc)?void 0:r.hls_noredirect),s=!!a&&Q.hevc,l=s?a:n.hls.cdns[o].json_url||function(e,t){var n,r;const i=t?"hevc":"avc",o=e.dvr,a=e.low_latency;var s,l;return o?null==(s=e.playback_urls)||null==(s=s["akamai-fmp4"])||null==(s=s.codecs)||null==(s=s[i])?void 0:s.hls_noredirect:a?null==(l=e.playback_urls)||null==(l=l["akamai-low-latency"])||null==(l=l.codecs)||null==(l=l[i])?void 0:l.hls_noredirect:null!=(n=e.playback)&&null!=(n=n.codecs)&&null!=(n=n[i])&&n.hls_noredirect?e.playback.codecs[i].hls_noredirect:null==(r=e.playback)?void 0:r.hls_noredirect}(t,s),c=null!=(i=e.request.flags)&&i.live_dash?2:1;return{id:`hls-${o}-${e.video.id}`,src:l,mime:Li.hlsLive,priority:c,metadata:{cdn:o,origin:n.hls.cdns[o].origin,quality:"sd",codec:s?"hevc":"avc"}}}return null}function id(e,t){let n=[];if(t.video){const i=t.video.currentFile.mime;if(i===Li.hlsLive)return t.manifest.video.map(e=>p(p({},e),{},{quality:`${e.height}p`}));if([Li.dash,Li.dashMpd].includes(i)){var r;const i=!!t.video.drmHandler,o=i&&"sd-fallback"===t.video.drmHandler.state;n=function(e,t=!1){if(!e)return[];let n=e.streams;"streams_avc"in e&&(n=e.streams_avc);const r=Q.dolbyVision,i=Q.hevc&&Q.hdr,o=Q.hevc;return r&&"streams_hevc_dvh1"in e?n=e.streams_hevc_dvh1:i&&"streams_hevc_hdr"in e?n=e.streams_hevc_hdr:o&&"streams_hevc_sdr"in e?n=e.streams_hevc_sdr:Q.av1&&"streams_av1"in e&&(n=e.streams_av1),t&&"streams_fallback"in e&&(n=e.streams_fallback),n}(e.request.files.dash,o),!i&&null!=t&&null!=(r=t.currentScanner)&&r.manifestLoaded&&(n=function(e,t){const n=t.map(e=>e.id);return e.filter(e=>{const t=Ku(e.id);return n.includes(e.id)||n.includes(t)})}(n,t.currentScanner.videoStreams))}else n=t.video.files.filter(e=>"progressive"===Lc[e.mime])}return n.filter(Xu(n)).sort(td())}function od(e){let t=Hu(e);const n={"1440p":"2K","2160p":"4K","2700p":"5K","3240p":"6K","3780p":"7K","4320p":"8K"};for(const e in n)t=t.replace(e,n[e]);return t}function ad(e){return Q.spatialPlayback&&e.video.spatial?35:75}function sd(e){return e.request.text_tracks.map(e=>({id:e.id,src:e.url,kind:e.kind,label:e.label,language:e.lang,provenance:e.provenance}))}let ld={captureException(e){},captureMessage(e){},captureBreadcrumb(){}},cd=ld;var ud=function(e){cd=Object.assign({},ld,e)},dd=function(e,t){return cd.captureException(e,t)},_d=function(e,t,n="backbone",r="info"){return cd.captureBreadcrumb(e,t,n,r)};function hd(e,t,n){let r=!1,i=!1,o=!1,a=!0,s="auto";function l(e){if(!a&&n.buffered&&n.buffered.length>0){e=e||n.currentTime;const i=function(e,t){var n=e.length-1;if(e.length>1)for(var r=0,i=e.length;r<i;r++)if(e.start(r)<=t&&e.end(r)>=t){n=r;break}return n}(n.buffered,e),a=n.buffered.end(i),s=a/n.duration,l=n.duration;if(t.fire(Pi.PROGRESS,{loaded:a,duration:l,loadProgress:s}),o&&r&&a===n.duration)return void(r&&n.paused&&n.play().catch(dd))}}function c(t=[]){const r=id(e,n).reverse().map(e=>e.quality),i=t.filter(e=>-1!==r.indexOf(e)).sort((e,t)=>r.indexOf(e)-r.indexOf(t));return i.map(e=>r.indexOf(e))}function u(e=[],t=null){if(e.includes("auto"))n.video.currentFile.restrictedStreamIndexes=[];else{const t=c(e);t.length&&(_d(`Switched to ${e[0]}`,{},"video"),n.video.currentFile.restrictedStreamIndexes=t)}if(t){const e=c([t]),r=e.length?e[0]:null;n._currentScanner.preloadStreamIndex=r}else n._currentScanner.preloadStreamIndex=null}function d(){if(e.embed.on_site)return;const t=id(e,n).map(e=>e.quality),r=Uu(t,e.embed.quality||e.embed.min_quality,e.embed.quality||e.embed.max_quality),i=Fu(t,e.embed.initial_quality);u(r.length&&r.length!==t.length?r:["auto"],i)}return t.on(ru,function(){var t;n.playsinline=e.embed.playsinline,n.muted=e.embed.muted,n.lowLatencyMode=null==(t=e.video.live_event)?void 0:t.low_latency,n.disableRemotePlayback=!e.embed.settings.airplay&&!e.embed.settings.chromecast}),t.on(Xc,function(){a=!0,n.paused||n.pause(),i=!1,r=!1,n.currentTime=0}),t.on(Zc,function(){n.paused||n.pause(),n.video=null}),n.on(Pi.PLAY,function(){a=!1,t.fire(Pi.PLAY,n.currentTime)}),n.on(Pi.PAUSE,function(){r=!1,t.fire(Pi.PAUSE,n.currentTime,n.ended)}),n.on(Pi.PLAYING,function(e){l()}),n.on(Pi.TIME_UPDATE,function(){if(a)return;const{currentTime:e,liveEdgeTime:r,atLiveEdge:i,liveTailTime:o,atLiveTail:s,duration:l,playbackRate:c}=n,u=e/l;t.fire(Pi.TIME_UPDATE,{currentTime:e,liveEdgeTime:r,atLiveEdge:i,liveTailTime:o,atLiveTail:s,duration:l,playbackRate:c,timeProgress:u})}),n.on(Pi.ENDED,function(e){n.loop?n.play().catch(dd):(r=!1,t.fire(Pi.ENDED,e))}),n.on(Pi.LOADED_METADATA,function(t){const r=n.duration;if(isFinite(r)&&r>0){if(r<e.video.duration-1||r>e.video.duration+1)return;e.video.duration=r}e.video.video_width=n.videoWidth,e.video.video_height=n.videoHeight}),n.on(Pi.DURATION_CHANGE,function(t){const r=n.duration;isFinite(r)&&(e.video.duration>0&&(r<e.video.duration-1||r>e.video.duration+1)||(e.video.duration=r))}),n.on(Pi.PROGRESS,l),n.on(ki.BUFFER_STARTED,()=>{o=!0}),n.on(ki.BUFFER_ENDED,()=>{o=!1}),t.on(Kc,function(t){n.isLive()&&0===n.liveEdgeTime||(t=Bu(t,$c(n.isLive()?n.liveTailTime:0),$c(n.isLive()?n.liveEdgeTime:n.duration||e.video.duration)),n.currentTime=t)}),n.on(Pi.SEEKING,function(){const e=n.currentTime,r=n.duration,i=e/r;t.fire(Pi.SEEKING,{currentTime:e,duration:r,timeProgress:i})}),n.on(Pi.SEEKED,function(){l();const e=n.currentTime,r=n.duration,i=e/r;t.fire(Pi.SEEKED,{currentTime:e,duration:r,timeProgress:i})}),n.on(ki.CURRENT_FILE_CHANGE,function(t){_d("Current file changed",{id:t.id,mime:t.mime,src:t.src,metadata:t.metadata},"video"),[Li.dash,Li.dashMpd].includes(t.mime)&&d(),[Li.hlsLive].includes(t.mime)?n.once(ki.STREAMS_LOADED,()=>{d()}):ed(e)}),n.on(Pi.RESIZE,function(){n.video.currentFile.mime===Li.hls&&n.videoHeight&&t.fire(uu,{height:n.videoHeight})}),{play:function(){return r=!0,i||(t.fire(iu),i=!0),n.play()},pause:function(){r=!1,n.pause()},get quality(){return s},set quality(r){!function(r){const i=n.video.currentFile.mime;if([Li.dash,Li.dashMpd,Li.hlsLive].includes(i))u([r]);else{const t=id(e,n).filter(e=>e.metadata.quality===r);t.length>0&&(a=!0,n.video.currentFile=t[0])}s=r,t.fire(ou,r)}(r)}}}function pd(e,t,n){let r=null;Q.spatialPlayback&&(t.on(ru,function(){r&&(n.deactivateEffect(Sc),r=null,t.fire(lu,r));const i=e.video.spatial;i&&(e.request.drm||n.supportsEffect(Sc)&&(r=n.activateEffect(Sc,{threeUrl:e.request.urls.three_js,fps:e.video.fps,fieldOfView:i.fov,directorTimeline:i.director_timeline,projection:i.projection,stereoMode:i.stereo_mode,initialView:i.initial_view,isMobile:Q.android,dimensions:e.embed.on_site?{width:1080,height:540}:{width:640,height:360},keyboardDisabled:!e.embed.keyboard}),t.fire(lu,r)))}),n.on(Ni.SPATIAL_UNSUPPORTED,function(){r&&(n.deactivateEffect(Sc),r=null,t.fire(lu,r))}))}function md(e,t,n){let r=null;t.on(ru,function(){r&&(n.deactivateEffect(gc),r=null),e.video.canvas&&(e.request.drm||n.supportsEffect(gc)&&(r=n.activateEffect(gc)))})}var fd=Si(function(e,t,n){yi(e,t,n)});function vd(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}const gd=5e3;function Ed(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}function bd(e,t,n){if(n)return t?t(e()):e();try{var r=Promise.resolve(e());return t?r.then(t):r}catch(e){return Promise.reject(e)}}class yd extends bn{constructor(e,t,n,r){super(),this._liveEventHasID=oe(),this._liveEvent=ni(e),this._sessionUrl=e.session_url||e.sessionUrl,this._subtitleUrl=e.subtitleUrl,this._sessionRefreshUrl=t,this._subtitleRefreshUrl=r,this._appPollUrl=n,this._forcedPoll=!1,this._disabled=!1,this._dvrEnabled=e.dvr,this._setupPolling()}requestCompleteLiveSubtitles(){const e=this;return bd(function(){return vd(Ed(function(){return vd(We({url:e._subtitleUrl,retry:3,retryStatus:e=>[410].includes(e)||n.retryStatus(e),hooks:{beforeRetry:[e._beforeSubtitleRetry.bind(e)]}}).json(),function(e){if(null==e||!e.url)throw new Error("No webvtt url was available to fetch");return vd(We(e.url).text(),Al)})},function(e){throw e}))})}_beforeSubtitleRetry(e){const t=this;return bd(function(){return vd(t._refreshSubtitleUrl(),function(t){e.url=t})})}_refreshSubtitleUrl(){const e=this;return bd(function(){return vd(We(e._subtitleRefreshUrl).json(),function(t){return e._subtitleUrl=t.url,t.url})})}disable(){this._disabled=!0}forcePolling(){this.isForcePolling||(this._forcedPoll=!0,this._setupPolling())}unforcePolling(){this._forcedPoll=!1}get isForcePolling(){return this._forcedPoll}get liveEventIDReady(){return this._liveEventHasID}_setupPolling(){!1!==this._liveEvent.polling&&(this._liveEvent.id&&this._liveEventHasID.resolve(),this._shouldPollApp()?this._pollApp():this._shouldPoll()&&this._pollLiveApi())}_shouldPoll(){var e;return!(ku(this._liveEvent)&&(null==(e=this._liveEvent.archive)?void 0:e.status)!==Oc||!this.isForcePolling&&Ou(this._liveEvent))}_shouldPollApp(){return!this._sessionUrl||!(!wu(this._liveEvent)||null!==this._liveEvent.id)}_refreshSessionUrl(){const e=this;return bd(function(){return vd(We(e._sessionRefreshUrl).json(),function(t){return e._sessionUrl=t.url,t.url})})}_pollLiveApi(){const e=this;return bd(function(){if(e._disabled)return vd();let t,r={};return Q.browser.ie&&(r={Pragma:"no-cache","Cache-Control":"no-cache"}),vd(function(e,t){return e&&e.then?e.then(t):t()}(Ed(function(){return vd(We({url:e._sessionUrl,retry:3,retryStatus:e=>[410].includes(e)||n.retryStatus(e),hooks:{beforeRetry:[e._beforeRetry.bind(e)]},headers:r}).json(),function(e){t=e})},function(){throw new Error(`Hit max retries polling ${e._sessionUrl}`)}),function(n){if(e._dvrEnabled&&(t.dvr=e._dvrEnabled),t.status!==e._liveEvent.status){if(ku(t)&&"provision_expire"===t.terminate_reason)return e._sessionUrl=null,e._liveEvent.id=null,void setTimeout(e._setupPolling.bind(e),gd);const n={[Pc]:Pu.EVENT_ACTIVE,[Ic]:Pu.EVENT_PENDING,[Rc]:Pu.EVENT_STARTED,[wc]:Pu.EVENT_ENDED}[t.status];try{e.fire(n,t)}catch(e){throw new Error(`Error firing live event status change ${e}`)}}if(t.archive&&(!e._liveEvent.archive||t.archive.status!==e._liveEvent.archive.status)){const n={[Oc]:Pu.ARCHIVE_STARTED,[kc]:Pu.ARCHIVE_DONE,[Dc]:Pu.ARCHIVE_ERROR}[t.archive.status];e.fire(n,t)}e._liveEvent=fd(e._liveEvent,t),e._shouldPoll()&&setTimeout(e._pollLiveApi.bind(e),gd)}))})}_beforeRetry(e){const t=this;return bd(function(){return vd(t._refreshSessionUrl(),function(t){e.url=t})})}_pollApp(){const e=this;return bd(function(){return e._disabled?vd():vd(We(e._appPollUrl).json(),function(t){let n=!1;return function(r,i){var o=function(){if(null!==t.ingest.session_id)return e._liveEventHasID.resolve(),e._liveEvent.id=t.ingest.session_id,vd(e._refreshSessionUrl(),function(){e._pollLiveApi(),n=!0})}();return o&&o.then?o.then(i):i(o)}(0,function(t){if(n)return t;setTimeout(e._pollApp.bind(e),gd)})})})}}function Td(){}function Sd(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function Cd(e,t,n){const r=Sd(function(){return function(e){return e&&e.then?e.then(Td):Promise.resolve()}({hive:()=>{},kollective:()=>{}}[e.video.ecdn.ecdn_provider]())});let i,o,a,s=!1,l=0,c=0;function u(){o&&(o.disable(),o=null)}function d(){n.endLive()}return t.on(tu,function(){i&&!e.isNewVideo()||(i=!0,u(),e.video.live_event&&!Ru(e.video.live_event)&&(function(n){o=new yd(n,function(e){return Du(e,"/session/refresh")}(e),function(e){return`https://${e.vimeo_url}/live_event/status?clip_id=${e.video.id}`}(e),function(e){return Du(e,"/subtitle/refresh")}(e)),o.on(Pu.EVENT_ENDED,d),Object.keys(Pu).forEach(e=>{const n=Pu[e];o.on(n,e=>{t.fire(n,e)})}),t.on(du,Sd(function(){return function(e){if(e&&e.then)return e.then(Td)}(function(e,n){try{var r=function(){var e;return function(e,t){return void 0?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}(null==(e=o)?void 0:e.requestCompleteLiveSubtitles(),function(e){t.fire(_u,e)})}()}catch(e){return n()}return r&&r.then?r.then(void 0,n):r}(0,function(e){t.fire(hu)}))}))}(e.video.live_event),function(){l=0,c=0;let e=!1;n.once(Pi.PLAYING,()=>e=!0);let r=le();clearInterval(a),a=setInterval(()=>{n.paused||(l+=de(r)/1e3),e&&s&&(c+=de(r)/1e3),function(e){if(n.lowLatencyMode&&e>12&&n.latency>10&&s){const e="Rebuffer ratio > 12% and latency > 10s, fallback to normal HLS w/ target latency of 12s.";t.fire(Pu.LOW_LATENCY_FALLBACK,{msg:e}),n.lowLatencyMode=!1,n.presentationDelay=12,n.bufferTarget=12}}(c/l*100),r=le()},500)}()),e.video.ecdn&&r())}),t.on(Zc,function(){u()}),n.on(Pu.STREAM_ONLINE,function(){o.isForcePolling&&o.unforcePolling()}),n.on(Pu.STREAM_OFFLINE,function(){o.isForcePolling||o.forcePolling()}),n.on(ki.BUFFER_STARTED,function(){s=!0}),n.on(ki.BUFFER_ENDED,function(){s=!1}),{get p2pReady(){}}}function Ad(e,t,n){if(n)return t?t(e()):e();try{var r=Promise.resolve(e());return t?r.then(t):r}catch(e){return Promise.reject(e)}}function Ld(e,t){var n=e();return n&&n.then?n.then(t):t(n)}function Id(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}function Pd(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function Rd(e,t,n){var r;const i=Pd(function(){return Id(function(){return Ad(f,function(t){return t(n,e)})},function(e){throw dd(e),new Error("Failed to create Hive Module",e)})}),o=Pd(function(){return Id(function(){return Ad(m,function(e){return e(n)})},function(e){return dd(e),null})}),a=function(){return function(e){return e&&e.then||(e=Promise.resolve(e)),e}(Ld(function(){if(!l)return Ad(o,function(e){l=e})},function(){var t;return null==(t=l)?void 0:t.setUp(e)}))},s=Pd(function(){return Id(function(){return Ld(function(){if(!c)return Ad(i,function(e){c=e})},function(){var e;return null==(e=c)?void 0:e.setUp(d)})},function(e){var t;return null==(t=c)||t.stop(),null})});let l,c,u=!1,d=!1,_=!1;const h=null==(r=e.video.ecdn)?void 0:r.ecdn_provider;let p;function m(){return P("module/kollective.js")}function f(){return P("module/hive.js")}function v(){try{l&&(l.destroy(),l=null),c&&(c.destroy(),c=null)}catch(e){}}return t.on(tu,function(){var t;e.isNewVideo()&&(u=!1),!0!==e.preload||!1!==_||"kollective"!==h?u||((null==(t=e.video.live_event)?void 0:t.status)!==Ic?(u=!0,v(),h&&(p={hive:s,kollective:a}[h]())):d=!0):_=!0}),t.on(Zc,v),{get p2pReady(){return p}}}function wd(e,t,n){let r=null;function i(){n.deactivateEffect(Cc),r=null}t.on(iu,function(){var t;r&&i(),(null==(t=e.video.channel_layout)?void 0:t.startsWith("ambisonic"))&&n.supportsEffect(Cc)&&(r=n.activateEffect(Cc,{ambisonicsUrl:e.request.urls.ambisonics_js}))}),n.on(Ni.CAMERA_UPDATE,function({yaw:e,pitch:t,roll:n}){r&&r.updateRotation(e,t,n)}),n.on(Ni.AMBISONIC_UNSUPPORTED,function(){r&&i()}),n.on(ki.STREAM_CHANGE,function(){r&&r.toggleAmbisonics()})}function Od(e,t=[]){if(!e||"null"===e||0===t.length)return{track:null};const[n,r]=e.split("."),[i]=n.split(/[-_]/),o=n!==i,a=t.filter(e=>o&&e.language===n||e.language===i).sort((e,t)=>{const o=2*(e.language===i&&e.kind===r)+2*(e.language===n)+1*(e.kind===r);return 2*(t.language===i&&t.kind===r)+2*(t.language===n)+1*(t.kind===r)-o});return a.length>0?{track:a[0],exactMatch:a[0].language===n&&a[0].kind===r}:{track:null}}function kd(e){const t=e.split(/\n/g);let n=[],r=[];return t.forEach(e=>{let t=e.match(/<[a-zA-Z]+ ?.*?>/g)||[],i=e.match(/<\/[a-zA-Z]+ ?.*?>/g)||[];const o=r.map(({startTag:e})=>e);r=[],t=o.concat(t),t.forEach(e=>{let[t]=e.replace(/<|>/g,"").split(" ");const n=i.indexOf(`</${t}>`);-1!==n?i.splice(n,1):r.push({startTag:e,closeTag:`</${t}>`})});const a=r.map(({closeTag:e})=>e).reverse().join(""),s=`${o.join("")}${e}${a}`;n.push(s)}),n.join("<br>")}function Dd(e){return e?e.split(/\n/g).join("↵"):e}function Nd(e,t){let n;function r(){return t.pictureInPictureActive||S(t.videoElement)?"showing":"hidden"}function i(){if(0!==t.video.textTracks.length){if(t.video.textTracks.forEach(e=>{e.on("cuechange",o),e.on("modechange",a)}),t.video.textTracks.language){const[n]=t.video.textTracks.language.split(/[-_]/),[r]=t.video.textTracks.language.split(/[-_]/);if(n!==r){const n=`${t.video.textTracks.language}.subtitles`,{track:r}=Od(n,t.video.textTracks);if(r)return void e.fire(Jc,n)}}e.fire(Qc)}else e.fire(Qc)}function o(t){const n=t.target,r=n.activeCues||[],i=[];let o;for(var a=0,s=r.length;a<s;a++)""!==r[a].text.replace(/^\s+|\s+$/gm,"")&&(o=document.createElement("span"),o.appendChild(r[a].getCueAsHTML()),i.push({html:kd(o.innerHTML),text:Dd(r[a].text)}));e.fire(au,n,i)}function a(n){const r=n.target;S(t.videoElement)&&"showing"===r.mode&&e.fire(su,r)}e.on(ru,i),e.on(Jc,function(i){if(n&&n.id===i)return;let o=t.video.textTracks.getTrackById(i),a=!0;o||({track:o,exactMatch:a}=Od(i,t.video.textTracks)),o!==n&&setTimeout(()=>{t.video&&t.video.textTracks.forEach(e=>{e.mode=e===o?r():"disabled"}),e.fire(su,o,!a),n=o},0)}),e.on(Qc,function(){setTimeout(()=>{t.video&&t.video.textTracks&&t.video.textTracks.forEach(e=>{e.mode="disabled"}),e.fire(au),n&&(n=null,e.fire(su,null))},0)}),e.on(ki.TEXT_TRACKS_AVAILABLE,i),e.on([Pi.ENTER_PICTURE_IN_PICTURE,Pi.LEAVE_PICTURE_IN_PICTURE],function(){!function(e){n&&n.mode!==e&&(n.mode=e)}(r())})}const Md="main";function xd(e,t){return Array.from(e).map(e=>p(p({},e),{},{enabled:e.id===t}))}function Vd(e){return Array.from(e).find(e=>e.enabled)}function Bd(e=[]){return Array.from(e).find(e=>e.kind===Md)}function Ud(e){return e.split("-")[0]}function Fd(e,t={},n=!1){var r,i,o;if(null==e||!e.length)return null;const a=null==(r=t=function(e={}){var t;let{language:n="",kind:r=""}=e;if(!n)return e;let i=n.split(/[.,]/);return n=i[0].trim(),r=r||(null==(t=i[1])?void 0:t.trim())||"",p(p({},e),{},{language:n,kind:r})}(t))?void 0:r.id,s=null==(i=t)?void 0:i.language,l=null==(o=t)?void 0:o.kind;if(s===Md||l===Md)return Bd(e);if(a){const t=e.find(e=>e.id===a);if(t)return t}if(l&&s){const t=e.find(e=>e.language===s&&e.kind===l);if(t)return t}if(s&&!n){const t=e.find(e=>e.language===s);if(t)return t;const n=Ud(s),r=e.find(e=>Ud(e.language)===n);if(r)return r}return null}function Hd(e,t){let n="translation";return"1"===e.id?n="main":e.label.includes("(Audio description)")?n="descriptions":e.label.includes("(Commentary)")&&(n="commentary"),e.language===t.language&&n===t.kind}function Wd(e,t,n,r=[]){let i,o,a,s,l,c;function u(){var t,n;const r=e.video.live_event,o=null==r?void 0:r.dvr;if(wu(r)||function(e){return(null==e?void 0:e.status)===Pc}(r)||ku(r)&&!Ru(r))return void(i.video=null);if(Ou(r)&&i.video&&!e.isNewVideo())return;const a=e.request.audio_tracks||[],s=null==(t=Vd(a))?void 0:t.id,c="sd-fallback"===(null==(n=i.video)||null==(n=n.drmHandler)?void 0:n.state),u=Ou(r)?function(e){const t=[],n=rd(e);n&&t.push(n);const r=function(e){var t,n;const r=e.video.live_event,i=e.request.files;if(Mu(i.dash))return null;const o=i.dash.default_cdn,a=i.dash.cdns[o].url||(null==(t=r.playback)?void 0:t.dash_noredirect),s=null!=(n=e.request.flags)&&n.live_dash?2:1;return{id:`dash-${o}-${e.video.id}`,src:a,mime:Li.dashMpd,priority:s,metadata:{cdn:o,origin:i.dash.cdns[o].origin,quality:"sd"}}}(e);return r&&t.push(r),t}(e):Wu(e,s,c),h=sd(e);var p;if(i.video&&!e.isNewVideo()&&!l&&(!o||Ru(r)))return null==(p=i.video.drmHandler)||p.updateLAUrls(e.request.drm),void d(u,h);_({files:u,textTracks:h,audioTracks:a,switchingVideo:o,startTime:o&&i.currentTime})}function d(e,t){e.forEach(e=>{const t=i.video.files.getFileById(e.id);t&&t.src!==e.src&&(t.src=e.src)}),t.forEach(e=>{const t=i.video.textTracks.getTrackById(e.id);t&&t.src!==e.src&&(t.src=e.src)})}function _({files:r,textTracks:o,audioTracks:l=[],switchingVideo:u=!1,startTime:d}){var _,h,p,m;const f=e.video.live_event,v=n.getBoundingClientRect(),g=Ou(f)?rd(e):function(e){const t=e.request.files;if(!Mu(t.hls)){const e=t.hls.default_cdn,n=t.hls.cdns[e],r=n.captions||n.url;return r?{src:r,mime:Li.hls,metadata:{cdn:e,origin:n.origin,quality:"sd"}}:null}return null}(e);var E;c||(c=(null==(E=i.played)?void 0:E.length)>0);const b=!i.paused||(null==(_=i._rebufferMonitor)?void 0:_._isBuffering);i._switchingVideo=u,i.video={id:e.video.id,title:e.video.title,subtitle:`from ${e.video.owner.name}`,files:r,textTracks:o,audioTracks:l,chapters:Kt(e,"embed.chapters",[]),duration:e.video.duration,externalDisplayFiles:{AirPlay:g},metadata:{playlistRefreshUrl:Du(e,`/playlist/refresh/${g.metadata.codec}`),useHls:e.request.drm&&Q.browser.webKit,drm:e.request.drm,drmLaUrlParams:e.request.drm&&{atid:e.request.atid,leadUUID:null==(h=e.user.lead)?void 0:h.id,playbackRoute:null!=(p=e.request.flags)&&p.ott?"player_embed_ott":"player_embed",playerLocation:e.embed.on_site?"onsite":"embed",dnt:(null==(m=e.request.flags)?void 0:m.dnt)??e.embed.dnt,embedContext:e.embed.context,referrer:e.request.referrer},p2pReady:e.video.ecdn&&(a.p2pReady??s.p2pReady),percentShown:Sc.frustumSurfaceArea(e.video.spatial.fov,v.width,v.height)}},u?i.checkRebuffer(c,b):t.fire(ru),"number"==typeof d&&(i.currentTime=d),i.updateBufferTarget()}return function(){var t,o,a,s,l,c,u;const d=window.Hls&&r.some(e=>"hls_js_live"===e.test&&"variant"===e.group),_=[ml,xl,Jl,Eo];d&&_.splice(_.indexOf(xl),0,Xl);const h=e.video.ecdn&&!(null!=(t=e.request.flags)&&t.ecdn_delta_updates);i=new vc(n,_,{externalDisplays:[AirPlayExternalDisplay],mediaSourceScanner:{droppedFrameSwitchPercent:ad(e)},tests:e.request.ab_tests,fileCodecs:e.request.file_codecs,presentationDelay:e.video.presentation_delay,lowLatencyMode:null==(o=e.video.live_event)?void 0:o.low_latency,dvrEnabled:null==(a=e.video.live_event)?void 0:a.dvr,disableDeltaUpdates:h,getLiveEventStartTimeEpoch:()=>function(e){var t;return null!=e&&e.started_on?new Date(e.started_on).getTime()/1e3:null==e||null==(t=e.ingest)?void 0:t.start_time}(e.video.live_event),sessionMetadata:{clipId:e.video.id,sessionId:e.request.session},disableMMS:!(null==(s=e.request.flags)||!s.disable_mms)||!Q.iOS,enableCMCD:null==(l=e.request.flags)?void 0:l.cmcd,hlsJsDebugMode:null==(c=e.request.flags)?void 0:c.hls_js_debug,enableMultiAudioLive:null==(u=e.request.flags)?void 0:u.multi_audio_live})}(),Object.values(Pi).filter(e=>![Pi.TIME_UPDATE,Pi.PROGRESS,Pi.SUSPEND,Pi.ERROR].includes(e)).forEach(e=>{i.on(e,(t="")=>{_d(e,t,"video event")})}),i.on(ki.STREAMS_LOADED,function(t){t.video.forEach(t=>{const n=function(e,t){return t.find(t=>Ku(t.id)===String(e)||Ku(t.id)===Ku(e))}(t.id,id(e,i));n?(t.profile=n.profile,t.quality=n.quality,t.fps=n.fps):(t.profile=null,t.quality=`${t.height}p`,t.fps=t.framerate)})}),i.on(ki.STREAM_CHANGE,function({index:e,streams:n,metadata:r}){const o=n[e];_d("Stream changed",o,"video"),i.updateBufferTarget(),t.fire(ki.STREAM_CHANGE,o,e,n,r)}),i.on(ki.STREAM_TARGET_CHANGE,function({index:e,streams:n}){const r=n[e];i.updateBufferTarget(),t.fire(ki.STREAM_TARGET_CHANGE,r,e,n)}),i.on(ki.DRM_KEY_SWITCH,function(){var t;if(!e.request.drm.fallback_asset)return;const n=sd(e),r=null==(t=Vd(i.video.audioTracks))?void 0:t.id;d(Gu(e,r),n)}),function(e,t,n){n.forEach(n=>{e(n,(...e)=>{t.apply(void 0,[n].concat(e))})})}(i.on,t.fire,[wi.ACTIVATED,wi.AVAILABLE,wi.DEACTIVATED,wi.UNAVAILABLE,Di.STREAM_OFFLINE,Di.STREAM_ONLINE,Di.BUFFER_GAP_JUMP,Di.BUFFER_GAP_JUMP_PREVENT,Di.STALL_JUMP,Di.LATENCY_UPDATED,Mi.MEDIASESSION_PAUSE,Mi.MEDIASESSION_PLAY,Mi.MEDIASESSION_SEEK_BACKWARD,Mi.MEDIASESSION_SEEK_FORWARD,Mi.MEDIASESSION_SEEK_TO,ki.AUDIO_TRACK_CHANGED,ki.AV_DURATION_MISMATCH,ki.BANDWIDTH,ki.BUFFER_ENDED,ki.BUFFER_OCCUPANCY,ki.BUFFER_STARTED,ki.CHAPTER_CUES_UPDATED,ki.CUE_POINT,ki.NO_SUPPORTED_CDM,ki.CURRENT_FILE_CHANGE,ki.DOWNLOAD_END,ki.DOWNLOAD_TIMEOUT,ki.DRM_AUTH_SUCCESS,ki.DRM_CDM_CHANGE,ki.DRM_KEY_SWITCH,ki.DROPPED_FRAMES,ki.MANIFEST_LOADED,ki.MANIFEST_TIMEOUT,ki.QUOTA_EXCEEDED_ERROR,ki.SCANNER_CHANGE,ki.STREAM_CHANGE_START,ki.STREAM_BUFFER_END,ki.STREAM_BUFFER_START,ki.AVAILABLE_STREAMS_CHANGED,ki.MEDIA_CAPABILITY_STREAMS_UNSUPPORTED,ki.TEXT_TRACKS_AVAILABLE,ki.DROPPED_FRAME_PERCENT_EXCEEDED,ki.LOAD_SEGMENT_FAILED,ki.SEGMENT_CUES_LOADED,ki.HLS_JS_ERROR,Ni.CAMERA_UPDATE,Ni.CAMERA_CHANGE,Ni.MOTION_END,Ni.MOTION_START,Ni.SPATIAL_UNSUPPORTED,Ni.WEBVR_ENTER,Ni.WEBVR_EXIT,Ni.WEBVR_HARDWARE_AVAILABLE,Pi.DURATION_CHANGE,Pi.ERROR,Pi.LOAD_START,Pi.LOADED_DATA,Pi.LOADED_METADATA,Pi.PLAYING,Pi.RATE_CHANGE,Pi.RESIZE,Pi.STALLED,Pi.VOLUME_CHANGE,Pi.WAITING,Pi.ENTER_PICTURE_IN_PICTURE,Pi.LEAVE_PICTURE_IN_PICTURE,Pi.WEBKIT_BEGIN_FULLSCREEN,Pi.WEBKIT_END_FULLSCREEN]),t.fire(nu),new Nd(t,i),new pd(e,t,i),new md(e,t,i),new wd(e,t,i),a=new Cd(e,t,i),o=new hd(e,t,i),s=new Rd(e,t,i),t.on(tu,u),t.on(eu,function(n){var r,o;if(null==(r=e.embed)||null==(r=r.settings)||!r.audio_tracks)return;if(i.supportsAudioTracksFromScanner)return void i.enableAudioTrack(null==n?void 0:n.id);const a=function(e,t={}){if(null==e||!e.length)return[];const n=Fd(e,t);if(n)return xd(e,n.id);const r=Bd(e);return xd(e,null==r?void 0:r.id)}(e.request.audio_tracks,n),s=Vd(a),l="sd-fallback"===(null==(o=i.video)||null==(o=o.drmHandler)?void 0:o.state);_({files:Wu(e,null==s?void 0:s.id,l),textTracks:i.video.textTracks,audioTracks:a,switchingVideo:!0,startTime:i.currentTime}),t.fire(ki.AUDIO_TRACK_CHANGED)}),t.on(Pi.LOADED_DATA,function(){var t,n;i.supportsAudioTracksFromScanner&&null!=(t=i.audioTracks)&&t.length&&(null!=e&&null!=(n=e.request)&&null!=(n=n.audio_tracks)&&n.length?function(){const t=Vd(e.request.audio_tracks||[]),n=function(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(Hd(r,t))return r}return null}(i.audioTracks,t);n&&i.enableAudioTrack(n.id)}():function(){var t,n;const r=i.audioTracks,o=new URLSearchParams(window.location.search),a=e.embed.audio_track||o.get("audiotrack"),s=Fd(i.audioTracks,{language:a});if(s)return void i.enableAudioTrack(s.id);const l=null==(t=e.request)||null==(t=t.cookie)?void 0:t.audio_language,c=(null==(n=e.request)||null==(n=n.cookie)?void 0:n.audio_kind)||"translation";if(l||c){const e=Fd(i.audioTracks,{language:l,kind:c},!0);if(e)return void i.enableAudioTrack(e.id)}const u=Fd(r,{language:e.request.lang,kind:"translation"},!0);if(u)return void i.enableAudioTrack(u.id);const d=Bd(r);i.enableAudioTrack(d.id)}())}),Q.browser.safari&&window.addEventListener("pageshow",e=>{e.persisted&&(l=!0,u())}),y({telecine:i},o)}function Gd(e,t,n){this.constructorName="BackboneError",this.message=e,this.name=t,this.source=n}Gd.prototype=new Error;var jd={embed:{},request:{cookie:{},files:{},flags:{},urls:{},text_tracks:[],file_codecs:{}},video:{owner:{},thumbnail_url:"",version:{}},user:{}};function Yd(e,t,n=[]){let r;const i=new bn;let o,a,s=null,l=new Vu(t,jd);function c(e,t){return i.fire(tu,e,t),e}const u={play:()=>o.play(),pause:()=>o.pause(),get currentTime(){return a.currentTime>.1?$c(a.currentTime):0},set currentTime(e){if(e=parseFloat(e),isNaN(e)||e<0)throw new Gd("Seconds must be a positive number less than the duration of the video.","RangeError","setCurrentTime");i.fire(Kc,e)},get liveEdgeTime(){return a.liveEdgeTime},get atLiveEdge(){return a.atLiveEdge},get liveTailTime(){return a.liveTailTime},get atLiveTail(){return a.atLiveTail},get duration(){return $c(l.video.duration)},get enabledTextTrack(){return s},loadVideo(e){const t=ni(l);return l.reset(e),l=c(l,t),this},reactivate(){var e;return null!=(e=a)&&e.reactivate&&a.reactivate(),this},unload(){return i.fire(Xc),this},destroy(){return i.fire(Zc),this},on(e,t){return i.on(e,t),this},once(e,t){return i.once(e,t),this},off(e,t){return i.off(e,t),this},get events(){return i},hasTextTrack(e){let t,n,r=this.textTracks;if(Yc(e))n=r.getTrackById(e);else{let n=e.split(".")[0];t=r.some(e=>e.language.toLowerCase()===n.toLowerCase())}return!(!n&&!t)},enableTextTrack(e,t=null){let n,r,o=this.textTracks;if(Yc(e))s=o.getTrackById(e);else{if([n,r=t]=e.split("."),!this.hasTextTrack(e))throw new Gd(`There are no tracks for “${n.toUpperCase()}”.`,"InvalidTrackLanguageError","enableTextTrack");s=Od(r?`${n}.${r}`:n,o).track}if(!s||r&&s.kind!==r)throw new Gd(`There are no ${r} tracks for “${n.toUpperCase()}”.`,"InvalidTrackError","enableTextTrack");a.setCaptionsShouldDisplay(!0),i.fire(Jc,s.id)},disableTextTrack(){s=null,a.setCaptionsShouldDisplay(!1),i.fire(Qc)},enableAudioTrack(e){i.fire(eu,e)},get qualities(){return function(e){var t;const n=e.representations.map(t=>{const n=Hu(t);return{id:n,label:od(t),active:e.quality===n}}),r=null==(t=e.video)?void 0:t.currentFile.mime;return[Li.dash,Li.dashMpd,Li.hlsLive,Li.hls].includes(r)&&n.unshift({id:"auto",label:"Auto",active:!e.quality||"auto"===e.quality}),n}(this)},get quality(){return o.quality},set quality(e){o.quality=e},get playbackRate(){return a?a.playbackRate:1},set playbackRate(e){a.playbackRate=e,a.defaultPlaybackRate=e},get textTracks(){return a.video?a.video.textTracks:[]},get representations(){return id(l,a)},get volume(){return a?a.volume:$c(l.request.cookie.volume)},set volume(e){if(e=parseFloat(e),isNaN(e)||e<0||e>1)throw new Gd("Volume should be a number between 0 and 1.","RangeError","setVolume");a.volume=e},get videoId(){return l.video.id},get videoWidth(){return a.videoWidth||l.video.width},get videoHeight(){return a.videoHeight||l.video.height},get readyState(){return a.videoElement.readyState},get telecine(){return a},get audioTracks(){var e;return(null==(e=a)||null==(e=e.video)?void 0:e.audioTracks)||[]},get enabledAudioTrack(){var e;return null==(e=a)||null==(e=e.video)?void 0:e.enabledAudioTrack},requestCompleteLiveSubtitles(){i.fire(du)},get hasAudio(){var e,t;return!(null==(e=a)||null==(e=e.video)||null==(e=e.audioTracks)||!e.length)||!(null==(t=a.manifest)||null==(t=t.audio)||!t.length)}};return l=c(l),o=new Wd(l,i,e,n),a=o.telecine,r=Object.create(a),y(r,u)}const $d=Symbol("_spatialUnsupported"),qd=Symbol("_spatialFailure"),zd="vimeo-logo",Kd="video-title",Xd="video-byline",Zd="video-portrait",Jd="chapter-share-base",Qd="anybody",e_="nobody",t_="password",n_="disable",r_="ptv",i_="unlisted",o_={h264:"video/mp4",hls:"application/vnd.apple.mpegurl",hlsLive:"application/x-mpegURL",dash:"application/vnd.vimeo.dash+json",dashMpd:"video/vnd.mpeg.dash.mpd",vp6:"video/x-flv",vp8:"video/webm",webm:"video/webm",hds:"application/f4m"},a_=Symbol("_seek"),s_=Symbol("_changeVolume"),l_=Symbol("_changeMuted"),c_=Symbol("_showOverlay"),u_=Symbol("_reset"),d_=Symbol("_changeLoop"),__=Symbol("_changeQuality"),h_=Symbol("_openVimeo"),p_=Symbol("_changeColor"),m_=Symbol("_disableVolume"),f_=Symbol("_enableVolume"),v_=Symbol("_disableCaptions"),g_=Symbol("_enableCaptions"),E_=Symbol("_forceFullscreen"),b_=Symbol("_turnCaptionsOn"),y_=Symbol("_turnCaptionsOff"),T_=Symbol("_changeCaptionsStyles"),S_=Symbol("_resetCaptionsStyles"),C_=Symbol("_toggleNativeControls"),A_=Symbol("_showOutro"),L_=Symbol("_hideOutro"),I_=Symbol("_setControlsVisibility"),P_=Symbol("_overrideControlbarBehavior"),R_=Symbol("_activatePictureInPicture"),w_=Symbol("_deactivatePictureInPicture"),O_=Symbol("_attachSpatialPlaybackEvents"),k_=Symbol("_revealSpatialControls"),D_=Symbol("_setTime"),N_=Symbol("_addCard"),M_=Symbol("_removeCard"),x_=Symbol("_changePlaybackRate"),V_=Symbol("_destroy"),B_=Symbol("_changeAudioTrack"),U_=Symbol("_requestCompleteLiveSubtitles"),F_=Symbol("_closeRemoteComponent"),H_=Symbol("_updateLiveSubtitleRequests"),W_=Symbol("_showVideoThumbnail"),G_=Symbol("_hideVideoThumbnail"),j_=Symbol("_showLocalAccessGate"),Y_=Symbol("_error"),$_=Symbol("_playRejected"),q_=Symbol("_playResolved"),z_=Symbol("_paused"),K_=Symbol("_pausedForAd"),X_=Symbol("_resumedAfterAd"),Z_=Symbol("_ended"),J_=Symbol("_volumeChanged"),Q_=Symbol("_mutedChanged"),eh=Symbol("_qualityChanged"),th=Symbol("_targetTimeReached"),nh=Symbol("_firstTimeUpdate"),rh=Symbol("_playbackRateChanged"),ih=Symbol("_nudgeAttempted"),oh=Symbol("_showNudgeNotification"),ah=Symbol("_nudgeEnded"),sh=Symbol("_fragmentChanged"),lh=Symbol("_fullscreenButtonPressed"),ch=Symbol("_pauseButtonPressed"),uh=Symbol("_playButtonPressed"),dh=Symbol("_prefsButtonPressed"),_h=Symbol("_ccButtonPressed"),hh=Symbol("_chapterSeekAttempted"),ph=Symbol("_chapterSeek"),mh=Symbol("_chapterChanged"),fh=Symbol("_scrubbingStarted"),vh=Symbol("_scrubbingEnded"),gh=Symbol("_controlBarVisibilityChanged"),Eh=Symbol("_toastVisibilityChanged"),bh=Symbol("_sidedockVisibilityChanged"),yh=Symbol("_menuVisibilityChanged"),Th=Symbol("_captionsChanged"),Sh=Symbol("_cuePointAdded"),Ch=Symbol("_cuePointRemoved"),Ah=Symbol("_stereoscopicButtonPressed"),Lh=Symbol("_menuPanelOpened"),Ih=Symbol("_badgePressed"),Ph=Symbol("_willEnterFullscreen"),Rh=Symbol("_didEnterFullscreen"),wh=Symbol("_willExitFullscreen"),Oh=Symbol("_didExitFullscreen"),kh=Symbol("_likeButtonPressed"),Dh=Symbol("_watchLaterButtonPressed"),Nh=Symbol("_shareButtonPressed"),Mh=Symbol("_embedButtonPressed"),xh=Symbol("_vodButtonPressed"),Vh=Symbol("_collectionsButtonPressed"),Bh=Symbol("_followButtonPressed"),Uh=Symbol("_overlayOpened"),Fh=Symbol("_overlayClosed"),Hh=Symbol("_facebookButtonPressed"),Wh=Symbol("_twitterButtonPressed"),Gh=Symbol("_emailButtonPressed"),jh=Symbol("_popupOpened"),Yh=Symbol("_debugButtonPressed"),$h=Symbol("_popupClosed"),qh=Symbol("_showAndroidVRDeepLink"),zh=Symbol("_debugDataChange"),Kh=Symbol("_mousedOut"),Xh=Symbol("_mousedOver"),Zh=Symbol("_mouseTimeout"),Jh=Symbol("_liked"),Qh=Symbol("_unliked"),ep=Symbol("_addedToWatchLater"),tp=Symbol("_removedFromWatchLater"),np=Symbol("_userLogIn"),rp=Symbol("_userLoggedIn"),ip=Symbol("_userLoggedOut"),op=Symbol("_loginFailure"),ap=Symbol("_configChanged"),sp=Symbol("_liveEventSettingsChanged"),lp=Symbol("_passwordUnlocked"),cp=Symbol("_privateUnlocked"),up=Symbol("_enteredTinyMode"),dp=Symbol("_enteredMiniMode"),_p=Symbol("_enteredNormalMode"),hp=Symbol("_assetUrlsRefreshed"),pp=Symbol("_embedSettingChanged"),mp=Symbol("_createInteractiveChanged"),fp=Symbol("_ottMetadataSet"),vp=Symbol("_outroDisplayed"),gp=Symbol("_outroHidden"),Ep=Symbol("_outroVideoPressed"),bp=Symbol("_becameActive"),yp=Symbol("_becameInactive"),Tp=Symbol("_loadVideo"),Sp=Symbol("_swapVideo"),Cp=Symbol("_outroLinkPressed"),Ap=Symbol("_followed"),Lp=Symbol("_unfollowed"),Ip=Symbol("_outroImagePressed"),Pp=Symbol("_outroCtaPressed"),Rp=Symbol("_cardDisplayed"),wp=Symbol("_cardPressed"),Op=Symbol("_spaceChanged"),kp=Symbol("_displayContextChanged"),Dp=Symbol("_videoModuleReady"),Np=Symbol("_statsModuleReady"),Mp=Symbol("_apiModuleReady"),xp=Symbol("_ready"),Vp=Symbol("_airPlayAvailable"),Bp=Symbol("_airPlayNotAvailable"),Up=Symbol("_airPlayActivated"),Fp=Symbol("_airPlayDeactivated"),Hp=Symbol("_airPlayButtonPressed"),Wp=Symbol("_adBuffering"),Gp=Symbol("_adCanPlay"),jp=Symbol("_adComplete"),Yp=Symbol("_adClicked"),$p=Symbol("_adError"),qp=Symbol("_adPaused"),zp=Symbol("_adResumed"),Kp=Symbol("_adStarted"),Xp=Symbol("_adSkipped"),Zp=Symbol("_allAdsCompleted"),Jp=Symbol("_logMetric"),Qp=Symbol("_interactiveHotspotClicked"),em=Symbol("_interactiveOverlayPanelClicked"),tm=Symbol("_interactiveMarkerClicked"),nm=Symbol("_interactiveSeekCall"),rm=Symbol("_transcriptChanged"),im=Symbol("_rightContentAreaVisibilityChange"),om=Symbol("_rightContentAreaEnabled"),am=Symbol("_rightContentAreaDisabled"),sm=Symbol("_transcriptNavActive"),lm=Symbol("_transcriptSessionStarted"),cm=Symbol("_transcriptKeyPressed"),um=Symbol("_aiWidgetKeyPressed"),dm=Symbol("_qoeSurveyPresented"),_m=Symbol("_languagesToastPresented"),hm=Symbol("_parentUrlAvailable"),pm=Symbol("_liveEventSafeToPlay"),mm=Symbol("_startTimeUpdated"),fm=Symbol("_endTimeUpdated"),vm=Symbol("_remoteComponentMounted"),gm=Symbol("_accessGateOpened"),Em=Symbol("_accessGateClosed"),bm=Symbol("_eventedStoreCreated"),ym=Symbol("_outroDataReceived"),Tm=Symbol("_videoThumbnailLoadComplete"),Sm=Symbol("_privateLoginStatusUpdated"),Cm=Symbol("_frameCaptured"),Am=Symbol("_playbackLocked"),Lm=Symbol("_playbackUnlocked");function Im(e){let t,n,r;return e=parseFloat(e),isNaN(e)||e<0?"0":e<1e3?e.toString():e>=1e3&&e<1e6?(r=Math.floor(e/1e3),t=Math.round(e%1e3/100),r+"."+t+"K"):(n=Math.floor(e/1e6),t=Math.round(e%1e6/1e5),n+"."+t+"M")}function Pm(e){return!isNaN(e)&&parseInt(Number(e),10)==e&&!isNaN(parseInt(e,10))}function Rm(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode("0x"+t))}const wm=function(e){const t=n=>n.length>=e.length?e.apply(this,n):(...e)=>t([].concat(f(n),e));return t([])}((e,t)=>Object.keys(e).every(n=>e[n]===t[n])),Om=(e=[])=>({get:t=>t?e.find(wm(t)):e,insert:t=>(e=e.concat(t)).slice(-1).pop(),getOrInsert(e){return this.get(e)||this.insert(e)},remove:t=>e.splice(e.findIndex(wm(t)),1).pop()});function km(e){let t=e.getBoundingClientRect();return document.msFullscreenElement&&window.parent!==window&&e.offsetWidth<e.clientWidth&&(t={bottom:100*t.bottom,left:100*t.left,top:100*t.top,right:100*t.right,width:100*t.width,height:100*t.height}),t}function Dm(e){try{return new URL(e).origin}catch(e){}const t=document.createElement("a");return t.href=e,t.origin?t.origin:`${t.protocol.replace(":","")}://${t.host}`}function Nm({width:e,height:t,elementWidth:n,elementHeight:r,threshold:i=10}){let o=1;const a=e/t,s=n-r*a,l=r-n/a;if(s>0&&s<i||l>0&&l<i){const e=n/(n-s),t=r/(r-l);o=Fm(Math.max(e,t),3)}return{extraWidth:s,extraHeight:l,scaleFactor:o}}function Mm(e,t,n){return e>n?n:t>e?t:e}function xm(e,t,{width:n,height:r,scrollbars:i="yes",resizable:o="yes",toolbar:a="no"}){let s=(window.screenY||window.screenTop||0)+window.outerHeight/2-r/2,l=(window.screenX||window.screenLeft||0)+window.outerWidth/2-n/2;window.chrome&&-1!==window.navigator.userAgent.toLowerCase().indexOf("mac os x")&&(r+=27),window.safari&&(r+=47);let c=`scrollbars=${i},resizable=${o},toolbar=${a}`;return window.open(e,t,`width=${n},height=${r},left=${l},top=${s},${c}`)}function Vm(e){return function(e){return/^(https?:)?\/\/(.+)\.(((vimeo(ws)?|vimeo-(enterprise|work))\.(com|dev|work))|(videoji|videoshipinurl)\.(hk|cn))(?=$|\/)/.test(e)}(e)?Dm(e):""}function Bm(e,t,n){if(function(e){return/^(https?:)?\/\/(.+)\.((vimeo(ws)?|vimeo-(enterprise|work))\.(com|dev|work)|(videoji|videoshipinurl)\.(hk|cn))\/video\/\d+\/config(?=$|\?)/.test(e)}(t))return t;const r=Um(t),i=he(window.location.search),o=he(`${t}`.split("?")[1]),a=Object.assign(i,o,n);return me(`${e}/video/${r}/config`,a)}function Um(e){if(Pm(e))return parseInt(e,10);const t=e.match(/(video|\.com|\.dev)\/(\d+)/);if(!t||t.length<3)throw new Error("Please provide a Vimeo URL with a valid clip id.");return parseInt(t[2],10)}function Fm(e,t=3){if(e=parseFloat(e),isNaN(e))return 0;var n=Math.pow(10,t);return Math.round(e*n)/n}function Hm(e,t){return-1!==Array.from(t).indexOf(e)}function Wm(e,t,n){if(void 0!==n)e.style[t]=n;else if(function(e){return"string"==typeof e||!Je(e)&&ut(e)&&"[object String]"==ct(e)}(t))e.setAttribute("style",t);else for(const n in t)Wm(e,n,t[n])}function Gm(e,t,n){n.forEach(n=>{e(n,(...e)=>{t.apply(void 0,[n].concat(e))})})}function jm(e){for(var t=Object.keys(e),n=t.length,r=[],i=0;i<n;)r[i]=e[t[i]],i+=1;return r}function Ym(e,t){return t&&0===t.indexOf(e)}!function(...e){e.reduce((e,t)=>(...n)=>e(t.apply(void 0,n)))}(function(e){return e?Array.from(e.parentNode.children).indexOf(e):-1},function(e,t){for(;null!=(n=e)&&n.parentElement&&!Hm(e,t);){var n;e=e.parentElement}return Hm(e,t)?e:null});let $m=0;function qm(e="p"){return`${e}${++$m}`}const zm={_seek:qm(),_play:qm(),_pause:qm(),_playbackRateChange:qm()},Km="done",Xm="started",Zm={"application/vnd.apple.mpegurl":"hls","application/vnd.vimeo.dash+json":"dash","video/vnd.mpeg.dash.mpd":"dash","video/mp4":"progressive","video/webm":"progressive","video/x-flv":"progressive","application/x-mpegURL":"hlslive"},Jm={main:1,privateLocked:2,privateUnlocked:3,privatePassword:4,error:7,contentRating:9,geoBlocked:14,drmPlaybackUnavailable:15},Qm={AD_STARTED:"adstarted",AD_COMPLETED:"adcompleted",AD_ERROR:"aderror",AD_SKIPPED:"adskipped",AD_ALL_COMPLETED:"adallcompleted",AD_CLICKED:"adclicked",AUDIO_TRACK_CHANGE:"audiotrackchange",BUFFER_END:"bufferend",BUFFER_START:"bufferstart",CHAPTER_CHANGE:"chapterchange",CHROMECAST_CONNECTED:"chromecastconnected",CONTROL_BAR_VISIBILITY_CHANGED:"controlbarvisibilitychanged",TOAST_VISIBILITY_CHANGED:"toastvisibilitychanged",CUE_CHANGE:"cuechange",CUEPOINT:"cuepoint",DRM_INIT_FAILED:"drminitfailed",DURATION_CHANGE:"durationchange",ENDED:"ended",ERROR:"error",FULLSCREENCHANGE:"fullscreenchange",INTERACTIVE_HOTSPOT_CLICKED:"interactivehotspotclicked",INTERACTIVE_OVERLAY_PANEL_CLICKED:"interactiveoverlaypanelclicked",LIVE_EVENT_ENDED:"liveeventended",LIVE_EVENT_STARTED:"liveeventstarted",LIVE_STREAM_OFFLINE:"livestreamoffline",LIVE_STREAM_ONLINE:"livestreamonline",LOADED_DATA:"loadeddata",LOAD_START:"loadstart",LOADED_METADATA:"loadedmetadata",LOADED:"loaded",MOTION_END:"motionend",MOTION_START:"motionstart",CAMERA_CHANGE:"camerachange",WEBVR_HARDWARE_AVAILABLE:"webvrhardwareavailable",ENTER_WEBVR:"enterwebvr",EXIT_WEBVR:"exitwebvr",ENTER_PICTURE_IN_PICTURE:"enterpictureinpicture",LEAVE_PICTURE_IN_PICTURE:"leavepictureinpicture",SPATIAL_UNSUPPORTED:"spatialunsupported",PAUSE:"pause",PLAY:"play",PLAYING:"playing",PLAYBACK_RATE_CHANGE:"playbackratechange",RATE_CHANGE:"ratechange",PROGRESS:"progress",QUALITY_CHANGE:"qualitychange",READY:"ready",REMOTE_PLAYBACK_AVAILABILITY_CHANGE:"remoteplaybackavailabilitychange",REMOTE_PLAYBACK_CONNECTING:"remoteplaybackconnecting",REMOTE_PLAYBACK_CONNECT:"remoteplaybackconnect",REMOTE_PLAYBACK_DISCONNECT:"remoteplaybackdisconnect",RESIZE:"resize",SEEKING:"seeking",SEEKED:"seeked",SPACE_CHANGE:"spacechange",TEXT_TRACK_CHANGE:"texttrackchange",TIME_UPDATE:"timeupdate",VOLUME_CHANGE:"volumechange",WAITING:"waiting",PLAYER_LOGIN_SUCCESSFUL:"playerLoginSuccessful",PLAYER_LOGIN_FAILED:"playerLoginFailed",COMPONENT_VISIBILITY_CHANGE:"componentVisibilityChange",APP_BREAKPOINT_CHANGE:"appBreakpointChange",LOAD_VIDEO:"loadVideo"},ef={playProgress:"timeupdate",loadProgress:"progress",finish:"ended",seek:"seeked"},tf="4.45.8",nf="PROD",rf=!0===Q.iOS,of="chapter",af=["t","start","at"],sf="vimeo_",lf=`${sf}t_`,cf="preact-menu",uf="one",df="two",_f="three",hf="four",pf={[uf]:"000000",[df]:"00adef",[_f]:"ffffff",[hf]:"000000"},mf={[uf]:"color_one",[df]:"color_two",[_f]:"color_three",[hf]:"color_four"},ff={[uf]:"colorOne",[df]:"colorTwo",[_f]:"colorThree",[hf]:"colorFour"};var vf=function(e){return e.POPUP="popup",e.ON_SITE="onsite",e}(vf||{});const gf=12e3,Ef=[151656996,85979044,135306151,84839100,156281671,71236980,110717144];let bf=function(e){return e.VP_PLAYER_UI_OVERLAYS="vp-player-ui-overlays",e.VP_PLAYER_UI_CONTAINER="vp-player-ui-container",e.VP_VIDEO="vp-video",e.VP_VIDEO_WRAPPER="vp-video-wrapper",e.VP_TELECINE="vp-telecine",e.VP_CONTROLS="vp-controls",e.VP_CAST_BUTTON="vp-cast-button",e.VP_CAPTIONS="vp-captions",e.VP_MENU="vp-menu",e.VP_SIDEDOCK="vp-sidedock",e.VP_TITLE="vp-title",e.VP_TARGET="vp-target",e.VP_PREVIEW="vp-preview",e.COMPASS_WRAPPER="compass-wrapper",e.STEREOSCOPIC="stereoscopic",e.CC="cc",e.CUSTOM_LOGO="custom-logo",e.FULLSCREEN="fullscreen",e.THUMB="thumb",e.LIKE_ICON="like-icon",e.SHARE_ICON="share-icon",e.WATCH_LATER_ICON="watch-later-icon",e.FILL="fill",e.SHOWFOCUS="showfocus",e.ADS_WRAPPER="vp-ads-wrapper",e.ADS_TAG="vp-ads-tag",e.ADS_COUNTDOWN="vp-ads-countdown",e.VP_SPIN="vp-spin",e.SCREEN_READER_ONLY="vp-sr-only",e}({}),yf=function(e){return e.VP_OUTRO_WRAPPER="vp-outro-wrapper",e.VP_PREFS="vp-prefs",e.VP_PROGRESS="vp-progress",e.PIP="pip",e.VOLUME="volume",e.VOD_BUTTON="vod-button",e.LIKE_BUTTON="like-button",e.SHARE_BUTTON="share-button",e.WATCH_LATER_BUTTON="watch-later-button",e}({}),Tf=function(e){return e.EXCLUDE_GLOBAL_BUTTON_STYLES="exclude-global-button-styles",e.ENTER_FULLSCREEN_ICON="enter-fullscreen-icon",e.EXIT_FULLSCREEN_ICON="exit-fullscreen-icon",e.CONTENT_AREA_BACKGROUND_CONTAINER="vp-content-area-background",e.REMOTE_ACCESS_GATE="vp-remote-access-gate",e.SCRUBBING="scrubbing",e}({}),Sf=function(e){return e.RIGHT_CONTENT_AREA="right-content-area",e.NEW_WINDOW_DESCRIPTION="new-window",e.VP_OVERLAY_LABELLEDBY="overlay-labelledby",e}({}),Cf=function(e){return e.TRANSCRIPT_LIST="transcript-list",e.TRANSCRIPT_CUE_PREFIX="transcript-cue",e.TRANSCRIPT_MENU="transcript-menu",e.TRANSCRIPT_VIEWER="transcript-viewer",e.TRANSCRIPT_USAGE_DESCRIPTION="transcript-usage-description",e}({}),Af=function(e){return e.AI_WIDGET_ID="ai-widget",e}({}),Lf=function(e){return e.QOE_SURVEY_TEXT="qoe-survey-text",e.REPLAY="replay",e.BROADCAST_OVER="broadcast-over",e.FRAME_CAPTURED="frame-captured",e.CHANGE_LANGUAGES="change-languages",e}({}),If=function(e){return e.TITLE_TEXT="title-text",e}({}),Pf=function(e){return e.TEXT_TRACK_ID_PREFIX="telecine-track-",e}({}),Rf=function(e){return e.COLLAPSE="collapse-control-bar-button",e.CC="cc-control-bar-button",e.PREFS="prefs-control-bar-button",e.CHAPTERS="chapters-control-bar-button",e.TRANSCRIPT="transcript-control-bar-button",e.FULLSCREEN="fullscreen-control-bar-button",e.PIP="pip-control-bar-button",e}({}),wf=function(e){return e.FONT_FAMILY_ACCORDION="font-family-accordion",e.EDGE_STYLE_ACCORDION="edge-style-accordion",e.VP_CC_FONT_COLOR_LABEL="vp-cc-font-color-label",e.VP_CC_BACKGROUND_COLOR_LABEL="vp-cc-background-color-label",e.VP_CC_BACKGROUND_OPACITY_LABEL="vp-cc-background-opacity-label",e.VP_CC_FONT_SIZE_LABEL="vp-cc-font-size-label",e.VP_CC_FONT_OPACITY_LABEL="vp-cc-font-opacity-label",e.VP_CC_FONT_EDGE_STYLE_LABEL="vp-cc-font-edge-style-label",e.VP_CC_WINDOW_OPACITY_LABEL="vp-cc-window-opacity-label",e.VP_CC_WINDOW_COLOR_LABEL="vp-cc-window-color-label",e}({}),Of=function(e){return e.SEARCH_INPUT="search-input",e}({}),kf=function(e){return e.CONTENT_AREA_SIBLING_ELIGIBLE="data-content-area-sibling-eligible",e}({}),Df=function(e){return e.START_INPUT="segment-share-start-input",e.END_INPUT="segment-share-end-input",e}({}),Nf=function(e){return e.NOT_SUPPORTED="not-supported",e.DRM_FAILURE="drm-failure",e.DECODE="decode",e.NETWORK="network",e.UNKNOWN="unknown",e.TELECINE_FILE_ERROR="telecine-file-error",e.TELECINE_DOWNLOAD_ERROR="telecine-download-error",e.MEDIA_URL_EXPIRED="media-url-expired",e.SCANNER_ERROR="scanner-error",e.ERROR="error",e.LOAD_VIDEO_VIA_CONFIG="load-video-via-config-error",e.LOCAL_ACCESS_GATE_ERROR="local-access-gate-error",e}({});const Mf=()=>({type:Nf.NETWORK,title:"Network error",message:'A network hiccup interrupted playback. Please <a href="javascript:window.location.reload()" rel="noopener">reload the player</a> and try again.',final:!0}),xf=()=>({type:Nf.ERROR,title:"Player error",message:"The player is having trouble. We’ll have it back up and running as soon as possible.",modal:!0,final:!0});var Vf=Object.freeze({__proto__:null,BrowserNotSupported:()=>({type:Nf.NOT_SUPPORTED,title:"Unsupported viewing environment",message:`Your system is having trouble playing this video. For more information, see our <a href="https://help.vimeo.com/hc/en-us/articles/115015677227-Troubleshoot-player-error-messages" target="_blank" rel="noopener" aria-describedby="${Sf.NEW_WINDOW_DESCRIPTION}">Help Center</a>.`,deferred:!0,final:!0}),DRMFailure:()=>({type:Nf.DRM_FAILURE,title:"Rights issue",message:"We’re having trouble authorizing playback for this video. ",final:!0}),FilesNotPlayable:()=>({type:Nf.NOT_SUPPORTED,title:"Player error",message:"The player is having trouble. We’ll have it back up and running as soon as possible.",deferred:!0,final:!0}),MediaSrcNotSupportedError:()=>({type:Nf.NOT_SUPPORTED,final:!1}),MediaDecodeError:()=>({type:Nf.DECODE,final:!1}),MediaNetworkError:Mf,MediaUnknownError:()=>({type:Nf.UNKNOWN,title:"Browser error",message:'We’re having trouble playing this video file. Please <a href="javascript:window.location.reload()" rel="noopener">reload the player</a> and try again.',final:!0}),FileError:()=>({type:Nf.TELECINE_FILE_ERROR,final:!1}),DownloadError:()=>({type:Nf.TELECINE_DOWNLOAD_ERROR,final:!1}),MediaUrlExpired:()=>({type:Nf.MEDIA_URL_EXPIRED,title:"Playback error",message:'We’re having trouble playing this video. Please <a href="javascript:window.location.reload()" rel="noopener">reload the player</a> and try again.',final:!1}),ScannerError:()=>({type:Nf.SCANNER_ERROR,final:!1}),PlayerError:xf});const Bf=e=>({onClick:e,onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||e(t)}}),Uf=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(e){return Q.clipboardAPI?function(t,n){try{var r=function(e,t){return e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e}(navigator.clipboard.writeText(e),function(){return!0})}catch(e){return n()}return r&&r.then?r.then(void 0,n):r}(0,function(t){return Ff(e)}):Ff(e)});function Ff(e){const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select();const n=document.execCommand("copy");return document.body.removeChild(t),n}const Hf=(e,t,n)=>t[n]??e[n];function Wf(e,t){return!e||0===e.length||-1!==e.indexOf(t)}const Gf=e=>[Jm.main,Jm.privateUnlocked].includes(e),jf=(e,t)=>e&&(e.contains(t.target)||e===t.target),Yf=(...e)=>e.reduce((e,t)=>t?e?`${e} ${t}`:t:e,null),$f=(e=[],t)=>e.map(e=>p(p({},e),{},{active:`${e.id}`===t})),qf=e=>{let t=0,n=0;if(e){const{left:r,right:i}=km(e),{borderLeftWidth:o,borderRightWidth:a}=window.getComputedStyle(e,"");t=r+parseInt(o,10),n=i-parseInt(a,10)}return{leftOffsetValue:t,rightOffsetValue:n}},zf=e=>{let{clientX:t}=e;return e.targetTouches&&e.targetTouches.length>0&&(t=e.targetTouches[0].clientX,e.preventDefault()),t},Kf=(e,t)=>Math.max(e-t.startTime,0),Xf=(e,t)=>{const{startTime:n,endTime:r,duration:i}=t;return e<n?0:e>r?1:Kf(e,t)/i},Zf=(e,t=!0)=>{const n=100*(t?Fm(e,2):e);return`${Math.max(Math.min(n,100),0)}%`},Jf=(e,t)=>{const{startTime:n,duration:r}=t;return n+r*e},Qf=(e,t)=>{const{duration:n}=t;return n*e||0},ev=(e,t,n)=>(n-t)*e+t,tv=(e,t,n)=>(e-t)/(n-t),nv=(e,t)=>e.filter(e=>{const n=e.startTime>=t.startTime&&e.startTime<=t.endTime,r=e.endTime>=t.startTime&&e.endTime<=t.endTime,i=e.startTime<t.startTime&&e.endTime>=t.endTime;return n||r||i});let rv=function(e){return e.EMPTY="empty",e.SHARE="share",e.HELP="help",e.ERROR="error",e.SPATIAL_REDIRECT="spatial-redirect",e.NOT_SUPPORTED="not-supported",e.INTERACTIVE="interactive",e}({});const iv=e=>e===rv.INTERACTIVE||e===rv.EMPTY,ov=e=>(e=>void 0!==e.settings)(e)?!e.settings.background&&0!==e.settings.controls:!e.background&&e.controls,av=e=>(Date.now()-e)/1e3,sv=e=>Math.round(1e3*e),lv=e=>{var t;let n,r=!1,i="0",o="0",a="0",s=e;const l=s.startsWith("-");if(l&&(s=s.substring(1)),n=s.match(/^(\d*\.?\d+)$/),null!=(t=n)&&t.length&&(r=!0,a=n[0]),!1===r&&(n=s.match(/^(?:(\d*\.?\d+)h)?(?:(\d*\.?\d+)m)?(?:(\d*\.?\d+)s)?/),null!==n&&""!==n[0]&&(r=!0,[,i="0",o="0",a="0"]=n)),!1===r&&(n=s.match(/^([0-9:]+)/),null!==n&&(r=!0,[a,o="0",i="0"]=s.split(":").reverse())),!r)return null;const c=60*Number(i)*60+60*Number(o)+Number(a);return l?-c:c},cv=(e,t,n)=>{const r=String(e);return new Array(t-r.length+1).join(n||"0")+r},uv=(e,t)=>{const n=Math.ceil(e)<0;e=Math.abs(e);const r=Math.floor(e/3600%60),i=Math.floor(e/60%60);if(e=Math.floor(e%60),t){let t=e+" second"+(1===e?"":"s");return i>0&&(t=i+" minute"+(1===i?"":"s")+", "+t),r>0&&(t=r+" hour"+(1===r?"":"s")+", "+t),t}return(n?"-":"")+(r>0?r+":":"")+cv(i,2)+":"+cv(e,2)},dv=/^\d{1,}:[0-5][0-9]:[0-5][0-9]$/,_v=/^\d{1,}:[0-5][0-9]$/,hv=/^\d+$/,pv={hours:0,minutes:0,seconds:0},mv=e=>{const t=(e=>{if(!e)return pv;const t=e.trim();if(!t)return pv;if(dv.test(t)){const[e,n,r]=t.split(":").map(Number);return{hours:e,minutes:n,seconds:r}}if(_v.test(t)){const[e,n]=t.split(":").map(Number);return{hours:0,minutes:e,seconds:n}}if(hv.test(t)){const e=parseInt(t,10),n=e%3600;return{hours:Math.floor(e/3600),minutes:Math.floor(n/60),seconds:n%60}}return pv})(e),{hours:n,minutes:r,seconds:i}=t;if(0===n&&0===r&&0===i)return"";let o="";return n>0&&(o+=`${n}h`),r>0&&(o+=`${r}m`),i>0&&(o+=`${i}s`),o};function fv(e){return Math.round(parseInt(e,16)/255*100)/100}function vv(...e){if(1===e.length&&e[0]instanceof vv){var t=e[0];return this.red=t.red,this.green=t.green,this.blue=t.blue,this.alpha=t.alpha,this.hue=t.hue,this.saturation=t.saturation,this.lightness=t.lightness,this}if(1===e.length){if("string"==typeof e[0]&&e[0].indexOf("rgb")>=0)return this.rgba=function(e){var t=/rgba?\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(,\s*([\d.]+))?\)/.exec(e);if(!t)throw new Error("Invalid rgb value");return{red:parseInt(t[1],10),green:parseInt(t[2],10),blue:parseInt(t[3],10),alpha:parseFloat(t[5])||1}}(e[0]),this;if(!function(e){return"string"==typeof(e=e.replace("#",""))&&[3,4,6,8].includes(e.length)&&!isNaN(parseInt(e,16))}(`${e[0]}`))throw new Error("Invalid hex value");const{hex:t,alpha:n}=function(e){let t=1;return 4===(e=e.replace("#","")).length&&(t=fv(e.slice(3)+e.slice(3)),e=e.slice(0,3)),8===e.length&&(t=fv(e.slice(6,8)),e=e.slice(0,6)),{hex:e,alpha:t}}(`${e[0]}`);return this.hex=t,this.alpha=n,this}if(3===e.length||4===e.length){for(var n=0;n<3;n++)if(isNaN(parseInt(e[n],10))||parseInt(e[n],10)<0||parseInt(e[n],10)>255)throw new Error("Invalid rgb value");if(e[3]&&parseFloat(e[3])<0||parseFloat(e[3])>1)throw new Error("Invalid alpha value");return this.rgba={red:e[0],green:e[1],blue:e[2],alpha:parseFloat(e[3])||1},this}throw new Error("Invalid color")}vv.prototype={get complement(){var e=this.clone();return e.rgb={red:255-this.red,green:255-this.green,blue:255-this.blue},e},get hex(){return vv.rgbToHex(this.red,this.green,this.blue)},get hexWithAlpha(){const e=("0"+Math.round(255*this.alpha).toString(16)).slice(-2);return vv.rgbToHex(this.red,this.green,this.blue)+e},set hex(e){return this.rgba=vv.hexToRgb(e),this},get hsl(){return"hsl("+this.hue+","+this.saturation+"%,"+Math.round(this.lightness)+"%)"},set hsl(e){this.hue=e.hue,this.saturation=e.saturation,this.lightness=e.lightness;var t=vv.hslToRgb(e.hue,e.saturation,e.lightness);return this.red=t.red,this.green=t.green,this.blue=t.blue,this.alpha=t.alpha,this},get luminance(){function e(e){return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}return.2126*e(this.red/255)+.7152*e(this.green/255)+.0722*e(this.blue/255)},get rgb(){return"rgb("+this.red+","+this.green+","+this.blue+")"},set rgb(e){return this.rgba=e,this},get rgba(){return"rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")"},set rgba(e){this.red=e.red,this.green=e.green,this.blue=e.blue,this.alpha=e.alpha||1;var t=vv.rgbToHsl(e.red,e.green,e.blue);return this.hue=t.hue,this.saturation=t.saturation,this.lightness=t.lightness,this},get yiq(){return(299*this.red+587*this.green+114*this.blue)/1e3},clone:function(){return new vv(this)},lighten:function(e,t,n){if(this.hsl={hue:this.hue,saturation:this.saturation,lightness:this.lightness+e},t&&n)for(var r=n.contrast(this).ratio;r<t&&(this.lighten(5),r=n.contrast(this).ratio,!(this.lightness>=100)););return this},darken:function(e,t,n){if(this.hsl={hue:this.hue,saturation:this.saturation,lightness:this.lightness-e},t&&n)for(var r=n.contrast(this).ratio;r<t&&(this.darken(5),r=n.contrast(this).ratio,!(this.lightness<=0)););return this},overlayOn:function(e){if(this.alpha>=1)return this;var t=this.clone();return t.rgba={red:t.red*this.alpha+e.red*e.alpha*(1-this.alpha),green:t.green*this.alpha+e.green*e.alpha*(1-this.alpha),blue:t.blue*this.alpha+e.blue*e.alpha*(1-this.alpha),alpha:t.alpha+e.alpha*(1-this.alpha)},t},contrast:function(e){var t=this.alpha;if(t>=1){e.alpha<1&&(e=e.overlayOn(this));var n=this.luminance+.05,r=e.luminance+.05,i=n/r;return r>n&&(i=1/i),{ratio:i=Math.round(10*i)/10,error:0,min:i,max:i}}var o=this.overlayOn(vv.white).contrast(e).ratio,a=this.overlayOn(vv.black).contrast(e).ratio,s=Math.max(o,a),l={red:Math.min(Math.max(0,(e.red-this.red*t)/(1-t)),255),green:Math.min(Math.max(0,(e.green-this.green*t)/(1-t)),255),blue:Math.min(Math.max(0,(e.blue-this.blue*t)/(1-t)),255)},c=this.clone();c.rgb=l;var u=this.overlayOn(c).contrast(e).ratio;return{ratio:Math.round((u+s)/2*10)/10,error:Math.round((s-u)/2*10)/10,min:u,max:s,closest:c,farthest:a===s?vv.white:vv.black}},wcagAACompliant:function(e){return this.contrast(e).ratio>=4.5},wcagAAACompliant:function(e){return this.contrast(e).ratio>=7},yiqContrastColor:function(){return this.yiq>=120?new vv(0,0,0):new vv(255,255,255)}},vv.hexToRgb=function(e){var t;return 3===(e=String(e)).length||4===e.length?(t=/^#?([A-Fa-f0-9])([A-Fa-f0-9])([A-Fa-f0-9])$/i.exec(e))&&(t[1]+=t[1],t[2]+=t[2],t[3]+=t[3]):t=/^#?([A-Fa-f0-9]{2})([A-Fa-f0-9]{2})([A-Fa-f0-9]{2})$/i.exec(e),t?{red:parseInt(t[1],16),green:parseInt(t[2],16),blue:parseInt(t[3],16),alpha:1}:null},vv.rgbToHex=function(e,t,n){return"#"+((1<<24)+(Math.round(e)<<16)+(Math.round(t)<<8)+Math.round(n)).toString(16).slice(1)},vv.rgbToHsl=function(e,t,n){e/=255,t/=255,n/=255;var r,i=Math.max(e,t,n),o=Math.min(e,t,n),a=(i+o)/2,s=a;if(i===o)return{hue:0,saturation:0,lightness:100*s};var l=i-o;return r=s>.5?l/(2-i-o):l/(i+o),i===e?a=(t-n)/l+(t<n?6:0):i===t?a=(n-e)/l+2:i===n&&(a=(e-t)/l+4),a/=6,{hue:Math.round(360*a),saturation:Math.round(100*r),lightness:Math.round(100*s)}},vv.hslToRgb=function(e,t,n){function r(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),6*n<1?e+6*(t-e)*n:2*n<1?t:3*n<2?e+6*(2/3-n)*(t-e):e}if(e/=360,n/=100,0==(t/=100))return{red:Math.floor(255*n),green:Math.floor(255*n),blue:Math.floor(255*n)};var i=n<.5?n*(1+t):n+t-t*n,o=2*n-i;return{red:Math.floor(255*r(o,i,e+1/3)),green:Math.floor(255*r(o,i,e)),blue:Math.floor(255*r(o,i,e-1/3))}},vv.hslToHex=function(e,t,n){var r=vv.hslToRgb(e,t,n);return vv.rgbToHex(r.red,r.green,r.blue)},vv.white=new vv("fff"),vv.black=new vv("000");let gv=function(e){return e.ONE="--color-one",e.TWO="--color-two",e.THREE="--color-three",e.FOUR="--color-four",e.ONE_MONOCHROME="--color-one-monochrome",e.TWO_MONOCHROME="--color-two-monochrome",e.ONE_OPACITY_NINETY="--color-one-opacity-ninety",e.TWO_OPACITY_NINETY="--color-two-opacity-ninety",e.THREE_OPACITY_TWENTY="--color-three-opacity-twenty",e.ONE_MONOCHROME_OPACITY_TWENTY="--color-one-monochrome-opacity-twenty",e.TWO_MONOCHROME_OPACITY_TWENTY="--color-two-monochrome-opacity-twenty",e.ONE_MONOCHROME_OPACITY_SIXTY="--color-one-monochrome-opacity-sixty",e.ONE_MONOCHROME_OPACITY_TWENTY_EIGHTY="--color-one-monochrome-opacity-twenty-eighty",e.TWO_MONOCHROME_OPACITY_TWENTY_EIGHTY="--color-two-monochrome-opacity-twenty-eighty",e.TWO_COMPLEMENT="--color-two-complement",e}({}),Ev=function(e){return e[e.ZERO=0]="ZERO",e[e.TWENTY=.2]="TWENTY",e[e.TWENTY_FIVE=.25]="TWENTY_FIVE",e[e.FIFTY=.5]="FIFTY",e[e.SIXTY=.6]="SIXTY",e[e.SEVENTY_FIVE=.75]="SEVENTY_FIVE",e[e.EIGHTY=.8]="EIGHTY",e[e.NINETY=.9]="NINETY",e[e.ONE_HUNDRED=1]="ONE_HUNDRED",e}({}),bv=function(e){return e.LIGHT="light",e.DARK="dark",e}({});const yv=(e="")=>4===(e=e.replace("#","")).length||8===e.length,Tv=(e,t,n)=>{let r;try{r=new vv(e)}catch(e){return""}null!=n&&n.complement&&(r=r.complement);const i=(e=>vv.white.contrast(e).ratio>=4.5?bv.DARK:bv.LIGHT)(r);return null!=n&&n.monochrome&&(r=ni(i===bv.DARK?vv.white:vv.black)),null==t||null!=n&&n.forceHexAlpha&&yv(e)?yv(e)?r.hexWithAlpha:r.hex:("object"==typeof t&&(t=t[i]),r.alpha=t,r.hexWithAlpha)},Sv=e=>e.map(([e,t])=>((e,t)=>e+":"+t+";")(e,t)).join("\n"),Cv=()=>{};let Av=function(e){return e.CONNECTED="CONNECTED",e.CONNECTING="CONNECTING",e.NOT_CONNECTED="NOT_CONNECTED",e.NOT_SETUP="NOT_SETUP",e.NO_DEVICES_AVAILABLE="NO_DEVICES_AVAILABLE",e.SETUP_DONE="SETUP_DONE",e}({}),Lv=function(e){return e.VimeoPlayer="VimeoPlayer",e.BackgroundPlayer="BackgroundPlayer",e.BarebonePlayer="BarebonePlayer",e}({}),Iv=function(e){return e.NORMAL="normal",e.MINI="mini",e.TINY="tiny",e}({}),Pv=function(e){return e[e.NONE=0]="NONE",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e[e.ERROR=3]="ERROR",e}({}),Rv=function(e){return e[e.HAVE_NOTHING=0]="HAVE_NOTHING",e[e.HAVE_METADATA=1]="HAVE_METADATA",e[e.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",e[e.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",e[e.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA",e}({}),wv=function(e){return e.PRIVACY_PUBLIC="anybody",e.PRIVACY_NOBODY="nobody",e.PRIVACY_FOLLOW="contacts",e.PRIVACY_PASSWORD="password",e.PRIVACY_USER="users",e.PRIVACY_PURGATORY="purgatory",e.PRIVACY_HIDE_FROM_VIMEO="disable",e.PRIVACY_PAYTOVIEW="ptv",e.PRIVACY_PAYTOVIEWEXTRA="ptv_extra",e.PRIVACY_UNLISTED="unlisted",e.PRIVACY_STOCK="stock",e}({}),Ov=function(e){return e.PLAY="play",e.PAUSE="pause",e.REPLAY="replay",e.TRAILER="trailer",e}({}),kv=function(e){return e.FONT_SIZE="fontSize",e.FONT_FAMILY="fontFamily",e.FONT_OPACITY="fontOpacity",e.COLOR="color",e.EDGE_STYLE="edgeStyle",e.BG_OPACITY="bgOpacity",e.BG_COLOR="bgColor",e.WINDOW_OPACITY="windowOpacity",e.WINDOW_COLOR="windowColor",e}({}),Dv=function(e){return e.CCMenu="c",e.PrefsMenu="h",e.Transcript="T",e}({}),Nv=function(e){return e.SINGLE_VIDEO_VIEW_MANAGE="single_video_view_manage",e.VIEWER_HOME="viewer_home",e.EMBEDDED_PAGE="embedded_page",e.CLIP_PAGE="clip_page",e.LIVE_EVENT_SETTINGS_PAGE="live_event_settings_page",e}({}),Mv=function(e){return e[e.CacheMiss=0]="CacheMiss",e[e.MidCacheHit=1]="MidCacheHit",e[e.EdgeCacheHit=2]="EdgeCacheHit",e}({}),xv=function(e){return e.TITLE="ti",e.BYLINE="by",e.PORTRAIT="po",e.LIKE="li",e.WATCH_LATER="wl",e.SHARE="sh",e.VIMEO_LOGO="vl",e}({}),Vv=function(e){return e.FLOW="fl",e.FLOW_ELEMENT="fe",e.PGROUP="pgroup",e}({});const{REACHABLE:Bv,UNREACHABLE:Uv}={REACHABLE:"reachable",UNREACHABLE:"unreachable"},{VIMEO_URL:Fv,VIEWER_HOME_URL:Hv,SVV_MANAGE_URL:Wv,PROFILE_URL:Gv,VOD_URL:jv,VOD_VIDEO_MANAGE_URL:Yv,NO_DESTINATION:$v}={VIMEO_URL:"vimeoUrl",VIEWER_HOME_URL:"viewerHomeUrl",SVV_MANAGE_URL:"svvManageUrl",CLIP_URL:"clipUrl",PROFILE_URL:"profileUrl",VOD_URL:"vodUrl",VOD_VIDEO_MANAGE_URL:"vodVideoManageUrl",NO_DESTINATION:"noDestination"},qv={[zd]:{viewer:{[i_]:Hv,[t_]:Hv,[n_]:Fv,[e_]:Hv,[Qd]:Hv,[r_]:jv,privateMode:Fv},creator:{[i_]:Wv,[t_]:Wv,[n_]:Wv,[e_]:Wv,[Qd]:Wv,[r_]:Yv,privateMode:Wv}},[Kd]:{viewer:{[i_]:Hv,[t_]:Hv,[n_]:Gv,[e_]:Hv,[Qd]:Hv,[r_]:jv,privateMode:Fv},creator:{[i_]:Wv,[t_]:Wv,[n_]:Wv,[e_]:Wv,[Qd]:Wv,[r_]:Yv,privateMode:Wv}},[Zd]:{viewer:{[i_]:Gv,[t_]:Gv,[n_]:Gv,[e_]:Gv,[Qd]:Gv,[r_]:Gv,privateMode:Fv},creator:{[i_]:Gv,[t_]:Gv,[n_]:Gv,[e_]:Gv,[Qd]:Gv,[r_]:Yv,privateMode:Wv}},[Xd]:{viewer:{[i_]:Gv,[t_]:Gv,[n_]:Gv,[e_]:Gv,[Qd]:Gv,[r_]:Gv,privateMode:Fv},creator:{[i_]:Gv,[t_]:Gv,[n_]:Gv,[e_]:Gv,[Qd]:Gv,[r_]:Yv,privateMode:Wv}},[Jd]:{viewer:{[i_]:Hv,[t_]:$v,[n_]:$v,[e_]:$v,[Qd]:Hv,[r_]:jv,privateMode:$v},creator:{[i_]:Hv,[t_]:$v,[n_]:$v,[e_]:$v,[Qd]:Hv,[r_]:jv,privateMode:$v}}};function zv(e={}){const t={selectDestination(e){const n=qv[e];if(!n)return"";const r=t.isOwner?n.creator:n.viewer;let i=t.isPrivateMode?r.privateMode:r[t.videoPrivacy];return function(e){return"object"==typeof e&&(Bv in e||Uv in e)}(i)&&(i=t.isClipLinkUnreachable?i[Uv]:i[Bv]),i},get[Hv](){var n,r;return lg(t[Fv],null==(n=e.video)?void 0:n.id,null==(r=e.video)?void 0:r.unlisted_hash)},get[Wv](){var n;return sg(t[Fv],null==(n=e.video)?void 0:n.id)},get[Fv](){return`https://${e.vimeo_url}`},get[Gv](){var t;return null==(t=e.video)||null==(t=t.owner)?void 0:t.url},get[jv](){var t;return null==(t=e.video)||null==(t=t.vod)?void 0:t.url},get[Yv](){var t;return`https://${e.vimeo_url}/ondemand/${null==(t=e.video)||null==(t=t.vod)?void 0:t.id}/settings/basic`},get[$v](){return""},get videoPrivacy(){var t;return null==(t=e.video)?void 0:t.privacy},get isPrivateMode(){var t;return!(null==(t=e.user)||!t.private_mode_enabled)},get isOwner(){var t,n;return(null==(t=e.user)?void 0:t.id)===(null==(n=e.video)||null==(n=n.owner)?void 0:n.id)},get isClipLinkUnreachable(){var t,n,r;return 0===(null==(t=e.embed)||null==(t=t.settings)?void 0:t.portrait)&&0===(null==(n=e.embed)||null==(n=n.settings)?void 0:n.byline)&&0===(null==(r=e.embed)||null==(r=r.settings)?void 0:r.title)}};return t}function Kv(e,t){let n="";const r=zv(t),i=r.selectDestination(e);r[i]&&(n=r[i]);const o={[Kd]:xv.TITLE,[Zd]:xv.PORTRAIT,[Xd]:xv.BYLINE,[zd]:xv.VIMEO_LOGO}[e];return o&&n&&(n=Xv(n,o)),n}function Xv(e,t){return me(e,{[Vv.FLOW]:"pl",[Vv.FLOW_ELEMENT]:t})}const Zv=/^(%20|\s)*(javascript|data)/im,Jv=/[^\x20-\x7E]/gim,Qv=/^([^:]+):/gm,eg=[".","/"];function tg(e,t,n){ng(e,t)||(e+=((e="")=>e.includes("?"))(e)?`&${t}=`:`?${t}=`);const r=new RegExp("([?&])"+t+"=.*?(&|$)","i");return e.replace(r,"$1"+t+"="+n+"$2")}function ng(e,t){return-1!==(null==e?void 0:e.indexOf(`?${t}=`))||-1!==(null==e?void 0:e.indexOf(`&${t}=`))}function rg(e){return-1!==e.indexOf("VideoController")}function ig(e,t=window.location.href){const n=zv(e),r=-1!==e.embed.context.indexOf("ClipController"),i=function(e,t){const n=sg(t),r=function(e){return`${e}/manage/showcases/`}(t);return-1!==e.indexOf(n)||-1!==e.indexOf(r)}(t,n.vimeoUrl),o=rg(e.embed.context)&&(-1!==t.indexOf(n.viewerHomeUrl)||t===n.clipUrl);return function(e,t){const n=function(e){return`${e}/live/broadcaster/event/`}(t),r=function(e){return`${e}/live/rtmp/event/`}(t);return-1!==e.indexOf(n)||-1!==e.indexOf(r)}(t,n.vimeoUrl)?Nv.LIVE_EVENT_SETTINGS_PAGE:i?Nv.SINGLE_VIDEO_VIEW_MANAGE:o?Nv.VIEWER_HOME:r?Nv.CLIP_PAGE:Nv.EMBEDDED_PAGE}const og=e=>{const t=e.match(Qv);return null==t?void 0:t[0]},ag=e=>e?decodeURI(encodeURI((e=>{e=e.trim();const t=og(e);return e&&!t&&(e=`https://${e}`),e})((e=>{let t=e.replace(Jv,"");if((e=>eg.indexOf(e[0])>-1)(t))return t;const n=og(t);return n&&Zv.test(n)?"":t})(e)))):null;function sg(e,t){return`${e}/manage/videos/${t??""}`}const lg=(e,t,n)=>n?`${e}/${t}/${n}`:`${e}/${t}`;function cg(e,t,n){if(!e)return"";if(!t&&!n)return e;const r=(null==t?void 0:t.toString())||null,i=(null==n?void 0:n.toString())||null;if(!r&&!i)return e;let o=e;const a=e.includes("#"),s=!r||0===Number(r.replace(/\D/g,""));return s||(o+=`${a?"&":"#"}t=${mv(r)}`),i&&(o+=`${s&&!a?"#":"&"}end=${mv(i)}`),o}function ug(e){return!(!Q.browser.chromium||e.video.spatial||"stock"===e.video.privacy||"https:"!==window.location.protocol)}const dg=O("Storage Access","color: #fff; background-color: #fc6203; padding: 2px; border-radius: 2px;"),_g=()=>Q.storageAccessAPI;function hg(){let e=0,t=null,n=0,r=!1;function i(){return e/1e3}return{trackBufferStart:function(e,i){t=le(),n++,r=!0,e(i)},trackBufferEnd:function(n,i={}){if(!r)return;const o=de(t);e+=o,i.buffer_duration=o/1e3,r=!1,n(i)},trackVideoExit:function(n){r&&!n&&(e+=de(t))},resetLastBufferTime:function(){t=null},getBufferRatio:function(e){const t=i()/e*100;return isNaN(t)?0:Math.round(100*t)/100},getBufferCount:function(){return n},getTotalBufferDuration:i,isVideoBuffering:function(){return r}}}const pg={VIDEO_BUFFER_END:"video-buffer-end",VIDEO_BUFFER_START:"video-buffer-start",VIDEO_ENDED:"video-ended",VIDEO_EXIT:"video-exit",VIDEO_LOAD_FAILURE:"video-load-failure",VIDEO_MINUTE_WATCHED:"video-minute-watched",VIDEO_PAUSED:"video-paused",VIDEO_PLAYED:"video-played",VIDEO_PLAYBACK_ERROR:"video-playback-error",VIDEO_READY:"video-ready",VIDEO_START_ATTEMPT:"video-start-attempt",VIDEO_START_FAILURE:"video-start-failure",VIDEO_START_TIME:"video-start-time",VIDEO_SEEK:"video-seek",VIDEO_SEEKED:"video-seeked",CHUNK_DOWNLOADED:"chunk-downloaded"};function mg(e){function t(e,t,n=!0,r="POST"){return new Promise((i,o)=>{"POST"===r&&navigator.sendBeacon?i({status:navigator.sendBeacon(e,t)}):We({url:e,body:t,method:r,async:n,headers:{"Content-Type":"text/plain; charset=UTF-8"}}).then(e=>{i({response:e,status:e.status})}).catch(o)})}return{log:function(n,r=!0,i=!0){i&&(n.event_time=n.event_time||le());const o=[n];return t(e,JSON.stringify(o),r)},logRequestPromiseWithUrl:t}}const fg="playing";function vg(e,t=3){if(e=parseFloat(e),isNaN(e))return 0;var n=Math.pow(10,t);return Math.round(e*n)/n}function gg(e,t){let n,r,i,o,a,s,l,c,u,d,_,h,p,m,f=0;function v(){n=0,r=0,i=0,o=0,a=0,s=null,l=0,c=!1,u=!1,d=null,_=!1,h=function(e){let t=0,n=0,r=0,i=0,o=!1,a=-1,s=null,l=null,c=null,u={satisfied:0,tolerable:0,frustrated:0},d=null;function _(){const t=e.getBoundingClientRect(),n=e.videoWidth,r=e.videoHeight;if(0===n&&0===r)return;const i="satisfied";let o=i;if(t.width>n&&t.height>r&&(n/t.width<.4?o=i:n/t.width<1?o="tolerable":n/t.width>1&&(o="frustrated")),l){const e=de(l);u[c]+=e}c=o,l=le()}function h(){return o?0:1}function p(){return-1===a?null:a>8e3||-1===a?0:a>2e3?.5:1}function m(){return d?(i=r/de(d),t>=4||i>=.12?0:t<4&&0!==t?i<.12?.5:0:1):null}function f(){if(-1===a)return null;_();const e=Object.keys(u).reduce((e,t)=>u[e]>u[t]?e:t);switch(e){case"satisfied":return 1;case"tolerable":return.5;case"frustrated":return 0}return null}return e.addEventListener(fg,()=>{-1===a&&(s=le())}),e.addEventListener("progress",()=>{-1===a&&(d=le(),a=de(s)),_()}),{startupTimeScore:p,rebufferScore:m,failureScore:h,videoQualityScore:f,overallScore:function(){return Math.min(h(),p(),m(),f())},trackBufferStart:function(){-1!==a&&(t++,n=le())},trackBufferEnd:function(){-1!==a&&(r+=de(n))},onError:function(e){e.final&&(o=!0)}}}(e),p=hg(),m={bufferTracker:p,videoBufferCheck:()=>{setInterval(()=>{let t=e.currentTime;u&&!_&&!e.paused&&!m.bufferTracker.isVideoBuffering()&&t<a+.125&&m.bufferTracker.trackBufferStart(E),u&&!e.paused&&m.bufferTracker.isVideoBuffering()&&t>a+.125&&(m.bufferTracker.trackBufferEnd(b),m.bufferTracker.resetLastBufferTime()),a=t},250)},addEventData:e=>null,playbackSessionTimer:()=>{let t=le();setInterval(()=>{(!e.paused&&c||_||m.bufferTracker.isVideoBuffering())&&(l+=de(t)/1e3),t=le()},500)},customMinuteTracker:{shouldCount:()=>!1,onCount:()=>{}}}}function g(e,n={}){0===f&&(n=Object.assign(n,m.addEventData(e)),t(e,n))}function E(e={}){h.trackBufferStart(),g(pg.VIDEO_BUFFER_START,e)}function b(e={}){h.trackBufferEnd(),g(pg.VIDEO_BUFFER_END,e)}return v(),g(pg.VIDEO_READY),function(){let t=Math.ceil(59*Math.random());setInterval(()=>{var a,s,l;function u(e,n){return 0===e?n===t:n>=60}!e.paused&&c&&(n++,null!=(a=m.customMinuteTracker)&&null!=a.shouldCount&&a.shouldCount()&&r++,u(i,n)&&(n=0,i++,g(pg.VIDEO_MINUTE_WATCHED)),u(o,r)&&null!=(s=m.customMinuteTracker)&&null!=s.shouldCount&&s.shouldCount()&&(r=0,o++,null==(l=m.customMinuteTracker)||null==l.onCount||l.onCount(o)))},1e3)}(),window.addEventListener("pagehide",t=>{m.bufferTracker.trackVideoExit(e.paused);const n={startup:h.startupTimeScore(),rebuffer:h.rebufferScore(),failure:h.failureScore(),quality:h.videoQualityScore(),overall:h.overallScore()};d&&g(pg.VIDEO_EXIT,{vxs:n})},!1),e.addEventListener(fg,()=>{c=!0,_||u&&g(pg.VIDEO_PLAYED)}),e.addEventListener("timeupdate",()=>{if(u)return;let e={startup_duration:d?vg(de(d)/1e3,2):null};g(pg.VIDEO_START_TIME,e),u=!0}),e.addEventListener("pause",()=>{c=!1,g(pg.VIDEO_PAUSED)}),e.addEventListener("seeking",()=>{_||(s=le(),_=!0,c=!1,g(pg.VIDEO_SEEK))}),e.addEventListener("seeked",()=>{_=!1,e.paused||(c=!0),g(pg.VIDEO_SEEKED,{seek_duration:de(s)/1e3}),s=null}),e.addEventListener("ended",()=>{g(pg.VIDEO_ENDED)}),e.addEventListener("waiting",()=>{c=!1}),e.addEventListener("canplay",()=>{_||m.bufferTracker.isVideoBuffering()&&!c&&(m.bufferTracker.trackBufferEnd(b),m.bufferTracker.resetLastBufferTime())}),{globalProperties:function(){return{autoplay:e.autoplay,buffer_count:m.bufferTracker.getBufferCount(),total_buffer_duration:m.bufferTracker.getTotalBufferDuration(),buffer_ratio:m.bufferTracker.getBufferRatio(l),client_time:le(),is_buffering:m.bufferTracker.isVideoBuffering(),looping:e.loop,minutes_watched:i,muted:e.muted,network_state:e.networkState,playback_rate:e.playbackRate,player_width:e.getBoundingClientRect().width,player_height:e.getBoundingClientRect().height,session_playback_duration:vg(l,2),video_time:e.currentTime,video_height:e.videoHeight,video_width:e.videoWidth,volume:vg(e.volume,2)}},logStartRequest:function(){d=le(),g(pg.VIDEO_START_ATTEMPT)},customizeHooks:function(e){m=Object.assign(m,e)},initHooks:function(){m.videoBufferCheck(),m.playbackSessionTimer()},logBufferStart:E,logBufferEnd:b,setDisplayContext:function(e){f=e},handleExternalError:function(e,t){c=!1,h.onError(t),g(u?pg.VIDEO_PLAYBACK_ERROR:u?pg.VIDEO_START_FAILURE:pg.VIDEO_LOAD_FAILURE,e)},reset:v}}let Eg=function(e){return e.started="started",e.done="done",e.error="error",e}({}),bg=function(e){return e.pending="pending",e.active="active",e.started="started",e.ended="ended",e}({}),yg=function(e){return e.WEB_GLOBAL="vimeo.web_global",e.COPY_VIDEO_EMBED_CODE="workflow.copy_video_embed_code",e.PLAYER_PERFORMANCE_MEASUREMENT="vimeo.player_performance_measurement",e.CHAPTER_SEGMENT_CLICK="vimeo.chapter_segment_click",e.CLICK="vimeo.click",e.TIMING_OBJECT_CONNECT="vimeo.timing_object_connect",e.TIMING_OBJECT_DISCONNECT="vimeo.timing_object_disconnect",e.EMBEDDED_TRANSCRIPT_CLICK="vimeo.embedded_transcript_click",e.CLOSED_CAPTIONS_CLICK="vimeo.closed_captions_click",e.MULTI_AUDIO_TRACK_CLICK="vimeo.multi_audio_track_click",e.VIEW_PLAYER_CSAT_V1="vimeo.view_player_csat_v1",e.SELECT_THUMBS_UP_PLAYER_CSAT_V1="vimeo.select_thumbs_up_player_csat_v1",e.SELECT_THUMBS_DOWN_PLAYER_CSAT_V1="vimeo.select_thumbs_down_player_csat_v1",e.DISMISS_PLAYER_CSAT_V1="vimeo.dismiss_player_csat_v1",e.DVR_MODE_ENTERED="vimeo.dvr_mode_entered",e.SEEK_BEHIND_LIVE_EDGE="vimeo.seek_behind_live_edge",e.SKIP_TO_LIVE_CLICK="vimeo.skip_to_live_click",e.SEEK_TO_LIVE_EDGE="vimeo.seek_to_live_edge",e.PLAY_VIDEO="vimeo.play_video",e.FINISH_VIDEO="vimeo.finish_video",e.START_VIDEO_SCRUB="vimeo.start_video_scrub",e.END_VIDEO_SCRUB="vimeo.end_video_scrub",e.WATCH_VIDEO_HEARTBEAT="vimeo.watch_video_heartbeat",e.EMBED_SEGMENT="vimeo.embed_segment",e.PLAY_SEGMENT="vimeo.play_segment",e.WATCH_FULL_VIDEO="vimeo.watch_full_video",e.SEEK_INSIDE_SEGMENT="vimeo.seek_inside_segment",e.SHARE_CHAPTER="vimeo.share_chapter",e.CHAPTER_PLAYED="vimeo.chapter_played",e.CHAPTER_SELECTED="vimeo.chapter_selected",e.OPEN_AI_OPTIONS="vimeo.open_ai_options",e.PROCESS_STEP="vimeo.process_step",e.REMOTE_COMPONENT_LOADED="vimeo.remote_component_loaded",e.REMOTE_COMPONENT_TIMEOUT="vimeo.remote_component_timeout",e.SELECT_LIKE_HEART_ICON="vimeo.select_like_heart_icon",e.SELECT_PLAYER_ADD_TO_WATCH_LATER="vimeo.select_player_add_to_watch_later",e.SELECT_PLAYER_TITLE="vimeo.select_player_title",e.SELECT_PLAYER_BYLINE="vimeo.select_player_byline",e.SELECT_PLAYER_PROFILE_PHOTO="vimeo.select_player_profile_photo",e.SELECT_PLAYER_SHARE="vimeo.select_player_share",e.SELECT_PLAYER_SHARE_COMPLETE="vimeo.select_player_share_complete",e.REACH_TIME_ACTION="vimeo.reach_time_action",e.VIEW_HOTSPOT="vimeo.view_hotspot",e.CLICK_HOTSPOT="vimeo.click_hotspot",e.VIEW_OVERLAY="vimeo.view_overlay",e.CLOSE_OVERLAY="vimeo.close_overlay",e.CLICK_OVERLAY="vimeo.click_overlay",e.VIEW_POLL="vimeo.view_poll",e.VOTE_POLL="vimeo.vote_poll",e.SELECT_PLAYER_VIMEO_LOGO="select_player_vimeo_logo",e}({}),Tg=function(e){return e.TEAM="team_context",e.ACTION="action_context",e.VIEW="view_context",e.WEB="web_context",e.VIDEO="video_context",e.PLAYER="player_context",e.LIVE="live_context",e.PRODUCT_ANALYTICS="product_analytics_context",e.TARGET_TEAM="target_team_context",e.USER_FACING_VIDEO_ANALYTICS="user_facing_video_analytics_context",e.THIRD_PARTY_INTEGRATION="third_party_integration_context",e}({}),Sg=function(e){return e[e.WEB_GLOBAL=5]="WEB_GLOBAL",e[e.COPY_VIDEO_EMBED_CODE=5]="COPY_VIDEO_EMBED_CODE",e[e.PLAYER_PERFORMANCE_MEASUREMENT=1]="PLAYER_PERFORMANCE_MEASUREMENT",e[e.CHAPTER_SEGMENT_CLICK=2]="CHAPTER_SEGMENT_CLICK",e[e.CLICK=83]="CLICK",e[e.TIMING_OBJECT_CONNECT=1]="TIMING_OBJECT_CONNECT",e[e.TIMING_OBJECT_DISCONNECT=1]="TIMING_OBJECT_DISCONNECT",e[e.EMBEDDED_TRANSCRIPT_CLICK=6]="EMBEDDED_TRANSCRIPT_CLICK",e[e.CLOSED_CAPTIONS_CLICK=5]="CLOSED_CAPTIONS_CLICK",e[e.MULTI_AUDIO_TRACK_CLICK=2]="MULTI_AUDIO_TRACK_CLICK",e[e.PLAY_VIDEO=2]="PLAY_VIDEO",e[e.FINISH_VIDEO=2]="FINISH_VIDEO",e[e.START_VIDEO_SCRUB=2]="START_VIDEO_SCRUB",e[e.END_VIDEO_SCRUB=1]="END_VIDEO_SCRUB",e[e.WATCH_VIDEO_HEARTBEAT=4]="WATCH_VIDEO_HEARTBEAT",e[e.EMBED_SEGMENT=1]="EMBED_SEGMENT",e[e.PLAY_SEGMENT=1]="PLAY_SEGMENT",e[e.WATCH_FULL_VIDEO=1]="WATCH_FULL_VIDEO",e[e.SEEK_INSIDE_SEGMENT=1]="SEEK_INSIDE_SEGMENT",e[e.SHARE_CHAPTER=1]="SHARE_CHAPTER",e[e.CHAPTER_PLAYED=1]="CHAPTER_PLAYED",e[e.CHAPTER_SELECTED=1]="CHAPTER_SELECTED",e[e.OPEN_AI_OPTIONS=4]="OPEN_AI_OPTIONS",e[e.PROCESS_STEP=1]="PROCESS_STEP",e[e.REMOTE_COMPONENT_LOADED=1]="REMOTE_COMPONENT_LOADED",e[e.REMOTE_COMPONENT_TIMEOUT=1]="REMOTE_COMPONENT_TIMEOUT",e[e.SELECT_PLAYER_SHARE=1]="SELECT_PLAYER_SHARE",e[e.SELECT_PLAYER_SHARE_COMPLETE=1]="SELECT_PLAYER_SHARE_COMPLETE",e[e.REACH_TIME_ACTION=1]="REACH_TIME_ACTION",e[e.VIEW_HOTSPOT=1]="VIEW_HOTSPOT",e[e.CLICK_HOTSPOT=1]="CLICK_HOTSPOT",e[e.VIEW_OVERLAY=1]="VIEW_OVERLAY",e[e.CLOSE_OVERLAY=1]="CLOSE_OVERLAY",e[e.CLICK_OVERLAY=1]="CLICK_OVERLAY",e[e.VIEW_POLL=1]="VIEW_POLL",e[e.VOTE_POLL=1]="VOTE_POLL",e[e.TEAM=5]="TEAM",e[e.ACTION=5]="ACTION",e[e.VIEW=3]="VIEW",e[e.WEB=25]="WEB",e[e.VIDEO=18]="VIDEO",e[e.PLAYER=5]="PLAYER",e[e.LIVE=6]="LIVE",e[e.PRODUCT_ANALYTICS=171]="PRODUCT_ANALYTICS",e[e.TARGET_TEAM=6]="TARGET_TEAM",e[e.USER_FACING_VIDEO_ANALYTICS=2]="USER_FACING_VIDEO_ANALYTICS",e[e.THIRD_PARTY_INTEGRATION=5]="THIRD_PARTY_INTEGRATION",e[e.DEFAULT=-1]="DEFAULT",e}({});const Cg={[yg.WEB_GLOBAL]:Sg.WEB_GLOBAL,[yg.COPY_VIDEO_EMBED_CODE]:Sg.COPY_VIDEO_EMBED_CODE,[yg.PLAYER_PERFORMANCE_MEASUREMENT]:Sg.PLAYER_PERFORMANCE_MEASUREMENT,[yg.CHAPTER_SEGMENT_CLICK]:Sg.CHAPTER_SEGMENT_CLICK,[yg.CLICK]:Sg.CLICK,[yg.TIMING_OBJECT_CONNECT]:Sg.TIMING_OBJECT_CONNECT,[yg.TIMING_OBJECT_DISCONNECT]:Sg.TIMING_OBJECT_DISCONNECT,[yg.EMBEDDED_TRANSCRIPT_CLICK]:Sg.EMBEDDED_TRANSCRIPT_CLICK,[yg.CLOSED_CAPTIONS_CLICK]:Sg.CLOSED_CAPTIONS_CLICK,[yg.MULTI_AUDIO_TRACK_CLICK]:Sg.MULTI_AUDIO_TRACK_CLICK,[yg.VIEW_PLAYER_CSAT_V1]:Sg.DEFAULT,[yg.SELECT_THUMBS_UP_PLAYER_CSAT_V1]:Sg.DEFAULT,[yg.SELECT_THUMBS_DOWN_PLAYER_CSAT_V1]:Sg.DEFAULT,[yg.DISMISS_PLAYER_CSAT_V1]:Sg.DEFAULT,[yg.DVR_MODE_ENTERED]:Sg.DEFAULT,[yg.SEEK_BEHIND_LIVE_EDGE]:Sg.DEFAULT,[yg.SKIP_TO_LIVE_CLICK]:Sg.DEFAULT,[yg.SEEK_TO_LIVE_EDGE]:Sg.DEFAULT,[yg.PLAY_VIDEO]:Sg.PLAY_VIDEO,[yg.FINISH_VIDEO]:Sg.FINISH_VIDEO,[yg.START_VIDEO_SCRUB]:Sg.START_VIDEO_SCRUB,[yg.END_VIDEO_SCRUB]:Sg.END_VIDEO_SCRUB,[yg.WATCH_VIDEO_HEARTBEAT]:Sg.WATCH_VIDEO_HEARTBEAT,[yg.EMBED_SEGMENT]:Sg.EMBED_SEGMENT,[yg.PLAY_SEGMENT]:Sg.PLAY_SEGMENT,[yg.WATCH_FULL_VIDEO]:Sg.WATCH_FULL_VIDEO,[yg.SEEK_INSIDE_SEGMENT]:Sg.SEEK_INSIDE_SEGMENT,[yg.SHARE_CHAPTER]:Sg.SHARE_CHAPTER,[yg.CHAPTER_PLAYED]:Sg.CHAPTER_PLAYED,[yg.CHAPTER_SELECTED]:Sg.CHAPTER_SELECTED,[yg.OPEN_AI_OPTIONS]:Sg.OPEN_AI_OPTIONS,[yg.PROCESS_STEP]:Sg.PROCESS_STEP,[yg.REMOTE_COMPONENT_LOADED]:Sg.REMOTE_COMPONENT_LOADED,[yg.REMOTE_COMPONENT_TIMEOUT]:Sg.REMOTE_COMPONENT_TIMEOUT,[yg.SELECT_LIKE_HEART_ICON]:Sg.DEFAULT,[yg.SELECT_PLAYER_ADD_TO_WATCH_LATER]:Sg.DEFAULT,[yg.SELECT_PLAYER_VIMEO_LOGO]:Sg.DEFAULT,[yg.SELECT_PLAYER_TITLE]:Sg.DEFAULT,[yg.SELECT_PLAYER_BYLINE]:Sg.DEFAULT,[yg.SELECT_PLAYER_PROFILE_PHOTO]:Sg.DEFAULT,[yg.SELECT_PLAYER_SHARE]:Sg.SELECT_PLAYER_SHARE,[yg.SELECT_PLAYER_SHARE_COMPLETE]:Sg.SELECT_PLAYER_SHARE_COMPLETE,[yg.REACH_TIME_ACTION]:Sg.REACH_TIME_ACTION,[yg.VIEW_HOTSPOT]:Sg.VIEW_HOTSPOT,[yg.CLICK_HOTSPOT]:Sg.CLICK_HOTSPOT,[yg.VIEW_OVERLAY]:Sg.VIEW_OVERLAY,[yg.CLOSE_OVERLAY]:Sg.CLOSE_OVERLAY,[yg.CLICK_OVERLAY]:Sg.CLICK_OVERLAY,[yg.VIEW_POLL]:Sg.VIEW_POLL,[yg.VOTE_POLL]:Sg.VOTE_POLL,[Tg.TEAM]:Sg.TEAM,[Tg.ACTION]:Sg.ACTION,[Tg.VIEW]:Sg.VIEW,[Tg.WEB]:Sg.WEB,[Tg.VIDEO]:Sg.VIDEO,[Tg.PLAYER]:Sg.PLAYER,[Tg.LIVE]:Sg.LIVE,[Tg.PRODUCT_ANALYTICS]:Sg.PRODUCT_ANALYTICS,[Tg.USER_FACING_VIDEO_ANALYTICS]:Sg.USER_FACING_VIDEO_ANALYTICS,[Tg.TARGET_TEAM]:Sg.TARGET_TEAM,[Tg.THIRD_PARTY_INTEGRATION]:Sg.THIRD_PARTY_INTEGRATION},Ag=[Tg.PLAYER,Tg.VIDEO,Tg.WEB,Tg.TEAM],Lg=[Tg.TEAM,Tg.VIDEO,Tg.LIVE,Tg.PRODUCT_ANALYTICS,Tg.USER_FACING_VIDEO_ANALYTICS,Tg.TARGET_TEAM,Tg.THIRD_PARTY_INTEGRATION],Ig={[yg.VIEW_PLAYER_CSAT_V1]:[].concat(Ag,[Tg.VIEW]),[yg.SELECT_THUMBS_UP_PLAYER_CSAT_V1]:[].concat(Ag,[Tg.ACTION]),[yg.SELECT_THUMBS_DOWN_PLAYER_CSAT_V1]:[].concat(Ag,[Tg.ACTION]),[yg.DISMISS_PLAYER_CSAT_V1]:[].concat(Ag,[Tg.ACTION]),[yg.DVR_MODE_ENTERED]:[].concat(Ag,[Tg.VIEW,Tg.LIVE,Tg.PRODUCT_ANALYTICS]),[yg.SEEK_BEHIND_LIVE_EDGE]:[].concat(Ag,[Tg.ACTION,Tg.LIVE,Tg.PRODUCT_ANALYTICS]),[yg.SKIP_TO_LIVE_CLICK]:[].concat(Ag,[Tg.ACTION,Tg.LIVE,Tg.PRODUCT_ANALYTICS]),[yg.SEEK_TO_LIVE_EDGE]:[].concat(Ag,[Tg.ACTION,Tg.LIVE,Tg.PRODUCT_ANALYTICS]),[yg.PLAY_VIDEO]:[].concat(Ag,[Tg.ACTION,Tg.LIVE,Tg.PRODUCT_ANALYTICS,Tg.TARGET_TEAM,Tg.USER_FACING_VIDEO_ANALYTICS]),[yg.FINISH_VIDEO]:[].concat(Ag,[Tg.ACTION,Tg.LIVE,Tg.PRODUCT_ANALYTICS,Tg.TARGET_TEAM,Tg.USER_FACING_VIDEO_ANALYTICS]),[yg.START_VIDEO_SCRUB]:[].concat(Ag,[Tg.ACTION,Tg.LIVE,Tg.PRODUCT_ANALYTICS,Tg.TARGET_TEAM,Tg.USER_FACING_VIDEO_ANALYTICS]),[yg.END_VIDEO_SCRUB]:[].concat(Ag,[Tg.ACTION,Tg.LIVE,Tg.PRODUCT_ANALYTICS,Tg.TARGET_TEAM,Tg.USER_FACING_VIDEO_ANALYTICS]),[yg.WATCH_VIDEO_HEARTBEAT]:[].concat(Ag,[Tg.ACTION,Tg.LIVE,Tg.PRODUCT_ANALYTICS,Tg.TARGET_TEAM,Tg.USER_FACING_VIDEO_ANALYTICS]),[yg.WATCH_FULL_VIDEO]:[].concat(Ag,[Tg.ACTION,Tg.PRODUCT_ANALYTICS]),[yg.SEEK_INSIDE_SEGMENT]:[].concat(Ag,[Tg.ACTION,Tg.PRODUCT_ANALYTICS]),[yg.SHARE_CHAPTER]:[].concat(Ag,[Tg.ACTION,Tg.PRODUCT_ANALYTICS]),[yg.CHAPTER_PLAYED]:[].concat(Ag,[Tg.ACTION,Tg.PRODUCT_ANALYTICS]),[yg.CHAPTER_SELECTED]:[].concat(Ag,[Tg.ACTION,Tg.PRODUCT_ANALYTICS,Tg.THIRD_PARTY_INTEGRATION]),[yg.EMBED_SEGMENT]:[].concat(Ag,[Tg.VIEW,Tg.PRODUCT_ANALYTICS]),[yg.PLAY_SEGMENT]:[].concat(Ag,[Tg.ACTION,Tg.PRODUCT_ANALYTICS]),[yg.OPEN_AI_OPTIONS]:[Tg.TEAM,Tg.ACTION,Tg.PRODUCT_ANALYTICS,Tg.WEB,Tg.VIDEO],[yg.PROCESS_STEP]:[].concat(Ag,[Tg.ACTION,Tg.PRODUCT_ANALYTICS]),[yg.REMOTE_COMPONENT_LOADED]:[].concat(Ag,[Tg.ACTION,Tg.PRODUCT_ANALYTICS,Tg.THIRD_PARTY_INTEGRATION]),[yg.REMOTE_COMPONENT_TIMEOUT]:[].concat(Ag,[Tg.ACTION,Tg.PRODUCT_ANALYTICS,Tg.THIRD_PARTY_INTEGRATION]),[yg.SELECT_LIKE_HEART_ICON]:[].concat(Ag,[Tg.ACTION,Tg.PRODUCT_ANALYTICS,Tg.VIEW,Tg.LIVE]),[yg.SELECT_PLAYER_ADD_TO_WATCH_LATER]:[].concat(Ag,[Tg.ACTION,Tg.PRODUCT_ANALYTICS,Tg.VIEW,Tg.LIVE]),[yg.SELECT_PLAYER_VIMEO_LOGO]:[].concat(Ag,[Tg.ACTION,Tg.PRODUCT_ANALYTICS,Tg.VIEW,Tg.LIVE]),[yg.SELECT_PLAYER_TITLE]:[].concat(Ag,[Tg.ACTION,Tg.PRODUCT_ANALYTICS,Tg.VIEW,Tg.LIVE]),[yg.SELECT_PLAYER_BYLINE]:[].concat(Ag,[Tg.ACTION,Tg.PRODUCT_ANALYTICS,Tg.VIEW,Tg.LIVE]),[yg.SELECT_PLAYER_PROFILE_PHOTO]:[].concat(Ag,[Tg.ACTION,Tg.PRODUCT_ANALYTICS,Tg.VIEW,Tg.LIVE]),[yg.SELECT_PLAYER_SHARE]:[].concat(Ag,[Tg.ACTION,Tg.PRODUCT_ANALYTICS,Tg.VIEW,Tg.LIVE]),[yg.SELECT_PLAYER_SHARE_COMPLETE]:[].concat(Ag,[Tg.ACTION,Tg.PRODUCT_ANALYTICS,Tg.VIEW,Tg.LIVE]),[yg.REACH_TIME_ACTION]:[].concat(Lg,[Tg.VIEW]),[yg.VIEW_HOTSPOT]:[].concat(Lg,[Tg.VIEW]),[yg.CLICK_HOTSPOT]:[].concat(Lg,[Tg.ACTION]),[yg.VIEW_OVERLAY]:[].concat(Lg,[Tg.VIEW]),[yg.CLOSE_OVERLAY]:[].concat(Lg,[Tg.ACTION]),[yg.CLICK_OVERLAY]:[].concat(Lg,[Tg.ACTION]),[yg.VIEW_POLL]:[].concat(Lg,[Tg.VIEW]),[yg.VOTE_POLL]:[].concat(Lg,[Tg.ACTION])},Pg={PROVENANCE_AI_GENERATED:"ai_generated",PROVENANCE_USER_UPLOADED:"user_uploaded",PROVENANCE_USER_UPLOADED_AI_GENERATED:"user_uploaded_ai_generated"};let Rg=function(e){return e.WORKFLOW="Workflow",e.PLAYBACK="Playback",e}({});const wg=p(p({},pg),{},{CAPTIONS_ENABLED:"captions-enabled",CAPTIONS_DISABLED:"captions-disabled",CHROMECAST_CONNECTED:"chromecast-connected",CHROMECAST_DISCONNECTED:"chromecast-disconnected",DRM_KEY_SWITCH:"drm-key-switch",MEDIASESSION_PLAY:"mediasession-play",MEDIASESSION_PAUSE:"mediasession-pause",MEDIASESSION_SEEK_FORWARD:"mediasession-seekforward",MEDIASESSION_SEEK_BACKWARD:"mediasession-seekbackward",MEDIASESSION_SEEK_TO:"mediasession-seekto",SLATE_DISPLAYED:"slate-displayed",CLICK:"click",VIDEO_DURATION_MISMATCH:"video-duration-mismatch",VIDEO_FULLSCREEN_CHANGE:"video-fullscreen-change",VIDEO_MANIFEST_LOADED:"video-manifest-loaded",VIDEO_MANIFEST_TIMEOUT:"video-manifest-timeout",VIDEO_PICTURE_IN_PICTURE_CHANGE:"video-picture-in-picture-change",VIDEO_PLAYBACK_RATE_CHANGED:"video-playback-rate-changed",VIDEO_STREAM_CHANGE:"video-stream-change",VIDEO_SWITCH_BACK_TO_AUTO:"video-switch-back-to-auto",VIDEO_SWITCH_FROM_AUTO:"video-switch-from-auto",DOWNLOAD_TIMEOUT:"video-download-timeout",AD_BUFFERING:"ad-buffering",AD_COMPLETE:"ad-complete",AD_CLICKED:"ad-clicked",AD_ERROR:"ad-error",AD_PAUSED:"ad-paused",AD_RESUMED:"ad-resumed",AD_STARTED:"ad-started",AD_SKIPPED:"ad-skipped",ENTER_WEBVR:"enter-webvr",EXIT_WEBVR:"exit-webvr",HLS_JS_EVENT:"hlsjs-event"});function Og(e){var t;return e.video.ecdn?e.video.live_event?"vimeo-live-ecdn":"vimeo-vod-ecdn":Mu(e.embed.interactive)?null!=(t=e.request.flags)&&t.ott?"vimeo-ott-vod":e.video.live_event?"vimeo-live":e.embed.context&&-1!==e.embed.context.indexOf("Stock")?"vimeo-stock-vod":e.video.vod?"vimeo-ondemand":"vimeo-vod":"vimeo-interactive-vod"}const kg=()=>{const e=tf,[t,n,r]=e.split(".");return{full:e,major:t,minor:n,patch:r}},Dg=Q.iPhone||Q.mobileAndroid||Q.windowsPhone||Q.browser.bb10;function Ng(){let e="desktop";return Q.iPad?e="tablet":Dg&&(e="mobile"),e}function Mg(){let e="windows";return Q.iOS?e="iOS":Q.android?e="android":Q.mac?e="macOS":Q.windowsPhone&&(e="windowsPhone"),e}function xg(e){var t;const{user:n,video:r}=e;let i="viewer";return n.team_id&&(i=n.id===n.team_origin_user_id?"admin":"contributor"),n.id===(null==(t=r.owner)?void 0:t.id)&&(i="owner"),i}function Vg(e,t){return e===t?"square":t>e?"portrait":"landscape"}function Bg(e){return(null==e?void 0:e.status)===bg.ended?"ended":(null==e?void 0:e.status)===bg.started?"streaming":(null==e?void 0:e.status)===bg.pending?"unavailable":"unknown"}function Ug(e){return e.live_event?"live_event":"other"}function Fg(e){var t;return null!=e&&e.length&&(null==(t=e.find(e=>e.is_current))?void 0:t.id)||null}function Hg(e){return e===wv.PRIVACY_PUBLIC?"public":e===wv.PRIVACY_PASSWORD?"password":e===wv.PRIVACY_UNLISTED?"unlisted":e===wv.PRIVACY_HIDE_FROM_VIMEO?"hide_from_vimeo":"private"}var Wg=function(e){return e.Origin="c=o",e.Peer="c=p",e.ParentCache="c=c",e.CloudWrapper="c=w",e}(Wg||{});function Gg(e){const t=e.akamai_request_bc,n=e.x_cache;return t?function(e){return e.includes(Wg.Origin)?Mv.CacheMiss:e.includes(Wg.Peer)||e.includes(Wg.ParentCache)||e.includes(Wg.CloudWrapper)?Mv.MidCacheHit:Mv.EdgeCacheHit}(t):n?function(e){return"HIT"===e.slice(0,3)?Mv.MidCacheHit:"HIT"===e.slice(-3)?Mv.EdgeCacheHit:Mv.CacheMiss}(n):Mv.CacheMiss}function jg(e){if(!e)return{audioTrackLang:null,audioTrackProvenance:null,audioTrackType:null,textTrackLang:null,textTrackProvenance:null,textTrackType:null};const t=e.enabledAudioTrack,n=e.enabledTextTrack;return{audioTrackLang:(null==t?void 0:t.language)||null,audioTrackProvenance:Pg[null==t?void 0:t.provenance]||null,audioTrackType:(null==t?void 0:t.kind)||null,textTrackLang:(null==n?void 0:n.language)||null,textTrackProvenance:(null==n?void 0:n.provenance)||null,textTrackType:(null==n?void 0:n.kind)||null}}const Yg=()=>{const e=Kt(window,"_hiveStats",{cdnResponseBytes:0,p2pResponseBytes:0,partners:{}}),{cdnResponseBytes:t,p2pResponseBytes:n,partners:r}=e;return{ecdnBytesByCdn:t,ecdnBytesPeered:n,ecdnPeers:(Object.keys(r)??[]).length}},$g=()=>{const e=Kt(window,"_kollectiveStats",{originBytes:0,ecdnBytes:0,currentPeerConnections:0}),{originBytes:t,ecdnBytes:n,currentPeerConnections:r}=e;return{ecdnBytesByCdn:t,ecdnBytesPeered:n,ecdnPeers:r}},qg=e=>{const t={hive:Yg,kollective:$g};return t[e]?t[e]():{ecdnBytesByCdn:0,ecdnBytesPeered:0,ecdnPeers:0}},zg=({newPriority:e,currentPriority:t,priorityOrder:n})=>{const r=n.indexOf(t),i=n.indexOf(e);return-1===r||-1===i||r>i};function Kg(e){return(null==e?void 0:e.parentElement)===document.body}const Xg=()=>{try{return window.self!==window.top}catch(e){return!0}};function Zg(e,t){const[n,r]=t;let i=r-n;for(var o,a=u(e);!(o=a()).done;){const e=o.value,[t,a]=e,s=Math.max(n,t),l=Math.min(r,a);i-=Math.max(0,l-s)}return Math.max(i,0)}function Jg(e){return sv(Fm(e,3))}const Qg=e=>{var t;const n=null==e||null==(t=e.ingest)?void 0:t.start_time;if(!n)return gf;const r=Date.now()-n,i=gf-r;return Math.min(Math.max(i,0),gf)},eE=e=>!!e&&e.status===bg.started&&0===Qg(e);function tE(e){return!0===e||!1===e?Number(e):"null"===e?null:e}function nE(e,t=document.cookie){try{if(t&&""!==t)return t.split(";").reduce(function(t,n){return 0===(n=n.trim()).indexOf(`${e}=`)?decodeURIComponent(n.substr(e.length+1)):t},null)}catch(e){}return null}let rE=function(e){return e.EMPTY="empty",e.LEAD_CAPTURE_FORM="lead_capture_form",e}({}),iE=function(e){return e.BEFORE_VIDEO="before_video",e.DURING_VIDEO="during_video",e.AFTER_VIDEO="after_video",e}({}),oE=function(e){return e.OPENED="access_gate_opened",e.CLOSED="access_gate_closed",e.ERROR="access_gate_error",e}({});const aE={[rE.LEAD_CAPTURE_FORM]:[Jm.main,Jm.privateUnlocked]};Tf.REMOTE_ACCESS_GATE;const sE=(e,t)=>{const n=t.vimeo_url;let r={lc_param_session_id:t.request.session};return t.video.unlisted_hash&&(r.lc_param_unlisted_hash=t.video.unlisted_hash),t.request.hashed_password&&(r.lc_param_password=t.request.hashed_password),me(`https://${n}${e}`,r)},lE=(e,t,n=null)=>e===rE.LEAD_CAPTURE_FORM?{purpose:e,url:sE(`/leadcapture/video/${t.video.id}/form`,t),title:"Lead Capture Form",gateId:n}:{purpose:rE.EMPTY,url:"",title:"",gateId:n},cE=(e,t)=>{if(e===rE.LEAD_CAPTURE_FORM){let e=(e=>"lc_"+e.video.id)(t),n=nE(e);return n||(e=(e=>{const{id:t,unlisted_hash:n}=e.video;return"lc_"+((e,t=0)=>{let n=3735928559^t,r=1103547991^t;for(let t,i=0;i<e.length;i++)t=e.charCodeAt(i),n=Math.imul(n^t,2654435761),r=Math.imul(r^t,1597334677);return n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(n^n>>>13,3266489909),(4294967296*(2097151&r)+(n>>>0)).toString()})(n?`${t}:${n}`:`${t}`)})(t),n=nE(e),n??"")}return""},uE=(e,t)=>!!cE(e,t);function dE(e){var t;const n=cE(rE.LEAD_CAPTURE_FORM,e);var r,i;return null!=(t=e.user)&&t.lead?{leadUuid:(null==(r=e.user.lead)?void 0:r.id)||n,contentType:null==(i=e.user.lead)?void 0:i.type}:n?{leadUuid:n}:{}}let _E=function(e){return e.NOT_LOGGED_IN="not_logged_in",e.LOGGED_IN_STORAGE_ACCESS_REQUIRED="logged_in_storage_access_required",e.STORAGE_ACCESS_GRANTED_LOGIN_UNCONFIRMED="storage_access_granted_login_unconfirmed",e.ALL_ACCESS_ATTEMPTS_FAILED="all_access_attempts_failed",e.LOGGED_IN_NO_ACCESS="logged_in_no_access",e.LOGGED_IN_HAS_ACCESS="logged_in_has_access",e}({}),hE=function(e){return e.PRIVATE_LOCKED="private-locked",e.LOGIN_LIKE="login-like",e.LOGIN_WATCH_LATER="login-watch-later",e.PURCHASE="purchase",e.PRIVATE="private",e}({});const pE={storageAccessRequired:_g,requestCookieAccess:e=>new Promise((t,n)=>document.requestStorageAccess().then(()=>{dg("User granted storage access"),t(!0)},()=>{e(),dg("User storage access denied:"),t(!1)}).catch(n))};const mE=["label"],fE="HOTSPOT",vE="POLL",gE="QUIZ",EE="HOTSPOT_POLL",bE="HOTSPOT_QUIZ",yE="POLL_QUIZ",TE="HOTSPOT_POLL_QUIZ",SE={[fE]:"Hotspot",[vE]:"Poll",[gE]:"Quiz",[EE]:"Hotspots & Polls",[bE]:"Hotspots & Quizzes",[yE]:"Polls & Quizzes",[TE]:"Hotspots, Polls, & Quizzes"};function CE(e,t,n){return e/t*n}function AE({hotspots:e=[],polls:t=[],quizzes:n=[],fragment:r,progressBarWidth:i,useLegacyAriaLabel:o=!0}){const a=function(e,t,n){return[].concat(f(e.map(e=>({id:e.hotspotId,label:SE[fE],start:e.start,visibleLabel:e.name,ariaLabel:e.name,name:e.name}))),f(t.map(e=>({id:e.pollId,label:SE[vE],name:e.questionText,visibleLabel:e.questionText,ariaLabel:e.questionText,start:e.start}))),f(n.map(e=>({id:e.quizId,label:SE[gE],name:e.questionText,visibleLabel:e.questionText,ariaLabel:e.questionText,start:e.start}))))}(e,t,n);let s,l=1,c=[],u=[],d=[];return a.sort((e,t)=>e.start-t.start).reduce((e,t)=>{let{label:n}=t,a=m(t,mE);if(!(r.startTime<=a.start&&a.start<=r.endTime))return e;if(n===SE[fE]?a.visibleLabel="Hotspot: "+a.name:n===SE[vE]?a.visibleLabel="Poll: "+a.name:n===SE[gE]&&(a.visibleLabel="Quiz: "+a.name),a.ariaLabel=a.visibleLabel,a.leftPositionInProgressBar=function(e){return(e-r.startTime)/r.duration*100}(a.start),n===SE[vE]?c.push(a.name):n===SE[fE]?u.push(a.name):n===SE[gE]&&d.push(a.name),!e.length)return function(e,t,n){return e.push(t),s=n,e}(e,a,n);const _=e.length-1,h=function(e,t,n,r){const i=CE(e,n,r),o=CE(t,n,r);return Math.floor(o-i)}(e[_].start-r.startTime,a.start-r.startTime,r.duration,i);if(!isNaN(h)&&h<=5)if(l+=1,n!==s)!function(e,t){const n=function(e,t,n){return e&&t&&n?SE[TE]:e&&t?SE[EE]:e&&n?SE[bE]:t&&n?SE[yE]:e?SE[fE]:t?SE[vE]:n?SE[gE]:""}(u.length>0,c.length>0,d.length>0);e[t].visibleLabel=n,e[t].name=n;const r=function({hotspotNames:e,pollNames:t,quizNames:n,useLegacyAriaLabel:r}){const i=[];return r?e.length&&t.length&&i.push(e.length+" hotspots: "+e.join(", ")+"; "+t.length+" polls: "+t.join(", ")):(e.length>1?i.push(e.length+" hotspots: "+e.join(", ")):1===e.length&&i.push("1 hotspot: "+e.join(", ")),t.length>1?i.push(t.length+" polls: "+t.join(", ")):1===t.length&&i.push("1 poll: "+t.join(", ")),n.length>1?i.push(n.length+" quizzes: "+n.join(", ")):1===n.length&&i.push("1 quiz: "+n.join(", "))),i}({hotspotNames:u,pollNames:c,quizNames:d,useLegacyAriaLabel:o});e[t].ariaLabel=r.join("; ")}(e,_);else{const t={markers:e,lastItemIndex:_,item:a,itemsPerMarker:l};n===SE[fE]?LE(p(p({},t),{},{type:fE})):n===SE[vE]?LE(p(p({},t),{},{type:vE})):n===SE[gE]&&LE(p(p({},t),{},{type:gE}))}else isNaN(h)||function(e,t,n){l=1,e.push(t),s=n,c=[],u=[],d=[],n===SE[vE]?c.push(t.name):n===SE[fE]?u.push(t.name):n===SE[gE]&&d.push(t.name)}(e,a,n);return e},[])}function LE({markers:e,lastItemIndex:t,item:n,itemsPerMarker:r,type:i}){i===fE?(e[t].visibleLabel=r+" hotspots",e[t].name+=`, ${n.name}`,e[t].ariaLabel=r+" hotspots: "+e[t].name):i===vE?(e[t].visibleLabel=r+" polls",e[t].name+=`, ${n.name}`,e[t].ariaLabel=r+" polls: "+e[t].name):i===gE&&(e[t].visibleLabel=r+" quizzes",e[t].name+=`, ${n.name}`,e[t].ariaLabel=r+" quizzes: "+e[t].name)}function IE(e=""){try{const t=null==e?void 0:e.split(".")[1];return(e=>Math.trunc(Date.now()/1e3)-e)(JSON.parse(atob(t)).exp)>=0}catch(e){throw new Error("Failed to parse PHP token.")}}const PE=e=>e?e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""):"",RE=(e,t)=>!e.isLive()||t;let wE=function(e){return e.XXS="xxs",e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg",e.XL="xl",e.XXL="xxl",e}({}),OE=function(e){return e.MD="md",e.SM="sm",e.XS="xs",e.CUSTOM="custom",e}({}),kE=function(e){return e.PRIMARY="primary",e.ALTERNATIVE="alternative",e.CUSTOM="custom",e}({}),DE=function(e){return e.LEFT="left",e.RIGHT="right",e}({}),NE=function(e){return e.RESET="reset",e.BUTTON="button",e.SUBMIT="submit",e}({}),ME=function(e){return e.SM="sm",e.MD="md",e.LG="lg",e.XL="xl",e}({}),xE=function(e){return e.NORMAL="normal",e.BOLD="bold",e[e.NUM_500=500]="NUM_500",e}({}),VE=function(e){return e.CUSTOM="custom",e.WHITE="white",e}({}),BE=function(e){return e.SM="sm",e.LG="lg",e}({}),UE=function(e){return e.FULL_CONTROLS="full-controls",e.VOLUME_SLIDER="volume-slider",e.PROGRESS_BAR="progress-bar",e.SIDE_DOCK_MENU="side-dock-menu",e}({});const FE=(e,t,n,r={})=>{switch(e){case UE.FULL_CONTROLS:case UE.VOLUME_SLIDER:return t!==Iv.MINI&&t!==Iv.TINY&&n!==wE.XXS;case UE.PROGRESS_BAR:return!!r.small_player_v2||t!==Iv.TINY;case UE.SIDE_DOCK_MENU:return t===Iv.MINI||t===Iv.TINY||n===wE.XXS||n===wE.XS;default:return!1}};function HE(e){return 1===e}function WE(e,t=new Date){return e.getTime()-t.getTime()}function GE(){let e=-1;if(void 0!==window.performance&&"function"==typeof window.performance.getEntriesByType){const t=window.performance.getEntriesByType("resource");if(t){const n=t.filter(e=>null!==e.name.split("?")[0].match(/\.m4s$|\.ts$|\.mp4$/));e=n.map(e=>e.responseStart-e.connectStart).reduce((e,t)=>e+t,0)/(n.length||1)}}return Fm(e,2)}const jE=[e=>{var t;if(!Q.mse||!e.video.live_event||e.video.ecdn)return null;if(1===(null==(t=e.request.flags)?void 0:t.hls_js_live))return{test:"hls_js_live",group:"variant"};const n=(()=>{const e=100*Math.random();return e<0?e<0?"variant":"control":null})();return n?{test:"hls_js_live",group:n}:null}],YE=250;function $E(e="translateX(-125%)",t="translateX(0)"){const n="200ms",r={transform:e,opacity:0},i={transform:t,opacity:1};return{enter:p({visibility:"hidden"},r),enterActive:p({transition:n,visibility:"visible"},i),enterDone:{transform:t},exit:p({},i),exitActive:p(p({},r),{},{transition:n}),exitDone:{visibility:"hidden"}}}const qE="CAPTIONS_RESET",zE="CAPTIONS_SET_FONT_SIZE",KE="CAPTIONS_SET_FONT_FAMILY",XE="CAPTIONS_SET_FONT_OPACITY",ZE="CAPTIONS_SET_COLOR",JE="CAPTIONS_SET_BACKGROUND_OPACITY",QE="CAPTIONS_SET_BACKGROUND_COLOR",eb="CAPTIONS_SET_WINDOW_OPACITY",tb="CAPTIONS_SET_WINDOW_COLOR",nb="CAPTIONS_SET_EDGE_STYLE",rb=e=>({type:zE,payload:e}),ib=e=>({type:KE,payload:e}),ob=e=>({type:XE,payload:e}),ab=e=>({type:ZE,payload:e}),sb=e=>({type:JE,payload:e}),lb=e=>({type:QE,payload:e}),cb=e=>({type:eb,payload:e}),ub=e=>({type:tb,payload:e}),db=e=>({type:nb,payload:e}),_b=()=>({bgColor:{items:[{id:"white",label:"White"},{id:"yellow",label:"Yellow"},{id:"green",label:"Green"},{id:"cyan",label:"Cyan"},{id:"blue",label:"Blue"},{id:"magenta",label:"Magenta"},{id:"red",label:"Red"},{id:"black",label:"Black"}],id:"bgColor",cookie:"bg_color",title:"Color",dispatch:lb},color:{items:[{id:"#fff",label:"White"},{id:"#ff0",label:"Yellow"},{id:"#0f0",label:"Green"},{id:"#0ff",label:"Cyan"},{id:"#00f",label:"Blue"},{id:"#f0f",label:"Magenta"},{id:"#f00",label:"Red"},{id:"#000",label:"Black"}],id:"color",cookie:"color",title:"Color",dispatch:ab},fontSize:{items:[{id:"0.5",label:"50%"},{id:"1",label:"100%"},{id:"1.5",label:"150%"},{id:"2",label:"200%"}],id:"fontSize",cookie:"font_size",title:"Size",dispatch:rb},fontFamily:{items:[{id:"monospace_serif",value:'"Courier New", Courier, monospace',label:"Monospace Serif"},{id:"proportional_serif",value:"Georgia, Times, serif",label:"Proportional Serif"},{id:"monospace_sans_serif",value:'Monaco, "Lucida Console", monospace',label:"Monospace Sans-Serif"},{id:"proportional_sans_serif",value:'"Helvetica Neue", Helvetica, Arial, sans-serif',label:"Proportional Sans-Serif"},{id:"casual",value:'"Comic Sans MS", sans-serif',label:"Casual"},{id:"cursive",value:'"Apple Chancery", "Lucida Handwriting”, cursive',label:"Cursive"},{id:"small_capitals",value:'"Helvetica Neue", Helvetica, Arial, sans-serif',label:"Small Capitals"}],id:"fontFamily",cookie:"font_family",title:"Family",dispatch:ib},fontOpacity:{items:[{id:"25",label:"25%"},{id:"50",label:"50%"},{id:"75",label:"75%"},{id:"100",label:"100%"}],id:"fontOpacity",cookie:"font_opacity",title:"Opacity",dispatch:ob},edgeStyle:{items:[{id:"none",label:"None"},{id:"shadow",label:"Drop Shadow"},{id:"raised",label:"Raised"},{id:"depressed",label:"Depressed"},{id:"outline",label:"Outline"}],id:"edgeStyle",cookie:"edge",title:"Edge style",dispatch:db},bgOpacity:{items:[{id:"0",label:"0%"},{id:"25",label:"25%"},{id:"50",label:"50%"},{id:"75",label:"75%"},{id:"100",label:"100%"}],id:"bgOpacity",cookie:"bg_opacity",title:"Opacity",dispatch:sb},windowColor:{items:[{id:"#fff",label:"White"},{id:"#ff0",label:"Yellow"},{id:"#0f0",label:"Green"},{id:"#0ff",label:"Cyan"},{id:"#00f",label:"Blue"},{id:"#f0f",label:"Magenta"},{id:"#f00",label:"Red"},{id:"#000",label:"Black"}],id:"windowColor",cookie:"window_color",title:"Color",dispatch:ub},windowOpacity:{items:[{id:"0",label:"0%"},{id:"25",label:"25%"},{id:"50",label:"50%"},{id:"75",label:"75%"},{id:"100",label:"100%"}],id:"windowOpacity",cookie:"window_opacity",title:"Opacity",dispatch:cb}}),hb=!!window.DD_RUM&&"function"==typeof window.DD_RUM.setViewContextProperty&&"function"==typeof window.DD_RUM.setGlobalContextProperty&&"function"==typeof window.DD_RUM.addError&&"function"==typeof window.DD_RUM.addAction;var pb=function(){return tt.Date.now()},mb=Math.max,fb=Math.min;function vb(e,t,n){var r,i,o,a,s,l,c=0,u=!1,d=!1,_=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var n=r,o=i;return r=i=void 0,c=t,a=e.apply(o,n)}function p(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=o}function m(){var e=pb();if(p(e))return f(e);s=setTimeout(m,function(e){var n=t-(e-l);return d?fb(n,o-(e-c)):n}(e))}function f(e){return s=void 0,_&&r?h(e):(r=i=void 0,a)}function v(){var e=pb(),n=p(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return function(e){return c=e,s=setTimeout(m,t),u?h(e):a}(l);if(d)return clearTimeout(s),s=setTimeout(m,t),h(l)}return void 0===s&&(s=setTimeout(m,t)),a}return t=Fc(t)||0,pt(n)&&(u=!!n.leading,o=(d="maxWait"in n)?mb(Fc(n.maxWait)||0,t):o,_="trailing"in n?!!n.trailing:_),v.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},v.flush=function(){return void 0===s?a:f(pb())},v}function gb(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return pt(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),vb(e,t,{leading:r,maxWait:t,trailing:i})}const Eb=[25,50,75,90,95,100];function bb(e){let t,n=null,r=null,i=null,o=null,a=0,s=0,l=[],c=!1,u=!1,d=!1,_=0,h=0,m=le(),v=!0,g=!0,E=[],b=[],y=0,T=jg(e.backbone);function S(){if(P(),!c)if(c=!0,e.backbone.isLive()){const t=({currentTime:n})=>{0!==n&&(C(),e.events.off(Pi.TIME_UPDATE,t))};e.events.on(Pi.TIME_UPDATE,t)}else C()}function C(){w(),e.bigPicture.sendEvent(yg.PLAY_VIDEO,O(yg.PLAY_VIDEO)),o=i}function A(){e.backbone.seeking||(c=!1,I(),e.bigPicture.sendEvent(yg.FINISH_VIDEO,O(yg.FINISH_VIDEO)),g=!1,R())}function L(){c&&u&&!d&&(u=!1,w(),o=i,P())}function I(){let t=_;(e.backbone.seeking||d)&&(t=h),i=Fm(t,3),a&&(y+=s,function(){var t;const n=Jg(e.config.video.duration);if(e.backbone.isLive()||0===n)return;b=[];const r=Math.round(y/n*100);b=Eb.filter(e=>r>=e&&!E.includes(e)),(t=E).push.apply(t,f(b))}(),e.bigPicture.sendEvent(yg.WATCH_VIDEO_HEARTBEAT,p(p({},O(yg.WATCH_VIDEO_HEARTBEAT)),{},{log_view_time:a,log_view_time_excluding_repeats:Math.min(s,a),previous_log_end_time:o,is_first_log:v,completion_quantiles:b}),{[Tg.VIDEO]:{audio_track_lang:T.audioTrackLang,audio_track_provenance:T.audioTrackProvenance,audio_track_type:T.audioTrackType,text_track_lang:T.textTrackLang,text_track_provenance:T.textTrackProvenance,text_track_type:T.textTrackType}}),a=0,s=0,v=!1,o=i,T=jg(e.backbone))}function P(){t||(t=setInterval(I,1e4))}function R(){clearInterval(t),t=null}function w(){const t=Fm(sv(e.currentTime),3);n?n++:n=1,r=t,i=t,a=0,s=0,h=t,m=le()}function O(t){let o;switch(t){case yg.FINISH_VIDEO:o={session_segment_id:n,segment_start_time:r,log_end_time:i,is_first_log:g};break;case yg.PLAY_VIDEO:o={session_segment_id:n,segment_start_time:r,log_end_time:i,video_duration_ms:Jg(e.config.video.duration)};break;default:o={session_segment_id:n,segment_start_time:r,log_end_time:i}}return o}e.events.on(Pi.PLAY,S),e.events.on(Pi.PAUSE,function(){e.backbone.ended||e.backbone.seeking||d||(I(),R())}),e.events.on(Pi.SEEKING,function(){c&&!u&&(u=!0,I(),R())}),e.events.on(Pi.SEEKED,gb(L,750)),e.events.on(Pi.ENDED,A),e.events.on(Pi.TIME_UPDATE,function(){if(e.backbone.seeking)return;const t=sv(Fm(e.currentTime,3)),n=d?h:t;let i=Math.round(n-h);const o=le();if(i=function(t,n,r){const i=e.backbone.playbackRate||1,o=m||r,a=Math.round((r-o)*i),s=Math.max(a,0),l=Jg(e.config.video.duration);return!e.backbone.isLive()&&l&&n>l||s&&t>1.3*s?Math.min(t,s):t}(i,n,o),i<=0)return;_=n;const u=[r,n];if(a+=i,Q.iOS&&e.backbone.isLive()){s+=Fm(Zg(l,u),3);const e=function(e,t){const[n,r]=t;return e.map((e,t)=>{const[i,o]=e;return n>=i&&n<=o||r>=i&&r<=o||i<=n&&o>=r||n<=i&&r>=o?t:null}).filter(e=>null!==e)}(l,u);l=function(e,t,n){const[r,i]=t;let o;if(n.length)o=Math.min.apply(Math,f(n));else{const t=e.findIndex(e=>r<e[0]);o=-1===t?e.length:t}const a=f(e),s=[Math.min.apply(Math,[r].concat(f(n.map(t=>e[t][0])))),Math.max.apply(Math,[i].concat(f(n.map(t=>e[t][1]))))];return a.splice(o,n.length,s),a}(l,u,e)}else{const t=e.backbone.played;s+=Fm(Zg(l,u),3),l=function(e){const t=e.length,n=[];for(let r=0;r<t;r++){const t=e.start(r),i=e.end(r);n.push([sv(Fm(t,3)),sv(Fm(i,3))])}return n}(t)}h=n,m=o,e.config.embed.loop&&function(t){if(c&&t>=Jg(e.config.video.duration)-300){A();const t=()=>{e.currentTime>=0&&(e.events.off(Pi.TIME_UPDATE,t),S())};e.events.on(Pi.TIME_UPDATE,t)}}(_)}),e.events.on(fh,function(){d=!0}),e.events.on(vh,function(){d=!1,u&&L()}),e.events.on(ki.AUDIO_TRACK_CHANGED,function(){I()}),e.events.on(Th,function(){I()}),e.events.on(ap,t=>{t&&(R(),n=null,r=null,i=null,o=null,a=0,s=0,l=[],c=!1,u=!1,d=!1,_=0,h=0,m=le(),g=!0,v=!0,E=[],b=[],y=0,T=jg(e.backbone))}),window.addEventListener("pagehide",function(){I()})}const yb={product_analytics_context:{product:"analysis",feature:"interactive"}};class Tb{constructor(e){d(this,"_overlayOpenTime",void 0),d(this,"_player",void 0),this._player=e,this._overlayOpenTime=new Map}_sendEvent(e,t={}){this._player.bigPicture.sendEvent(e,t,yb)}sendReachTimeAction({timeActionId:e}){this._sendEvent(yg.REACH_TIME_ACTION,{time_action_id:e})}sendViewHotspot({hotspotId:e}){this._sendEvent(yg.VIEW_HOTSPOT,{hotspot_id:e})}sendClickHotspot({hotspotId:e,clickActionType:t,clickoutId:n,overlayId:r}){this._sendEvent(yg.CLICK_HOTSPOT,{hotspot_id:e,click_action_type:t,clickout_id:n??null,overlay_id:r??null})}sendViewOverlay({overlayId:e}){this._overlayOpenTime.set(e,le()),this._sendEvent(yg.VIEW_OVERLAY,{overlay_id:e})}sendCloseOverlay({overlayId:e}){const t=this._overlayOpenTime.get(e),n=le()-t;this._sendEvent(yg.CLOSE_OVERLAY,{overlay_id:e,dwell_time:n})}sendClickOverlay({overlayId:e,clickActionType:t,clickoutId:n}){this._sendEvent(yg.CLICK_OVERLAY,{overlay_id:e,click_action_type:t,clickout_id:n??null})}sendViewPoll({pollId:e}){this._sendEvent(yg.VIEW_POLL,{poll_id:e})}sendVotePoll({pollId:e,pollOptionId:t,isPollOptionCorrect:n}){this._sendEvent(yg.VOTE_POLL,{poll_id:e,poll_option_id:t,is_poll_option_correct:n??null})}}function Sb(e){return Math.random()<=e}function Cb(e,t,n=.1){Sb(n)&&((e,t={})=>{if(hb&&e){const n=Object.assign({},t,{manually_captured:1});window.DD_RUM.addError(e,n)}})(e,t)}window.addEventListener("unhandledrejection",e=>{e.preventDefault(),e.reason&&Cb(e.reason,{unhandled_rejection:1})});var Ab={setUp:function(e,t=Lv.VimeoPlayer){((e,t=Lv.VimeoPlayer)=>{if(hb){var n,r,i;const o={js_modules:!1,version_js:e.request.build.js,version_backend:e.request.build.backend,visibility_state:document.visibilityState,vimeo_session:e.request.session,locale:e.request.lang,product:Og(e),video_embed_permission:e.video.embed_permission,video_privacy:e.video.privacy,live_session_id:null==(n=e.video.live_event)?void 0:n.id,rawUserAgent:navigator.userAgent,background_mode:Number(1===(null==(r=e.embed)||null==(r=r.settings)?void 0:r.background)),player_name:t,owner_account_type:null==(i=e.video.owner)?void 0:i.account_type};if(e.request.ab_tests)for(const t in e.request.ab_tests){const n=e.request.ab_tests[t];o[`${t}_test`]=1,o[`${t}_group`]=n.group;for(const e in n.data)o[`${t}_data_${e}`]=n.data[e]}e.user.logged_in&&(o.userId=e.user.id);for(let e in o)window.DD_RUM.setGlobalContextProperty(e,o[e]);if(t){const e=`has${t}`;window.DD_RUM.setViewContextProperty(e,1)}}})(e,t)},captureException:Cb,captureMessage:function(e){},captureBreadcrumb:function(e){(e=>{hb&&window.DD_RUM.addAction(e)})(e)}};let Lb;function Ib({events:e}){let t=null,n=null,r=null,i=null,o=null,a={video:{},request:{},embed:{}};function s(){return n&&n-6e4<=Date.now()}function l(e){const t=Date.now()+1e3*e;return o=setTimeout(()=>{"onLine"in navigator&&!navigator.onLine||i||(i=u().catch(Ab.captureException))},1e3*e-6e4-5e3),t}function c(e,r={}){var i,s;clearTimeout(o);const c=t;if(isNaN(e)&&"string"!=typeof e){t=e,n=l(t.request.expires);let r=new URL(window.location.href);const i=r.searchParams.get("referrer"),o=r.searchParams.get("player_id");return i&&(t.request.referrer=i,r.searchParams.delete("referrer")),o&&(t.embed.player_id=o,r.searchParams.delete("player_id")),Promise.resolve({old:c,loaded:t})}Date.now(),a=fd(a,t);const u=a.request.referrer;return u&&(r.referrer=u),r.s=a.request.signature,r.expires=a.request.expires,r.time=a.request.timestamp,Lb||(Lb=Vm(e)),We(Bm(Lb||(null!=(i=t)&&i.player_url?`https://${null==(s=t)?void 0:s.player_url}`:""),e,r),{withCredentials:!0,throwHttpErrors:!1}).json().then(e=>(t=e,t.view!==Jm.error&&(n=l(t.request.expires),a.request.session&&t.video.id===a.video.id&&(t.request.session=a.request.session),u&&(t.request.referrer=u),a.embed.player_id&&(t.embed.player_id=a.embed.player_id),a.embed.on_site&&(t.embed.on_site=1,t.embed.context=a.embed.context)),Date.now(),{old:c,loaded:t})).catch(e=>{Ab.captureException(e)})}function u(){return clearTimeout(o),Date.now(),We(t.request.config_refresh_url,{withCredentials:!0,retry:3}).json().then(r=>{const o=t.request.referrer;return t.request=r,o&&(t.request.referrer=o),n=l(t.request.expires),Date.now(),i=null,e.fire(hp),t.request}).catch(t=>{const n=Mf();throw e.fire(Y_,n.type,n),t})}return window.addEventListener("online",()=>{s()&&(i=u().catch(Ab.captureException))}),e.on(Y_,e=>{i||"media-url-expired"!==e||(i=u().catch(Ab.captureException))}),{get isExpired(){return s()},load:(e,t)=>c(e,t),reload(){var e;return null!=(e=t)&&e.video.id?c(t.video.id):Promise.reject(new Error("No config loaded."))},toJSON:()=>t,get config(){return t},set config(e){t=e},verify:()=>s()?(i||(i=u()),i):Promise.resolve(t.request),refreshAssetUrls:()=>u(),get _video(){return r},set _video(e){r=e}}}var Pb,Rb=0,wb=0,Ob={},kb={};function Db(e,t,n){return"_root"==t?n:e!==n?function(e){return Pb||(Pb=e.matches?e.matches:e.webkitMatchesSelector?e.webkitMatchesSelector:e.mozMatchesSelector?e.mozMatchesSelector:e.msMatchesSelector?e.msMatchesSelector:e.oMatchesSelector?e.oMatchesSelector:Vb.matchesSelector)}(e).call(e,t)?e:e.parentNode?(Rb++,Db(e.parentNode,t,n)):void 0:void 0}function Nb(e,t,n,r){Ob[e.id]||(Ob[e.id]={}),Ob[e.id][t]||(Ob[e.id][t]={}),Ob[e.id][t][n]||(Ob[e.id][t][n]=[]),Ob[e.id][t][n].push(r)}function Mb(e,t,n,r){if(Ob[e.id])if(t)if(r||n)if(r){if(Ob[e.id][t][n])for(var i=0;i<Ob[e.id][t][n].length;i++)if(Ob[e.id][t][n][i]===r){Ob[e.id][t][n].splice(i,1);break}}else delete Ob[e.id][t][n];else Ob[e.id][t]={};else for(var o in Ob[e.id])Ob[e.id].hasOwnProperty(o)&&(Ob[e.id][o]={})}function xb(e,t,n,r){if(this.element){e instanceof Array||(e=[e]),n||"function"!=typeof t||(n=t,t="_root");var i,o=this.id;for(i=0;i<e.length;i++)r?Mb(this,e[i],t,n):(Ob[o]&&Ob[o][e[i]]||Vb.addEvent(this,e[i],a(e[i])),Nb(this,e[i],t,n));return this}function a(e){return function(t){!function(e,t,n){if(Ob[e][n]){var r,i,o=t.target||t.srcElement,a={},s=0,l=0;for(r in Rb=0,Ob[e][n])Ob[e][n].hasOwnProperty(r)&&(i=Db(o,r,kb[e].element))&&Vb.matchesEvent(n,kb[e].element,i,"_root"==r,t)&&(Rb++,Ob[e][n][r].match=i,a[Rb]=Ob[e][n][r]);for(t.stopPropagation=function(){t.cancelBubble=!0},s=0;s<=Rb;s++)if(a[s])for(l=0;l<a[s].length;l++){if(!1===a[s][l].call(a[s].match,t))return void Vb.cancel(t);if(t.cancelBubble)return}}}(o,t,e)}}}function Vb(e,t){if(!(this instanceof Vb)){for(var n in kb)if(kb[n].element===e)return kb[n];return wb++,kb[wb]=new Vb(e,wb),kb[wb]}this.element=e,this.id=t}Vb.prototype.on=function(e,t,n){return xb.call(this,e,t,n)},Vb.prototype.off=function(e,t,n){return xb.call(this,e,t,n,!0)},Vb.matchesSelector=function(){},Vb.cancel=function(e){e.preventDefault(),e.stopPropagation()},Vb.addEvent=function(e,t,n){var r="blur"==t||"focus"==t,i=Q.passiveEvents?{capture:r,passive:!1}:r;e.element.addEventListener(t,n,i)},Vb.matchesEvent=function(){return!0};const Bb=Vb.addEvent,Ub=void 0===window.PointerEvent&&void 0!==window.MSPointerEvent,Fb={pointerdown:"MSPointerDown",pointerup:"MSPointerUp",pointercancel:"MSPointerCancel",pointermove:"MSPointerMove",pointerenter:"MSPointerEnter",pointerleave:"MSPointerLeave",pointerover:"MSPointerOver",pointerout:"MSPointerOut"},Hb="onmspointerenter"in document,Wb="onmspointerleave"in document;Vb.addEvent=function(e,t,n){Ub&&Fb[t]&&(t=Fb[t]),"transitionend"===t&&(Bb(e,"webkitTransitionEnd",n),Bb(e,"otransitionend",n)),"mouseenter"===t&&(t="mouseover"),"mouseleave"===t&&(t="mouseout"),"MSPointerEnter"!==t||Hb||(t="MSPointerOver"),"MSPointerLeave"!==t||Wb||(t="MSPointerOut"),Bb(e,t,n)},Vb.matchesEvent=function(e,t,n,r,i){return!("mouseenter"===e||"mouseleave"===e||!Hb&&"MSPointerEnter"===e||!Wb&&"MSPointerLeave"===e)||function(e,t,n,r){return!r.relatedTarget||(!n||e===t)&&t!==r.relatedTarget&&!t.contains(r.relatedTarget)}(t,n,r,i)};const Gb=(e,t,n)=>{let r;try{r=new URL(e)}catch(e){return null}const i=Array.isArray(t)?t:[t],o=i.map(function(e){return`${sf}${e}`}).concat(i),a=new URLSearchParams(r.hash.substring(1));let s=null;return o.some(e=>{const t=`${e}_${n}`,r=a.get(t)||a.get(e);return!!r&&(s=lv(r),!0)}),s},jb=(e,t,n)=>-1===e.indexOf("#")?null:Gb(e,t,n);function Yb(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}const $b=zb(function(e){return new Promise((t,n)=>{Xb(e)?t():(e.events.once(Pi.LOADED_DATA,()=>{Xb(e)&&t()}),e.events.once(Pi.PLAYING,()=>{n("Video started playing before start time thumbnail could be shown")}))})});function qb(){}function zb(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}const Kb=zb(function(e){return function(){var t=function(){if(Zb(e))return function(e){if(e&&e.then)return e.then(qb)}(function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(function(){return Yb(e.ready(),function(){return Yb(e.inView(),function(){return e.backbone.preload="auto",Yb($b(e),function(){!function(e){var t;null==(t=e.backbone.element)||null==(t=t.classList)||t.remove("invisible"),e.events.fire(G_)}(e)})})})},function(e){}))}();if(t&&t.then)return t.then(qb)}()});function Xb(e){return e.currentTime===e.startTime&&e.backbone.readyState>=Rv.HAVE_CURRENT_DATA}function Zb(e){var t;const n=1===(null==e||null==(t=e.config)||null==(t=t.embed)?void 0:t.autoplay);return Q.videoContentPreload&&e.segmentedPlaybackEnabled&&!n}function Jb(e){return!!Zb(e)&&e.backbone.readyState<Rv.HAVE_CURRENT_DATA}const Qb=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(e){const{events:t}=e;return new Promise(n=>{t.on(hm,function(r){const{backbone:i}=e,{startTime:o,endTime:a}=function(e,t){const{video:n,embed:r}=t.config,i=n.id,o=n.duration,a=r.chapters,s=((e,t)=>jb(e,of,t))(e,i);let l,c;return s?(({startTime:l,endTime:c}=ty(s,a)),iy(t,s)):(l=((e,t)=>jb(e,af,t))(e,i),c=((e,t)=>jb(e,"end",t))(e,i)),({startTime:l,endTime:c}=ry(l,c,o)),{startTime:l,endTime:c}}(r,e);n({startTime:o,endTime:a}),null!==o&&i.currentTime!==o&&t.fire(D_,o,o/i.duration)})})});function ey(e){const{video:t,embed:n}=e.config,r=e.progressController.canSeekForward;let i;if((null==t||!t.live_event)&&r){let r=null,i=null;const a=((e,t)=>Gb(e,of,t))(document.location.href,t.id);a?(({startTime:r,endTime:i}=ty(a,n.chapters)),iy(e,a)):({startTime:r,endTime:i}=function(e,t){const n=document.location.href;let r=((e,t)=>Gb(e,af,t))(n,e),i=((e,t)=>Gb(e,"end",t))(n,e);var o;return null!==r&&ny(null==(o=document)||null==(o=o.location)?void 0:o.hash),({startTime:r,endTime:i}=ry(r,i,t)),{startTime:r,endTime:i}}(t.id,t.duration)),o(r,i),null===r&&null===i&&function(e,t){e&&e.then||(e=Promise.resolve(e)),t&&e.then(t)}(Qb(e),function({startTime:e,endTime:t}){o(e,t)})}function o(r,o){null!==r&&(e.startTime=Mm(r,0,t.duration)),null!==o&&(e.endTime=o,i=function({player:e,startTime:t,endTime:n,loop:r=!1}){let i=!0,o=!1;const{events:a}=e;(function(){const r=n-t,i={duration:r,endTime:n,startTime:t},o={get currentFragment(){return i},firstFragmentDuration:r,checkForNewFragment:Cv,reset:Cv,hibernate:Cv,wake:Cv,getFragmentFromTime:()=>i},a=function(e,t){return[1e3*e,1e3*t]}(t,n);e.overrideFragmentsHandler(o,a)})(),Kb(e),a.on(Pi.TIME_UPDATE,s),a.on(uh,c),a.on(ap,u),a.on(Pi.SEEKED,d),a.once(iu,function(){i&&e.bigPicture.sendEvent(yg.PLAY_SEGMENT,{start_time:t,end_time:n})});return()=>{i=!1,a.off(Pi.TIME_UPDATE,s),a.off(uh,c),a.off(ap,u),a.off(Pi.SEEKED,d),e.restoreLastFragmentsHandler()};function s({currentTime:i}){i>=n&&(r?l(t):(e.backbone.pause(),a.fire(Pi.ENDED)))}function l(t){o=!1,e.backbone.currentTime=t}function c(){e.backbone&&(e.backbone.currentTime>=n||e.backbone.currentTime<t)&&l(t)}function u(t){t&&(e.startTime=null,e.endTime=null)}function d(){i&&o&&e.bigPicture.sendEvent(yg.SEEK_INSIDE_SEGMENT,{start_time:t,end_time:n}),o=!0}}({player:e,startTime:r??0,endTime:o,loop:!!n.loop}),e.ready().then(()=>{e.bigPicture.sendEvent(yg.EMBED_SEGMENT,{start_time:r,end_time:o})}).catch(e=>{}))}return{clearSegmentedPlayback:()=>null==i?void 0:i()}}function ty(e,t){const n=null==t?void 0:t.find(t=>t.id===e);let r={startTime:null,endTime:null};return n&&(r={startTime:n.timecode,endTime:null}),r}function ny(e){var t;-1!==e.indexOf("at=")&&null!=(t=history)&&t.replaceState&&history.replaceState("","",window.location.pathname+window.location.search)}function ry(e,t,n){let r=e,i=t;return r&&(r=Math.max(r,0)),i&&(i<0&&(i=Math.max(0,n+i)),i=Math.min(i,n),r?r>i&&(r=null,i=null):r=0),{startTime:r,endTime:i}}function iy(e,t){e.events.once(iu,()=>{e.bigPicture.sendEvent(yg.CHAPTER_PLAYED,{chapter_id:t})})}function oy(e){const t=!Zb(e);function n(e){if("opacity"===e.propertyName){const e=r();var t;e&&(Vb(e).off("transitionend",n),null==e||null==(t=e.parentNode)||t.removeChild(e))}}function r(){return document.querySelector(".vp-placeholder")}return{hide:function(){if(t){const e=r();e&&(Vb(e).on("transitionend",n),e.classList.add("vp-placeholder-fadeout"))}}}}const ay=["quality","volume","captions","transcript","captions_color","captions_font_family","captions_font_size","captions_font_opacity","captions_bg_color","captions_bg_opacity","captions_edge","captions_window_color","captions_window_opacity","audio_language","audio_kind","qoe_survey_vote","languages_toast"];let sy=null;function ly(e){const t=_b(),n=0!==e.config.request.urls.proxy.indexOf(window.location.origin);let r=0;function i(e){let t=null;try{t=nE("player")}catch(e){}if(!t)return null;t=t.substring(1,t.length-1);const n={};t.split("&").forEach(function(e){e=e.split("="),n[e[0]]=tE(decodeURIComponent(e[1]||""))});const r=[].concat(e),i=r.reduce(function(e,t){if(t in n){const r=parseFloat(n[t]);return e[t]=isNaN(r)||"quality"===t?n[t]:r,e}return e[t]=null,e},{});return 1===r.length?i[e]:i}function o(t,n,r=!0){e.doNotTrackEnabled||(n=tE(n),r&&function(t,n){if(sy){const r={method:"set",key:`sync_${t}`,val:n,session:e.config.request.session};return function(t){sy.then(n=>{const r=Dm(e.config.request.urls.proxy);return n.contentWindow.postMessage(t,r),n}).catch(t=>{Ab.captureException(t,{extra:{proxyUrl:e.config.request.urls.proxy}})})}(r),void function(t){e.config.embed.on_site&&window.postMessage(t,window.location.origin)}(r)}try{window.localStorage.setItem(`sync_${t}`,JSON.stringify(n))}catch(e){}}(t,n),function(t,n){ay.indexOf(t)>=0&&(e.config.request.cookie[t]=n);const r=[];ay.indexOf(t)>=0&&null!==n&&r.push(`${t}=${n}`);const o=i(ay);for(let e in o)e in o&&null!==o[e]&&e!==t&&r.push(`${e}=${o[e]}`);!function(e,t,n,{samesite:r,secure:i}={}){var o=new Date;o.setFullYear(o.getFullYear()+1),o=o.toGMTString();var a=`${e}=${t=tE(t)}`;a+=`;expires=${o}`,a+=";path=/",a+=`;domain=${n}`,i&&(a+=";secure"),r&&(a+=`;samesite=${r}`);try{return document.cookie=a,!0}catch(e){return!1}}("player",`"${r.join("&")}"`,e.config.request.cookie_domain,{secure:!0,samesite:"none"})}(t,n))}function a(t,n){const i=!0;switch(t){case"sync_quality":e.events.fire(__,n,i);break;case"sync_volume":if(e.config.embed.settings.background)break;e.events.fire(s_,n,i);break;case"sync_captions":if(null===n){e.events.fire(y_,i);break}e.events.fire(b_,n,i);break;case"sync_login":!function(t){r>4||(r++,t&&!e.config.user.logged_in?e.events.fire(np):!t&&e.config.user.logged_in&&e.events.fire(ip))}(n);break;case"sync_active":null!==n&&n!==e.config.request.session&&e.config.embed.autopause&&e.events.fire(yp)}}return e.events.on(eh,function(e,t){t||o("quality",e)}),function(){const t=(t,n)=>{e.config.request.cookie.volume=tE(t),n||o("volume",t,!1)};e.events.on(J_,t),e.events.on(Q_,(e,n)=>{e&&t(0,n)})}(),e.events.on(Th,function(t,n){if(t){const r=`${t.language}.${t.kind}`;return e.config.request.cookie.captions=tE(r),void(n||o("captions",e.config.request.cookie.captions))}e.config.request.cookie.captions=null,n||o("captions",null)}),e.events.on(T_,function(t,n){const{dispatch:r,cookie:i}=t;e.store.dispatch(r(n)),o(`captions_${i}`,tE(n))}),e.events.on(S_,function(){e.store.dispatch({type:qE}),Object.keys(t).forEach(e=>{const{cookie:n}=t[e];o(`captions_${n}`,null)})}),e.events.on(rm,function(t,n){if(t)return e.config.request.cookie.transcript=tE(t.language),void(n||o("transcript",e.config.request.cookie.transcript));e.config.request.cookie.transcript=null,n||o("transcript",null)}),function(){const t=["descriptions","main-desc"];e.events.on(B_,function(n,r){e.config.request.cookie.audio_language=null!=n&&n.language?tE(n.language):null,e.config.request.cookie.audio_kind=t.includes(null==n?void 0:n.kind)?tE(n.kind):null,r||(o("audio_language",e.config.request.cookie.audio_language),o("audio_kind",e.config.request.cookie.audio_kind))})}(),e.events.on(dm,function(){const t=Date.now();e.config.request.cookie.qoe_survey_vote=t,o("qoe_survey_vote",t)}),e.events.on(_m,function(){e.config.request.cookie.languages_toast=1,o("languages_toast",1)}),e.events.on(uh,function(){e.config.embed.settings.background||(o("active",e.config.request.session),e.events.fire(bp))}),e.events.on([ch,Z_],function(){i("active")===e.config.request.session&&o("active",null)}),e.events.on(rp,function(){o("login",!0)}),n&&!sy&&(sy=function(t){return new Promise((n,r)=>{document.createElement("a").href=e.config.request.urls.proxy;const i=document.createElement("iframe");i.src=t,i.setAttribute("title","Vimeo LocalStorage Proxy"),i.setAttribute("aria-hidden","true"),i.setAttribute("hidden",""),i.onload=function(t){const n=Dm(e.config.request.urls.proxy);i.contentWindow.postMessage({method:"ping"},n)},i.onerror=function(e){r(e)};const o=setTimeout(()=>{r()},1e4),a=function(e){0!==t.indexOf(e.origin)||"ready"!==e.data&&"ping"!==e.data||(window.removeEventListener("message",a,!1),clearTimeout(o),n(i))};window.addEventListener("message",a,!1),document.body.appendChild(i)})}(e.config.request.urls.proxy)),n?window.addEventListener("message",function(t){const n=Dm(e.config.request.urls.proxy);t.origin===n&&"object"==typeof t.data&&"key"in t.data&&"newValue"in t.data?a(t.data.key,t.data.newValue):t.origin===window.location.origin&&t.data.session!==e.config.request.session&&a(t.data.key,t.data.val)},!1):window.addEventListener("storage",function(e){var t;if(0===(null==(t=e.key)?void 0:t.indexOf("sync_"))&&e.oldValue!==e.newValue){try{if(window.localStorage.getItem(e.key)!==e.newValue)return}catch(e){}try{a(e.key,JSON.parse(e.newValue))}catch(t){Ab.captureException(t,{extra:{key:e.key,oldValue:e.oldValue,newValue:e.newValue}})}}},!1),{reset:function(){o("login",!!e.config.user.logged_in)}}}const cy={id:"7742C69E",name:"prod"},uy={id:"BA42D416",name:"prod"},dy={id:"78077C77",name:"prod"},_y="urn:x-cast:com.vimeo.cast.media",hy={connected:qm(),disconnected:qm(),playing:qm(),paused:qm(),buffering:qm(),idle:qm(),ended:qm(),initialized:qm(),castStateChanged:qm(),sessionStateChanged:qm(),timeUpdated:qm(),mediaLoadedSuccess:qm(),mediaLoadedFailed:qm(),error:qm()};class py{constructor({core:e}){this._core=e,this._onControlSeek=this.onControlSeek.bind(this),this._onPlayerMutedChanged=this.onPlayerMutedChanged.bind(this),this._onPlayerVolumeChanged=this.onPlayerVolumeChanged.bind(this),this._onPlayOrPausePressed=this.onPlayOrPausePressed.bind(this),this._onConfigChanged=this.onConfigChanged.bind(this),this._onReset=this.onReset.bind(this),this._onPlayerStateChanged=this.onPlayerStateChanged.bind(this),this._onCurrentTimeChanged=this.onCurrentTimeChanged.bind(this),this._onIsConnectedChanged=this.onIsConnectedChanged.bind(this),this._onSessionStateChanged=this.onSessionStateChanged.bind(this),this._onCastStateChanged=this.onCastStateChanged.bind(this),this._onIsMediaLoadedChanged=this.onIsMediaLoadedChanged.bind(this),this._onCaptionsChanged=this.onCaptionsChanged.bind(this),this._onMessageReceived=this.onMessageReceived.bind(this),this._onReceiverMutedChanged=this.onReceiverMutedChanged.bind(this),this._onReceiverVolumeChanged=this.onReceiverVolumeChanged.bind(this),this._preventPlayerDefaultEvent=this.preventPlayerDefaultEvent.bind(this),this.endVideo=vb(this._endVideo,500),this._onOutroDisplayed=this.onOutroDisplayed.bind(this),this._onOutroHidden=this.onOutroHidden.bind(this),this.volumeLevel=null,this.mutedState=null}get currentTime(){return this.lastCurrentTime||0}get isTimeEnded(){return this.lastCurrentTime+.5>=this.duration}get isOutroRendered(){return this._isOutroRendered||!1}get isLooped(){return this._core.config.embed.loop}get isEndOfVideo(){return this._isEndOfVideo||!1}set currentTime(e){vy.remotePlayer&&vy.remotePlayerController&&(e=this._core.progressController.getAllowedSeekTime(e),vy.remotePlayer.currentTime=e,vy.remotePlayerController.seek(),this.lastCurrentTime=e)}get duration(){return this._core.config.video.duration}get isPlayingOrPaused(){return vy.remotePlayer?vy.remotePlayer.playerState===vy.PlayerState.PLAYING||vy.remotePlayer.playerState===vy.PlayerState.PAUSED:null}get isIdle(){return vy.remotePlayer?null===vy.remotePlayer.playerState||vy.remotePlayer.playerState===vy.PlayerState.IDLE:null}get isMediaLoaded(){return!!vy.remotePlayer&&vy.remotePlayer.isMediaLoaded}calculateStartTime(e=null){let t=Number(e)||this._core.backbone.currentTime-7;return t<0&&(t=0),this.isEndOfVideo&&(t=0),t}loadMedia({contentId:e,currentTime:t=null,duration:n=null,token:r=null,bypassToken:i=null,autoRequest:o=!1,autoCaption:a=!0,autoDisconnect:s=!0,tracks:l=[]}={}){if(vy.isLoadingMedia)return Promise.resolve(!1);const c=this._core.config;e=e||c.video.id;const u=c.request,d=u.drm;let _;if(d){const t=Kt(u,"files.dash.default_cdn");e=Kt(u,`files.dash.cdns.${t}.url`),_=Kt(d,"cdms.widevine.license_url"),l=(u.text_tracks||[]).map(e=>{const{pathname:t,search:n}=pe(e.url);return p(p({},e),{},{url:`https://player.vimeo.com${t}${n}`})})}const h=this.calculateStartTime(t);n=Number(n)||this.duration,r=r||c.user.vimeo_api_client_token,i=i||c.video.bypass_token,this.isEndOfVideo&&(this._isEndOfVideo=!1);const m={contentId:e,duration:n,autoRequest:o,tracks:l,currentTime:h,requestCustomData:{token:r,bypassToken:i,tokenType:"jwt"}};return this._core.config.request.ott_chromecast_token&&(m.requestCustomData.ottChromecastToken=this._core.config.request.ott_chromecast_token),this._core.config.ottCastOptions&&(m.ottCastOptions=this._core.config.ottCastOptions),(_?this._getLicenseUrl(_).then(e=>p(p({},m),{},{mediaCustomData:{widevineLicenseServerURL:e}})):Promise.resolve(m)).then(e=>vy.loadMedia(e)).then(()=>(vy.fire(hy.mediaLoadedSuccess),this.addRemotePlayerListenersOnPlaying(),this._core.events.fire(iu),this._core.events.fire(L_),this._isOutroRendered=!1,a&&this.onCaptionsChanged(this._core.backbone.enabledTextTrack),this._core.backbone.paused||this._core.backbone.pause(),!0)).catch(e=>(vy.fire(hy.mediaLoadedFailed,e),s&&this.endCurrentSession(),Promise.reject(e)))}_getLicenseUrl(e){return new Promise((t,n)=>{const r=new XMLHttpRequest;r.open("GET",e),r.onload=()=>{const e=e=>new Error(`Error retrieving License Acquisition URL (LA_URL): ${e}`);if(r.status>=200&&r.status<300)try{t(r.response)}catch(t){n(e(t))}else n(e(r.status))},r.onerror=n,r.send()})}init(){this.removeInitListeners(),this.addInitListeners()}addInitListeners(){this.addSessionStateListener(),this.addCastStateListener(),this.addIsConnectedListener()}endCurrentSession(e=!0){vy.castContext&&vy.castContext.endCurrentSession(e)}syncBackbone(){!this.isOutroRendered&&this._core.backbone.paused&&(this._core.backbone.currentTime=this.lastCurrentTime,this.syncTime())}stopBackbone(){this._core.events.fire(u_)}storeBackboneData(){this.lastCurrentTime=this._core.backbone.currentTime}applyBackboneData(){this.lastCurrentTime&&(this._core.backbone.currentTime=this.lastCurrentTime)}enableUI(){this._core.events.fire(W_),this._core.element.classList.add("is-casting")}disableUI(){this.isOutroRendered||(this._core.events.fire(G_),this._core.backbone.element.classList.remove("invisible")),this._core.element.classList.remove("is-casting")}syncTime(){const e=this.lastCurrentTime/this.duration;vy.fire(hy.timeUpdated,{currentTime:this.lastCurrentTime,duration:this.duration,percent:e}),e>0&&this._core.events.fire(Pi.TIME_UPDATE,{currentTime:this.lastCurrentTime,duration:this.duration,timeProgress:e})}_endVideo(){return this._isEndOfVideo=!0,this._core.events.fire(Z_),this.removeRemotePlayerListenersOnPlaying(),this.isLooped?this.loadMedia().catch(()=>{this.showOutro()}):this.showOutro(),vy.fire(hy.ended),!0}showOutro(){this.isOutroRendered||(this._isOutroRendered=!0,this._core.events.fire(A_))}dispose(){this.endCurrentSession(),this.removeAllRemoteListeners()}onIsMediaLoadedChanged(e){!1===e.value?this.isTimeEnded&&this.endVideo():this._core.backbone.paused||this._core.backbone.pause()}onPlayerStateChanged(e){switch(null===e.value&&this.isTimeEnded&&this.endVideo(),e.value){case vy.PlayerState.PLAYING:vy.fire(hy.playing);break;case vy.PlayerState.PAUSED:vy.fire(hy.paused);break;case vy.PlayerState.BUFFERING:vy.fire(hy.buffering);break;case vy.PlayerState.IDLE:default:vy.fire(hy.idle)}}onReceiverVolumeChanged(e){null===this.volumeLevel&&(this.volumeLevel=vy.remotePlayer?vy.remotePlayer.volumeLevel:1),e.value!==this.volumeLevel&&(this.volumeLevel=e.value,this._core.events.fire(s_,e.value,!1,!1))}onReceiverMutedChanged(e){null===this.mutedState&&(this.mutedState=!!vy.remotePlayer&&vy.remotePlayer.isMuted),this._core.events.fire(l_,e.value,!0)}onPlayerMutedChanged(e){vy.remotePlayer&&vy.remotePlayerController&&vy.remotePlayer.isMuted!==e&&vy.remotePlayerController.muteOrUnmute()}onPlayerVolumeChanged(e){this._core.backbone.muted||vy.remotePlayer&&vy.remotePlayerController&&$c(vy.remotePlayer.volumeLevel)!==$c(e)&&(vy.remotePlayer.volumeLevel=e,vy.remotePlayerController.setVolumeLevel())}onCurrentTimeChanged(e){this.isMediaLoaded&&(this.lastCurrentTime=e.value),this.syncTime(),this.isTimeEnded&&this.endVideo()}onCaptionsChanged(e){const t=vy.currentSession;t&&t.sendMessage(_y,{action:"setActiveByLanguage",value:null==e?void 0:e.language})}onSessionStateChanged(e){switch(e.sessionState){case vy.SessionState.SESSION_STARTING:this.addPreventLocalPlayerEvents();break;case vy.SessionState.SESSION_RESUMED:case vy.SessionState.SESSION_STARTED:this.loadMedia();break;case vy.SessionState.SESSION_ENDING:case vy.SessionState.SESSION_ENDED:break;case vy.SessionState.SESSION_START_FAILED:this.removePreventLocalPlayerEvents()}vy.fire(hy.sessionStateChanged,e.sessionState)}onCastStateChanged(e){vy.fire(hy.castStateChanged)}onIsConnectedChanged(e){e.value?this.onConnected():this.onDisconnected()}onConnected(){this.removePreventLocalPlayerEvents(),this.storeBackboneData(),this.stopBackbone(),this.applyBackboneData(),this.addLocalPlayerListeners(),this.addRemotePlayerListenersOnIdle(),this.addMessageListener(),this.enableUI(),vy.fire(hy.connected,vy.currentSessionObj)}onDisconnected(){this.syncBackbone(),this.removeRemotePlayerListeners(),this.removeLocalPlayerListeners(),this.removeMessageListener(),this.disableUI(),vy.fire(hy.disconnected)}onConfigChanged(){this.loadMedia()}onReset(){this.loadMedia()}onPlayOrPausePressed(){this.isEndOfVideo?this.loadMedia():this.isPlayingOrPaused&&vy.remotePlayerController.playOrPause(),this._core.events.halt()}onControlSeek(e){e=this._core.progressController.getAllowedSeekTime(e),this.currentTime=e,this._core.events.halt()}addSessionStateListener(){vy.castContext&&vy.castContext.addEventListener(vy.CastContextEventType.SESSION_STATE_CHANGED,this._onSessionStateChanged)}addCastStateListener(){vy.castContext&&vy.castContext.addEventListener(vy.CastContextEventType.CAST_STATE_CHANGED,this._onCastStateChanged)}addMessageListener(){const e=vy.currentSession;e&&e.addMessageListener(_y,this._onMessageReceived)}onMessageReceived(e,t){"MEDIA_FINISHED"===(t=JSON.parse(t)).type&&("END_OF_STREAM"===t.endedReason?this.endVideo():"ERROR"===t.endedReason&&(this.endCurrentSession(),vy.fire(hy.error,new Error("Chromecast encountered an error and media finished."))))}onOutroDisplayed(){this._isOutroRendered=!0}onOutroHidden(){this._isOutroRendered=!1}addIsConnectedListener(){vy.remotePlayerController&&vy.remotePlayerController.addEventListener(vy.RemotePlayerEventType.IS_CONNECTED_CHANGED,this._onIsConnectedChanged)}addPreventLocalPlayerEvents(){this._core.events.prependOn([uh,ch,fh,vh,ki.BUFFER_STARTED,ki.BUFFER_ENDED,a_,Q_,J_,Th,ap,u_],this._preventPlayerDefaultEvent)}addRemotePlayerListenersOnIdle(){this.removeRemotePlayerListenersOnIdle(),this.addIsMediaLoadedChangedListener(),this.addVolumeLevelChangedListener()}addLocalPlayerListeners(){this._core.events.prependOn(uh,this._onPlayOrPausePressed),this._core.events.prependOn(ch,this._onPlayOrPausePressed),this._core.events.prependOn(fh,this._preventPlayerDefaultEvent),this._core.events.prependOn(vh,this._preventPlayerDefaultEvent),this._core.events.prependOn(ki.BUFFER_STARTED,this._preventPlayerDefaultEvent),this._core.events.prependOn(ki.BUFFER_ENDED,this._preventPlayerDefaultEvent),this._core.events.prependOn(a_,this._onControlSeek),this._core.events.prependOn(Q_,this._onPlayerMutedChanged),this._core.events.prependOn(J_,this._onPlayerVolumeChanged),this._core.events.on(Th,this._onCaptionsChanged),this._core.events.on(ap,this._onConfigChanged),this._core.events.on(u_,this._onReset),this._core.events.on(vp,this._onOutroDisplayed),this._core.events.on(gp,this._onOutroHidden)}preventPlayerDefaultEvent(){this._core.events.halt()}addCurrentTimeChangedListener(){vy.remotePlayerController&&vy.remotePlayerController.addEventListener(vy.RemotePlayerEventType.CURRENT_TIME_CHANGED,this._onCurrentTimeChanged)}addIsMediaLoadedChangedListener(){vy.remotePlayerController&&vy.remotePlayerController.addEventListener(vy.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED,this._onIsMediaLoadedChanged)}addPlayerStateChangedListener(){vy.remotePlayerController&&vy.remotePlayerController.addEventListener(vy.RemotePlayerEventType.PLAYER_STATE_CHANGED,this._onPlayerStateChanged)}addVolumeLevelChangedListener(){vy.remotePlayerController&&(vy.remotePlayerController.addEventListener(vy.RemotePlayerEventType.VOLUME_LEVEL_CHANGED,this._onReceiverVolumeChanged),vy.remotePlayerController.addEventListener(vy.RemotePlayerEventType.IS_MUTED_CHANGED,this._onReceiverMutedChanged))}addRemotePlayerListenersOnPlaying(){this.removeRemotePlayerListenersOnPlaying(),this.addCurrentTimeChangedListener(),this.addPlayerStateChangedListener()}removeRemotePlayerListenersOnIdle(){this.removeIsMediaLoadedChangedListener(),this.removeVolumeLevelChangedListener()}removeInitListeners(){vy.castContext&&(vy.castContext.removeEventListener(vy.CastContextEventType.SESSION_STATE_CHANGED,this._onSessionStateChanged),vy.castContext.removeEventListener(vy.CastContextEventType.CAST_STATE_CHANGED,this._onCastStateChanged)),vy.remotePlayerController&&vy.remotePlayerController.removeEventListener(vy.RemotePlayerEventType.IS_CONNECTED_CHANGED,this._onIsConnectedChanged)}removeRemotePlayerListenersOnPlaying(){this.removeCurrentTimeChangedListener(),this.removePlayerStateChangedListener()}removeMessageListener(){const e=vy.currentSession;e&&e.removeMessageListener(_y,this._onMessageReceived)}removeCurrentTimeChangedListener(){vy.remotePlayerController&&vy.remotePlayerController.removeEventListener(vy.RemotePlayerEventType.CURRENT_TIME_CHANGED,this._onCurrentTimeChanged)}removeIsMediaLoadedChangedListener(){vy.remotePlayerController&&vy.remotePlayerController.removeEventListener(vy.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED,this._onIsMediaLoadedChanged)}removePlayerStateChangedListener(){vy.remotePlayerController&&vy.remotePlayerController.removeEventListener(vy.RemotePlayerEventType.PLAYER_STATE_CHANGED,this._onPlayerStateChanged)}removeVolumeLevelChangedListener(){vy.remotePlayerController&&(vy.remotePlayerController.removeEventListener(vy.RemotePlayerEventType.VOLUME_LEVEL_CHANGED,this._onReceiverVolumeChanged),vy.remotePlayerController.removeEventListener(vy.RemotePlayerEventType.IS_MUTED_CHANGED,this._onReceiverMutedChanged))}removePreventLocalPlayerEvents(){this._core.events.off([uh,ch,fh,vh,ki.BUFFER_STARTED,ki.BUFFER_ENDED,a_,Q_,J_,Th,ap,u_],this._preventPlayerDefaultEvent)}removeLocalPlayerListeners(){this._core.events.off(uh,this._onPlayOrPausePressed),this._core.events.off(ch,this._onPlayOrPausePressed),this._core.events.off(fh,this._preventPlayerDefaultEvent),this._core.events.off(vh,this._preventPlayerDefaultEvent),this._core.events.off(ki.BUFFER_STARTED,this._preventPlayerDefaultEvent),this._core.events.off(ki.BUFFER_ENDED,this._preventPlayerDefaultEvent),this._core.events.off(a_,this._onControlSeek),this._core.events.off(Q_,this._onPlayerMutedChanged),this._core.events.off(J_,this._onPlayerVolumeChanged),this._core.events.off(Th,this._onCaptionsChanged),this._core.events.off(ap,this._onConfigChanged),this._core.events.off(u_,this._onReset)}removeRemotePlayerListeners(){this.removeRemotePlayerListenersOnPlaying(),this.removeRemotePlayerListenersOnIdle()}removeAllRemoteListeners(){this.removeRemotePlayerListeners(),this.removeInitListeners()}}const my={SETUP_DONE:"SETUP_DONE",NOT_SETUP:"NOT_SETUP"};class fy{constructor(){this.version="1.2.36",this.remotePlayer=null,this.remotePlayerController=null,this.CastContextEventType=null,this.RemotePlayerEventType=null,this.CastState=my,this.SessionState=null,this.PlayerState=null,this.currentLoadRequestId=null,this.currentLoadingMediaPromise=null}get isGCastApiAvailable(){return!!("undefined"!=typeof cast&&cast&&cast.framework&&cast.framework.VERSION)}get castState(){return this.castContext?this.castContext.getCastState():this.isGCastApiAvailable?this.CastState.SETUP_DONE:this.CastState.NOT_SETUP}get versionGCastApi(){return this.isGCastApiAvailable?cast.framework.VERSION:null}get castContext(){return this.isGCastApiAvailable?cast.framework.CastContext.getInstance():null}get currentSession(){return this.castContext?this.castContext.getCurrentSession():null}get currentSessionObj(){const e=this.currentSession;return e?e.getSessionObj():null}get isInitialized(){return!(!this.isGCastApiAvailable||!this.remotePlayerController)}get isSessionEstablished(){const e=this.currentSessionObj;return!!e&&e.status===chrome.cast.SessionStatus.CONNECTED}get isCastConnected(){return this.castState===this.CastState.CONNECTED}init({receiverApplicationId:e="",resumeSavedSession:t=!0,language:n=null,autoJoinPolicy:r="TAB_AND_ORIGIN_SCOPED"}={}){if(!this.isGCastApiAvailable)throw new Error("CAF is not available. Call setup() first.");if("string"!=typeof e||""===e.trim())throw new Error("Parameter 'receiverApplicationId' must be valid.");switch(r){case chrome.cast.AutoJoinPolicy.TAB_AND_ORIGIN_SCOPED:case chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED:case chrome.cast.AutoJoinPolicy.PAGE_SCOPED:break;default:r=chrome.cast.AutoJoinPolicy.TAB_AND_ORIGIN_SCOPED}return this.CastContextEventType=cast.framework.CastContextEventType,this.RemotePlayerEventType=cast.framework.RemotePlayerEventType,this.CastState=Object.assign(this.CastState,cast.framework.CastState),this.SessionState=cast.framework.SessionState,this.PlayerState=chrome.cast.media.PlayerState,cast.framework.CastContext.getInstance().setOptions({receiverApplicationId:e.trim(),resumeSavedSession:t,language:n,autoJoinPolicy:r}),this.isInitialized?this.remotePlayerController:this.initRemotePlayer()}initRemotePlayer(){if(!this.isGCastApiAvailable)throw new ReferenceError("CAF is not available. Call setup() first.");return this.remotePlayer=new cast.framework.RemotePlayer,this.remotePlayerController=new cast.framework.RemotePlayerController(this.remotePlayer),this.remotePlayerController}setup({loadLibrary:e=!0}={}){return new Promise((t,n)=>{if(this.isGCastApiAvailable)return this.AutoJoinPolicy=chrome.cast.AutoJoinPolicy,void t(!0);window.__onGCastApiAvailable=(e,r)=>{let i;r?(i=new Error(r),n(i)):chrome.cast?(this.AutoJoinPolicy=chrome.cast.AutoJoinPolicy,t(e)):(i=new ReferenceError("Cast is not available on this browser."),n(i))};try{if(!1===e)throw new ReferenceError("Cast is not available. Make sure the library has been loaded.");this.loadLibrary()||t(!1)}catch(e){const t=new Error(e);n(t)}})}loadLibrary(){if(this.isGCastApiAvailable)return!0;if(null!==window.chrome&&void 0!==window.chrome&&"Google Inc."===window.navigator.vendor){let e="//www.gstatic.com/cv/js/sender/v1/cast_sender.js";if(!(document.querySelectorAll('script[src^="'+e+'"]').length>0)){e+="?loadCastFramework=1";const t=document.createElement("script");return t.src=e,t.async=!0,t.defer=!0,document.head.appendChild(t),!0}}return!1}loadMedia({contentId:e,contentType:t,currentTime:n=0,duration:r=0,requestCustomData:i=null,mediaCustomData:o=null,autoRequest:a=!1,tracks:s=[],ottCastOptions:l}){return e?this.isSessionEstablished?this.loadMediaOnSession(this.currentSession,{contentId:e,contentType:t,currentTime:n,duration:r,requestCustomData:i,mediaCustomData:o,tracks:s,ottCastOptions:l}):!0!==a?Promise.reject(new TypeError("Option 'autoRequest' must be true when session is not connected.")):this.requestSession().then(a=>this.loadMediaOnSession(a,{contentId:e,contentType:t,currentTime:n,duration:r,requestCustomData:i,mediaCustomData:o,tracks:s,ottCastOptions:l})):Promise.reject(new TypeError("Option 'contentId' must be valid."))}loadMediaOnSession(e,{contentId:t,contentType:n,currentTime:r=0,duration:i,requestCustomData:o=null,mediaCustomData:a=null,tracks:s=[],ottCastOptions:l}){if(e&&e instanceof cast.framework.CastSession){const c=e.getSessionState();if(c!==this.SessionState.SESSION_STARTING&&c!==this.SessionState.SESSION_STARTED&&c!==this.SessionState.SESSION_RESUMED)return Promise.reject(new ReferenceError("Session must be established."));const u=this.createLoadRequest(t,n,r,i,o,a,s,l);return null!==this.currentLoadRequestId&&this.currentLoadRequestId===u.requestId||(this.currentLoadRequestId=u.requestId,this.currentLoadingMediaPromise=e.loadMedia(u).finally(()=>{this.currentLoadRequestId=null,this.currentLoadingMediaPromise=null})),this.currentLoadingMediaPromise}return Promise.reject(new ReferenceError("Session must be cast.framework.CastSession."))}requestSession(){return this.isSessionEstablished?Promise.resolve(this.currentSession):this.castContext?this.castContext.requestSession().then(()=>this.currentSession):Promise.reject(new Error("CastContext is not available. Call setup() first."))}sendMessage({namespace:e,data:t={},autoRequest:n=!1}){return this.isSessionEstablished?this.sendMessageOnSession(this.currentSession,{namespace:e,data:t}):!0!==n?Promise.reject(new TypeError("Option 'autoRequest' must be true when session is not connected.")):this.requestSession().then(n=>this.sendMessageOnSession(n,{namespace:e,data:t}))}sendMessageOnSession(e,{namespace:t,data:n={}}){if(e||!(e instanceof cast.framework.CastSession)){const r=e.getSessionState();return r!==this.SessionState.SESSION_STARTING&&r!==this.SessionState.SESSION_STARTED&&r!==this.SessionState.SESSION_RESUMED?Promise.reject(new ReferenceError("Session must be established.")):e.sendMessage(t,n)}return Promise.reject(new ReferenceError("Session must be cast.framework.CastSession."))}createCastButton(e){const t=document.createElement("button","google-cast-button");return e&&e.style&&(null===e.style["--disconnected-color"]&&(e.style["--disconnected-color"]="#00ADEF"),null===e.style["--connected-color"]&&(e.style["--connected-color"]="#E5E500")),e&&Object.keys(e).forEach(n=>{if("string"==typeof e[n])t.setAttribute(n,e[n]);else if("style"===n&&"object"==typeof e[n]){let r="";Object.keys(e[n]).forEach(t=>{r+=t+":"+e[n][t]+";"}),t.setAttribute(n,r)}}),t}createLoadRequest(e,t,n,r,i,o,a,s){const l=s?new chrome.cast.media.MediaInfo(s.contentId):new chrome.cast.media.MediaInfo(e.toString(),t);l.customData=o,l.duration=r;const c={subtitles:chrome.cast.media.TextTrackType.SUBTITLES,captions:chrome.cast.media.TextTrackType.CAPTIONS};l.tracks=a.map(e=>{const t=new chrome.cast.media.Track(e.id,chrome.cast.media.TrackType.TEXT);return t.trackContentId=e.url,t.trackContentType="text/vtt",t.subtype=c[e.kind],t.name=e.label,t.language=e.lang,t});const u=new chrome.cast.media.LoadRequest(l);return u.customData=s?s.customData:i,u.currentTime=n||0,s&&(u.credentials=s.credentials,u.credentialsType=s.credentialsType),u}}const vy=bn.extend(new class extends fy{get chromecastPlayer(){return this._chromecastPlayer}set chromecastPlayer(e){if(e&&!(e instanceof py))throw new SyntaxError("An invalid ChromecastPlayer was specified");this.chromecastPlayer&&this.chromecastPlayer.dispose(),this._chromecastPlayer=e}init({appId:e,chromecastPlayer:t=null}={}){var n,r;return e||(e=null!=t&&null!=(n=t._core)&&null!=(n=n.config.request.flags)&&n.ott?null!=t&&null!=(r=t._core)&&r.config.ottCastOptions?t._core.config.ottCastOptions.appId?t._core.config.ottCastOptions.appId:uy.id:dy.id:cy.id),this.chromecastPlayer=t,this.setup().then(t=>(t&&(super.init({receiverApplicationId:e,autoJoinPolicy:this.AutoJoinPolicy.PAGE_SCOPED}),this.chromecastPlayer&&this.chromecastPlayer.init(),this.fire(hy.initialized)),t)).catch(e=>(this.fire(hy.error,e),Promise.reject(e)))}dispose(){this.chromecastPlayer=null}}),gy="LIVE_UPDATE";function Ey(e,t){return Object.keys(t).reduce((n,r)=>(t[r]&&"object"==typeof t[r]?n[e(r)]=Ey(e,t[r]):n[e(r)]=t[r],n),{})}function by(e){return e.replace(/(_\w)/g,e=>e[1].toUpperCase())}function yy(e){return Ey(by,e)}const Ty="CONFIG_LOAD",Sy=e=>({type:Ty,payload:p({},yy(e))});function Cy(e={},{type:t,payload:n}){switch(t){case Ty:return n.video.liveEvent?p(p({},e),n.video.liveEvent):null;case gy:return p(p({},e),n);case"LIVE_SET_START_TIME":return p(p({},e),{},{ingest:p(p({},e.ingest),{},{startTime:n})});case"LIVE_SETTINGS_UPDATE":return p(p({},e),{},{settings:p(p({},e.settings),n)});default:return e}}const Ay=e=>{var t;return!(null==(t=e.liveEvent)||!t.status)},Ly=e=>{var t;return null==(t=e.liveEvent)?void 0:t.status},Iy=e=>{var t;return(null==(t=e.liveEvent)?void 0:t.status)===Xm},Py=e=>{var t;return Ay(e)&&"ended"===(null==(t=e.liveEvent)?void 0:t.status)},Ry=e=>{var t;return(null==(t=e.liveEvent)||null==(t=t.archive)?void 0:t.status)===Km};var wy=Object.freeze({__proto__:null,default:Cy,liveExists:Ay,liveStatus:Ly,liveStartTime:e=>{var t;return(null==(t=e.liveEvent)||null==(t=t.ingest)?void 0:t.startTime)||null},isLiveStarted:Iy,liveInProgress:Py,isLiveArchived:Ry});const Oy={fontSize:1,fontFamily:"proportional_sans_serif",fontOpacity:"100",color:"#fff",bgOpacity:"100",bgColor:"black",windowOpacity:"0",windowColor:"#000",edgeStyle:"none"},ky="interactive";let Dy=function(e){return e.NONE="none",e.METADATA="metadata",e.METADATA_ON_HOVER="metadata_on_hover",e.AUTO="auto",e.AUTO_ON_HOVER="auto_on_hover",e}({});const Ny=Dy.METADATA_ON_HOVER;let My=function(e){return e.PQ="PQ",e.DV5="DV5",e.DV81="DV81",e.DV82="DV82",e.DV84="DV84",e.HDR10="HDR10",e.HDR10_PLUS="HDR10_PLUS",e.HLG="HLG",e}({}),xy=function(e){return e.KOLLECTIVE="kollective",e.HIVE="hive",e}({});const Vy=e=>e.playback.supportsTextTracks&&e.captions.textTracks.length>0&&e.appearance.isDisplayContextBackbone&&!e.displayList.ad;function By(e,t){const n=e.request.text_tracks,r=null==n?void 0:n.find(e=>e.enabled);if(r)return r.id;const i=e.embed.texttrack;if(i&&t.hasTextTrack(i))return i;const o=e.request.cookie.captions;return o&&"null"!==o&&t.hasTextTrack(o)?o:null}function Uy(){}function Fy(e,t,n){const r=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(){return function(t,n){var r=function(){var t;if(Ef.includes(null==e||null==(t=e.config)||null==(t=t.user)?void 0:t.id))return function(e){if(!void 0)return e&&e.then?e.then(Uy):Promise.resolve()}(T(2e3))}();return r&&r.then?r.then(n):n()}(0,function(){e.refreshAssetUrls()})}),i=e.events;let o=e.backbone;const a=_b(),s=!e.config.embed.playsinline&&(Q.mobileAndroid||Q.iOS&&!Q.iPad),l=(Q.iOS>=8||rf)&&!Q.iPad;let c=!1,u=!1,d=!1,_=!1,h=null,p=!1,m=null,f=!1,v=!1,g=!1,E=!1,b=!1;function y(e){o.element.classList.remove("invisible"),S()}function S(){let e=o.play();return b&&(e=e.catch(C)),e.catch(L).then(I)}function C(e){if(A(e))return i.fire(l_,!0,!0),o.play();throw e}function A(e){return e&&("NotAllowedError"===e.name||"AbortError"===e.name)}function L(e){return i.fire($_,e),new Promise(()=>{})}function I(){b=!1,i.fire(q_)}function P(e){try{o.currentTime=e}catch(e){}}function R(e=!1){(!_||e)&&!p&&c&&o.paused&&S()}function w(){var t;const n=(null==(t=e.config.request.flags)?void 0:t.preload_video)||Ny;let r=n,a="",s="";n===Dy.AUTO_ON_HOVER&&(a=Dy.AUTO),n===Dy.METADATA_ON_HOVER&&(a=Dy.METADATA),n===Dy.AUTO&&(s=Dy.AUTO);const l=Q.isGoogleBot||Q.isCrawler||"none"===n;function c(t){e.config.request&&o.preload===Dy.NONE&&t&&!l&&!d&&e.verifyConfig().then(()=>(o.preload=t,!0)).catch(e=>{})}(a||s||l)&&(r=Dy.NONE),o.preload=r,i.on(Xh,function(){a&&c(a)}),i.on(ki.LOAD_SEGMENT_FAILED,function(e){Ab.captureException(e)}),e.inView().then(()=>{s&&c(s)})}function O(){E=!1;const t=o.video;function n(){const t=By(e.config,o);if(t&&o.hasTextTrack(t)){const e=!0;i.fire(b_,t,e)}}function r(){Object.keys(a).forEach(t=>{var n;const{dispatch:r,items:i}=a[t],o=null==(n=e.config.request.cookie.captions_styles)?void 0:n[t],s=i.some(e=>e.id===o);e.store.dispatch(r(s?o:Oy[t]))})}o.loadVideo(e.config),t||(i.on(ki.TEXT_TRACKS_AVAILABLE,()=>{n(),r()}),n(),r())}function k(e,t,n,r){if(u){const i=new XMLHttpRequest;i.open("DELETE",`${e}/plays/${t}/${n}?token=${r}`,!1),i.send(),u=!1}}function D(){e.startTime>0&&i.fire(D_,e.startTime,e.startTime/o.duration)}function N(){if(e.config.embed.autoplay){var n,r;if(t.get(Ay)&&!t.get(Iy))return;if(t.get(Ay)&&!eE(null==(n=e.config.video)?void 0:n.live_event))return void setTimeout(function(){i.fire(pm),i.fire(uh,{fromUserGesture:!1})},Qg(null==(r=e.config.video)?void 0:r.live_event));i.fire(uh,{fromUserGesture:!1})}}o.element.classList.add("invisible"),l&&o.element.classList.add("hide-webkit-controls"),e.config.video.live_event&&n.classList.add("live-background"),e.config.embed.transparent&&n.classList.add("transparent"),t.watch(Ly,function(e){e===Xm&&setTimeout(()=>{O(),o.element.classList.remove("invisible"),i.fire(pm),i.fire(uh,{fromUserGesture:!1})},gf)}),t.watch(Ry,r),t.watch("ui.video.scaleFactor",e=>{o.element.classList.toggle("vp-telecine-cover",e>1)}),function t(){i.once(Sp,t),o=e.backbone,Gm(o.on,i.fire,[su,au,cu,iu,ou,lu,nu,ru,uu,du,_u,hu,wi.ACTIVATED,wi.AVAILABLE,wi.DEACTIVATED,wi.UNAVAILABLE,Pu.ARCHIVE_DONE,Pu.EVENT_ACTIVE,Pu.EVENT_ENDED,Pu.EVENT_STARTED,Pu.STREAM_OFFLINE,Pu.STREAM_ONLINE,Pu.BUFFER_GAP_JUMP,Pu.BUFFER_GAP_JUMP_PREVENT,Pu.STALL_JUMP,Pu.SETTINGS_UPDATED,Pu.LOW_LATENCY_FALLBACK,Pu.LIVE_STATS_SUCCESS,Pu.LIVE_STATS_FAILURE,Pu.LATENCY_UPDATED,Mi.MEDIASESSION_PAUSE,Mi.MEDIASESSION_PLAY,Mi.MEDIASESSION_SEEK_BACKWARD,Mi.MEDIASESSION_SEEK_FORWARD,Mi.MEDIASESSION_SEEK_TO,ki.AV_DURATION_MISMATCH,ki.BANDWIDTH,ki.BUFFER_ENDED,ki.BUFFER_OCCUPANCY,ki.BUFFER_STARTED,ki.CHAPTER_CUES_UPDATED,ki.CUE_POINT,ki.NO_SUPPORTED_CDM,ki.CURRENT_FILE_CHANGE,ki.DOWNLOAD_END,ki.DOWNLOAD_TIMEOUT,ki.DRM_AUTH_SUCCESS,ki.DRM_CDM_CHANGE,ki.DRM_KEY_SWITCH,ki.DROPPED_FRAMES,ki.MANIFEST_LOADED,ki.MANIFEST_TIMEOUT,ki.QUOTA_EXCEEDED_ERROR,ki.SCANNER_CHANGE,ki.STREAM_BUFFER_START,ki.STREAM_CHANGE,ki.STREAM_CHANGE_START,ki.STREAM_TARGET_CHANGE,ki.AVAILABLE_STREAMS_CHANGED,ki.MEDIA_CAPABILITY_STREAMS_UNSUPPORTED,ki.TEXT_TRACKS_AVAILABLE,ki.DROPPED_FRAME_PERCENT_EXCEEDED,ki.LOAD_SEGMENT_FAILED,ki.AUDIO_TRACK_CHANGED,ki.SEGMENT_CUES_LOADED,ki.HLS_JS_ERROR,Ni.CAMERA_CHANGE,Ni.CAMERA_UPDATE,Ni.MOTION_END,Ni.MOTION_START,Ni.SPATIAL_UNSUPPORTED,Ni.WEBVR_ENTER,Ni.WEBVR_EXIT,Ni.WEBVR_HARDWARE_AVAILABLE,Pi.DURATION_CHANGE,Pi.ENDED,Pi.ERROR,Pi.LOAD_START,Pi.LOADED_DATA,Pi.LOADED_METADATA,Pi.PAUSE,Pi.PLAY,Pi.PLAYING,Pi.PROGRESS,Pi.RATE_CHANGE,Pi.RESIZE,Pi.SEEKED,Pi.SEEKING,Pi.STALLED,Pi.TIME_UPDATE,Pi.VOLUME_CHANGE,Pi.WAITING,Pi.ENTER_PICTURE_IN_PICTURE,Pi.LEAVE_PICTURE_IN_PICTURE,Pi.WEBKIT_BEGIN_FULLSCREEN,Pi.WEBKIT_END_FULLSCREEN])}(),Gm(vy.on,i.fire,[hy.connected,hy.disconnected]),w(),i.on(Pi.LOADED_METADATA,function(t){e.config.video.duration=o.duration,e.config.video.video_width=o.videoWidth,e.config.video.video_height=o.videoHeight}),i.on(Pi.DURATION_CHANGE,function(t){e.config.video.duration=o.duration}),i.on(ki.SCANNER_CHANGE,()=>{w(),setTimeout(()=>{i.fire(hc.settingVolume?f_:m_),i.fire(hc.textTracks?g_:v_)},0),Ab.captureBreadcrumb(`Scanner changed to ${o.currentScannerName}`,{},"video")}),i.on([Pu.EVENT_ACTIVE,Pu.EVENT_STARTED,Pu.EVENT_ENDED,Pu.ARCHIVE_DONE],n=>{Object.assign(e.config.video.live_event,n),t.dispatch((e=>({type:gy,payload:e}))(n))}),i.on(uh,function(t){Q.isGoogleBot||e.progressController.canPlayNow&&(e.displayContext!==e.backbone?e.displayContext.play():function(t={fromUserGesture:!0}){var n;if(("disable"===e.config.video.privacy||!e.config.video.spatial||Q.spatialPlayback||E)&&o.element.classList.remove("invisible"),h&&h.final)return i.fire(Y_,null==(n=h)?void 0:n.type,h),void i.fire(W_);if(c=!0,p)i.fire(W_);else{if(o.off(Pi.PLAY,y),s&&(f=!0,i.fire(E_)),t.fromUserGesture||(b=!0),!d)return!e.config.video.spatial||Q.spatialPlayback||E?void S().catch(console.error):(E=!0,i.fire(c_,"spatial-redirect","browser-support"),void i.once(Pi.PLAY,y));d&&R()}}(t))}).on(ch,()=>{c=!1,e.displayContext.pause()}).on(yp,function(){(window.location.search.indexOf("autopause=0")<0&&!o.paused&&!e.config.embed.settings.background||c)&&(c=!1,i.fire(ch))}),i.on(Pi.ERROR,function(t){if(A(t)&&!b){if(e.config.embed.autoplay=0,o.pause(),e.startTime)return P(e.startTime),void i.fire(z_,o.currentTime);if(0===o.currentTime)return void i.fire(u_);i.fire(z_,o.currentTime)}}),i.on(Pi.PLAY,function(e){o.element.classList.remove("invisible"),d=!0}),i.on(Pi.PAUSE,function(e,t){_||i.fire(z_,e,t)}),i.on(Pi.TIME_UPDATE,function({currentTime:e}){}),i.on(Pi.ENDED,function(t){_||e.config.embed.loop||(f&&i.fire(lh),c=!1,i.fire(Z_,t))}),i.on(ki.DRM_AUTH_SUCCESS,()=>{u=!0}),i.on(iu,()=>{d=!0,i.once(Pi.TIME_UPDATE,()=>{i.fire(nh)})}),i.on(ki.BUFFER_STARTED,()=>{}),function(){let t=!1,n=!1;function r(o){if(t)return;if(o.name.includes(ao))return;if("TextTracksNotSupported"===o.name)return void i.fire(v_);Ab.captureBreadcrumb(o.name,{message:o.message},"telecine error","error");let a=e.config.video.live_event?.25:.01;if(o.name===oo&&!n){n=!0,a=.5;const t=e.config.request,r=t.files,i=r.dash.cdns.fastly_skyfire.url,s=r.hls.cdns.fastly_skyfire.url,l=r.dash.cdns.akfire_interconnect_quic.url,c=r.hls.cdns.akfire_interconnect_quic.url,u=r.progressive.length?r.progressive[0].url:null,d=r.progressive.length?r.progressive[0].id:null,_=t.file_codecs,h=e.config.video.file_codecs,p=e.config.user.logged_in,m=t.build.js;Ab.captureBreadcrumb(o.name,{fastly_dash_url:i,fastly_hls_url:s,akamai_dash_url:l,akamai_hls_url:c,prog_url:u,prog_id:d,file_codecs:_,video_file_codecs:h,logged_in:p,version:m},"MediaUrlBadRequest config","error")}const s="string"!=typeof o.message?o.name:o.message,l=new Error(s);l.name=o.name;const c="object"==typeof o.message?o.message:null;Ab.captureException(l,c,a);const u=Vf[o.name];if("function"==typeof u){if(h=u(),h.final&&i.off(Pi.ERROR,r),o.name===ro){let t=e.config.request.dynamic_drm_translation_map,n=o.message.code;h&&t&&n&&t[n]&&(h.title=t[n].title,h.message=t[n].msg),Ab.captureBreadcrumb("DRM failure",o,"video")}i.fire(Y_,h.deferred?h.type:null,h,s)}}window.addEventListener("pagehide",()=>{t=!0},!1),i.on(Pi.ERROR,r),i.on("test-error",r)}(),i.on(d_,function(t){const n=!!t&&("boolean"==typeof Q.iOS||Q.iOS>=10);e.config.embed.loop=n,o.loop=n}),i.fire(d_,e.config.embed.loop),i.on(hh,(t,n)=>{e.events.fire(ph,n),e.events.fire(a_,t),d||i.fire(uh)}),i.on(fh,function(){p||(_||(c=!o.paused),_=!0,o.pause())}),i.on(vh,function(e){function t(){_=!1}return d?!e&&c?(i.once(q_,t),void R(!0)):void t():(i.once(q_,t),void i.fire(uh))}),i.on(a_,function(t){p||(t=e.progressController.getAllowedSeekTime(t),i.fire(D_,t))}),i.on(D_,function(t){d||e.fragmentsHandler.checkForNewFragment(t,o.duration),P(t)}),function(){i.on(s_,function(t,n,r,i=!0){r&&(t+=o.volume),t=Fm(t=Mm(t,0,1)),e.displayContext!==o&&(e.displayContext.volume=t),o.volume=t,e.events.fire(J_,t,n),o.muted&&i&&e.events.fire(l_,!1,n)}),i.on(l_,function(t,n=!1){o.muted=!!t,e.displayContext!==o&&(e.displayContext.muted=t),e.events.fire(Q_,t,n)}),i.on(Pi.VOLUME_CHANGE,()=>{i.fire(J_,o.volume,!0)});const t=e.config.request.cookie.volume;i.fire(s_,t,!0),i.fire(l_,e.config.embed.muted,!0)}(),function(){let e;i.on(__,function(n,r){(o.video.currentFile.mime===o_.dash||t.get(Iy))&&(r=!0),e=r,o.quality=n}),i.on(ou,function(t){i.fire(eh,t,e)})}(),function(){let e=o.playbackRate;i.on(Pi.RATE_CHANGE,function(t){o.playbackRate!==e&&(i.fire(rh,o.playbackRate,e),e=o.playbackRate)}),i.on(x_,function(e){o.playbackRate=e}),i.on(Tp,function(){try{o.playbackRate=1}catch(e){}})}(),function(){function e(e){p=!0,m=e,e!==ky&&d&&!g&&(c=c||!o.paused,_=!1,o.pause(),i.fire(z_,o.currentTime))}function t(){const e=m===rE.LEAD_CAPTURE_FORM&&!d;p=!1,m=null,e?i.fire(uh):c&&!g&&(f||v||!s||i.fire(E_),R())}i.on(Uh,e),i.on(gm,e),i.on(Fh,t),i.on(Em,t),i.on(yh,function(n){n&&n!==cf&&n.isCentered()&&(n.isVisible()?e():t())})}(),i.on(jh,function(e){d&&!g&&(c=!o.paused,o.pause())}),i.on($h,function(e){g||R()}),i.on(Rh,function(e,t){o.element.classList.remove("hide-webkit-controls"),e&&(v=!0),e||(d||Q.browser.safari||(o.poster=(e=>{const t=e.querySelector(`.${bf.VP_PREVIEW}`);return t&&t.getAttribute("data-thumb")||""})(n)),f=!0,setTimeout(()=>{o.textTracks.forEach(e=>{"hidden"===e.mode&&(e.mode="showing")})},500)),t||!Q.windowsPhone||Q.browser.edge||i.fire(C_,!0)}),i.on(Oh,function(t){o.poster="",t||o.pause(),d||e.segmentedPlaybackEnabled||o.element.classList.add("invisible"),f=!1,v=!1,l&&o.element.classList.add("hide-webkit-controls"),o.textTracks.forEach(e=>{"showing"===e.mode&&(e.mode="hidden")})}),i.on(iu,function(){o.poster=""}),i.on(C_,function(e){if(e)return o.controls=!0,void n.classList.add("native-controls");o.controls=!1,n.classList.remove("native-controls")}),i.on(hp,function(){O()}),i.on(ap,function(){O(),N()}),i.on(u_,function(){if(e.segmentedPlaybackEnabled)D();else{const t=e.element.querySelector(Ki);t&&"none"!==t.style.display||(i.fire(W_),o.element.classList.add("invisible")),setTimeout(()=>{o.unload(),i.fire(z_,o.currentTime),d=!1,c=!1,h=null},300)}}),function(){let t,n=function(e,t){var n;const r=e.request.text_tracks,i=null==r?void 0:r.find(e=>e.default);if(i)return i.id;const o=By(e,t);if(o)return o;const a=e.request.lang;return a&&t.hasTextTrack(a)?a:null!=(n=t.textTracks)&&n.length?t.textTracks[0].id:null}(e.config,o);i.on(b_,function(r,i=!1){t=i,n=r;try{var a;(null!=(a=e.config.request.flags)&&a.ott||"dev"===e.config.request.build.js||"gedevplayer.vimeows.com"===e.config.player_url)&&o.videoElement&&o.videoElement.setAttribute("crossorigin","anonymous"),o.enableTextTrack(r)}catch(e){}}).on(y_,function(n=!1){var r;t=n,null!=(r=e.config.request.flags)&&r.ott&&o.videoElement&&o.videoElement.removeAttribute("crossorigin"),o.disableTextTrack()}).on(U_,function(){o.requestCompleteLiveSubtitles()}).on(H_,function(e){o.setCaptionsShouldLoad(e)}).on(_h,function(){o.enabledTextTrack?i.fire(y_):(null===n&&o.textTracks.length&&(n=o.textTracks[0].id),n&&i.fire(b_,n,!1))}),i.on(su,function(e,r){e&&(n=e.id,o.enableTextTrack(e.id)),i.fire(Th,e,t||r)}),i.on(Pi.WEBKIT_BEGIN_FULLSCREEN,function(){var e;null==(e=o.videoElement)||e.setAttribute("crossorigin","anonymous")}),i.on(Pi.WEBKIT_END_FULLSCREEN,function(){var t,n;null!=(t=e.config.request.flags)&&t.ott||null==(n=o.videoElement)||n.removeAttribute("crossorigin")})}(),i.on(wi.AVAILABLE,function({type:t}){e.config.request.drm||"AirPlay"!==t||i.fire(Vp)}),i.on(wi.UNAVAILABLE,function({type:t}){e.config.request.drm||"AirPlay"!==t||i.fire(Bp)}),i.on(wi.ACTIVATED,function({type:e}){g=!0,"AirPlay"===e&&i.fire(Up)}),i.on(wi.DEACTIVATED,function({type:e}){g=!1,"AirPlay"===e&&i.fire(Fp)}),i.on(Hp,function(){o.showExternalDisplayPicker("AirPlay")}),i.on(R_,()=>{e.canPlayPictureInPicture&&o.requestPictureInPicture()}),i.on(w_,()=>{o.exitPictureInPicture()}),O(),Q.spatialPlayback?(i.fire(O_),i.on([Pi.PLAY,Pi.SEEKED],()=>{i.fire(k_)}),i.on(Ni.SPATIAL_UNSUPPORTED,()=>{d?i.fire(qd,p):i.once(nh,()=>{i.fire(qd,p)})})):i.once(nh,()=>{e.config.video.spatial&&i.fire($d,p)}),window.addEventListener("beforeunload",()=>{const t=e.config.request.drm;t&&k(t.hoover_url,t.user,t.asset,t.hoover_token)},!1),i.on(Tp,()=>{const t=e.config.request&&e.config.request.drm;t&&k(t.hoover_url,t.user,t.asset,t.hoover_token)}),e.events.on(V_,()=>o.destroy()),function(){if(!("mediaSession"in navigator))return;const t=e.config.video.thumbnail_url||e.config.video.seo_thumbnail_url||"";i.on(Pi.LOADED_METADATA,()=>(navigator.mediaSession.setActionHandler("play",()=>{S().then(()=>o.fire(Mi.MEDIASESSION_PLAY)).catch(console.error)}),navigator.mediaSession.setActionHandler("pause",()=>{o.pause(),i.fire(Mi.MEDIASESSION_PAUSE)}),navigator.mediaSession.setActionHandler("seekto",e=>{o.currentTime=e.seekTime,i.fire(Mi.MEDIASESSION_SEEK_TO)}),navigator.mediaSession.setActionHandler("seekforward",()=>{o.currentTime=Math.min(o.duration,o.currentTime+10),i.fire(Mi.MEDIASESSION_SEEK_FORWARD)}),void navigator.mediaSession.setActionHandler("seekbackward",()=>{o.currentTime=Math.max(0,o.currentTime-10),i.fire(Mi.MEDIASESSION_SEEK_BACKWARD)}))),i.on(Pi.PLAY,()=>(()=>{const n={title:e.config.video.title,artist:`from ${e.config.video.owner.name}`,artwork:[{src:me(t,{w:"640"})}]};navigator.mediaSession.metadata=new MediaMetadata(n)})())}(),e.ready().then(()=>(setTimeout(()=>N(),0),D(),null)).catch(e=>{}),i.fire(Dp)}function Hy(e){return"dev"===e.request.build.js?"dev":tf}const Wy={will:"willLikeVideo",did:"didLikeVideo"},Gy={will:"willUnlikeVideo",did:"didUnlikeVideo"},jy={will:"willAddToWatchLater",did:"didAddToWatchLater"},Yy={will:"willRemoveFromWatchLater",did:"didRemoveFromWatchLater"},$y={will:"willOpenVodPurchaseForm",did:"didOpenVodPurchaseForm"},qy={will:"willOpenShareOverlay",did:"didOpenShareOverlay"},zy={will:"willOpenLoginForm",did:"didOpenLoginForm"},Ky={will:"willOpenCollectionsOverlay",did:"didOpenCollectionsOverlay"},Xy={will:"willShowOutro",did:"didShowOutro"},Zy={will:"willSendPlayLog",did:"didSendPlayLog"};function Jy(e){var t,n,r,i,o=new mg;function a(){return Date.now?Date.now():(new Date).getTime()}function s(){t=!1,n=e.backbone?e.backbone.currentTime:0,r=0,i=0}function l(t,n,r){e.verifyConfig().then(()=>{let i=n;i.signature=e.config.request.signature,i.session=e.config.request.session,i.time=e.config.request.timestamp,i.expires=e.config.request.expires;const a=JSON.stringify(i);if(null===i.sessionTime&&(Ab.captureBreadcrumb("sessionTime is null breadcrumbs",{endpoint:t,allParams:i}),Ab.captureException("sessionTime is null when making stats request")),!e.config.request.urls.player_telemetry_url)throw new Error("Stats logging failed due to lack of telemetry host");const s=e.config.request.urls.player_telemetry_url+t;return o.logRequestPromiseWithUrl(s,a).then(t=>{if(200!==t.status&&r<2){if(410===t.status)return void e.events.once(hp,()=>{l(s,n,r+1)});setTimeout(()=>{l(s,n,r+1)},1e3)}}).catch(e=>{throw e})}).catch(e=>{})}function c(t,n){var r,i;n=n||{};var o={referrer:e.config.request.referrer,embed:!e.config.embed.on_site,context:e.config.embed.context,id:e.config.video.id,vodId:null!=(r=e.config.video.vod)&&r.id?e.config.video.vod.id:null,vodSaleId:null!=(i=e.config.video.vod)&&i.sale_id?e.config.video.vod.sale_id:null,userId:e.config.user.id,userAccountType:e.config.user.account_type,userIsMod:e.config.user.mod?1:0,ownerId:e.config.video.owner?e.config.video.owner.id:0,duration:Fm(e.config.video.duration),seconds:Fm(e.backbone.currentTime),playbackRate:e.backbone.playbackRate,build:Hy(e.config)};for(var a in n)n.hasOwnProperty(a)&&(o[a]=n[a]);l("/log/"+t,o)}return s(),function(){e.events.on(Pi.TIME_UPDATE,function({currentTime:e,_duration:o,_timeProgress:s,playbackRate:l}){!t&&i+1e3<a()&&(e>n&&!(0!==e&&0===n)&&(r+=(e-n)/l),n=e)}),e.events.on(rh,function(e,t){c("playback_rate_change",{oldPlaybackRate:t})}),e.events.on(fh,function(){i=a(),t=!0}),e.events.on(vh,function(){n=e.backbone.currentTime,t=!1}),e.events.on(Z_,function(){e.backbone.isLive()||(r+=e.config.video.duration-n)});let o=[],s=!1;function u(){let t=e.backbone.getEffectByName("ThreeSixtyEffect").currentCoordinates,n=100,i=Math.round(t.lat*n)/n,a=Math.round(t.long*n)/n;const l={sessionTime:r,videoTime:e.backbone.currentTime,coordinates:{lat:i,lon:a}};o.push(l),setTimeout(()=>{s&&u()},1e3)}function d(){o.length&&e.performDelegateAction(Zy,(t,n={})=>{var r,i;l("/log/spatial",{embed:!e.config.embed.on_site,id:e.config.video.id,context:e.config.embed.context,ownerId:e.config.video.owner?e.config.video.owner.id:0,referrer:e.config.request.referrer,vodId:null!=(r=e.config.video.vod)&&r.id?e.config.video.vod.id:null,vodSaleId:null!=(i=e.config.video.vod)&&i.sale_id?e.config.video.vod.sale_id:null,userId:e.config.user.id,userAccountType:e.config.user.account_type,userIsMod:e.config.user.mod?1:0,teamOriginUserId:e.config.user.team_origin_user_id?e.config.user.team_origin_user_id:null,teamId:e.config.user.team_id?e.config.user.team_id:null,build:Hy(e.config),motionLog:JSON.stringify(o)},!1)})}e.events.on(Ni.MOTION_START,()=>{s=!0,u()}),e.events.on(Ni.MOTION_END,()=>{s=!1,d()}),e.events.on(Tp,()=>{d(),o=[]}),window.addEventListener("pagehide",function(){e.backbone&&e.backbone.currentTime>0&&d()},!1)}(),function(){let t;[{type:"share_press",event:Nh},{type:"facebook_press",event:Hh},{type:"twitter_press",event:Wh},{type:"email_press",event:Gh},{type:"embed_press",event:Mh},{type:"login_success",event:rp},{type:"airplay",event:Up},{type:"vod_press",event:xh},{type:"collection_press",event:Vh}].forEach(function(t){e.events.on(t.event,function(e){return function(){c(e)}}(t.type))}),e.events.on(ym,function(e){t=e}).on(vp,function(){var n,r={outroType:e.config.embed.outro,ownerAccountType:e.config.video.owner.account_type,playerWidth:e.element.clientWidth,playerHeight:e.element.clientHeight};null!=(n=t)&&null!=(n=n.videos)&&n.length&&(r.outroVideos=t.videos.map(e=>e.id).join(",")),c("outro_displayed",r)}).on(Ep,function(t){c("outro_video_press",{ownerAccountType:e.config.video.owner.account_type,videoId:t})}).on(Bh,function(){c("outro_follow_press",{add:!e.config.user.following})}).on(Pp,function(t){c("outro_cta_press",{ownerAccountType:e.config.video.owner.account_type,link:t})}).on(Cp,function(t){c("outro_link_press",{ownerAccountType:e.config.video.owner.account_type,link:t})}).on(Ip,function(t){c("outro_image_press",{ownerAccountType:e.config.video.owner.account_type,link:t})}).on(kh,function(){c("like_press",{add:!e.config.user.liked})}).on(Dh,function(){c("watch_later_press",{add:!e.config.user.watch_later})}).on(jh,function(e){0===e.indexOf("login-")&&c("login_attempt")}).on(Th,function(e,t){t||(e?c("text_track_change",{textTrackLanguage:e.language,textTrackKind:e.kind}):c("text_track_change"))}).on(Ih,function(e){1!==e&&12!==e||c("badge_press",{badgeId:e})}).on(wp,function(t){c("card_press",{ownerAccountType:e.config.video.owner.account_type,cardId:t,cardType:"link"})}).on(Rp,function(t,n){e.config.embed.editor||c("card_displayed",{ownerAccountType:e.config.video.owner.account_type,cardId:t,cardType:n.url?"link":"text"})})}(),e.events.on(ap,function(e){e&&s()}),e.events.fire(Np),{}}const Qy={settings:{}};function eT(e=Qy,{type:t,payload:n}){return t===Ty?p(p({},e),n.embed):e}var tT=Object.freeze({__proto__:null,default:eT,transparent:e=>e.embed.transparent});function nT(e={},{type:t,payload:n}){return t===Ty?p(p({},e),n.video):e}const rT=e=>e.video.height/e.video.width;var iT=Object.freeze({__proto__:null,default:nT,ratio:rT});const oT="CONTAINER_RESIZE",aT="PLAYER_CONTAINER_RESIZE";function sT(e={},t){return t.type===oT?p(p({},e),{},{width:t.payload.width,height:t.payload.height}):e}var lT=Object.freeze({__proto__:null,default:sT,width:e=>e.ui.container.width,height:e=>e.ui.container.height});function cT(e={},t){return t.type===aT?p(p({},e),{},{width:t.payload.width,height:t.payload.height}):e}var uT=Object.freeze({__proto__:null,default:cT,width:e=>e.ui.playercontainer.width,height:e=>e.ui.playercontainer.height});const dT="PREVIEW_SET_SIZE";function _T(e={},t){return t.type===dT?p(p({},e),{},{width:t.payload.width,height:t.payload.height}):e}var hT=Object.freeze({__proto__:null,default:_T,scaleFactor:e=>Nm({width:e.ui.preview.width,height:e.ui.preview.height,elementWidth:ST.width(e),elementHeight:ST.height(e)}).scaleFactor});function pT(e=Oy,t){switch(t.type){case qE:return p(p({},e),Oy);case zE:return p(p({},e),{},{fontSize:t.payload});case ZE:return p(p({},e),{},{color:t.payload});case KE:return p(p({},e),{},{fontFamily:t.payload});case XE:return p(p({},e),{},{fontOpacity:t.payload});case JE:return p(p({},e),{},{bgOpacity:t.payload});case QE:return p(p({},e),{},{bgColor:t.payload});case tb:return p(p({},e),{},{windowColor:t.payload});case eb:return p(p({},e),{},{windowOpacity:t.payload});case nb:return p(p({},e),{},{edgeStyle:t.payload});default:return e}}var mT=Object.freeze({__proto__:null,default:pT,calculatedFontSize:e=>Math.max(10,Math.round(.045*ST.height(e)*e.ui.captions.fontSize)),fontFamily:e=>e.ui.captions.fontFamily,fontOpacity:e=>e.ui.captions.fontOpacity,color:e=>e.ui.captions.color,backgroundOpacity:e=>e.ui.captions.bgOpacity,backgroundColor:e=>e.ui.captions.bgColor,edgeStyle:e=>e.ui.captions.edgeStyle});const fT=e=>{const t=t=>Math.min(e.height(t)/rT(t),e.width(t)),n=t=>Math.min(e.width(t)*rT(t),e.height(t)),r=r=>Nm({width:t(r),height:n(r),elementWidth:e.width(r),elementHeight:e.height(r)}).scaleFactor,i=e=>r(e)>1,o=n=>n.embed.transparent&&!i(n)?t(n):e.width(n),a=t=>t.embed.transparent&&!i(t)?n(t):e.height(t),s=e=>e.embed.transparent&&!i(e)?"contain":"100% 100%",l=Bt(e=>({width:o(e),height:a(e)})),c=Bt(e=>({ratio:rT(e),size:s(e)}));return{scaleFactor:r,width:o,height:a,size:s,boundingRect:l,settings:c}},vT={xxs:0,xs:430,sm:600,md:960,lg:1280,xl:1600,xxl:1920},gT=(e,t)=>{const n=Bt(n=>({width:e(n),height:t(n)})),r=e=>{const{height:t,width:n}=e.video;return t>n},i=n=>{const i=e(n),o=t(n);if(r(n))return i<225;const a=Mu(n.embed.settings.customLogo)&&i<300||o<169,s=!Mu(n.embed.settings.customLogo)&&(i<338||o<190);return a||s},o=t=>{const n=e(t);if(r(t))return n<300;const i=Mu(t.embed.settings.customLogo)&&n<=375,o=!Mu(t.embed.settings.customLogo)&&n<=450;return i||o},a=t=>{const n=e(t);return n>=vT.xxs&&n<vT.xs},s=t=>{const n=e(t);return n>=vT.xs&&n<vT.sm},l=t=>{const n=e(t);return n>=vT.sm&&n<vT.md},c=t=>{const n=e(t);return n>=vT.md&&n<vT.lg},u=t=>{const n=e(t);return n>=vT.lg&&n<vT.xl},d=t=>{const n=e(t);return n>=vT.xl&&n<vT.xxl},_=t=>e(t)>=vT.xxl;return{width:e,height:t,breakpoint:e=>{const t={xxs:a,xs:s,sm:l,md:c,lg:u,xl:d,xxl:_};return Object.keys(vT).find(n=>t[n](e))},xxl:_,xl:d,lg:u,md:c,sm:l,xs:s,xxs:a,mode:e=>i(e)?"tiny":o(e)?"mini":"normal",isMiniMode:o,isTinyMode:i,isVerticalVideo:r,boundingRect:n}};var ET=Object.freeze({__proto__:null,scaleFactor:e=>Nm({width:e.video.width,height:e.video.height,elementWidth:ST.width(e),elementHeight:ST.height(e)}).scaleFactor});const bT=e=>ST.isVerticalVideo(e)?ST.isTinyMode(e):ST.isMiniMode(e)||ST.isTinyMode(e)||ST.xs(e)||ST.xxs(e);var yT=Object.freeze({__proto__:null,isPrefsMenuCentered:e=>Q.touch&&ST.width(e)<415,isMenuFullWidth:bT,isMenuVerticalVideoMode:e=>!bT(e)&&ST.isVerticalVideo(e)&&ST.xxs(e)&&ST.height(e)>300,doMenuItemsWrap:e=>ST.width(e)<240});function TT(e={},t){return{container:sT(e.container,t),preview:_T(e.preview,t),captions:pT(e.captions,t),playercontainer:cT(e.playercontainer,t)}}const ST=gT(e=>LT.width(e),e=>LT.height(e)),CT=gT(e=>AT.width(e),e=>AT.height(e)),AT=fT(lT),LT=fT(uT);var IT=Object.freeze({__proto__:null,default:TT,container:lT,player:ST,appLayout:AT,playerLayout:LT,preview:hT,video:ET,controlbar:yT,captions:mT,playercontainer:uT,app:CT});function PT(e={},t){const n=p(p({},function(e={},t){return t.type===Ty?p(p({},e),t.payload):e}(e,t)),{},{embed:eT(e.embed,t),video:nT(e.video,t),liveEvent:Cy(e.liveEvent,t)});return p(p({},n),{},{ui:TT(e.ui,t)})}var RT=Object.freeze({__proto__:null,default:PT,embed:tT,video:iT,liveEvent:wy,ui:IT});const wT=function(e){return(t,...n)=>(n.forEach(n=>{for(const r in n){const i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,Object.assign(i,e))}}),t)}({enumerable:!0,configurable:!0,writeable:!1});function OT(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function kT(){}function DT(e){var t=e();if(t&&t.then)return t.then(kT)}function NT(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function MT(e,t,n){const r=NT(function(){return DT(function(){if(!c())return OT(e.ready(),function(){l()})})}),i=NT(function(){return DT(function(){if(!c())return OT(e.playbackEngineReady(),function(){l()})})}),o=c()?n.parentElement:n,a=n.querySelector(`.${bf.VP_VIDEO_WRAPPER}`),s=gb(l,150);function l(){(function(){const{width:e,height:n}=km(o),r=t.get("ui.app.width"),i=t.get("ui.app.height"),a=r>0&&i>0,s=e>0&&n>0;(c()||!a||s)&&t.dispatch(((e,t)=>({type:oT,payload:{width:e,height:t}}))(e,n))})(),function(){const{width:e,height:n}=km(a),r=t.get("ui.player.width"),i=t.get("ui.player.height"),o=r>0&&i>0,s=e>0&&n>0;(c()||!o||s)&&t.dispatch(((e,t)=>({type:aT,payload:{width:e,height:t}}))(e,n))}()}function c(){return n.parentElement===document.body}function u({size:e,ratio:t,bottom:r}){c()&&(o.classList.toggle("vp-center","contain"===e),function(e){[].concat(["height","max-width","max-height","bottom"]).map(t=>e.style.removeProperty(t))}(n),"contain"!==e?r>0&&Wm(n,{height:`calc(100% - ${r}px)`,bottom:r/2+"px"}):Wm(n,r>0?{maxWidth:`calc((100vh - ${r}px) / ${t})`,maxHeight:`calc(100vh - ${r}px)`,height:`calc(${t} * 100vw)`,bottom:r/2+"px"}:{maxWidth:`calc(100vh / ${t})`,height:`calc(${t} * 100vw)`}))}t.watch("ui.appLayout.settings",u),u(t.get("ui.appLayout.settings")),new ResizeObserver(s).observe(o),window.addEventListener("orientationchange",s),e.events.on(Rh,s),e.events.on(Oh,s),e.events.on(ap,s),l(),i(),r(),OT()}function xT(e,t,n){this.constructorName="MessageApiError",this.message=e,this.name=t,this.source=n}function VT(e){return e}function BT(e){if(!e||""===e)return{};if("object"==typeof e)return e;try{return JSON.parse(e)}catch(e){return{}}}function UT(e){}xT.prototype=new Error;let FT={captureException(e){},captureMessage(e){},captureBreadcrumb(){}},HT=FT;var WT=function(e){HT=Object.assign({},FT,e)},GT=function(e,t,n="backbone",r="info"){return HT.captureBreadcrumb(e,t,n,r)};function jT(e={hidePrivateMethods:!0}){const t={},n={},r={parseMessage:BT,buildMessage:VT,logError:UT};let i,o,a={};const s={get methods(){return t},extendMethods(...e){y.apply(void 0,[t].concat(e))},get listeners(){return a},set listeners(e){a=e},emit(e,...t){l.apply(void 0,[e].concat(t))&&d(c.apply(void 0,[e].concat(t)))},emitMethodEvent(e,t){d({method:e,value:t})},filter(e,t){t||"function"!=typeof e||(t=e,e=null),e?function(e,t){n.event=n.event||{},n.event[e]=n.event[e]||[],n.event[e].push(t)}(e,t):function(e){n.global=n.global||[],n.global.push(e)}(t)},hooks:(...e)=>y.apply(void 0,[r].concat(e)),configureClient(e,t){i=e,o=t},tearDown(){window.removeEventListener("message",u)}};function l(...e){if(n){let t,r;if(n.global&&n.global.length)for(t=0;t<n.global.length;t++)if(r=n.global[t],!r.apply(r,e))return!1;let i=e[0];if(n.event&&n.event[i]&&n.event[i].length)for(t=0;t<n.event[i].length;t++)if(r=n.event[i][t],!r.apply(r,e))return!1}return!0}function c(e,...t){const n={event:e};return t&&void 0!==t[0]&&(n.data=t[0]),n}function u(n){if(i!==n.source)return;let o=r.parseMessage(n.data),{method:a,value:s,id:l}=o;if(!(void 0===a||"string"!=typeof a||e.hidePrivateMethods&&a.indexOf("_")>-1))try{let e,i=function(e,t){if(!e)return null;let n=Object.getOwnPropertyDescriptor(t,e);if(n&&"function"==typeof n.value)return n.value;if(n&&"function"==typeof n.get)return n.get;const r=e.substr(0,3),i=e.substr(3,1).toLowerCase()+e.substr(4);return n=Object.getOwnPropertyDescriptor(t,i),"get"===r&&n&&"function"==typeof n.get?n.get:"set"===r&&n&&"function"==typeof n.set?n.set:null}(a,t);if(!i)throw new xT(`“${n}” is not a valid method. Valid methods are: ${function(e){return Object.keys(e).reduce((t,n)=>{if(n.indexOf("_")>-1)return t;const r=Object.getOwnPropertyDescriptor(e,n);return"function"==typeof r.value?(t.push(n),t):("function"==typeof r.get&&t.push("get"+n.charAt(0).toUpperCase()+n.slice(1)),"function"==typeof r.set&&t.push("set"+n.charAt(0).toUpperCase()+n.slice(1)),t)},[]).sort()}(t).join(", ")}.`,"TypeError",a);GT("API message received",o,"api"),e=Array.isArray(s)?s:null==s?[]:[s],Promise.resolve(i.call.apply(i,[n].concat(f(e),[l]))).then(e=>{d({method:a,value:null==e?s:e})}).catch(r.logError)}catch(e){r.logError(e)}}function d(e){if(o&&function(e=window.parent){return!(!window.postMessage||!e.postMessage)}(i)){e=r.buildMessage(e);try{i.postMessage(e,o)}catch(e){}}}return window.addEventListener("message",u,!1),s}function YT(e){return e.account_type&&"basic"!==e.account_type&&!/_lapsed|_expired/.test(e.account_type)}var $T=self!==top,qT=function(){var e=document.createElement("video"),t={request:["requestFullscreen","webkitRequestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"],exit:["exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],enabled:["fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled"],element:["fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement"],change:["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],error:["fullscreenerror","webkitfullscreenerror","mozfullscreenerror","MSFullscreenError"]},n={};for(var r in t)for(var i=0,o=t[r].length;i<o;i++)if(t[r][i]in e||t[r][i]in document||"on"+t[r][i].toLowerCase()in document){n[r]=t[r][i];break}return n}(),zT={ENTER:"enter",EXIT:"exit",CHANGE:"change",ERROR:"error"},KT=[],XT={};function ZT(){var e=Array.prototype.slice.apply(arguments),t=e.shift();XT[t].forEach(function(t){"function"==typeof t&&t.apply(t,e)})}function JT(e){return function(t,n){-1!==KT.indexOf(t)&&e.call(this,t,n)}}function QT(e){var t=null;if("VIDEO"===e.tagName)t=e;else{var n=e.getElementsByTagName("video");n[0]&&(t=n[0])}return t}Object.keys(zT).forEach(function(e){KT.push(zT[e]),XT[zT[e]]=[]});var eS=null,tS=function(){},nS=[];function rS(e){var t=QT(e);if(t&&t.webkitEnterFullscreen){try{t.readyState<t.HAVE_CURRENT_DATA?t.addEventListener("loadeddata",function n(){t.removeEventListener("loadeddata",n,!1);try{t.webkitEnterFullscreen()}catch(t){return aS("cannot_enter_fullscreen",e)}},!1):t.webkitEnterFullscreen(),eS=t}catch(t){return aS("not_supported",e)}return!0}return aS(void 0===qT.request?"not_supported":"not_enabled",e)}var iS=function(e){var t=nS[nS.length-1];t&&(e!==t.element&&e!==eS||!t.hasEntered)&&("VIDEO"===e.tagName&&(eS=e),1===nS.length&&sS.onenter(sS.element),t.enter.call(t.element,e||t.element),t.hasEntered=!0,ZT(zT.ENTER,sS.element))},oS=function(){eS=null;var e=nS.pop();e&&(e.exit.call(e.element),ZT(zT.EXIT,e.element),sS.element||(nS.forEach(function(e){e.exit.call(e.element),ZT(zT.EXIT,e.element)}),nS=[],sS.onexit()))},aS=function(e,t){if(nS.length>0){var n=nS.pop();t=t||n.element,n.error.call(t,e),sS.onerror(t,e),ZT(zT.ERROR,t,e)}},sS={request:function(e,t,n,r){if(e=e||document.body,nS.push({element:e,enter:t||tS,exit:n||tS,error:r||tS}),void 0===qT.request)return rS(e);if($T&&!1===document[qT.enabled])return rS(e);try{e[qT.request]()}catch(t){aS("not_enabled",e)}},exit:function(){!document[qT.exit]&&sS.element?sS.element[qT.exit]():document[qT.exit]()},toggle:function(e,t,n,r){sS.element?sS.exit():sS.request(e,t,n,r)},videoEnabled:function(e){if(sS.enabled)return!0;var t=QT(e=e||document.body);return!(!t||void 0===t.webkitSupportsFullscreen)&&(t.readyState<t.HAVE_METADATA?"maybe":t.webkitSupportsFullscreen)},on:JT(function(e,t){XT[e].push(t)}),off:JT(function(e,t){var n=XT[e].indexOf(t);n>-1&&XT[e].splice(n,1)}),onenter:tS,onexit:tS,onchange:tS,onerror:tS};try{Object.defineProperties(sS,{element:{enumerable:!0,get:function(){return eS&&eS.webkitDisplayingFullscreen?eS:document[qT.element]||null}},enabled:{enumerable:!0,get:function(){return document[qT.enabled]||!1}}})}catch(e){sS.element=null,sS.enabled=!1}function lS(e){const{videoObject:t,element:n}=cS();if(t)try{Object.assign(t,e),n.textContent=JSON.stringify(t)}catch(e){}}function cS(){const e=document.body.querySelector("script[type='application/ld+json']");if(e)try{return{videoObject:JSON.parse(e.textContent),element:e}}catch(e){}return{}}function uS(e,t){switch(e.view){case Jm.privateLocked:throw new xT("The video is private.","PrivacyError",t);case Jm.privatePassword:throw new xT("The video is password-protected. The viewer must enter the password first.","PasswordError",t);case Jm.geoBlocked:throw new xT("The video is not available in your region.","GeoBlockedError",t);case Jm.error:throw new xT(e.message,"NotFoundError",t)}}function dS(e){let t=[];for(let n=0;n<e.length;n++)t.push([e.start(n),e.end(n)]);return t}qT.change&&document.addEventListener(qT.change,function(e){if(sS.onchange(sS.element),ZT(zT.CHANGE,sS.element),sS.element){var t=nS[nS.length-2];t&&t.element===sS.element?oS():iS(sS.element)}else oS()},!1),document.addEventListener("webkitbeginfullscreen",function(e){var t=!0;if(nS.length>0)for(var n=0,r=nS.length;n<r;n++)if(QT(nS[n].element)===e.srcElement){t=!1;break}t&&nS.push({element:e.srcElement,enter:tS,exit:tS,error:tS}),sS.onchange(e.srcElement),ZT(zT.CHANGE,sS.srcElement),iS(e.srcElement)},!0),document.addEventListener("webkitendfullscreen",function(e){sS.onchange(e.srcElement),ZT(zT.CHANGE,e.srcElement),oS(e.srcElement)},!0),qT.error&&document.addEventListener(qT.error,function(e){aS("not_allowed")},!1);const _S=[Qm.READY,Qm.ERROR,Qm.DRM_INIT_FAILED];function hS(e){const t=e.events;let n,r,i,o=new bn,a=!1,s=!1,l=null,c=!1,u=null,d=null,_=!1,h=[];function m(t){r!==t&&(r=t,e.config.embed.api=t)}function f(){n&&n.emit("exitFullscreen"),e.events.halt()}function v(){var t=Fm(e.config.request.cookie.volume);return 1===r?Math.round(100*t):t}function g(n,r,i,o=[]){const a=mf[r];let s=e.config.embed[a];s||r!==df||(s=e.config.embed.color);let l=e.config.embed.settings[`force_${a}`];if(l||r!==df||(l=e.config.embed.settings.color),l&&!e.config.embed.on_site)throw new xT(`The creator of the video has chosen to always use ${new vv(s).hex}.`,"EmbedSettingsError",i);try{const i=new vv(n);t.fire(p_,i.hex,r),o.forEach(function(t){const n=mf[t],r=e.config.embed[n];try{new vv(r).contrast(i).ratio}catch(e){}})}catch(e){throw new xT("The color should be a valid hex value.","TypeError",i)}}let E={ping:()=>e.config.video.id,notifyTimingObjectConnect(){e.bigPicture.sendEvent(yg.TIMING_OBJECT_CONNECT)},notifyTimingObjectDisconnect(){e.bigPicture.sendEvent(yg.TIMING_OBJECT_DISCONNECT)},fullscreenchange(t){e.element.classList.toggle("js-player-fullscreen-api",t);const r=!0;t?(e.events.prependOn(lh,f),n.listeners.exitFullscreen=!0,e.events.fire(Ph),e.events.fire(Rh,!0,r)):(e.events.off(lh,f),n.listeners.exitFullscreen=!1,e.events.fire(wh),e.events.fire(Oh,r))},on(e,t){e in ef&&(e=ef[e]);const r=jm(Qm);if(r.indexOf(e)<0)throw new xT(`“${e}” is not a valid event. Valid events are: ${r.join(", ")}.`,"TypeError","on");t&&o.on(e,t),n&&(n.listeners[e]=!0),e===Qm.LOADED&&A()},off(e,t){t&&o.off(e,t),n&&(n.listeners[e]=!1)},play:()=>new Promise((n,r)=>{t.once(q_,n),t.once($_,e=>{r(new xT(e.message,e.name,"play"))}),uS(e.config,"play"),t.fire(zm._play),t.fire(uh,{fromUserGesture:!1})}),destroy(){t.fire(V_)},pause(){uS(e.config,"pause"),t.fire(zm._pause),t.fire(ch)},loadVideo(t){const{id:r,url:i,params:o}=function(e){if(!e)return{};if(Pm(e))return{id:parseInt(e,10),params:{}};if("string"==typeof e)return 0!==e.indexOf("https://")?{}:{url:e,params:{}};if("url"in e){if(0!==e.url.indexOf("https://"))return{};const t=e.url;return delete e.url,{url:t,params:e}}if("id"in e){if(!Pm(e.id))return{};const t=e.id;return delete e.id,{id:parseInt(t,10),params:e}}return{}}(t);if(!r&&!i)throw new xT("The video id must be an integer.","TypeError","loadVideo");if(i&&!function(e,t){return null!==e.match(new RegExp(`^https?://${t.player_url}/video/([0-9]+)`))||null!==e.match(new RegExp(`^https?://${t.vimeo_url}/([0-9]+)`))}(i,e.config))throw new xT("The url must be a valid Vimeo url.","TypeError","loadVideo");const a=function(e,t,n,r){var i;if(t===e.video.id)return!0;const o=`^https?://${e.player_url}/video/${e.video.id}(/(config/?)?)?(\\?.*)?$`,a=`^https?://${e.player_url}/video/([0-9]+)`;if(null!=n&&n.match(new RegExp(o)))return!0;const s=ng(n||"","s")||(null==r||null==(i=r.s)?void 0:i.length);return!(!n||null===n.match(new RegExp(a))||!s)}(e.config,r,i,o)||!Kg(e.element);if(a)return e.loadVideoViaConfig(i||r,o).then(()=>t).catch(()=>{throw uS(e.config,"loadVideo"),new xT("An error occurred loading the video.","Error","loadVideo")});throw e.loadVideoViaIframe(i||r,o,n.listeners),new xT("The player is being reloaded.","InternalError","loadVideo")},unload(){e.config.view!==Jm.main&&e.config.view!==Jm.privateUnlocked||t.fire(u_)},addCuePoint(n,r){if(n=parseFloat(n),isNaN(n)||n<0||n>e.config.video.duration)throw new xT(`Cue point time must be positive number less than the duration of the video (${Fm(e.config.video.duration)}).`,"RangeError","addCuePoint");try{const i=e.backbone.addCuePoint(n,r);return setTimeout(()=>{t.fire(Sh,i)},0),i.id}catch(e){if("CuePointsNotSupported"===e.name)throw new xT("Cue points are not supported in the current player.","UnsupportedError","addCuePoint");throw new xT("Unable to add cue point","InvalidCuePoint","addCuePoint")}},removeCuePoint(n){const r=e.backbone.cuePoints.filter(e=>e.id===n)[0];if(!r)throw new xT(`Cue point “${n}” was not found.`,"InvalidCuePoint","removeCuePoint");e.backbone.removeCuePoint(r),setTimeout(()=>{t.fire(Ch,r)},0)},enableTextTrack(n,i=null){let o=("text_tracks"in e.config.request?e.config.request.text_tracks:[]).map(e=>(e.language=e.lang,e));const a=o.some(e=>e.language.toLowerCase()===n.toLowerCase());if(!a)throw new xT(`There are no tracks for “${n.toUpperCase()}”.`,"InvalidTrackLanguageError","enableTextTrack");const s=i?`${n}.${i}`:n,{track:l}=((e,t=[])=>{if(!e||"null"===e||0===t.length)return{track:null};const[n,r]=e.split("."),[i]=n.split(/[-_]/),o=n!==i,a=t.filter(e=>o&&e.language===n||e.language===i).sort((e,t)=>{const o=2*Number(e.language===i&&e.kind===r)+2*Number(e.language===n)+1*Number(e.kind===r);return 2*Number(t.language===i&&t.kind===r)+2*Number(t.language===n)+1*Number(t.kind===r)-o});return a.length>0?{track:a[0],exactMatch:a[0].language===n&&a[0].kind===r}:{track:null}})(s,o);if(!l||i&&l.kind!==i)throw new xT(`There are no ${i} tracks for “${n.toUpperCase()}”.`,"InvalidTrackError","enableTextTrack");return t.fire(b_,l.id),r<3?null:new Promise(e=>{t.once(Th,t=>{e({label:t.label,language:t.language,kind:t.kind})})})},disableTextTrack(){t.fire(y_)},selectAudioTrack(n,r=null){if(!e.backbone.hasAudio)throw new xT("There is no audio for this video.","NoAudioTracksError","selectAudioTrack");if(!e.backbone.audioTracks.length)throw new xT("There are no alternate audio tracks for this video.","NoAlternateAudioTracksError","selectAudioTrack");const i={language:n,kind:r};if(!Fd(e.backbone.audioTracks,i))throw new xT(`No audio track matches the specified criteria: ${i}.`,"NoMatchingAudioTrackError","selectAudioTrack");return e.backbone.enableAudioTrack(i),new Promise(n=>{t.once(ki.AUDIO_TRACK_CHANGED,()=>{const t=e.backbone.enabledAudioTrack;n({language:null==t?void 0:t.language,kind:null==t?void 0:t.kind,label:null==t?void 0:t.label,provenance:null==t?void 0:t.provenance,enabled:!(null==t||!t.enabled)})})})},selectDefaultAudioTrack:()=>E.selectAudioTrack("main"),toggleFullscreen(e){const n={not_supported:{name:"UnsupportedError",msg:"Fullscreen is not supported at all or for this element."},not_enabled:{name:"Error",msg:"The request was made from an iframe that does not allow fullscreen."},not_allowed:{name:"NotAllowedError",msg:"The request failed, probably because it was not called from a user-initiated event."}};return new Promise((r,i)=>{if(!sS.element===e){const o=()=>{sS.off("enter",o),r()},a=(t,r)=>{sS.off("error",a);const o=n[r]||n.not_supported;i(new xT(o.msg,o.name,(e?"request":"exit")+"Fullscreen"))};return sS.on("enter",o),sS.on("error",a),void t.fire(lh)}r()})},requestFullscreen:()=>E.toggleFullscreen(!0),exitFullscreen:()=>E.toggleFullscreen(!1),get fullscreen(){return!!sS.element},requestPictureInPicture:()=>e.backbone.requestPictureInPicture(),exitPictureInPicture:()=>e.backbone.exitPictureInPicture(),remotePlaybackPrompt(){try{e.backbone.showExternalDisplayPicker()}catch(e){throw new xT("Remote playback is not available.","NotFoundError","remotePlaybackPrompt")}},appendVideoMetadata:n=>new Promise((r,i)=>{try{const i=Array.from(e.backbone.chapters);e.parentUrl=n,function(e,t,n){const{duration:r,id:i,privacy:o}=e.video;if(o!==n_&&o!==Qd&&o!==i_)return;const a=function(e,t,n,r){if(t<30||0===r.length)return[];const i=[];return r.forEach((o,a)=>{const{startTime:s,text:l}=o;if(s<t){var c;const t=null==r||null==(c=r[a+1])?void 0:c.startTime,o=`${lf}${e}`,[u]=n.split("#"),d=`${u}#${o}=${s}`;i.push({"@type":"Clip",name:l,startOffset:s,endOffset:t,url:d})}}),i.length&&(i[i.length-1].endOffset=t),i}(i,r,t,n);lS({hasPart:a})}(e.config,n,i),t.fire(hm,n),r()}catch(e){i(new xT((null==e?void 0:e.message)||"",(null==e?void 0:e.name)||"","appendVideoMetadata"))}}),get pictureInPicture(){return e.backbone.pictureInPictureActive},get autopause(){return!!e.config.embed.autopause},set autopause(t){e.config.embed.autopause=!!t},get chromecasting(){return!!vy.currentSession},get color(){var t;return e.config.embed.color_two?e.config.embed.color_two.replace("#",""):null==(t=e.config.embed.color)?void 0:t.replace("#","")},get colorOne(){var t;return null==(t=e.config.embed.color_one)?void 0:t.replace("#","")},get colorTwo(){var t;return e.config.embed.color_two?e.config.embed.color_two.replace("#",""):null==(t=e.config.embed.color)?void 0:t.replace("#","")},get colorThree(){var t;return null==(t=e.config.embed.color_three)?void 0:t.replace("#","")},get colorFour(){var t;return null==(t=e.config.embed.color_four)?void 0:t.replace("#","")},set color(e){g(e,df,"setColor")},set colorOne(e){g(e,uf,"setColorOne",[df,_f])},set colorTwo(e){g(e,df,"setColorTwo",[uf])},set colorThree(e){g(e,_f,"setColorThree",[uf])},set colorFour(e){g(e,hf,"setColorFour")},get cuePoints(){return e.backbone.cuePoints.map(e=>({time:e.time,data:e.data,id:e.id}))},get currentTime(){return e.currentTime},set currentTime(n){if(n=parseFloat(n),isNaN(n)||n<0||n>e.config.video.duration)throw new xT(`Seconds must be a positive number less than the duration of the video (${Fm(e.config.video.duration)}).`,"RangeError","setCurrentTime");return t.fire(zm._seek),e.config.embed.on_site||(e.progressController.maxPlayedTime=n),t.fire(a_,n),t.fire(Xh),r<3?null:new Promise(e=>{t.once(Pi.SEEKED,({currentTime:t})=>{e(t)})})},get duration(){return Fm(e.config.video.duration)},get ended(){return!!e.backbone.ended},get loop(){return!!e.config.embed.loop},set loop(e){t.fire(d_,e)},set muted(e){t.fire(l_,e,!0)},get muted(){return e.backbone.muted||0===v()},get paused(){return!e.backbone||!("paused"in e.backbone)||!!e.backbone.paused},get buffered(){return dS(e.backbone.buffered)},get played(){return dS(e.backbone.played)},get seekable(){return dS(e.backbone.seekable)},get seeking(){return e.backbone.seeking},get playbackRate(){return e.backbone?e.backbone.playbackRate:1},set playbackRate(n){if(!e.config.embed.settings.speed)throw new xT("Setting the playback rate is not enabled for this video.","Error","setPlaybackRate");if(isNaN(n)||n>2)throw new xT("Playback rate should be a number below or equal to 2.","RangeError","setPlaybackRate");t.fire(x_,n)},get remotePlaybackAvailability(){return e.backbone.externalDisplayAvailable},get remotePlaybackState(){return e.backbone.externalDisplayActive?"connected":"disconnected"},get textTracks(){return(e.backbone?e.backbone.video.textTracks:[]).map(e=>({label:e.label,language:e.language,kind:e.kind,mode:e===u?"showing":"disabled"}))},get audioTracks(){return(e.backbone?e.backbone.audioTracks:[]).map(e=>({language:e.language,kind:e.kind,label:e.label,provenance:e.provenance,enabled:!!e.enabled}))},get enabledAudioTrack(){const t=e.backbone?e.backbone.enabledAudioTrack:null;return t?{language:t.language,kind:t.kind,label:t.label,provenance:t.provenance,enabled:!!t.enabled}:null},get defaultAudioTrack(){const t=Bd(e.backbone?e.backbone.audioTracks:[]);return t?{language:t.language,kind:t.kind,label:t.label,provenance:t.provenance,enabled:!!t.enabled}:null},get videoEmbedCode(){return e.config.video.embed_code},get videoHeight(){return e.backbone.videoHeight||e.config.video.height},get videoId(){return e.config.video.id},get videoTitle(){return e.config.video.title},get videoWidth(){return e.backbone.videoWidth||e.config.video.width},get videoUrl(){if(!e.config.video.url)throw new xT("The URL is not available because of the video’s privacy settings.","PrivacyError","getVideoUrl");return e.config.video.url},get volume(){return v()},set volume(e){if(e=parseFloat(e),1===r&&(e/=100),isNaN(e)||e<0||e>1)throw new xT("Volume should be a number between 0 and 1.","RangeError","setVolume");d=e;var n=!0;hc.settingVolume||0!==e?t.fire(s_,e,n):t.fire(l_,!0,n)},get qualities(){return e.backbone.qualities},get quality(){return e.backbone.quality},set quality(t){if(!YT(e.config.video.owner))throw new xT("Setting the quality is not enabled for this video.","Error","setQuality");t=t.toLowerCase();const n=e.backbone.qualities.map(e=>e.id);if(!n.includes(t))throw new xT(`“${t}” is not a valid quality. Valid qualities are: ${n.join(", ")}.`,"TypeError","on");e.backbone.quality=t},_loadVideo:(t,n)=>e.loadVideoViaConfig(t,n),get _like(){return!!e.config.user.liked},set _like(n){e.config.user.liked!==n&&t.fire(kh,n)},get _watchLater(){return!!e.config.user.watch_later},set _watchLater(n){e.config.user.watch_later!==n&&t.fire(Dh,n)},get currentChapter(){const t=e.backbone.currentChapterID;if(!t)return null;const n=Array.from(e.backbone.chapters),r=n.findIndex(e=>t===e.id);return{startTime:n[r].startTime,title:n[r].text,index:r+1}},get chapters(){return Array.from(e.backbone.chapters).map((e,t)=>({startTime:e.startTime,title:e.text,index:t+1}))},_addChapter(t,n){if(t=parseFloat(t),isNaN(t)||t<0||t>e.config.video.duration)throw new xT(`Chapter timecode must be positive number less than the duration of the video (${Fm(e.config.video.duration)}).`,"RangeError","_addChapter");try{e.backbone.addChapter(t,n)}catch(e){if("ChaptersNotSupported"===e.name)throw new xT(e.message,"UnsupportedError","_addChapter");throw new xT("Unable to add chapter","InvalidChapter","_addChapter")}},_removeChapter(t){let n;try{n=e.backbone.chapters.getCueById(t)}catch(e){throw new xT("Chapters are not supported in this browser.","UnsupportedError","_removeChapter")}if(!n)throw new xT("Chapter was not found.","InvalidChapter","_removeChapter");try{e.backbone.removeChapter(n)}catch(e){if("ChaptersNotSupported"===e.name)throw new xT("Chapters are not supported in this browser.","UnsupportedError","_removeChapter");throw new xT("Unable to remove chapter","InvalidChapter","_removeChapter")}},_addCard(e){t.fire(N_,e)},_removeCard(e){t.fire(M_,e)},_setOutro(n,r){e.config.embed.outro!==n?(t.fire(L_),setTimeout(()=>{e.config.embed.outro=n,t.fire(A_,n,r)},400)):t.fire(A_,n,r)},_hideOutro(){t.fire(L_)},_fireEvent(...e){t.fire.apply(null,e)},_setEmbedEditor(t){e.config.embed.editor=!!t},_setLiveEventSettings(n){e.config.video.live_event&&(Object.keys(n).forEach(r=>{let i=n[r];i="object"==typeof i?i:Number(i),e.config.video.live_event.settings[r]=i,t.fire(sp,r,i),t.fire(Pu.SETTINGS_UPDATED,r,i)}),t.fire(ap,!1,e.config))},_setEmbedSettings(n){Object.keys(n).forEach(r=>{let o=n[r];o="object"==typeof o?o:Number(o),"badge"===r&&(o?o=i:i=e.config.embed.settings.badge),e.config.embed.settings[r]=o,t.fire(pp,r,o)}),t.fire(ap,!1,e.config)},_setEmbedSetting(n,r){r="object"==typeof r?r:Number(r),"badge"===n&&(r?r=i:i=e.config.embed.settings.badge),e.config.embed.settings[n]=r,t.fire(pp,n,r),t.fire(ap,!1,e.config)},_setCreateInteractive(n,r){e.config.embed.create_interactive=n,e.config.embed.interactive=r,t.fire(mp,n,e.config),t.fire(ap,!1,e.config)},_setOTTVideoMetadata(n){var r;null!=(r=e.config.request.flags)&&r.ott&&(e.ottVideoMetadata=n,t.fire(fp,n))},_toggleDebugPanel(){t.fire(Yh)},_overrideControlbarBehavior(e){t.fire(P_,e)},_setControlbarVisibility(e){t.fire(I_,e)},get cameraProps(){const t=e.backbone.getEffectByName("ThreeSixtyEffect");if(e.backbone&&!t)throw new xT("Camera props are not available in the current player.","UnsupportedError","getCameraProps");return t.cameraProps},set cameraProps(t){const n=e.backbone.getEffectByName("ThreeSixtyEffect");if(e.backbone&&!n)throw new xT("Camera props are not available in the current player.","UnsupportedError","setCameraProps");try{n.cameraProps=t}catch(e){throw new xT(e.message,e.name,"setCameraProps")}},get _fieldOfView(){const t=e.backbone.getEffectByName("ThreeSixtyEffect");if(e.backbone&&!t)throw new xT("Field of view is not available in the current player.","UnsupportedError","getFieldOfView");return t.fieldOfView},set _fieldOfView(t){const n=e.backbone.getEffectByName("ThreeSixtyEffect");if(e.backbone&&!n)throw new xT("Field of view is not available in the current player.","UnsupportedError","setFieldOfView");n.fieldOfView=t},get _coordinates(){const t=e.backbone.getEffectByName("ThreeSixtyEffect");if(e.backbone&&!t)throw new xT("Coordinates are not available in the current player.","UnsupportedError","getCoordinates");return t.currentCoordinates},set _coordinates(t){const n=e.backbone.getEffectByName("ThreeSixtyEffect");if(e.backbone&&!n)throw new xT("Coordinates are not available in the current player.","UnsupportedError","setCoordinates");try{n.currentCoordinates=t}catch(e){throw new xT(e.message,"RangeError","setCoordinates")}},_setChromecastUI(e){const t=vy.currentSession;t&&Ei(e)&&t.sendMessage(_y,{action:"setCustomUIStyles",value:e})},get _controlSelectors(){return{details:`.${bf.VP_TITLE}`,sidedock:`.${bf.VP_SIDEDOCK}`,controls:`.${bf.VP_CONTROLS}`,customLogo:`.${bf.CUSTOM_LOGO}`}},get _controlAreas(){const t=e.element.offsetWidth,n=e.element.offsetHeight,r=10,i={get details(){const e=km(document.querySelector(".headers > h1")),t=km(document.querySelector(".sub-title")),n=km(document.querySelector(".vp-portrait")),i=Math.max(e.width,t.width)+n.width,o=Math.max(n.height,e.height+t.height);return{top:r,left:r,width:Math.max(200,i),height:Math.max(60,o)}},get sidedock(){return{top:r,left:t-r-36,width:36,height:118}},get controls(){const e=i.customLogo,o=Math.max(60,e.height);return{height:o,top:n-r-o,left:r,width:t-20}},get customLogo(){const e=document.querySelector(".custom-logo"),i=e?km(e):{width:0,height:0};return{top:n-r-i.height,left:t-r-i.width,width:i.width,height:i.height}}};return i},set _lowLatencyMode(t){e.backbone.lowLatencyMode=t},get _lowLatencyMode(){return e.backbone.lowLatencyMode},get _presentationDelay(){return e.backbone.presentationDelay},set _presentationDelay(t){e.backbone.presentationDelay=t},get _liveLatency(){return e.backbone.latency},get _downloadSpeed(){return e.backbone.downloadSpeed},get _backbone(){return e.backbone},_lockPlayback(){e.progressController.lockPlayback()},_unlockPlayback(){e.progressController.unlockPlayback()},addEventListener(...e){E.on.apply(E,e)},removeEventListener(...e){E.off.apply(E,e)},seekTo(e){E.currentTime=e},changeColor(e){E.color=e}};const b={addCuePoint:({time:e,data:t})=>E.addCuePoint(e,t),enableTextTrack({language:e,kind:t=null}){E.enableTextTrack(e,t)},selectAudioTrack({language:e,kind:t=null}){E.selectAudioTrack(e,t)}};function y(e,t){n&&n.emit(e,t),o.fire(e,t)}const T=(e,t)=>(...n)=>{const r=t?t.apply(void 0,n):void 0;y(e,r)};function S({currentTime:e,duration:t,timeProgress:n}){return{seconds:Fm(e),percent:Fm(n),duration:Fm(t)}}function C(e){return{playbackRate:e}}function A(){y(Qm.LOADED,c?null:(c=!0,{id:e.config.video.id}))}function L(e){return l=e,I(function(e){switch(e){case"BrowserNotSupported":case"FilesNotPlayable":case"MediaSrcNotSupportedError":return new xT("This video is not supported in this browser.","NotSupportedError");case"FileError":return new xT("There was an error loading the files for this video.","FileError")}return new xT("An error occurred during playback.","PlaybackError")}(l))}function I(e){let t={message:"An error occurred.",name:"Error",method:e.source};return"MessageApiError"===e.constructorName&&(t={message:e.message,name:e.name,method:e.source}),t}return function(){var e;let t=new URL(window.location.href);_=!!t.searchParams.get("fromLoadVideo"),h=(null==(e=t.searchParams.get("listeners"))?void 0:e.split(","))||[],(_||h.length)&&(t.searchParams.delete("fromLoadVideo"),t.searchParams.delete("listeners"))}(),function(){const r=e.config.embed.on_site;r&&!Kg(e.element)||(m(e.config.embed.api),n=new jT({hidePrivateMethods:!r}),n.configureClient(window.parent,"*"),n.filter(function(){return window.parent!=window}),n.listeners=jm(Qm).reduce((e,t)=>p(p({},e),{},{[t]:!1}),{}),h.length?h.forEach(e=>{n.listeners[e]=!0}):_S.forEach(e=>n.listeners[e]=!0),n.filter(e=>n.listeners[e]),t.on(vm,(e,t,r)=>{n.addAllowedActor(e,null==t?void 0:t.contentWindow,r)}))}(),function(){if(!n)return;const t=wT({},E,b);n.extendMethods(t),n.hooks({logError(e){"InternalError"!==e.name&&y(Qm.ERROR,I(e))},parseMessage(e){if(!e||""===e)return{};if(Ei(e))return m(3),e;try{const t=JSON.parse(e);return m(2),t}catch(e){return m(null),y(Qm.ERROR,"The Vimeo Froogaloop v1 API is no longer supported.\n Please follow the upgrade instructions here: https://goo.gl/mueGRR"),{}}},buildMessage(t){var n;null!=(n=e.config.embed)&&n.player_id&&(t.player_id=e.config.embed.player_id);try{2===r&&(t=function(e){if(e.event){for(const t in ef)if(ef[t]===e.event){e.event=t;break}"cuechange"===e.event&&(e.data.text=e.data.cues[0].text,e.data.html=e.data.cues[0].html,delete e.data.cues)}return JSON.stringify(e)}(t)),Ei(t)&&"ready"===t.event&&(t=JSON.stringify(t))}catch(e){}return t}})}(),t.on(ki.BUFFER_STARTED,T(Qm.BUFFER_START)),t.on(ki.BUFFER_ENDED,T(Qm.BUFFER_END)),t.on(ki.CUE_POINT,T(Qm.CUEPOINT,function({time:e,data:t,id:n}){return{time:e,data:t,id:n}})),t.on(ki.NO_SUPPORTED_CDM,T(Qm.DRM_INIT_FAILED)),t.on(au,T(Qm.CUE_CHANGE,function(e,t=[]){const{language:n=null,label:r=null,kind:i=null}=e||{};return{label:r,language:n,kind:i,cues:t}})),t.on(mh,T(Qm.CHAPTER_CHANGE,function(t){const n=Array.from(e.backbone.chapters).findIndex(e=>t===e.id);return n>=0?{startTime:e.backbone.chapters[n].startTime,title:e.backbone.chapters[n].text,index:n+1}:null})),t.on(Z_,T(Qm.ENDED,function(){return s=!1,{seconds:Fm(e.config.video.duration),percent:1,duration:Fm(e.config.video.duration)}})),t.on(z_,T(Qm.PAUSE,function(t){return s=!1,{seconds:Fm(t),percent:Fm(t/e.config.video.duration),duration:Fm(e.config.video.duration)}})),t.on(rh,T(Qm.PLAYBACK_RATE_CHANGE,C)),t.on(rh,T(Qm.RATE_CHANGE,C)),t.on(Th,T(Qm.TEXT_TRACK_CHANGE,function(e){u=e;const{language:t=null,label:n=null,kind:r=null}=e||{};return{label:n,language:t,kind:r}})),t.on(J_,T(Qm.VOLUME_CHANGE,function(t){return{volume:Fm(t),muted:e.backbone.muted}})),t.on(gh,T(Qm.CONTROL_BAR_VISIBILITY_CHANGED,function(e){return{visible:e}})),t.on(Eh,T(Qm.TOAST_VISIBILITY_CHANGED,function(e){return{visible:e}})),t.on(ap,function(e){d&&setTimeout(function(){var e=!0;hc.settingVolume||0!==d?t.fire(s_,d,e):t.fire(l_,!0,e)},0),e&&A()}),t.on(Y_,function(e){const t=L(e);a&&y(Qm.ERROR,t)}),t.on(Rh,T(Qm.FULLSCREENCHANGE,function(){return{fullscreen:!0}})),t.on(Oh,T(Qm.FULLSCREENCHANGE,function(){return{fullscreen:!1}})),t.on(eh,T(Qm.QUALITY_CHANGE,function(e){return{quality:e}})),t.on(Kp,T(Qm.AD_STARTED)),t.on(jp,T(Qm.AD_COMPLETED)),t.on($p,T(Qm.AD_ERROR)),t.on(Xp,T(Qm.AD_SKIPPED)),t.on(Zp,T(Qm.AD_ALL_COMPLETED)),t.on(Yp,T(Qm.AD_CLICKED)),t.on(Qp,T(Qm.INTERACTIVE_HOTSPOT_CLICKED,function({hotspotId:e,customPayloadData:t,actionPreference:n,currentTime:r,action:i}){return{hotspotId:e,customPayloadData:t,actionPreference:n,currentTime:r,action:i}})),t.on(em,T(Qm.INTERACTIVE_OVERLAY_PANEL_CLICKED,function({action:e,actionPreference:t,currentTime:n,customPayloadData:r,overlayId:i,panelId:o}){return{action:e,actionPreference:t,currentTime:n,customPayloadData:r,overlayId:i,panelId:o}})),t.once(xp,function(){a=!0,_?(A(),function(e,t){n&&n.emitMethodEvent(e,t)}(Qm.LOAD_VIDEO,e.config.video.id)):y(Qm.READY),l&&(y(Qm.ERROR,L(l)),l=null)}),t.on(Pu.EVENT_ENDED,T(Qm.LIVE_EVENT_ENDED)),t.on(Pu.EVENT_STARTED,T(Qm.LIVE_EVENT_STARTED)),t.on(Pu.STREAM_OFFLINE,T(Qm.LIVE_STREAM_OFFLINE)),t.on(Pu.STREAM_ONLINE,T(Qm.LIVE_STREAM_ONLINE)),t.on(Ni.CAMERA_CHANGE,T(Qm.CAMERA_CHANGE,function(e){return e})),t.on(Ni.MOTION_END,T(Qm.MOTION_END)),t.on(Ni.MOTION_START,T(Qm.MOTION_START)),t.on(Ni.WEBVR_HARDWARE_AVAILABLE,T(Qm.WEBVR_HARDWARE_AVAILABLE)),t.on(Ni.WEBVR_ENTER,T(Qm.ENTER_WEBVR)),t.on(Ni.WEBVR_EXIT,T(Qm.EXIT_WEBVR)),t.on(Ni.SPATIAL_UNSUPPORTED,T(Qm.SPATIAL_UNSUPPORTED)),t.on(Pi.PLAY,T(Qm.PLAY,function(t){return s?null:(s=!0,{seconds:Fm(t),percent:Fm(t/e.config.video.duration),duration:Fm(e.config.video.duration)})})),t.on(Pi.PLAYING,T(Qm.PLAYING,function(){return s?{seconds:Fm(e.currentTime),percent:Fm(e.currentTime/e.config.video.duration),duration:Fm(e.config.video.duration)}:null})),t.on(Pi.PROGRESS,T(Qm.PROGRESS,function({loaded:e,duration:t,loadProgress:n}){let i={seconds:Fm(e),percent:Fm(n),duration:Fm(t)};return r<3&&(i.bytesLoaded=-1,i.bytesTotal=-1),i})),t.on(Pi.SEEKING,T(Qm.SEEKING,S)),t.on(Pi.SEEKED,T(Qm.SEEKED,S)),t.on(Pi.TIME_UPDATE,T(Qm.TIME_UPDATE,function({currentTime:e,duration:t,timeProgress:n}){return{seconds:Fm(e),percent:Fm(n),duration:Fm(t)}})),t.on(Pi.LOADED_METADATA,T(Qm.LOADED_METADATA)),t.on(Pi.DURATION_CHANGE,T(Qm.DURATION_CHANGE,function(t){return{duration:e.backbone.duration}})),t.on(Pi.WAITING,T(Qm.WAITING)),t.on(Pi.LOADED_DATA,T(Qm.LOADED_DATA)),t.on(Pi.LOAD_START,T(Qm.LOAD_START)),t.on(Pi.RESIZE,T(Qm.RESIZE,function(){return{videoWidth:e.backbone.videoWidth,videoHeight:e.backbone.videoHeight}})),t.on(Pi.ENTER_PICTURE_IN_PICTURE,T(Qm.ENTER_PICTURE_IN_PICTURE)),t.on(Pi.LEAVE_PICTURE_IN_PICTURE,T(Qm.LEAVE_PICTURE_IN_PICTURE)),t.on(hy.connected,T(Qm.CHROMECAST_CONNECTED)),t.on(Vp,T(Qm.REMOTE_PLAYBACK_AVAILABILITY_CHANGE,()=>!0)),t.on(Bp,T(Qm.REMOTE_PLAYBACK_AVAILABILITY_CHANGE,()=>!1)),t.on(Up,T(Qm.REMOTE_PLAYBACK_CONNECT)),t.on(Fp,T(Qm.REMOTE_PLAYBACK_DISCONNECT)),t.on(ki.AUDIO_TRACK_CHANGED,T(Qm.AUDIO_TRACK_CHANGE,function(){const t=e.backbone.enabledAudioTrack,{language:n,label:r,kind:i,provenance:o,enabled:a}=t||{};return{label:r,language:n,kind:i,provenance:o,enabled:a}})),t.on(u_,function(){l=null,c=!1}),t.on(Op,function(e={}){n&&(n.listeners[Qm.SPACE_CHANGE]=!0,y(Qm.SPACE_CHANGE,e))}),t.fire(Mp),E}var pS=Object.prototype.hasOwnProperty,mS=Si(function(e,t){if(Xn(t)||tr(t))Ln(t,nr(t),e);else for(var n in t)pS.call(t,n)&&An(e,n,t[n])});function fS(e){return Ym("av01",e)?"AV1":Ym("dvh1",e)?"HEVC_DVH1":Ym("hvc1",e)?"HEVC":Ym("avc1",e)?"AVC":e||""}function vS(e){return Ym("mp4a",e)?"AAC":Ym("opus",e)?"OPUS":e||""}const gS=new Set([1117596344,1117598108,1117598100,1117596340,1117598047,1117596276,1117596328,1117596303,1117596317,1117596269,1117598072,1117598059,1117598085,1117598030,1117599369,1117599450,1117599356,1117599298,1117599320,1117599232]);function ES(e,t){const n=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function({identifier:t,data:{request:n,response:r,extraContext:i}}){const o=r.headers;return function(e,t){return e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e}(r.arrayBuffer(),function(a){if("video"===t.type){const o=e.backbone.representations.reverse(),l=o[t.stream];if(!l)return;const c=function(t,n,r,i,o,a){const l=r.headers;delete l[""];let c={};Object.keys(l).forEach(e=>{const t=l[e],n=e.replace(s,"_");c[n]=t});let u=a.slice();return u.forEach(e=>{e.profile=String(e.profile||"")||null,e.id=String(e.id||"")||null}),{host:fe(n.data.url),product:Og(e.config),duration:n.data.duration,size:i.byteLength,index:t.segment,session_id:e.config.request.session,profile_id:String(o.profile||"")||null,quality:o.quality,streams:u,clip_id:e.config.video.id,headers:c,buffered:Fm(ae(e.backbone.currentTime,e.backbone.buffered),2),request_id:n.data.uuid?n.data.uuid:"",ttfb:GE()}}(t,n,r,a,l,o);let u=c;if(i&&(u=mS({extraContext:i},c)),e.events.fire(Jp,{name:wg.CHUNK_DOWNLOADED,data:u}),Math.random()<-1){const e=function({size:e,duration:t,quality:n}){return{chunk_request_duration:t,chunk_size:Math.floor(e),quality:n}}(c);$(wg.CHUNK_DOWNLOADED,e)}U+=a.byteLength,H=c}"akamai-grn"in o&&(O=o["akamai-grn"]),function({headers:e,url:t}){const n=Gg(e);n===Mv.CacheMiss?k={url:t,edge:!1,tier1:!1,tier2:!1}:n===Mv.MidCacheHit?k={url:t,edge:!1,tier1:!0,tier2:!1}:n===Mv.EdgeCacheHit&&(k={url:t,edge:!0,tier1:!0,tier2:!1})}(r);let l={};O&&(l.akamai_reference_id=O),l.manifest_load_durations=e.backbone.manifestLoadDurations,l.successful_segment_count=e.backbone.successfulSegments.length,l.failed_segment_count=e.backbone.failedSegments.length,N=l})});let r,i,o;const a=new WeakMap,s=new RegExp("-","g");let l,c,u=null,d=null,_=!1,h=!1,p=!1,m="auto",v={},g={},E=null,b=null,y=null,T=[],S=null,C={},A=!1,L=!1,I=!1,P=0,R=0,w=0,O=null,k=null,D=!1,N=null,M=null,x=null,V=!1,B=!1,U=0,F=0,H=null,W="",G=rc;function j(){const t=a.get(e.backbone.videoElement);t?({_videoMonitor:i,_metricsBufferTracker:o}=t):(o=new hg,i=new gg(e.backbone.videoElement,$),Y(),a.set(e.backbone.videoElement,{_videoMonitor:i,_metricsBufferTracker:o}))}function Y(){const t=o;i.customizeHooks({bufferTracker:t,videoBufferCheck(){e.events.on(ki.BUFFER_STARTED,()=>{_&&(V||D||(D=!0,t.trackBufferStart(i.logBufferStart,{lower_profile_available:e.backbone.isLowerProfileAvailable})))}),e.events.on(ki.BUFFER_ENDED,()=>{_&&D&&(D=!1,t.trackBufferEnd(i.logBufferEnd,{cdn_data:k}),t.resetLastBufferTime())})},addEventData(e){const t=B;switch(B=!1,e){case wg.VIDEO_START_TIME:return N;case wg.VIDEO_SEEK:const e=M;return M=null,e;case wg.VIDEO_PLAYED:case wg.VIDEO_PAUSED:return{api_call:t};case wg.VIDEO_EXIT:return{bytes_loaded:U}}return null},customMinuteTracker:{shouldCount:()=>{var t;return e.backbone.isLive()&&(null==(t=e.config.video.live_event)?void 0:t.dvr)&&!e.backbone.atLiveEdge},onCount:e=>{F=e}}}),i.initHooks()}function $(n,o={}){(function(t){var n,r,i;const o=function({core:e}){var t;return null!=(t=e.config.video)&&t.id&&gS.has(e.config.video.id)?.001:null}({core:e});if(null!==o&&Math.random()>o)return!0;switch(t){case wg.VIDEO_SEEK:case wg.VIDEO_SEEKED:return(null==(n=e.config.embed)?void 0:n.loop)||(null==(r=e.config.embed)||null==(r=r.settings)?void 0:r.background);case wg.VIDEO_PLAYBACK_RATE_CHANGED:return null==(i=e.config.video.live_event)?void 0:i.low_latency;case wg.VIDEO_PLAYBACK_ERROR&&(null==t?void 0:t.error_type)===ki.MEDIA_CAPABILITY_STREAMS_UNSUPPORTED:return Sb(.1);default:return!1}})(n)||(o=Object.assign(i?i.globalProperties():{},Object.assign(function(){var n,r,i,o,a;const s={autoplay:1===e.config.embed.autoplay,background:!!e.config.embed.settings.background,clip_id:e.config.video.id,context:e.config.embed.context,device_pixel_ratio:window.devicePixelRatio||1,drm:!!e.config.request.drm,embed:!e.config.embed.on_site,has_sd_drm_fallback:!(null==(n=e.config.request.drm)||!n.fallback_asset),is_mod:!!e.config.user.mod,is_spatial:!(!Q.spatialPlayback||!e.config.video.spatial),looping:!!e.config.embed.loop,owner_id:null==(r=e.config.video)||null==(r=r.owner)?void 0:r.id,product:Og(e.config),referrer:e.config.request.referrer,session_id:e.config.request.session,version:Hy(e.config),version_backend:e.config.request.build.backend,viewer_id:null==(i=e.config.user)?void 0:i.id,viewer_team_id:null==(o=e.config.user)?void 0:o.team_id,viewer_team_origin_user_id:null==(a=e.config.user)?void 0:a.team_origin_user_id,vuid:nE("vuid"),fps:e.config.video.fps};var l;return e.config.video.owner&&(s.account_type=e.config.video.owner.account_type),e.config.embed.api&&(s.api_version=e.config.embed.api),e.config.embed.app_id&&(s.app_id=String(e.config.embed.app_id)),e.config.video.privacy&&(s.privacy=e.config.video.privacy),t.get(Py)&&(s.live_session_id=null==(l=e.config.video.live_event)?void 0:l.id),s}(),function(){var t,n,r,i,o;const a=e.backbone.video?e.backbone.video.currentFile:{},s=function(){const t={},n=le(),r=td("asc"),i=e.backbone.currentScannerName,o=i===$s,a="HTMLScanner"===i,s=e.backbone.isLive();let l=[];a&&(l=Kt(e.config,"request.files.progressive")||Kt(e.config,"request.files.hls")||[]),o&&(l=Kt(e.config,"request.files.dash.streams",[])),s&&(l=e.backbone.video.currentFile.mime===o_.dashMpd?Kt(e.config,"request.files.dash.streams",[]):Kt(e.config,"request.files.hls.streams",[]));const c=Array.from(l).sort(r).map(e=>e.profile);let u=-1,d=0,_=null;if(Object.keys(g).forEach(e=>{const t=c.indexOf(parseInt(e,10));t>u&&(u=t);const r=g[e].reduce((e,t)=>((t.end||n)-t.start)/1e3+e,0);r>d&&(d=r,_=e)}),t.highest_profile=c[u],t.highest_available_profile=c[c.length-1],t.most_used_profile=_,(o||s)&&T){t.max_speed=Math.round(Math.max.apply(Math,f(T)))/1e3,t.min_speed=Math.round(Math.min.apply(Math,f(T)))/1e3;const e=T.reduce((e,t)=>e+t,0);t.average_speed=Math.round(e/T.length)/1e3}return t}();let{mime:l=o_.h264,metadata:{profile:_=null}={}}=a,h=!1,p=!1;switch(l){case o_.dash:0===a.restrictedStreamIndexes.length&&(h=!0),Kt(e.config,"request.files.dash.separate_av")&&(p=!0),_=(null==(t=v)?void 0:t.profile)??null;break;case o_.hls:h=!0}let m={audio_bitrate:Math.round(e.backbone.getBitrateAtTime(e.backbone.currentTime,"audio","average")/1e3),audio_provenance:q(),auto:h,average_speed:s.average_speed||0,cdn:a.metadata?a.metadata.cdn:"akamai",delivery:"live"!==Zm[l]?Zm[l]:"dash",display:e.expose.pictureInPicture?"pip":e.expose.fullscreen?"fs":e.backbone.videoElement.webkitCurrentPlaybackTargetIsWireless?"airplay":null,drm_cdm:W,drm_mode:G,dropped_frame_percent:w,event_time:u+ue(d),fullscreen:L,is_visible:(null==(n=c)?void 0:n.isInView)??!0,picture_in_picture:I,highest_available_profile:s.highest_available_profile?String(s.highest_available_profile):null,highest_profile:s.highest_profile?String(s.highest_profile):null,max_speed:isFinite(s.max_speed)?s.max_speed:0,mime:a.mime||null,min_speed:isFinite(s.min_speed)?s.min_speed:0,most_used_profile:s.most_used_profile?String(s.most_used_profile):null,profile_id:_?String(_):null,codec:fS(null==e.backbone.getCurrentStream||null==(r=e.backbone.getCurrentStream("video"))?void 0:r.codecs),audio_codec:vS(null==e.backbone.getCurrentStream||null==(i=e.backbone.getCurrentStream("audio"))?void 0:i.codecs),quality:(null==(o=v)?void 0:o.quality)??null,quality_downswitch_count:R,quality_upswitch_count:P,separate_av:p,target_profile_id:x,video_bitrate:Math.round(e.backbone.getBitrateAtTime(e.backbone.currentTime,"video","average")/1e3),video_duration:Fm(e.config.video.duration)};if(e.backbone.hlsJsVersion&&(m.hlsjs_version=e.backbone.hlsJsVersion),e.backbone.isLive()){var E;void 0!==e.backbone.latency&&(m.latency=e.backbone.latency),void 0!==e.backbone.lowLatencyMode&&(m.is_low_latency=e.backbone.lowLatencyMode);const t=!(null==(E=e.config.video.live_event)||!E.dvr);m.dvr=t,t&&(m.in_dvr_mode=t&&!e.backbone.atLiveEdge,m.dvr_minutes_watched=F)}if(e.config.video.ecdn){const t=e.config.video.ecdn.ecdn_provider,{ecdnBytesByCdn:n,ecdnBytesPeered:r,ecdnPeers:i}=qg(t);m.ecdn=!0,m.ecdn_provider=t,m.ecdn_bytes_via_cdn=n,m.ecdn_bytes_via_peering=r,m.ecdn_peers=i}return m}(),(e=>{const t=["example","live_test"],n=e.config.request.ab_tests||{},r=Array.isArray(e.abTests)?e.abTests:[],i=Object.keys(n).filter(e=>!t.includes(e)).map(e=>({test:e,group:n[e].group}));return{ab_tests:[].concat(f(i),f(r))}})(e)),o),o.name=n,e.events.fire(Jp,{name:n,data:o}),r.log(o).catch(e=>{}))}function q(){if(!e.config.request.audio_tracks)return null;let t=e.backbone.audioTracks.find(e=>!!e.active);if(!t)return null;if(t.provenance)return t.provenance;const n=e.config.request.audio_tracks.filter(e=>e.language===t.language);return 1===n.length?n[0].provenance:null}function z(e=""){return e?e.split("\n").map(e=>e.trim()).join(" "):""}function K(e,t={final:!0},n=null){const r={error_type:e,error_reason:n};i.handleExternalError(r,t)}d=ce(),u=e.config.request.timestamp,r=new mg(function(){const t=`?beacon=1&session-id=${e.config.request.session}`;return e.config.request.urls.fresnel+t}()),e.events.on(Y_,K),e.events.on(u_,function(){A=!1}),e.events.on(a_,function(){V=!0}),e.events.on(Rh,function(){L=!0,$(wg.VIDEO_FULLSCREEN_CHANGE)}),e.events.on(Oh,function(){L=!1,$(wg.VIDEO_FULLSCREEN_CHANGE)}),e.events.on(Pi.ENTER_PICTURE_IN_PICTURE,function(){I=!0,$(wg.VIDEO_PICTURE_IN_PICTURE_CHANGE)}),e.events.on(Pi.LEAVE_PICTURE_IN_PICTURE,function(){I=!1,$(wg.VIDEO_PICTURE_IN_PICTURE_CHANGE)}),e.events.on(ap,function(){u=e.config.request.timestamp,d=ce(),_=!1,h=!1,p=!1,m="auto",v={},g={},E=null,b=null,y=null,T=[],S=null,C={},A=!1,L=!1,P=0,R=0,w=0,k=null,x=null,U=0,F=0,i&&(i.reset(),Y())}),e.events.on(ih,function(){M={seek_type:"nudge"}}),e.events.on(fh,function(e){const t=null==e?void 0:e.seekType;M={seek_type:t}}),e.events.on(ph,function(e){M={seek_type:`chapter-${e}`}}),e.events.on(nm,function(e){M={seek_type:e.type}}),e.events.on(tm,function(e){M={seek_type:e.type,seek_action:e.action}}),e.events.on(iu,function(){A||vy.isCastConnected||e.performDelegateAction(Zy,(e,t={})=>{A=!0,l.then(()=>i.logStartRequest()).catch(()=>{})})}),e.events.on(Uh,function(e){e===ky&&$(wg.SLATE_DISPLAYED,{slate_type:ky})}),e.events.on(rh,function(e,t){$(wg.VIDEO_PLAYBACK_RATE_CHANGED,{previous_playback_rate:t})}),e.events.on(__,function(t){e.backbone.video.currentFile.mime===o_.dash&&("auto"===t||h?"auto"===t&&h&&!p&&($(wg.VIDEO_SWITCH_BACK_TO_AUTO,{quality:m,auto:1}),p=!0):($(wg.VIDEO_SWITCH_FROM_AUTO,{quality:t,auto:0}),h=!0),m=t)}),e.events.on(b_,function(e){S!==e&&(S=e,$(wg.CAPTIONS_ENABLED,{captions_id:String(e)}))}),e.events.on(y_,function(){S&&(S=null,$(wg.CAPTIONS_DISABLED))}),e.events.on(hy.connected,function(){$(wg.CHROMECAST_CONNECTED)}),e.events.on(hy.disconnected,function(){$(wg.CHROMECAST_DISCONNECTED)}),e.events.on(ki.STREAM_CHANGE,function(e,t,n,r){var i;v=e;const o=e.profile?e.profile:e.id,a=le();if(g[o]=g[o]||[],E){const e=g[E].length-1;g[E][e]&&(g[E][e].end=a)}b&&(n[t].bitrate>b?P+=1:R+=1),g[o].push({start:a}),C[o]={bitrate:n[t].bitrate,width:n[t].width,height:n[t].height};let s={previous_audio_bitrate:y/1e3,previous_video_bitrate:b/1e3,previous_profile_id:String(E),reason:null==r?void 0:r.reasonForSwitch};o.toString()===(null==(i=H)?void 0:i.profile_id)&&(H.headers.akamai_request_bc||H.headers.x_cache)&&(s.cache_hit=Gg(H.headers)),$(wg.VIDEO_STREAM_CHANGE,s),E=o,b=n[t].bitrate,y=n[t].audioBitrate}),e.events.on(ki.STREAM_TARGET_CHANGE,function(e){e&&(x=String(e.profile||"")||null)}),e.events.on(Pi.PLAYING,function(){V=!1}),e.events.once(nh,function(){_=!0}),e.events.on(Wp,function(){$(wg.AD_BUFFERING)}),e.events.on(jp,function(){$(wg.AD_COMPLETE)}),e.events.on(Yp,function(){$(wg.AD_CLICKED)}),e.events.on($p,function(e){$(wg.AD_ERROR,{error_type:e.errorType,error_reason:e.errorReason})}),e.events.on(qp,function(){$(wg.AD_PAUSED)}),e.events.on(zp,function(){$(wg.AD_RESUMED)}),e.events.on(Kp,function(e){$(wg.AD_STARTED,{startup_duration:e.time?Fm(e.time/1e3,2):null})}),e.events.on(Xp,function(){$(wg.AD_SKIPPED)}),e.events.on(K_,function(){Q.iPhone&&i.setDisplayContext(1)}),e.events.on(X_,function(){Q.iPhone&&i.setDisplayContext(0)}),e.events.on(ki.DROPPED_FRAMES,function(e){let t=e.dropped/e.total*100;w=Math.round(100*t)/100}),e.events.on(ki.BANDWIDTH,function({speed:e}){T.push(e),T.length>500&&T.shift()}),e.events.on(ki.MANIFEST_TIMEOUT,function(){$(wg.VIDEO_MANIFEST_TIMEOUT)}),e.events.on(ki.MANIFEST_LOADED,function(){$(wg.VIDEO_MANIFEST_LOADED)}),e.events.on(ki.DOWNLOAD_END,n),e.events.on(ki.DOWNLOAD_TIMEOUT,function(){$(wg.DOWNLOAD_TIMEOUT)}),e.events.on(ki.DRM_CDM_CHANGE,function(e){W=e}),e.events.on(ki.DRM_KEY_SWITCH,function(e){G=e,$(wg.DRM_KEY_SWITCH)}),e.events.on(ki.SCANNER_CHANGE,function(){k=null}),e.events.on(ki.AV_DURATION_MISMATCH,function(e){$(wg.VIDEO_DURATION_MISMATCH,{duration_difference:Math.round(100*e)/100})}),e.events.on(ki.QUOTA_EXCEEDED_ERROR,function({buffered:e}){let t={error_type:ki.QUOTA_EXCEEDED_ERROR};t.buffered=Fm(ae(0,e),2),t.bytes_loaded=U,$(wg.VIDEO_PLAYBACK_ERROR,t)}),e.events.on(ki.DROPPED_FRAME_PERCENT_EXCEEDED,function(){let e={error_type:ki.DROPPED_FRAME_PERCENT_EXCEEDED};$(wg.VIDEO_PLAYBACK_ERROR,e)}),e.events.on(ki.MEDIA_CAPABILITY_STREAMS_UNSUPPORTED,function({incompatibleStreams:e,incompatibleStreamsAttributes:t}){const n=["codecs","bitrate","framerate","quality","width","height","mime_type"];e.forEach((e,r)=>{const i=n.reduce((t,n)=>(t.push(e[n]),t),[]).concat(t[r].join(",")).join("|"),o={error_type:ki.MEDIA_CAPABILITY_STREAMS_UNSUPPORTED,error_reason:i};$(wg.VIDEO_PLAYBACK_ERROR,o)})}),e.events.on(ki.HLS_JS_ERROR,function(e){var t;const{error:n,fatal:r,type:i,details:o,reason:a}=e,{message:s,stack:l}=n,c={error_message:s,error_type:i,error_details:o,error_fatal:r,error_reason:a||null,error_stack:z(l),hlsjs_version:(null==(t=window.Hls)?void 0:t.version)||"",is_error:!0};$(wg.HLS_JS_EVENT,c)}),e.events.on(Mi.MEDIASESSION_PLAY,function(){$(wg.MEDIASESSION_PLAY)}),e.events.on(Mi.MEDIASESSION_PAUSE,function(){$(wg.MEDIASESSION_PAUSE)}),e.events.on(Mi.MEDIASESSION_SEEK_FORWARD,function(){$(wg.MEDIASESSION_SEEK_FORWARD)}),e.events.on(Mi.MEDIASESSION_SEEK_BACKWARD,function(){$(wg.MEDIASESSION_SEEK_BACKWARD)}),e.events.on(Mi.MEDIASESSION_SEEK_TO,function(){$(wg.MEDIASESSION_SEEK_TO)}),e.events.on(zm._seek,function(){M={seek_type:"api"}}),e.events.on(zm._play,function(){B=!0}),e.events.on(zm._pause,function(){B=!0}),e.events.on(Ni.WEBVR_ENTER,function(){$(wg.ENTER_WEBVR,!0)}),e.events.on(Ni.WEBVR_EXIT,function(){$(wg.EXIT_WEBVR,!0)}),e.events.on(Pu.STALL_JUMP,function({msg:e}){K("livestall",{final:!1},e)}),e.events.on(Pu.LOW_LATENCY_FALLBACK,function({msg:e}){K("livefallback",{final:!1},e)}),l=new Promise(t=>{var n;null!=(n=e.backbone)&&n.video&&t(),e.events.on(ru,t)}),l.then(j).catch(()=>{}),c=ie(e.element),e.events.on(Sp,j),e.events.on(V_,()=>{var e;return null==(e=c)?void 0:e.cleanup()})}var bS="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function yS(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var TS=yS(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Tracker=void 0;var n=function(){function e(){}return e.getAttributeTypeMap=function(){return e.attributeTypeMap},e.attributeTypeMap=[{name:"name",baseName:"name",type:"string"},{name:"version",baseName:"version",type:"string"}],e}();t.Tracker=n});let SS;const CS=new Uint8Array(16);function AS(){if(!SS&&(SS="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!SS))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return SS(CS)}var LS=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function IS(e){return"string"==typeof e&&LS.test(e)}const PS=[];for(let e=0;e<256;++e)PS.push((e+256).toString(16).slice(1));function RS(e,t=0){return PS[e[t+0]]+PS[e[t+1]]+PS[e[t+2]]+PS[e[t+3]]+"-"+PS[e[t+4]]+PS[e[t+5]]+"-"+PS[e[t+6]]+PS[e[t+7]]+"-"+PS[e[t+8]]+PS[e[t+9]]+"-"+PS[e[t+10]]+PS[e[t+11]]+PS[e[t+12]]+PS[e[t+13]]+PS[e[t+14]]+PS[e[t+15]]}let wS,OS,kS=0,DS=0;function NS(e){if(!IS(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}function MS(e,t,n){function r(e,r,i,o){var a;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=NS(r)),16!==(null===(a=r)||void 0===a?void 0:a.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+e.length);if(s.set(r),s.set(e,r.length),s=n(s),s[6]=15&s[6]|t,s[8]=63&s[8]|128,i){o=o||0;for(let e=0;e<16;++e)i[o+e]=s[e];return i}return RS(s)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function xS(e){return 14+(e+64>>>9<<4)+1}function VS(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function BS(e,t,n,r,i,o){return VS(function(e,t){return e<<t|e>>>32-t}(VS(VS(t,e),VS(r,o)),i),n)}function US(e,t,n,r,i,o,a){return BS(t&n|~t&r,e,t,i,o,a)}function FS(e,t,n,r,i,o,a){return BS(t&r|n&~r,e,t,i,o,a)}function HS(e,t,n,r,i,o,a){return BS(t^n^r,e,t,i,o,a)}function WS(e,t,n,r,i,o,a){return BS(n^(t|~r),e,t,i,o,a)}const GS=MS("v3",48,function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){const t=[],n=32*e.length,r="0123456789abcdef";for(let i=0;i<n;i+=8){const n=e[i>>5]>>>i%32&255,o=parseInt(r.charAt(n>>>4&15)+r.charAt(15&n),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[xS(t)-1]=t;let n=1732584193,r=-271733879,i=-1732584194,o=271733878;for(let t=0;t<e.length;t+=16){const a=n,s=r,l=i,c=o;n=US(n,r,i,o,e[t],7,-680876936),o=US(o,n,r,i,e[t+1],12,-389564586),i=US(i,o,n,r,e[t+2],17,606105819),r=US(r,i,o,n,e[t+3],22,-1044525330),n=US(n,r,i,o,e[t+4],7,-176418897),o=US(o,n,r,i,e[t+5],12,1200080426),i=US(i,o,n,r,e[t+6],17,-1473231341),r=US(r,i,o,n,e[t+7],22,-45705983),n=US(n,r,i,o,e[t+8],7,1770035416),o=US(o,n,r,i,e[t+9],12,-1958414417),i=US(i,o,n,r,e[t+10],17,-42063),r=US(r,i,o,n,e[t+11],22,-1990404162),n=US(n,r,i,o,e[t+12],7,1804603682),o=US(o,n,r,i,e[t+13],12,-40341101),i=US(i,o,n,r,e[t+14],17,-1502002290),r=US(r,i,o,n,e[t+15],22,1236535329),n=FS(n,r,i,o,e[t+1],5,-165796510),o=FS(o,n,r,i,e[t+6],9,-1069501632),i=FS(i,o,n,r,e[t+11],14,643717713),r=FS(r,i,o,n,e[t],20,-373897302),n=FS(n,r,i,o,e[t+5],5,-701558691),o=FS(o,n,r,i,e[t+10],9,38016083),i=FS(i,o,n,r,e[t+15],14,-660478335),r=FS(r,i,o,n,e[t+4],20,-405537848),n=FS(n,r,i,o,e[t+9],5,568446438),o=FS(o,n,r,i,e[t+14],9,-1019803690),i=FS(i,o,n,r,e[t+3],14,-187363961),r=FS(r,i,o,n,e[t+8],20,1163531501),n=FS(n,r,i,o,e[t+13],5,-1444681467),o=FS(o,n,r,i,e[t+2],9,-51403784),i=FS(i,o,n,r,e[t+7],14,1735328473),r=FS(r,i,o,n,e[t+12],20,-1926607734),n=HS(n,r,i,o,e[t+5],4,-378558),o=HS(o,n,r,i,e[t+8],11,-2022574463),i=HS(i,o,n,r,e[t+11],16,1839030562),r=HS(r,i,o,n,e[t+14],23,-35309556),n=HS(n,r,i,o,e[t+1],4,-1530992060),o=HS(o,n,r,i,e[t+4],11,1272893353),i=HS(i,o,n,r,e[t+7],16,-155497632),r=HS(r,i,o,n,e[t+10],23,-1094730640),n=HS(n,r,i,o,e[t+13],4,681279174),o=HS(o,n,r,i,e[t],11,-358537222),i=HS(i,o,n,r,e[t+3],16,-722521979),r=HS(r,i,o,n,e[t+6],23,76029189),n=HS(n,r,i,o,e[t+9],4,-640364487),o=HS(o,n,r,i,e[t+12],11,-421815835),i=HS(i,o,n,r,e[t+15],16,530742520),r=HS(r,i,o,n,e[t+2],23,-995338651),n=WS(n,r,i,o,e[t],6,-198630844),o=WS(o,n,r,i,e[t+7],10,1126891415),i=WS(i,o,n,r,e[t+14],15,-1416354905),r=WS(r,i,o,n,e[t+5],21,-57434055),n=WS(n,r,i,o,e[t+12],6,1700485571),o=WS(o,n,r,i,e[t+3],10,-1894986606),i=WS(i,o,n,r,e[t+10],15,-1051523),r=WS(r,i,o,n,e[t+1],21,-2054922799),n=WS(n,r,i,o,e[t+8],6,1873313359),o=WS(o,n,r,i,e[t+15],10,-30611744),i=WS(i,o,n,r,e[t+6],15,-1560198380),r=WS(r,i,o,n,e[t+13],21,1309151649),n=WS(n,r,i,o,e[t+4],6,-145523070),o=WS(o,n,r,i,e[t+11],10,-1120210379),i=WS(i,o,n,r,e[t+2],15,718787259),r=WS(r,i,o,n,e[t+9],21,-343485551),n=VS(n,a),r=VS(r,s),i=VS(i,l),o=VS(o,c)}return[n,r,i,o]}(function(e){if(0===e.length)return[];const t=8*e.length,n=new Uint32Array(xS(t));for(let r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))});var jS={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function YS(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function $S(e,t){return e<<t|e>>>32-t}const qS=MS("v5",80,function(e){const t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const r=e.length/4+2,i=Math.ceil(r/16),o=new Array(i);for(let t=0;t<i;++t){const n=new Uint32Array(16);for(let r=0;r<16;++r)n[r]=e[64*t+4*r]<<24|e[64*t+4*r+1]<<16|e[64*t+4*r+2]<<8|e[64*t+4*r+3];o[t]=n}o[i-1][14]=8*(e.length-1)/Math.pow(2,32),o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<i;++e){const r=new Uint32Array(80);for(let t=0;t<16;++t)r[t]=o[e][t];for(let e=16;e<80;++e)r[e]=$S(r[e-3]^r[e-8]^r[e-14]^r[e-16],1);let i=n[0],a=n[1],s=n[2],l=n[3],c=n[4];for(let e=0;e<80;++e){const n=Math.floor(e/20),o=$S(i,5)+YS(n,a,s,l)+c+t[n]+r[e]>>>0;c=l,l=s,s=$S(a,30)>>>0,a=i,i=o}n[0]=n[0]+i>>>0,n[1]=n[1]+a>>>0,n[2]=n[2]+s>>>0,n[3]=n[3]+l>>>0,n[4]=n[4]+c>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]});var zS=Object.freeze({__proto__:null,v1:function(e,t,n){let r=t&&n||0;const i=t||new Array(16);let o=(e=e||{}).node||wS,a=void 0!==e.clockseq?e.clockseq:OS;if(null==o||null==a){const t=e.random||(e.rng||AS)();null==o&&(o=wS=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==a&&(a=OS=16383&(t[6]<<8|t[7]))}let s=void 0!==e.msecs?e.msecs:Date.now(),l=void 0!==e.nsecs?e.nsecs:DS+1;const c=s-kS+(l-DS)/1e4;if(c<0&&void 0===e.clockseq&&(a=a+1&16383),(c<0||s>kS)&&void 0===e.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");kS=s,DS=l,OS=a,s+=122192928e5;const u=(1e4*(268435455&s)+l)%4294967296;i[r++]=u>>>24&255,i[r++]=u>>>16&255,i[r++]=u>>>8&255,i[r++]=255&u;const d=s/4294967296*1e4&268435455;i[r++]=d>>>8&255,i[r++]=255&d,i[r++]=d>>>24&15|16,i[r++]=d>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(let e=0;e<6;++e)i[r+e]=o[e];return t||RS(i)},v3:GS,v4:function(e,t,n){if(jS.randomUUID&&!t&&!e)return jS.randomUUID();const r=(e=e||{}).random||(e.rng||AS)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return RS(r)},v5:qS,NIL:"00000000-0000-0000-0000-000000000000",version:function(e){if(!IS(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)},validate:IS,stringify:function(e,t=0){const n=RS(e,t);if(!IS(n))throw TypeError("Stringified UUID is invalid");return n},parse:NS}),KS=yS(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Envelope=void 0;var n=function(){function e(e,t){this.event=e,this.eid=(0,zS.v4)(),this.ts_ms=Date.now(),this.created_at=Date.now(),this._tracker=new TS.Tracker,this._globalBPO=t}return Object.defineProperty(e.prototype,"tracker",{get:function(){return this._tracker},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"global",{get:function(){return this._globalBPO},enumerable:!1,configurable:!0}),e.getAttributeTypeMap=function(){return e.attributeTypeMap},e.attributeTypeMap=[{name:"eid",baseName:"eid",type:"string"},{name:"ts_ms",baseName:"ts_ms",type:"number"},{name:"created_at",baseName:"created_at",type:"number"},{name:"event",baseName:"event",type:"Event"},{name:"global",baseName:"global",type:"Event"},{name:"tracker",baseName:"tracker",type:"Tracker"}],e}();t.Envelope=n}),XS=yS(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Event=void 0;var n=function(){function e(e,t,n){this.name=e,this.ts_ms=Date.now(),this.version=t,this.fields=n}return e.getAttributeTypeMap=function(){return e.attributeTypeMap},e.attributeTypeMap=[{name:"name",baseName:"name",type:"string"},{name:"ts_ms",baseName:"ts_ms",type:"number"},{name:"version",baseName:"version",type:"number"},{name:"fields",baseName:"fields",type:"object"}],e}();t.Event=n}),ZS=yS(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EventContext=void 0;var n=function(){function e(e,t,n){this.name=e,this.ts_ms=Date.now(),this.version=t,this.fields=n}return e.getAttributeTypeMap=function(){return e.attributeTypeMap},e.attributeTypeMap=[{name:"name",baseName:"name",type:"string"},{name:"ts_ms",baseName:"ts_ms",type:"number"},{name:"version",baseName:"version",type:"number"},{name:"fields",baseName:"fields",type:"object"}],e}();t.EventContext=n}),JS=yS(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalContext=void 0;t.GlobalContext=function(e,t,n){this.name=e,this.ts_ms=Date.now(),this.version=t,this.fields=n}}),QS=yS(function(e,t){var n=bS&&bS.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=bS&&bS.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectSerializer=void 0,r(KS,t),r(XS,t),r(ZS,t),r(TS,t),r(JS,t);var i=XS,o=ZS,a=TS,s=["string","boolean","double","integer","long","float","number","any"],l={},c={Envelope:KS.Envelope,Event:i.Event,Tracker:a.Tracker,EventContext:o.EventContext},u=function(){function e(){}return e.findCorrectType=function(e,t){if(null==e)return t;if(-1!==s.indexOf(t.toLowerCase()))return t;if("Date"===t)return t;if(l[t])return t;if(!c[t])return t;var n=c[t].discriminator;if(null==n)return t;if(e[n]){var r=e[n];return c[r]?r:t}return t},e.serialize=function(t,n){if(null==t)return t;if(-1!==s.indexOf(n.toLowerCase()))return t;if(0===n.lastIndexOf("Array<",0)){var r=n.replace("Array<","");r=r.substring(0,r.length-1);var i=[];for(var o in t){var a=t[o];i.push(e.serialize(a,r))}return i}if("Date"===n)return t.toISOString();if(l[n])return t;if(!c[n])return t;n=this.findCorrectType(t,n);var u=c[n].getAttributeTypeMap(),d={};for(var o in u){var _=u[o];d[_.baseName]=e.serialize(t[_.name],_.type)}return d},e.deserialize=function(t,n){if(n=e.findCorrectType(t,n),null==t)return t;if(-1!==s.indexOf(n.toLowerCase()))return t;if(0===n.lastIndexOf("Array<",0)){var r=n.replace("Array<","");r=r.substring(0,r.length-1);var i=[];for(var o in t){var a=t[o];i.push(e.deserialize(a,r))}return i}if("Date"===n)return new Date(t);if(l[n])return t;if(!c[n])return t;var u=new c[n],d=c[n].getAttributeTypeMap();for(var o in d){var _=d[o];u[_.name]=e.deserialize(t[_.baseName],_.type)}return u},e}();t.ObjectSerializer=u}),eC=yS(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatRequestEvent=t.parseJwt=t.getCookie=void 0,t.getCookie=function(e){if("undefined"==typeof document)return null;var t=document.cookie.match(new RegExp("(;\\s)?".concat(e,"=")));if(!t||0==t.length||void 0===t.index)return null;var n=document.cookie.indexOf(";",t.index+1),r=t.index+t[0].length,i=-1===n?document.cookie.substr(r):document.cookie.substring(r,n);return decodeURIComponent(i)},t.parseJwt=function(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(t).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(n)},t.formatRequestEvent=function(e){var t=e.split(".");if(t.length<=2)return e;var n=t.pop();return"".concat(t.join("_"),".").concat(n)}}),tC=yS(function(e,t){var n,r=bS&&bS.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(a,s)}l((r=r.apply(e,t||[])).next())})},i=bS&&bS.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},o=bS&&bS.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=bS&&bS.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.BigPictureClient=t.Configuration=t.Service=void 0,function(e){e.FRESNEL_PROD="https://fresnel-events.vimeocdn.com",e.FRESNEL_PROD_CN="https://fresnel-events.videoji.cn",e.FRESNEL_DEV="https://fresnel-event-staging.vimeows.com",e.EVENTS_PROD="https://lensflare.vimeo.com"}(n=t.Service||(t.Service={}));var s=function(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=""),this.service=e,this.globalBPO=t,this.contexts=n,this.endpoint=r};t.Configuration=s;var l=function(){function e(){}return Object.defineProperty(e,"isInitalized",{get:function(){return Boolean(e.conf.globalBPO)},enumerable:!1,configurable:!0}),e.configure=function(t){e.conf=t,e.WAIT_QUEUE.length>0&&(e.WAIT_QUEUE.map(function(t){var n=t.event,r=t.contexts;r?e.sendEventWithContexts(n,r):e.sendEvent(n)}),e.WAIT_QUEUE=[])},e.updateObject=function(t,n){return r(this,void 0,void 0,function(){var r,s,l,c,u,d,_;return i(this,function(i){try{for(r=o(Object.entries(t)),s=r.next();!s.done;s=r.next())if(l=a(s.value,2),c=l[0],u=l[1],c in n){if(u instanceof Object)return n[c]instanceof Object?(e.updateObject(u,n[c]),[2]):(n[c]=u,[2]);n[c]=u}}catch(e){d={error:e}}finally{try{s&&!s.done&&(_=r.return)&&_.call(r)}finally{if(d)throw d.error}}return[2]})})},e.updateContext=function(t){return r(this,void 0,void 0,function(){return i(this,function(n){return"global"==t.context&&e.conf.globalBPO&&e.updateObject(t.fields,e.conf.globalBPO.fields),[2]})})},e.sendEvent=function(t,n){return r(this,void 0,void 0,function(){var r,o,a,s,l,c;return i(this,function(i){switch(i.label){case 0:if(null==t)throw new Error("Required parameter event was null or undefined when calling sendEvent.");return e.isInitalized?(r=JSON.stringify(QS.ObjectSerializer.serialize([new KS.Envelope(t,this.conf.globalBPO)],"Array<Envelope>")),o=(0,eC.formatRequestEvent)(t.name),a=""!==this.conf.endpoint?this.conf.endpoint:this.conf.service,s="".concat(a,"/add/").concat(encodeURIComponent(o)),navigator.sendBeacon&&!n?[3,2]:(l={method:"POST",headers:{"Content-Type":"application/json","User-Agent":navigator.userAgent,Origin:location.origin,Referer:document.referrer},body:r},n&&(l.headers.Authorization=n),[4,fetch(s,l)])):(e.WAIT_QUEUE.push({event:t}),e.waitAndFlushQueue(),[2]);case 1:return i.sent(),[3,3];case 2:c=new Blob([r]),navigator.sendBeacon(s,c),i.label=3;case 3:return[2]}})})},e.sendEventWithContexts=function(t,n,s){return r(this,void 0,void 0,function(){var r,l,c,u,d,_,h,p,m,f,v,g,E,b,y,T;return i(this,function(i){switch(i.label){case 0:if(null==t)throw new Error("Required parameter event was null or undefined when calling sendEvent.");if(!e.isInitalized)return e.WAIT_QUEUE.push({event:t,contexts:n}),e.waitAndFlushQueue(),[2];r=new KS.Envelope(t,this.conf.globalBPO),(l=QS.ObjectSerializer.serialize([r],"Array<Envelope>"))[0].contexts={};try{for(c=o(Object.entries(n)),u=c.next();!u.done;u=c.next())d=a(u.value,2),_=d[0],h=d[1],p=QS.ObjectSerializer.serialize(h,"EventContext"),l[0].contexts[_]=p}catch(e){y={error:e}}finally{try{u&&!u.done&&(T=c.return)&&T.call(c)}finally{if(y)throw y.error}}return m=JSON.stringify(l),f=(0,eC.formatRequestEvent)(t.name),v=""!==this.conf.endpoint?this.conf.endpoint:this.conf.service,g="".concat(v,"/add/").concat(encodeURIComponent(f)),navigator.sendBeacon&&!s?[3,2]:(E={method:"POST",headers:{"Content-Type":"application/json","User-Agent":navigator.userAgent,Origin:location.origin,Referer:document.referrer},body:m},s&&(E.headers.Authorization=s),[4,fetch(g,E)]);case 1:return i.sent(),[3,3];case 2:b=new Blob([m]),navigator.sendBeacon(g,b),i.label=3;case 3:return[2]}})})},e.waitAndFlushQueue=function(){e.flushQueueTimeoutHandler||(e.flushQueueTimeoutHandler=setTimeout(function(){e.WAIT_QUEUE.length>0&&(e.WAIT_QUEUE=[])},e.FLUSH_QUEUE_TIMEOUT))},e.FLUSH_QUEUE_TIMEOUT=1e4,e.conf=new s(n.FRESNEL_PROD),e.WAIT_QUEUE=[],e}();t.BigPictureClient=l}),nC=yS(function(e,t){Object.defineProperty(t,"__esModule",{value:!0})}),rC=yS(function(e,t){var n=bS&&bS.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=bS&&bS.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),r(tC,t),r(QS,t),r(nC,t)});class iC{constructor(){d(this,"player",void 0),d(this,"bpSessionInfo",void 0),this.player=null,this.bpSessionInfo={transcriptId:null,transcriptStartTime:null,transcriptDefaultLanguage:null,leadUuid:null,contentType:null,vuid:nE("vuid")}}init(e){this.player=e,this.player.doNotTrackEnabled||(this._initializeSessionData(),this._setupEventListeners(),this._configure())}_configure(){const e=this._getBPService(),t=this._createBPEvent(yg.WEB_GLOBAL),n=new rC.Configuration(e,t,null,this.player.config.request.urls.telemetry_base);rC.BigPictureClient.configure(n)}_initializeSessionData(){this._updateSessionData(p({vuid:nE("vuid")},dE(this.player.config)))}_setupEventListeners(){this.player.events.on(lm,({id:e,startTime:t,defaultLanguage:n})=>{this._updateSessionData({transcriptId:e,transcriptStartTime:t,transcriptDefaultLanguage:n})}),this.player.events.on(Em,e=>{null!=e&&e.leadUuid&&this._updateSessionData({leadUuid:e.leadUuid})}),this.player.events.on(ap,()=>{this._updateSessionData(p({},dE(this.player.config)))})}_refreshConfigurationWithVuid(){if(this.bpSessionInfo.vuid)return;const e=nE("vuid");e&&(this._updateSessionData({vuid:e}),this._configure())}_getBPService(){let e;switch(this.player.config.request.urls.telemetry_base){case rC.Service.FRESNEL_PROD_CN:e=rC.Service.FRESNEL_PROD_CN;break;case rC.Service.EVENTS_PROD:e=rC.Service.EVENTS_PROD;break;case rC.Service.FRESNEL_PROD:e=rC.Service.FRESNEL_PROD;break;default:e=rC.Service.FRESNEL_DEV}return e}_updateSessionData(e){Object.assign(this.bpSessionInfo,e)}_bpFieldsTyped(e){return e}_getVersion(e){return Cg[e]}_getDefaultFieldsForEvent(e){var t,n,r,i,o;const a=this.player.config,{user:s,request:l,video:c,embed:u}=a,d=(null==(t=this.player.backbone)?void 0:t.currentTime)||0;switch(e){case yg.WEB_GLOBAL:return this._bpFieldsTyped({user:{subscription_type:s.account_type||null,is_mod:!!s.mod,session_id:l.session||null,teams:s.team_id?[{team_id:s.team_id,team_role:xg(a)}]:[],user_id:s.id||null,vuid:this.bpSessionInfo.vuid||null,flags:l.flags?Object.keys(l.flags):null,is_free_trial:!1},application:{application:"vimeo",vimeo_language:l.lang||"en",product:Og(a),build_environment:"production",version:kg()},platform:{device_language:(null==(n=window.navigator)?void 0:n.language)??"",screen:{dpi:screen.pixelDepth,height:screen.height,width:screen.width,size:`${screen.width} x ${screen.height}`},network:null,platform:"web"}});case yg.COPY_VIDEO_EMBED_CODE:return this._bpFieldsTyped({hash:c.unlisted_hash,height:c.height,is_video_password_protected:c.privacy===t_,product:Rg.WORKFLOW,sizing:u.playsinline?"fixed":"responsive",video_embed_privacy:c.embed_permission,video_id:`${c.id||""}`,video_privacy:c.privacy,width:c.width,actor_resource_role:null,actor_team_role:null,entry_page:null,is_preset_applied:null,location:null,page:null,path:null,team_owner_id:null,team_size:null,team_subscription_type:null,upload_id:null,video_app_id:null,video_status:null,video_type:null});case yg.PLAYER_PERFORMANCE_MEASUREMENT:return this._bpFieldsTyped({module_player:!1,device_type:Ng(),browser:Object.keys(Q.browser).find(e=>Q.browser[e])||"",device_os:Mg(),iframed:Xg(),measurement_type:null,measurement_value:null});case yg.CHAPTER_SEGMENT_CLICK:return this._bpFieldsTyped({video_id:c.id,team_owner_id:(null==(r=c.owner)?void 0:r.id)||0,is_creator_mode:!!s.owner,chapter_seek_event_delta:null,fragment_no_chapters_at_seek:null,is_chapter_seek:null,nearest_chapter_start_time:null,seek_event_start_time:null,total_no_chapters_at_seek:null});case yg.CLICK:return this._bpFieldsTyped({page:ig(a),click_type:null,copy:null,device_type:null,feature:null,location:null,name:null,path:null,target:null,target_path:null,type:null});case yg.EMBEDDED_TRANSCRIPT_CLICK:return this._bpFieldsTyped({video_id:c.id,team_owner_id:(null==(i=c.owner)?void 0:i.id)||0,total_clip_duration:Fm(c.duration,2),embedded_transcript_session_id:this.bpSessionInfo.transcriptId,session_duration:Fm(av(this.bpSessionInfo.transcriptStartTime),2),default_transcript_language:this.bpSessionInfo.transcriptDefaultLanguage,video_timestamp:Fm(d,2)||0,copy:null,current_transcript_language:null,element:null,location:null,name:null});case yg.CLOSED_CAPTIONS_CLICK:return this._bpFieldsTyped({video_id:c.id,video_privacy:c.privacy,final_action_reset_all:null,has_changed_background:null,has_changed_font:null,has_changed_window:null,has_clicked_background:null,has_clicked_window:null,has_clicked_customize:null,has_clicked_font:null,has_customized:null,has_reset_all:null,language_selected:null,has_updated_language:null,language_provenance:null,prev_language_provenance:null,prev_selected_language:null});case yg.MULTI_AUDIO_TRACK_CLICK:return this._bpFieldsTyped({video_id:`${c.id||""}`,video_privacy:c.privacy,video_owner_id:`${null==(o=c.owner)?void 0:o.id}`,page:ig(a),event_name:null,has_selected_track:null,initial_track:null,initial_track_provenance:null,track_selected:null,track_selected_provenance:null});case yg.OPEN_AI_OPTIONS:return this._bpFieldsTyped({if_uploader:!!s.owner,value:null});case yg.REACH_TIME_ACTION:return this._bpFieldsTyped({time_action_id:null});case yg.VIEW_HOTSPOT:return this._bpFieldsTyped({hotspot_id:null});case yg.CLICK_HOTSPOT:return this._bpFieldsTyped({hotspot_id:null,overlay_id:null,click_action_type:null,clickout_id:null});case yg.VIEW_OVERLAY:return this._bpFieldsTyped({overlay_id:null});case yg.CLOSE_OVERLAY:return this._bpFieldsTyped({overlay_id:null,dwell_time:null});case yg.CLICK_OVERLAY:return this._bpFieldsTyped({overlay_id:null,click_action_type:null,clickout_id:null});case yg.VIEW_POLL:return this._bpFieldsTyped({poll_id:null});case yg.VOTE_POLL:return this._bpFieldsTyped({poll_id:null,poll_option_id:null,is_poll_option_correct:null});case yg.SELECT_PLAYER_SHARE:case yg.SELECT_PLAYER_SHARE_COMPLETE:return this._bpFieldsTyped({ab_group:null});default:return{}}}_createEventFields(e,t={}){return Object.assign({},this._getDefaultFieldsForEvent(e),t)}_createBPEvent(e,t={}){const n=this._createEventFields(e,t),r=this._getVersion(e);return new rC.Event(e,r,n)}_getDefaultFieldsForContext(e){var t,n,r,i,o;const a=this.player.config,{embed:s,user:l,request:c,video:u}=a,d=jg(this.player.backbone),_=this.player.store.get("ui.player.breakpoint"),h=this.player.store.get("ui.player.width")||0,p=this.player.store.get("ui.player.height")||0,m=(null==(t=this.player.backbone)?void 0:t.currentTime)||0;switch(e){case Tg.TEAM:return this._bpFieldsTyped({team_owner_id:l.team_origin_user_id,team_subscription_type:l.account_type,team_role:xg(a),team_id:l.team_id,joined_team_at:null,resource_permission_level:null,team_size:null});case Tg.WEB:return this._bpFieldsTyped({location:"player",page_name:ig(a),referrer:c.referrer,copy:null,path:null,referrer_page_name:null,target:null,target_path:null});case Tg.VIDEO:return this._bpFieldsTyped({video_id:u.id,title:u.title,video_privacy:u.privacy,video_embed_privacy:u.embed_permission,content_rating:[`${null==(n=u.rating)?void 0:n.id}`],duration:Math.round(u.duration),resolution:`${u.width}x${u.height}`,video_height:u.height,video_width:u.width,orientation:Vg(u.width,u.height),is_auto_cc_enabled:null,upload_method_api:null,upload_method_api_id:null,is_demo:null,video_owner_id:(null==(r=u.owner)?void 0:r.id)||0,video_owner_account_type:(null==(i=u.owner)?void 0:i.account_type)||"",video_categories:null,has_embed_available:!!s.settings.embed,video_version_id:Fg(null==(o=u.version)?void 0:o.available),embed_context:s.context,is_drm_enabled:!!c.drm,is_intaractive:!!s.interactive,language:null,audio_track_lang:d.audioTrackLang,audio_track_provenance:d.audioTrackProvenance,audio_track_type:d.audioTrackType,text_track_lang:d.textTrackLang,text_track_provenance:d.textTrackProvenance,text_track_type:d.textTrackType});case Tg.PLAYER:return this._bpFieldsTyped({player_session_id:c.session,total_video_duration:u.duration,video_timestamp:Fm(m,2)||0,player_location:s.on_site?"onsite":"embed",player_breakpoint:_||null,player_width:Math.floor(h),player_height:Math.floor(p)});case Tg.ACTION:return this._bpFieldsTyped({feature:"player",action_type:Q.touch?"tap":"click"});case Tg.VIEW:return this._bpFieldsTyped({feature:"player",view_type:"impression"});case Tg.LIVE:return this._bpFieldsTyped({recurring_live_event_id:`${u.live_event_id}`,live_event_id:null,live_status:Bg(null==u?void 0:u.live_event),live_production_method:null,encoder_type:null,audience_type:Ug(u),lead_source:null,event_privacy:Hg(u.privacy),live_feature:null,is_guest_speaker:null});case Tg.PRODUCT_ANALYTICS:return this._bpFieldsTyped({product:"viewer_experience",feature:"player",location:"player",modal_name:null,flow:null,element:null,copy:null,device_type:Ng(),is_user_facing_data:null,entity_type:null,cta_location_id:null,scrolling_percentage:null});case Tg.TARGET_TEAM:return this._bpFieldsTyped({is_team_member:!!l.team_id,team_owner_id:l.team_origin_user_id,team_subscription_type:l.account_type,team_role:xg(a),team_id:l.team_id,team_size:null,resource_permission_level:null,joined_team_at:null});case Tg.USER_FACING_VIDEO_ANALYTICS:const e=c.atid,[t,f]=e.split(".").map(Number);return this._bpFieldsTyped({session_ts:f,session_id:t,lead_id:this.bpSessionInfo.leadUuid,content_type:this.bpSessionInfo.contentType,is_do_not_track:!!s.dnt,playback_route:"player_embed",is_session_live:null});case Tg.THIRD_PARTY_INTEGRATION:return this._bpFieldsTyped({is_integration:!1,integration_id:null,integration_type:null,integration_name:null,app_id:null,managed_user_id:null,partner_bucket:null,is_partner:null});default:return{}}}_createContextFields(e,t={}){return Object.assign({},this._getDefaultFieldsForContext(e),t)}_createBPContexts(e,t={}){const n=this.player.config,r=Ig[e];return r?r.reduce((e,r)=>{var i;if(r===Tg.LIVE&&(null==(i=n.video)||!i.live_event_id))return e;const o=this._getVersion(r),a=t[r]||{},s=this._createContextFields(r,a);return e[r]=new rC.EventContext(r,o,s),e},{}):{}}sendEvent(e,t={},n={}){if(!this.player||this.player.doNotTrackEnabled)return;this._refreshConfigurationWithVuid();const r=this._createBPEvent(e,t),i=this._createBPContexts(e,n);rC.BigPictureClient.sendEventWithContexts(r,i)}}function oC(e){let t,n,r=e.config.ott||{};const i=r.analytics_url||"https://collector.vhx.tv/events.gif",o=new mg(i),a=gb(function(){c("timeupdate")},1e4,{leading:!1}),s=gb(function(){c("seeking")},500);function l(){r=e.config.ott||{},n=!1,t=!1}function c(n,a){(a=Object.assign({},a,{name:r.video_title,user_id:r.viewer_user_id,user_email:r.viewer_user_email,site_id:r.site_id,user_agent:navigator.userAgent,url:top===self?window.location.href:document.referrer,referrer:e.config.request.referrer,session_id:e.config.request.session,device:"html5",device_id:null,collection_id:r.collection_id,product_id:r.product_id,platform:r.platform,platform_id:null,platform_version:r.platform_version},{type:"video",video_id:r.video_id,current_src:e.backbone.currentFile.src,current_subtitle:"none",current_type:r.video_content_type,duration:r.video_duration,is_drm:e.config.request.drm?1:0,is_fullscreen:t?1:0,is_trailer:r.is_trailer?1:0,is_chromecast:vy.isCastConnected?1:0,is_live:e.config.video.live_event?1:0,seconds:10,timecode:e.currentTime})).name=n,void 0===a.timestamp&&(a.timestamp=Math.round(.001*Date.now()));const s=me(i,a);return o.logRequestPromiseWithUrl(s,{},!0,"GET").catch(e=>{})}function u(){e.events.on(Pi.ENDED,d),e.events.on(Pi.ERROR,_),e.events.on(Pi.PAUSE,h),e.events.on(Pi.PLAY,p),e.events.on(Pi.TIME_UPDATE,a),e.events.on(Pi.SEEKING,s),e.events.on(Pi.SEEKED,m),e.events.on(Pi.WAITING,f),e.events.on(Rh,v),e.events.on(Oh,g),e.events.on(jp,E),e.events.on(Yp,b),e.events.on($p,y),e.events.on(Kp,T),e.events.on(Xp,S)}function d(){a.cancel(),c("ended")}function _(){a.cancel(),c("error")}function h(){a.cancel(),c("pause")}function p(){if(!n)return n=!0,void c("firstplay");c("play")}function m(){s.cancel(),c("seeked")}function f(){c("waiting")}function v(){t=!0}function g(){t=!1}function E(){c(wg.AD_COMPLETE)}function b(){c(wg.AD_CLICKED)}function y(){c(wg.AD_ERROR)}function T(){c(wg.AD_STARTED)}function S(){c(wg.AD_SKIPPED)}e.events.on(ap,l),l(),e.config.ott?u():new Promise(t=>{e.ottVideoMetadata?t():e.events.on(fp,e=>{t()})}).then(()=>{r=e.ottVideoMetadata,u()}).catch(e=>{})}const aC=function(e){return(t,...n)=>(n.forEach(n=>{for(const r in n){const i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,Object.assign(i,e))}}),t)}({enumerable:!0,configurable:!0,writeable:!1}),sC="ad-buffering",lC="ad-can-play",cC="ad-complete",uC="ad-click",dC="ad-skipped",_C="all-ads-completed",hC="ad-error",pC="ad-started",mC="ads-manager-loaded",fC="content-pause-requested",vC="content-resume-requested";function gC(e,t){const n=new bn;let r,i,o,a,s,l,c=!1,u=1,d=!1;function _(){return Q.iOS?t.videoPlayer.videoElement:t.videoPlayer}function h(){a=new l.AdsRequest,t.adUrl&&(a.adTagUrl=t.adUrl),a.linearAdSlotWidth=t.width.linear,a.linearAdSlotHeight=t.height.linear,a.nonLinearAdSlotWidth=t.width.nonlinear,a.nonLinearAdSlotHeight=t.height.nonlinear,a.setAdWillAutoPlay(t.autoplay),a.setAdWillPlayMuted(t.muted),i.requestAds(a)}function p(e){const t=new l.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!0,t.uiElements=[],t.enablePreloading=!0,o=e.getAdsManager(_(),t);const r=d&&s?0:1;o.setVolume(r),n.fire(mC),o.addEventListener(l.AdErrorEvent.Type.AD_ERROR,P),o.addEventListener(l.AdEvent.Type.CONTENT_PAUSE_REQUESTED,E),o.addEventListener(l.AdEvent.Type.CONTENT_RESUME_REQUESTED,b),o.addEventListener(l.AdEvent.Type.AD_BUFFERING,y),o.addEventListener(l.AdEvent.Type.AD_CAN_PLAY,T),o.addEventListener(l.AdEvent.Type.STARTED,S),o.addEventListener(l.AdEvent.Type.COMPLETE,C),o.addEventListener(l.AdEvent.Type.CLICK,A),o.addEventListener(l.AdEvent.Type.SKIPPED,L),o.addEventListener(l.AdEvent.Type.ALL_ADS_COMPLETED,I)}function m(){t.videoPlayer.pause(),d=!0,s=!1,h()}function f(){t.videoPlayer.volume=0,t.videoPlayer.muted=!0;const e=t.videoPlayer.play();void 0!==e&&e.then(v).catch(g)}function v(){t.videoPlayer.pause(),d=!0,s=!0,h()}function g(){t.videoPlayer.volume=1,t.videoPlayer.muted=!1,d=!1,s=!1,h()}function E(e){n.fire(fC,e)}function b(e){n.fire(vC,e)}function y(e){n.fire(sC,e)}function T(e){n.fire(lC,e)}function S(e){n.fire(pC,e)}function C(e){n.fire(cC,e)}function A(e){o.pause(),n.fire(uC,e)}function L(e){n.fire(dC,e)}function I(e){n.fire(_C,e)}function P(e){n.fire(hC,e.getError()),o&&o.destroy()}const O={isAutoPlayAllowed:()=>d,start:(e,t)=>(c||(r.initialize(),c=!0),o.init(e,t,l.ViewMode.NORMAL),o.start()),stop:()=>o.stop(),pause:()=>o.pause(),play:()=>o.resume(),skip:()=>o.skip(),resize:(e,t,n)=>n?o.resize(e,t,l.ViewMode.FULLSCREEN):o.resize(e,t,l.ViewMode.NORMAL),destroy(){n.off(),o.destroy(),i.destroy(),r.destroy()},get volume(){return w(o.getVolume())},set volume(e){u=R(e),o.setVolume(u)},get muted(){return 0===o.getVolume()},set muted(e){e?o.setVolume(0):o.setVolume(u)},get remainingTime(){return o.getRemainingTime()},setContentComplete(){i&&i.contentComplete()},on(e,t){return n.on(e,t),this},off(e,t){return n.off(e,t),this}};return function(e,t,n){if(document.getElementById(e))n&&n();else{const t=document.createElement("script");t.id=e,t.src="https://imasdk.googleapis.com/js/sdkloader/ima3.js",t.onload=()=>{n&&n()},document.getElementsByTagName("body")[0].appendChild(t)}}("vp-ima-sdk",0,function(){l=google.ima,r=new l.AdDisplayContainer(e,_()),i=new l.AdsLoader(r),i.addEventListener(l.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,p,!1),i.addEventListener(l.AdErrorEvent.Type.AD_ERROR,P,!1),function(){const e=t.videoPlayer.play();void 0!==e&&e.then(m).catch(f)}()}),aC(this,O)}function EC(e,t){const n=new bn;let r,i,o,a,s,l,c,u,d,_;function h(){var t,n;e.events.on(Pi.ERROR,L),e.events.on(iu,I),e.events.on(wi.ACTIVATED,A),r=document.querySelector(`.${bf.ADS_WRAPPER}`),r||(r=document.createElement("div"),r.classList.add(bf.ADS_WRAPPER),r.innerHTML=`\n                <div class="${bf.ADS_TAG} hidden">\n                    <span class="${bf.ADS_COUNTDOWN}"></span>\n                </div>\n            `,document.querySelector(".player").appendChild(r)),i=r.querySelector(`.${bf.ADS_TAG}`),o={adCode:e.config.request.ads.adcode||null,adUnit:e.config.request.ads.adunit||null,adUrl:e.config.request.ads.adurl||null,autoplay:Boolean(null==(t=e.config)||null==(t=t.embed)?void 0:t.autoplay),muted:Boolean(null==(n=e.config)||null==(n=n.embed)?void 0:n.muted),videoPlayer:e.backbone,width:{linear:488,nonlinear:488},height:{linear:252,nonlinear:150}},s=new gC(r,o),s.on(mC,()=>{s.on(sC,m),s.on(lC,f),s.on(cC,g),s.on(uC,v),s.on(hC,E),s.on(pC,b),s.on(dC,y),s.on(_C,T),s.on(fC,S),s.on(vC,C),e.events.on(Pi.ENDED,R),e.store.watch("ui.player.width",M),e.events.on(Rh,M,!0),e.events.on(Oh,M,!1),e.events.fire(K_),s.isAutoPlayAllowed()&&N()})}function p(){i&&(k(),i=null),s&&(s.destroy(),s=null),c&&(clearInterval(c),c=null),r=null,o={},a=null,l=!1,u=!1,d=!1,_=!1,e.events.off(iu,I),e.events.off(Rh,M),e.events.off(Oh,M),e.events.off(wi.ACTIVATED,A),e.events.off(Pi.ENDED,R),e.events.off(Pi.ERROR,L),e.events.off(Pi.PLAYING,P),e.store.unwatch("ui.player.width",M)}function m(){u&&e.events.fire(Wp)}function f(){e.events.fire(Gp)}function v(){e.events.fire(Yp)}function g(){Q.iPhone&&e.backbone.addVideoEventListeners(),c&&clearInterval(c),u=!1,e.events.fire(jp)}function E(t){const n={errorType:t.o,errorReason:t.l};e.events.fire($p,n),"adPlayError"===n.errorType&&e.events.fire(X_)}function b(t){Q.iPhone&&e.backbone.removeVideoEventListeners();let n=t.getAd();const i=n.getTraffickingParameters();n.isLinear()&&"0"!==i.ad&&(c=setInterval(()=>{let e="AD "+(e=>{if(e<0)return"00:00";let t=Math.floor(e/60),n=Math.round(e%60);return t=t<10?"0"+t:t,n=n<10?"0"+n:n,t+":"+n})(s.remainingTime);r.querySelector(`.${bf.ADS_COUNTDOWN}`).innerHTML=e},1e3),setTimeout(O,1e3)),u=!0;let o={type:n.isLinear()?"linear":"nonlinear"};a&&(o.time=Date.now()-a,a=null),e.events.fire(Kp,o)}function y(t){e.events.fire(Xp,t)}function T(t){l=!0,Q.iPhone||p(),e.events.fire(Zp,t)}function S(){e.events.fire(K_),a=Date.now(),_=!0,d||(e.backbone.paused?e.events.once(Pi.PLAYING,P):e.backbone.pause())}function C(){k(),e.events.fire(X_),Q.iPhone&&l&&s.destroy(),d||(e.events.off(Pi.PLAYING,P),w())}function A(){p()}function L(e){e&&("NotAllowedError"===e.name||e.name)}function I(){}function P(){e.backbone.pause()}function R(){d=!0,s.setContentComplete()}function w(){_=!1,e.backbone.play()}function O(){i=r.querySelector(`.${bf.ADS_TAG}`),i.classList.remove("hidden"),i.removeAttribute("hidden")}function k(){i.classList.add("hidden"),i.setAttribute("hidden","")}function D(){const e=t.getBoundingClientRect();return{height:e.height,width:e.width}}function N(){const{width:t,height:n}=D();try{s.start(t,n)}catch(t){d&&e.events.fire(jp),_&&w()}}function M(e){const{width:t,height:n}=D();s.resize(t,n,e)}const x={pause:()=>(e.events.fire(qp),s.pause()),play:()=>(e.events.fire(zp),N(),s.play()),get volume(){return s.volume},set volume(e){s.volume=e},get muted(){return s.muted},set muted(e){s.muted=e},events:n};return p(),h(),e.events.on(ap,()=>{p(),h()}),x}let bC=function(e){return e.MARKER_SEEKED="seeked",e.MARKER_ENDED="ended",e.MARKER_UPSWITCH="upswitch",e.MARKER_DOWNSWITCH="downswitch",e.MARKER_SWITCH_COMPLETE="switchcomplete",e.MARKER_RESIZE="resize",e.MARKER_SCANNER_CHANGE="scannerchange",e.MARKER_FILE_CHANGE="filechange",e.MARKER_STALLED="stalled",e.MARKER_BUFFER_GAP_JUMP="buffergapjump",e.MARKER_BUFFER_GAP_JUMP_PREVENT="buffergapjumpprevent",e.MARKER_STALL_JUMP="stalljump",e}({}),yC=function(e){return e.FIELD_MARKERS="markers",e.FIELD_CLIP_ID="clip_id",e.FIELD_PROFILE_ID="profile_id",e.FIELD_PLAYER_SIZE="player_size",e.FIELD_DROPPED_FRAMES="dropped_frames",e.FIELD_TOTAL_FRAMES="total_frames",e.FIELD_BANDWIDTH="bandwidth",e.FIELD_STREAMS="streams",e.FIELD_FILES="files",e.FIELD_VIDEO_DIMS="video_dims",e.FIELD_MIN_BANDWIDTH="min_bandwidth",e.FIELD_MAX_BANDWIDTH="max_badwidth",e.FIELD_BUFFER_OCCUPANCY="buffer_occupancy",e.FIELD_LIVE_LATENCY="live_latency",e.FIELD_SCANNERS="scanner",e.FIELD_VR_HEADSET="vr_headset",e}({}),TC=function(e){return e.MARKER_SEEKED="#0088cc",e.MARKER_ENDED="#503873",e.MARKER_UPSWITCH="#5a9e02",e.MARKER_DOWNSWITCH="#d93636",e.MARKER_RESIZE="#FF8A00",e.MARKER_SCANNER_CHANGE="#e9ff00",e.MARKER_FILE_CHANGE="#b5d3e2",e.MARKER_STALLED="#f44283",e}({});const SC={[xy.KOLLECTIVE]:"Kollective",[xy.HIVE]:"Hive"};function CC(e,t,n,r){if(!pt(e))return e;for(var i=-1,o=(t=$t(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var l=qt(t[i]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=a){var u=s[l];void 0===(c=r?r(u,l,s):void 0)&&(c=pt(u)?u:Vn(t[i+1])?[]:{})}An(s,l,c),s=s[l]}return e}function AC(e,t){return null!=e&&t in Object(e)}function LC(e,t){return function(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=zt(e,a);n(0,a)&&CC(o,$t(a,e),s)}return o}(e,t,function(t,n){return function(e,t){return null!=e&&function(e,t,n){for(var r=-1,i=(t=$t(t,e)).length,o=!1;++r<i;){var a=qt(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Bn(i)&&Vn(a,i)&&(Je(e)||On(e))}(e,t,AC)}(e,n)})}var IC=nt?nt.isConcatSpreadable:void 0;function PC(e){return Je(e)||On(e)||!!(IC&&e&&e[IC])}function RC(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=PC),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?RC(s,t-1,n,r,i):mr(i,s):r||(i[i.length]=s)}return i}function wC(e){return null!=e&&e.length?RC(e,1):[]}var OC=function(e){return ui(ai(e,void 0,wC),e+"")}(function(e,t){return null==e?{}:LC(e,t)});const kC=["bandwidthSeriesData"];function DC(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function NC(e,t,n){if(n)return t?t(e()):e();try{var r=Promise.resolve(e());return t?r.then(t):r}catch(e){return Promise.reject(e)}}function MC(){}const xC=[wg.VIDEO_PLAYBACK_ERROR,wg.VIDEO_LOAD_FAILURE];class VC{constructor(e,t){d(this,"_core",void 0),d(this,"_debugPayloadCollectionPolicy",void 0),d(this,"_seriesStore",void 0),d(this,"_latencyInterval",void 0),this._core=e,this._debugPayloadCollectionPolicy=t||"none",this._seriesStore={},this._latencyInterval=null,this._clearAllFields(),this._attachEventHandlers(),this._watchPlayerSize(),this._setDefaults()}reset(){this._clearAllFields(),this._setDefaults(),this._core.events.fire(zh)}_setToSeries(e,t){return Object.assign(this._seriesStore,{[e]:[t]}),this._core.events.fire(zh),this._seriesStore[e]}_addToSeries(e,t){return this._seriesStore[e].push(t),this._seriesStore[e].length>300&&this._seriesStore[e].splice(0,25),this._core.events.fire(zh),this._seriesStore[e]}getCurrent(e){return this._seriesStore[e].slice(-1)[0]}getSeries(e){return this._seriesStore[e]}getDebugPayload(){var e,t,n,r,i;const{abTests:o,config:a,backbone:s}=this._core,{session:l}=a.request,c=this.getCurrent(yC.FIELD_VIDEO_DIMS),u=this.getCurrent(yC.FIELD_TOTAL_FRAMES)||0,d=this.getCurrent(yC.FIELD_DROPPED_FRAMES)||0,_=this.getCurrent(yC.FIELD_FILES),h=this.getCurrent(yC.FIELD_STREAMS),p=this.getCurrent(yC.FIELD_SCANNERS),m=this.getCurrent(yC.FIELD_BANDWIDTH),f=this._isLiveScanner(p),v=p===$s,g=se(s.videoElement.currentTime,s.buffered),E=s.currentTime+g,b=this._serializeBufferedRanges(s.buffered),y=s.bufferTarget,T=s.presentationDelay,S=a.embed.dnt||(null==(e=a.request.flags)?void 0:e.dnt),C=null==o?void 0:o.map(e=>`${e.test}: ${e.group}`).join(", ");let A="";if(h){const e=h.framerate.toFixed(2).replace(".00",""),t=`${Math.round(h.avgBitrate/1e3).toLocaleString()} Kbps`,n=h.audioBitrate?` / ${Math.round(h.audioBitrate/1e3).toLocaleString()} Kbps`:"";A=`${h.width}×${h.height}@${e} ${t} ${n}`}const L={currentScanner:p,isLive:f,isDash:v,embedSize:c,sessionId:l,testGroup:C,isDNTEnabled:S,totalFrames:u,droppedFrames:d,bufferTarget:y,presentationDelay:T,ua:null==(t=navigator)?void 0:t.userAgent,clipId:a.video.id,readyState:s.readyState,support:JSON.stringify(Q),bufferEnd:Fm(E,3),bufferAhead:Fm(g,3),currentTime:Fm(s.currentTime,3),clientIp:null==(n=a.request)||null==(n=n.client)?void 0:n.ip,playerVersion:Hy(a),bufferedRanges:JSON.stringify(b),brainDebug:JSON.stringify(s.brainDebug),codec:h?h.codec:null,hideCloseButton:!!a.embed.settings.background,isCopyDisabled:!!S,vrHeadsetName:this.getCurrent(yC.FIELD_VR_HEADSET),droppedFramesPercent:0!==u?`${(d/u*100).toFixed(2)}%`:0,resolution:A,payloadId:`${a.video.owner.id}_${a.video.id}_${a.request.session}_${Math.floor(Date.now()/1e3)}`,bandwidthKbps:m?`${Math.floor(m.value/1e3).toLocaleString()} Kbps`:0,bandwidthMinKbps:`${Math.floor(this.getCurrent(yC.FIELD_MIN_BANDWIDTH)/1e3).toLocaleString()} Kbps`,bandwidthMaxKbps:`${Math.floor(this.getCurrent(yC.FIELD_MAX_BANDWIDTH)/1e3).toLocaleString()} Kbps`,separateAudioVideo:!(null==(r=a.request.files)||!r.dash||!a.request.files.dash.separate_av),bandwidthSeriesData:this._getBandwidthSeriesData()};null!=h&&h.audioChannels&&(L.resolution+=h.ambisonicConnected&&h.ambisonicOrder?` ambisonic ${h.ambisonicOrder} (${h.audioChannels}ch)`:` ${h.audioChannels}ch`),_&&(L.delivery=_.mime);const I=null==(i=a.video.ecdn)?void 0:i.ecdn_provider;if(I){const{ecdnBytesByCdn:e,ecdnBytesPeered:t,ecdnPeers:n}=qg(I),r={p2pSources:n.toString(),p2pOffload:`${this._getP2POffload(t,e)}%`,ecdnVendor:SC[I]};Object.assign(L,r)}return f&&Object.assign(L,this._getLiveDebugData()),L}sendDebugPayload(){const e=this;return NC(function(){const t=e._core.config,{signature:n,expires:r,timestamp:i,session:o}=t.request,{id:a,owner:s}=t.video,l=`/debug_payload/${a}/${s.id}_${a}_${o}_${Math.floor(Date.now()/1e3)}?s=${n}&expires=${r}&time=${i}`,c=`https://${t.player_url}${l}`,u=e.getDebugPayload(),{bandwidthSeriesData:d}=u,_={version:2,tpl:m(u,kC),mark:d.debugMarkers};return DC($e({url:c,method:"post",json:_,timeout:1e4}).json())})}_onLogMetric(e={}){const t=e.name,n=fd({},e.data),r=this._filterMetricData(t,n);this._addMarker(t,t,r),this._sendPayloadByCollectionPolicy(t)}_sendPayloadByCollectionPolicy(e){const t=this;return NC(function(){if(!t._debugPayloadCollectionPolicy)return DC();const n="on_error"===t._debugPayloadCollectionPolicy&&xC.includes(e);return DC(function(){var e=function(){if(n)return function(e){if(e&&e.then)return e.then(MC)}(function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(function(){return function(e){if(!void 0)return e&&e.then?e.then(MC):Promise.resolve()}(t.sendDebugPayload())},function(e){}))}();if(e&&e.then)return e.then(MC)}())})}_filterMetricData(e,t){if(e===wg.CHUNK_DOWNLOADED)return(e=>{let t="number"==typeof e.duration?e.duration:0,n="number"==typeof e.buffered?e.buffered:0,r="number"==typeof e.ttfb?e.ttfb:0;const{host:i,size:o,index:a,profile_id:s,quality:l,extraContext:c,headers:u}=e;return{host:i,extraContext:c,size:o,index:a,profile_id:s,quality:l,duration:Fm(t,2),buffered:Fm(n,2),ttfb:Fm(r,2),headers:OC(u,["x_cache","akamai_request_bc","akamai_grn","content_type"]),cache_hit:Gg(u)}})(t);const n=t;if(e===wg.VIDEO_PLAYBACK_ERROR||e===wg.VIDEO_LOAD_FAILURE||e===wg.VIDEO_START_FAILURE||e===wg.VIDEO_READY)return n;if(e===wg.DRM_KEY_SWITCH){const{cdn:e,quality:t,drm_cdm:r,drm_mode:i}=n;return{cdn:e,quality:t,drm_cdm:r,drm_mode:i}}return void 0!==n.autoplay&&void 0!==n.looping?{cdn:n.cdn,quality:n.quality}:n}_addMarker(e,t,n={}){const r=this._core.backbone.currentTime,i=Date.now(),o=Fm(ae(r,this._core.backbone.buffered),2);this._addToSeries(yC.FIELD_MARKERS,{type:e,title:t,vt:r,t:i,bt:o,data:n})}_attachEventHandlers(){this._core.events.on(ap,()=>{this.reset()}),this._core.events.on(ki.BANDWIDTH,this._onBandwidthChange.bind(this)),this._core.events.on(ki.BUFFER_OCCUPANCY,this._onBufferOccupancyChange.bind(this)),this._core.events.on(ki.CURRENT_FILE_CHANGE,this._onFileChange.bind(this)),this._core.events.on(ki.DROPPED_FRAMES,this._onDroppedFrames.bind(this)),this._core.events.on(ki.SCANNER_CHANGE,this._onScannerChange.bind(this)),this._core.events.on(ki.STREAM_CHANGE,this._onStreamChange.bind(this)),this._core.events.on(ki.STREAM_CHANGE_START,this._onStreamChangeStart.bind(this)),this._core.events.on(Pi.TIME_UPDATE,this._onTimeUpdate.bind(this)),this._core.events.on(Ni.WEBVR_HARDWARE_AVAILABLE,this._onVRHeadsetAvailble.bind(this)),this._core.events.on(Jp,this._onLogMetric.bind(this)),this._core.events.on(Pu.BUFFER_GAP_JUMP_PREVENT,this._onBufferGapJumpPrevent.bind(this)),this._core.events.on(Pu.BUFFER_GAP_JUMP,this._onBufferGapJump.bind(this)),this._core.events.on(Pu.STALL_JUMP,this._onStallJump.bind(this))}_isLiveScanner(e){return[js,Ys].includes(e)}_onVRHeadsetAvailble(e){e.displayName&&this._setToSeries(yC.FIELD_VR_HEADSET,e.displayName)}_setLatencyInterval(){this._latencyInterval=setInterval(()=>{const e=this._core.backbone.buffered,t=this._core.backbone.videoElement;if(e&&e.length&&t&&t.currentTime){const e=this._core.backbone.latency;this._setToSeries(yC.FIELD_LIVE_LATENCY,e)}else this._setToSeries(yC.FIELD_LIVE_LATENCY,0)},500)}_removeLatencyInterval(){clearInterval(this._latencyInterval)}_watchPlayerSize(){this._core.store.watch("ui.player.boundingRect",e=>{const t=this.getCurrent(yC.FIELD_VIDEO_DIMS),n=this._getVideoDimensionsString(e);if(n===t)return;this._addToSeries(yC.FIELD_VIDEO_DIMS,n);const r=t?`Resized from ${t} to ${n}`:`Resized to ${n}`;this._addMarker(bC.MARKER_RESIZE,r)})}_getVideoDimensionsString(e){const t=`${Math.round(e.width)}px`,n=`${Math.round(e.height)}px`,r=window.devicePixelRatio&&window.devicePixelRatio>1?`@${Fm(window.devicePixelRatio,3)}x`:"";return t&&n?`${parseInt(t,10)}×${parseInt(n,10)} ${r}`:""}_clearAllFields(){this._seriesStore=Object.values(yC).reduce((e,t)=>(e[t]=[],e),{})}_setDefaults(){const e=this._core.backbone.currentFile,t=this._core.backbone.currentScannerName;this._addToSeries(yC.FIELD_FILES,e),this._addToSeries(yC.FIELD_SCANNERS,t),this._isLiveScanner(t)&&this._setLatencyInterval(),this._setToSeries(yC.FIELD_MIN_BANDWIDTH,0),this._setToSeries(yC.FIELD_MAX_BANDWIDTH,0);const n=this._core.store.get("ui.player.boundingRect"),r=this._getVideoDimensionsString(n);this._addToSeries(yC.FIELD_VIDEO_DIMS,r)}_onBandwidthChange(e){const t=Math.round(100*e.speed)/100;this._addToSeries(yC.FIELD_BANDWIDTH,{videoTime:this._core.backbone.currentTime,time:Date.now(),value:t});let n=this.getCurrent(yC.FIELD_MAX_BANDWIDTH),r=this.getCurrent(yC.FIELD_MIN_BANDWIDTH);(!r||t<r)&&this._setToSeries(yC.FIELD_MIN_BANDWIDTH,t),(!n||t>n)&&this._setToSeries(yC.FIELD_MAX_BANDWIDTH,t)}_onDroppedFrames(e){const{dropped:t,total:n}=e;this._setToSeries(yC.FIELD_TOTAL_FRAMES,n),this._setToSeries(yC.FIELD_DROPPED_FRAMES,t)}_onSeeked(){this._addMarker(bC.MARKER_SEEKED,`Seeked to ${this._core.backbone.currentTime}`)}_onEnded(){this._addMarker(bC.MARKER_ENDED,"Ended")}_onStreamChangeStart({previousStreamIndex:e,index:t,streams:n}){const r=n[t],i=n[e],o=i?i.bitrate:null;if(o!==r.bitrate&&null!==o){const e=this._getResolutionString(i),t=this._getResolutionString(r);r.bitrate<o?this._addMarker(bC.MARKER_DOWNSWITCH,`Starting Downswitch from ${e} to ${t}`):r.bitrate>o&&this._addMarker(bC.MARKER_UPSWITCH,`Starting Upswitch from ${e} to ${t}`)}}_onStreamChange(e,t,n){var r,i;const o=n[t],a=this._getResolutionString(o),s=fS(o.codecs),l=null==(r=this._core.backbone)||null==r.getCurrentStream?void 0:r.getCurrentStream("audio"),c=vS(null==l?void 0:l.codecs),u=`${s}${c?` / ${c}`:""}`,d=null==(i=this._core.backbone)?void 0:i.telecine.getEffectByName("AmbisonicEffect");this._addMarker(bC.MARKER_SWITCH_COMPLETE,`Completed switch to ${a}`),this._addToSeries(yC.FIELD_STREAMS,{profile:void 0!==e?e.profile:null,quality:void 0!==e?e.quality:`${o.height}p`,avgBitrate:o.avg_bitrate,ambisonicConnected:null==d?void 0:d.connected,ambisonicOrder:null==l?void 0:l.ambisonic_order,audioBitrate:null==l?void 0:l.avg_bitrate,audioChannels:(null==l?void 0:l.channels)??o.channels??void 0,framerate:o.framerate,height:o.height,width:o.width,id:o.id,codec:u})}_onFileChange(){const e=this.getCurrent(yC.FIELD_FILES),t=this._core.backbone.currentFile;this._addToSeries(yC.FIELD_FILES,t);const n=t.metadata.cdn,r=e?e.metadata.cdn:null,i=e?Zm[e.mime]:null,o=Zm[t.mime];let a=`CDN to ${n}/${o}`;r&&(a=`CDN from ${r}/${i} to ${n}/${o}`),this._addMarker(bC.MARKER_FILE_CHANGE,a)}_onBufferOccupancyChange(e){const t=Math.round(1e3*e)/1e3;this._addToSeries(yC.FIELD_BUFFER_OCCUPANCY,{videoTime:this._core.backbone.currentTime,time:Date.now(),value:t})}_onScannerChange(){const e=this.getCurrent(yC.FIELD_SCANNERS),t=this._core.backbone.currentScannerName;this._setToSeries(yC.FIELD_SCANNERS,t),e&&this._addMarker(bC.MARKER_SCANNER_CHANGE,`Scanner change to ${t}`),this._isLiveScanner(t)?this._setLatencyInterval():this._removeLatencyInterval()}_onBufferGapJump(e){this._addMarker(bC.MARKER_BUFFER_GAP_JUMP,e.msg)}_onBufferGapJumpPrevent(e){this._addMarker(bC.MARKER_BUFFER_GAP_JUMP_PREVENT,e.msg)}_onStallJump(e){this._addMarker(bC.MARKER_STALL_JUMP,e.msg)}_onStalled(){this._addMarker(bC.MARKER_STALLED,"Stalled")}_getResolutionString(e){return`${e.width}×${e.height}@${Math.round(e.framerate)} ${Math.round(e.bitrate/1e3).toLocaleString()} Kbps`}_onTimeUpdate(){this._core.events.fire(zh)}_serializeBufferedRanges(e){if(!e)return null;const t=e.length;let n=0,r=[];for(;n<t;n++){const t=e.start(n),i=e.end(n);r.push({i:n,start:t,end:i})}return r}_getP2POffload(e,t){return 0===e&&0===t?0:Fm(e/(t+e)*100,1)}_getLiveDebugData(){var e;const t=(null==(e=this._core.config.video.live_event)?void 0:e.id)||null;let n="";try{n=`${(this.getCurrent(yC.FIELD_LIVE_LATENCY)??0).toFixed(2)}`}catch(e){}return{liveLatency:n,liveSessionID:t}}_getBandwidthSeriesData(){const e=this.getSeries(yC.FIELD_BANDWIDTH)||[],t=this.getCurrent(yC.FIELD_MAX_BANDWIDTH)||1;return{debugMarkers:this.getSeries(yC.FIELD_MARKERS)||[],timeSeries:e,max:t}}}class BC{constructor(e){this._player=e,this._currentFragment=null,this._attachEventHandlers()}get firstFragmentDuration(){var e;const t=null==(e=this._player.config.embed.interactive)?void 0:e.fragments;return!Mu(t)&&t.length>1?(t[1]-1)/1e3:this._player.config.video.duration}get currentFragment(){var e;return Mu(null==(e=this._player.config.embed.interactive)?void 0:e.fragments)?{startTime:0,endTime:this._player.config.video.duration,duration:this._player.config.video.duration}:this._currentFragment}_attachEventHandlers(){this._onReset=()=>this.reset(),this._player.events.on(u_,this._onReset)}_detachEventHandlers(){this._player.events.off(u_,this._onReset)}hibernate(){this._detachEventHandlers()}wake(){this._attachEventHandlers()}_getFragment(e,t,n){if(Mu(n))return{startTime:0,endTime:t,duration:t};const r=1e3*e,i=n.findIndex((e,t)=>{const i=n[t+1],o=t===n.length-1;return e<=r&&(r<i||o)}),o=i===n.length-1,a=n[i]/1e3,s=n[i+1],l=o?t:(s-1)/1e3;return{startTime:a,endTime:l,duration:l-a}}_handleTimeUpdate({currentTime:e,duration:t}){this.checkForNewFragment(e,t)}checkForNewFragment(e,t){if(!(this._currentFragment&&this._currentFragment.startTime<=e&&e<=this._currentFragment.endTime)){var n;const r=null==(n=this._player.config.embed.interactive)?void 0:n.fragments;this._currentFragment=this._getFragment(e,t,r),this._player.events.fire(sh)}}reset(){var e;this._currentFragment=null,this._player.events.off(Pi.TIME_UPDATE,this._handleTimeUpdate.bind(this));const t=this._player.config.video.duration;!Mu(null==(e=this._player.config.embed.interactive)?void 0:e.fragments)&&(this.checkForNewFragment(0,t),this._player.events.on(Pi.TIME_UPDATE,this._handleTimeUpdate.bind(this)))}getFragmentFromTime(e){var t;const n=null==(t=this._player.config.embed.interactive)?void 0:t.fragments,r=this._player.config.video.duration;return this._getFragment(e,r,n)}}var UC,FC,HC,WC,GC=function(e,t){return{name:e,value:void 0===t?-1:t,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},jC=function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver(function(e){return e.getEntries().map(t)});return n.observe({type:e,buffered:!0}),n}}catch(e){}},YC=function(e,t){var n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},$C=function(e){addEventListener("pageshow",function(t){t.persisted&&e(t)},!0)},qC=function(e,t,n){var r;return function(i){t.value>=0&&(i||n)&&(t.delta=t.value-(r||0),(t.delta||void 0===r)&&(r=t.value,e(t)))}},zC=-1,KC=function(){return"hidden"===document.visibilityState?0:1/0},XC=function(){YC(function(e){var t=e.timeStamp;zC=t},!0)},ZC=function(){return zC<0&&(zC=KC(),XC(),$C(function(){setTimeout(function(){zC=KC(),XC()},0)})),{get firstHiddenTime(){return zC}}},JC=function(e,t){var n,r=ZC(),i=GC("FCP"),o=function(e){"first-contentful-paint"===e.name&&(s&&s.disconnect(),e.startTime<r.firstHiddenTime&&(i.value=e.startTime,i.entries.push(e),n(!0)))},a=window.performance&&performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],s=a?null:jC("paint",o);(a||s)&&(n=qC(e,i,t),a&&o(a),$C(function(r){i=GC("FCP"),n=qC(e,i,t),requestAnimationFrame(function(){requestAnimationFrame(function(){i.value=performance.now()-r.timeStamp,n(!0)})})}))},QC=!1,eA=-1,tA={passive:!0,capture:!0},nA=new Date,rA=function(e,t){UC||(UC=t,FC=e,HC=new Date,aA(removeEventListener),iA())},iA=function(){if(FC>=0&&FC<HC-nA){var e={entryType:"first-input",name:UC.type,target:UC.target,cancelable:UC.cancelable,startTime:UC.timeStamp,processingStart:UC.timeStamp+FC};WC.forEach(function(t){t(e)}),WC=[]}},oA=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){rA(e,t),i()},r=function(){i()},i=function(){removeEventListener("pointerup",n,tA),removeEventListener("pointercancel",r,tA)};addEventListener("pointerup",n,tA),addEventListener("pointercancel",r,tA)}(t,e):rA(t,e)}},aA=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,oA,tA)})},sA={},lA=function(e){return e.FIRST_INPUT_DELAY="firstInputDelay",e.CUMULATIVE_LAYOUT_SHIFT="cumulativeLayoutShift",e.LARGEST_CONTENTFUL_PAINT="largestContentfulPaint",e}(lA||{});const cA=4e-4/Object.keys(lA).length,uA={};var dA,_A,hA,pA,mA,fA,vA,gA={},EA=[],bA=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function yA(e,t){for(var n in t)e[n]=t[n];return e}function TA(e){var t=e.parentNode;t&&t.removeChild(e)}function SA(e,t,n){var r,i,o,a={};for(o in t)"key"==o?r=t[o]:"ref"==o?i=t[o]:a[o]=t[o];if(arguments.length>2&&(a.children=arguments.length>3?dA.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===a[o]&&(a[o]=e.defaultProps[o]);return CA(e,a,r,i,null)}function CA(e,t,n,r,i){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==i?++hA:i};return null==i&&null!=_A.vnode&&_A.vnode(o),o}function AA(e){return e.children}function LA(e,t){this.props=e,this.context=t}function IA(e,t){if(null==t)return e.__?IA(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?IA(e):null}function PA(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return PA(e)}}function RA(e){(!e.__d&&(e.__d=!0)&&pA.push(e)&&!wA.__r++||fA!==_A.debounceRendering)&&((fA=_A.debounceRendering)||mA)(wA)}function wA(){for(var e;wA.__r=pA.length;)e=pA.sort(function(e,t){return e.__v.__b-t.__v.__b}),pA=[],e.some(function(e){var t,n,r,i,o,a;e.__d&&(o=(i=(t=e).__v).__e,(a=t.__P)&&(n=[],(r=yA({},i)).__v=i.__v+1,UA(a,i,r,t.__n,void 0!==a.ownerSVGElement,null!=i.__h?[o]:null,n,null==o?IA(i):o,i.__h),FA(n,i),i.__e!=o&&PA(i)))})}function OA(e,t,n,r,i,o,a,s,l,c){var u,d,_,h,p,m,f,v=r&&r.__k||EA,g=v.length;for(n.__k=[],u=0;u<t.length;u++)if(null!=(h=n.__k[u]=null==(h=t[u])||"boolean"==typeof h?null:"string"==typeof h||"number"==typeof h||"bigint"==typeof h?CA(null,h,null,null,h):Array.isArray(h)?CA(AA,{children:h},null,null,null):h.__b>0?CA(h.type,h.props,h.key,null,h.__v):h)){if(h.__=n,h.__b=n.__b+1,null===(_=v[u])||_&&h.key==_.key&&h.type===_.type)v[u]=void 0;else for(d=0;d<g;d++){if((_=v[d])&&h.key==_.key&&h.type===_.type){v[d]=void 0;break}_=null}UA(e,h,_=_||gA,i,o,a,s,l,c),p=h.__e,(d=h.ref)&&_.ref!=d&&(f||(f=[]),_.ref&&f.push(_.ref,null,h),f.push(d,h.__c||p,h)),null!=p?(null==m&&(m=p),"function"==typeof h.type&&h.__k===_.__k?h.__d=l=kA(h,l,e):l=NA(e,h,_,v,p,l),"function"==typeof n.type&&(n.__d=l)):l&&_.__e==l&&l.parentNode!=e&&(l=IA(_))}for(n.__e=m,u=g;u--;)null!=v[u]&&("function"==typeof n.type&&null!=v[u].__e&&v[u].__e==n.__d&&(n.__d=IA(r,u+1)),GA(v[u],v[u]));if(f)for(u=0;u<f.length;u++)WA(f[u],f[++u],f[++u])}function kA(e,t,n){for(var r,i=e.__k,o=0;i&&o<i.length;o++)(r=i[o])&&(r.__=e,t="function"==typeof r.type?kA(r,t,n):NA(n,r,r,i,r.__e,t));return t}function DA(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some(function(e){DA(e,t)}):t.push(e)),t}function NA(e,t,n,r,i,o){var a,s,l;if(void 0!==t.__d)a=t.__d,t.__d=void 0;else if(null==n||i!=o||null==i.parentNode)e:if(null==o||o.parentNode!==e)e.appendChild(i),a=null;else{for(s=o,l=0;(s=s.nextSibling)&&l<r.length;l+=2)if(s==i)break e;e.insertBefore(i,o),a=o}return void 0!==a?a:i.nextSibling}function MA(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||bA.test(t)?n:n+"px"}function xA(e,t,n,r,i){var o;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||MA(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||MA(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r||e.addEventListener(t,o?BA:VA,o):e.removeEventListener(t,o?BA:VA,o);else if("dangerouslySetInnerHTML"!==t){if(i)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function VA(e){this.l[e.type+!1](_A.event?_A.event(e):e)}function BA(e){this.l[e.type+!0](_A.event?_A.event(e):e)}function UA(e,t,n,r,i,o,a,s,l){var c,u,d,_,h,p,m,f,v,g,E,b=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(l=n.__h,s=t.__e=n.__e,t.__h=null,o=[s]),(c=_A.__b)&&c(t);try{e:if("function"==typeof b){if(f=t.props,v=(c=b.contextType)&&r[c.__c],g=c?v?v.props.value:c.__:r,n.__c?m=(u=t.__c=n.__c).__=u.__E:("prototype"in b&&b.prototype.render?t.__c=u=new b(f,g):(t.__c=u=new LA(f,g),u.constructor=b,u.render=jA),v&&v.sub(u),u.props=f,u.state||(u.state={}),u.context=g,u.__n=r,d=u.__d=!0,u.__h=[]),null==u.__s&&(u.__s=u.state),null!=b.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=yA({},u.__s)),yA(u.__s,b.getDerivedStateFromProps(f,u.__s))),_=u.props,h=u.state,d)null==b.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(null==b.getDerivedStateFromProps&&f!==_&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(f,g),!u.__e&&null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(f,u.__s,g)||t.__v===n.__v){u.props=f,u.state=u.__s,t.__v!==n.__v&&(u.__d=!1),u.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(e){e&&(e.__=t)}),u.__h.length&&a.push(u);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(f,u.__s,g),null!=u.componentDidUpdate&&u.__h.push(function(){u.componentDidUpdate(_,h,p)})}u.context=g,u.props=f,u.state=u.__s,(c=_A.__r)&&c(t),u.__d=!1,u.__v=t,u.__P=e,c=u.render(u.props,u.state,u.context),u.state=u.__s,null!=u.getChildContext&&(r=yA(yA({},r),u.getChildContext())),d||null==u.getSnapshotBeforeUpdate||(p=u.getSnapshotBeforeUpdate(_,h)),E=null!=c&&c.type===AA&&null==c.key?c.props.children:c,OA(e,Array.isArray(E)?E:[E],t,n,r,i,o,a,s,l),u.base=t.__e,t.__h=null,u.__h.length&&a.push(u),m&&(u.__E=u.__=null),u.__e=!1}else null==o&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=HA(n.__e,t,n,r,i,o,a,l);(c=_A.diffed)&&c(t)}catch(e){t.__v=null,(l||null!=o)&&(t.__e=s,t.__h=!!l,o[o.indexOf(s)]=null),_A.__e(e,t,n)}}function FA(e,t){_A.__c&&_A.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){_A.__e(e,t.__v)}})}function HA(e,t,n,r,i,o,a,s){var l,c,u,d=n.props,_=t.props,h=t.type,p=0;if("svg"===h&&(i=!0),null!=o)for(;p<o.length;p++)if((l=o[p])&&"setAttribute"in l==!!h&&(h?l.localName===h:3===l.nodeType)){e=l,o[p]=null;break}if(null==e){if(null===h)return document.createTextNode(_);e=i?document.createElementNS("http://www.w3.org/2000/svg",h):document.createElement(h,_.is&&_),o=null,s=!1}if(null===h)d===_||s&&e.data===_||(e.data=_);else{if(o=o&&dA.call(e.childNodes),c=(d=n.props||gA).dangerouslySetInnerHTML,u=_.dangerouslySetInnerHTML,!s){if(null!=o)for(d={},p=0;p<e.attributes.length;p++)d[e.attributes[p].name]=e.attributes[p].value;(u||c)&&(u&&(c&&u.__html==c.__html||u.__html===e.innerHTML)||(e.innerHTML=u&&u.__html||""))}if(function(e,t,n,r,i){var o;for(o in n)"children"===o||"key"===o||o in t||xA(e,o,null,n[o],r);for(o in t)i&&"function"!=typeof t[o]||"children"===o||"key"===o||"value"===o||"checked"===o||n[o]===t[o]||xA(e,o,t[o],n[o],r)}(e,_,d,i,s),u)t.__k=[];else if(p=t.props.children,OA(e,Array.isArray(p)?p:[p],t,n,r,i&&"foreignObject"!==h,o,a,o?o[0]:n.__k&&IA(n,0),s),null!=o)for(p=o.length;p--;)null!=o[p]&&TA(o[p]);s||("value"in _&&void 0!==(p=_.value)&&(p!==e.value||"progress"===h&&!p||"option"===h&&p!==d.value)&&xA(e,"value",p,d.value,!1),"checked"in _&&void 0!==(p=_.checked)&&p!==e.checked&&xA(e,"checked",p,d.checked,!1))}return e}function WA(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){_A.__e(e,n)}}function GA(e,t,n){var r,i;if(_A.unmount&&_A.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||WA(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){_A.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&GA(r[i],t,"function"!=typeof e.type);n||null==e.__e||TA(e.__e),e.__e=e.__d=void 0}function jA(e,t,n){return this.constructor(e,n)}function YA(e,t,n){var r,i,o;_A.__&&_A.__(e,t),i=(r="function"==typeof n)?null:n&&n.__k||t.__k,o=[],UA(t,e=(!r&&n||t).__k=SA(AA,null,[e]),i||gA,gA,void 0!==t.ownerSVGElement,!r&&n?[n]:i?null:t.firstChild?dA.call(t.childNodes):null,o,!r&&n?n:i?i.__e:t.firstChild,r),FA(o,e)}function $A(e,t){YA(e,t,$A)}function qA(e,t,n){var r,i,o,a=yA({},e.props);for(o in t)"key"==o?r=t[o]:"ref"==o?i=t[o]:a[o]=t[o];return arguments.length>2&&(a.children=arguments.length>3?dA.call(arguments,2):n),CA(e.type,a,r||e.key,i||e.ref,null)}function zA(e,t){var n={__c:t="__cC"+vA++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=[],(r={})[t]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some(RA)},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}dA=EA.slice,_A={__e:function(e,t){for(var n,r,i;t=t.__;)if((n=t.__c)&&!n.__)try{if((r=n.constructor)&&null!=r.getDerivedStateFromError&&(n.setState(r.getDerivedStateFromError(e)),i=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e),i=n.__d),i)return n.__E=n}catch(t){e=t}throw e}},hA=0,LA.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=yA({},this.state),"function"==typeof e&&(e=e(yA({},n),this.props)),e&&yA(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),RA(this))},LA.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),RA(this))},LA.prototype.render=AA,pA=[],mA="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,wA.__r=0,vA=0;var KA,XA,ZA,JA=0,QA=[],eL=_A.__b,tL=_A.__r,nL=_A.diffed,rL=_A.__c,iL=_A.unmount;function oL(e,t){_A.__h&&_A.__h(XA,e,JA||t),JA=0;var n=XA.__H||(XA.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function aL(e){return JA=1,sL(bL,e)}function sL(e,t,n){var r=oL(KA++,2);return r.t=e,r.__c||(r.__=[n?n(t):bL(void 0,t),function(e){var t=r.t(r.__[0],e);r.__[0]!==t&&(r.__=[t,r.__[1]],r.__c.setState({}))}],r.__c=XA),r.__}function lL(e,t){var n=oL(KA++,3);!_A.__s&&EL(n.__H,t)&&(n.__=e,n.__H=t,XA.__H.__h.push(n))}function cL(e,t){var n=oL(KA++,4);!_A.__s&&EL(n.__H,t)&&(n.__=e,n.__H=t,XA.__h.push(n))}function uL(e){return JA=5,dL(function(){return{current:e}},[])}function dL(e,t){var n=oL(KA++,7);return EL(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function _L(e,t){return JA=8,dL(function(){return e},t)}function hL(e){var t=XA.context[e.__c],n=oL(KA++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(XA)),t.props.value):e.__}function pL(e,t){_A.useDebugValue&&_A.useDebugValue(t?t(e):e)}function mL(){for(var e;e=QA.shift();)if(e.__P)try{e.__H.__h.forEach(vL),e.__H.__h.forEach(gL),e.__H.__h=[]}catch(t){e.__H.__h=[],_A.__e(t,e.__v)}}_A.__b=function(e){XA=null,eL&&eL(e)},_A.__r=function(e){tL&&tL(e),KA=0;var t=(XA=e.__c).__H;t&&(t.__h.forEach(vL),t.__h.forEach(gL),t.__h=[])},_A.diffed=function(e){nL&&nL(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(1!==QA.push(t)&&ZA===_A.requestAnimationFrame||((ZA=_A.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(r),fL&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);fL&&(t=requestAnimationFrame(n))})(mL)),XA=null},_A.__c=function(e,t){t.some(function(e){try{e.__h.forEach(vL),e.__h=e.__h.filter(function(e){return!e.__||gL(e)})}catch(n){t.some(function(e){e.__h&&(e.__h=[])}),t=[],_A.__e(n,e.__v)}}),rL&&rL(e,t)},_A.unmount=function(e){iL&&iL(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(e){try{vL(e)}catch(e){t=e}}),t&&_A.__e(t,n.__v))};var fL="function"==typeof requestAnimationFrame;function vL(e){var t=XA,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),XA=t}function gL(e){var t=XA;e.__c=e.__(),XA=t}function EL(e,t){return!e||e.length!==t.length||t.some(function(t,n){return t!==e[n]})}function bL(e,t){return"function"==typeof t?t(e):t}function yL(){return yL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yL.apply(this,arguments)}function TL(e,t){return TL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},TL(e,t)}var SL,CL,AL,LL=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,TL(t,n);var i=r.prototype;return i.componentDidMount=function(){this.props.nodeRef.current=this.base},i.componentWillUnmount=function(){this.props.nodeRef.current=void 0},i.render=function(){return SA(AA,{},this.props.children)},r}(LA);!function(e){e.APPEAR="appear",e.APPEAR_ACTIVE="appearActive",e.APPEAR_DONE="appearDone",e.ENTER="enter",e.ENTER_ACTIVE="enterActive",e.ENTER_DONE="enterDone",e.EXIT="exit",e.EXIT_ACTIVE="exitActive",e.EXIT_DONE="exitDone"}(CL||(CL={})),function(e){e.ENTER="onEnter",e.ENTERING="onEntering",e.ENTERED="onEntered",e.EXIT="onExit",e.EXITING="onExiting",e.EXITED="onExited"}(AL||(AL={}));var IL=((SL={})[CL.APPEAR]=[AL.ENTER,CL.APPEAR_ACTIVE],SL[CL.APPEAR_ACTIVE]=[AL.ENTERING,CL.APPEAR_DONE,!0],SL[CL.APPEAR_DONE]=[AL.ENTERED],SL[CL.ENTER]=[AL.ENTER,CL.ENTER_ACTIVE],SL[CL.ENTER_ACTIVE]=[AL.ENTERING,CL.ENTER_DONE,!0],SL[CL.ENTER_DONE]=[AL.ENTERED],SL[CL.EXIT]=[AL.EXIT,CL.EXIT_ACTIVE],SL[CL.EXIT_ACTIVE]=[AL.EXITING,CL.EXIT_DONE,!0],SL[CL.EXIT_DONE]=[AL.EXITED],SL);function PL(e){var t=e.children,n=e.in,r=void 0!==n&&n,i=e.appear,o=void 0!==i&&i,a=e.enter,s=void 0===a||a,l=e.exit,c=void 0===l||l,u=e.duration,d=void 0===u?500:u,_=e.alwaysMounted,h=void 0!==_&&_,p=e.addEndListener,m=uL(),f=uL(),v=!1,g=aL(function(){return v=!0,r?o?CL.APPEAR:CL.APPEAR_DONE:CL.EXIT_DONE}),E=g[0],b=g[1];lL(function(){var t=window,n=t.setTimeout,r=t.clearTimeout,i=IL[E],o=i[1],a=i[2],s=e[i[0]];return null==s||s(m.current),o&&(a?p?p(m.current,function(){return b(o)}):f.current=n(b,d,o):b(o)),function(){r(f.current)}},[E,d]),cL(function(){v||b(r?s?CL.ENTER:CL.ENTER_DONE:c?CL.EXIT:CL.EXIT_DONE)},[r]);var y=dL(function(){var e={};return Object.keys(IL).forEach(function(t){e[t]=E===t}),e},[E]);return h||(c?E!==CL.EXIT_DONE:r)?SA(LL,{nodeRef:m,children:t(y,E)}):null}var RL,wL=["children","styles"];function OL(e){var t=e.children,n=e.styles,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(i[n]=e[n]);return i}(e,wL);return SA(PL,r,function(e,r){var i=t.props.style,o=dL(function(){return yL({},function(e,t){var n=t[e];switch(e){case CL.APPEAR_ACTIVE:return yL({},t[CL.APPEAR],n);case CL.ENTER_ACTIVE:return yL({},t[CL.ENTER],n);case CL.EXIT_ACTIVE:return yL({},t[CL.EXIT],n);default:return n}}(r,n),i)},[i,n,r]);return qA(t,{style:o})})}function kL(e,t){for(var n in t)e[n]=t[n];return e}function DL(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function NL(e){this.props=e}(RL={})[CL.APPEAR]="-appear",RL[CL.APPEAR_ACTIVE]="-appear-active",RL[CL.APPEAR_DONE]="-appear-done",RL[CL.ENTER]="-enter",RL[CL.ENTER_ACTIVE]="-enter-active",RL[CL.ENTER_DONE]="-enter-done",RL[CL.EXIT]="-exit",RL[CL.EXIT_ACTIVE]="-exit-active",RL[CL.EXIT_DONE]="-exit-done",(NL.prototype=new LA).isPureReactComponent=!0,NL.prototype.shouldComponentUpdate=function(e,t){return DL(this.props,e)||DL(this.state,t)};var ML=_A.__b;_A.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),ML&&ML(e)};var xL="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function VL(e){function t(t,n){var r=kL({},t);return delete r.ref,e(r,(n=t.ref||n)&&("object"!=typeof n||"current"in n)?n:null)}return t.$$typeof=xL,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var BL=function(e,t){return null==e?null:DA(DA(e).map(t))},UL={map:BL,forEach:BL,count:function(e){return e?DA(e).length:0},only:function(e){var t=DA(e);if(1!==t.length)throw"Children.only";return t[0]},toArray:DA},FL=_A.__e;_A.__e=function(e,t,n){if(e.then)for(var r,i=t;i=i.__;)if((r=i.__c)&&r.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),r.__c(e,t);FL(e,t,n)};var HL=_A.unmount;function WL(){this.__u=0,this.t=null,this.__b=null}function GL(e){var t=e.__.__c;return t&&t.__e&&t.__e(e)}function jL(){this.u=null,this.o=null}_A.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&!0===e.__h&&(e.type=null),HL&&HL(e)},(WL.prototype=new LA).__c=function(e,t){var n=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var i=GL(r.__v),o=!1,a=function(){o||(o=!0,n.__R=null,i?i(s):s())};n.__R=a;var s=function(){if(! --r.__u){if(r.state.__e){var e=r.state.__e;r.__v.__k[0]=function e(t,n,r){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(t){return e(t,n,r)}),t.__c&&t.__c.__P===n&&(t.__e&&r.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=r)),t}(e,e.__c.__P,e.__c.__O)}var t;for(r.setState({__e:r.__b=null});t=r.t.pop();)t.forceUpdate()}},l=!0===t.__h;r.__u++||l||r.setState({__e:r.__b=r.__v.__k[0]}),e.then(a,a)},WL.prototype.componentWillUnmount=function(){this.t=[]},WL.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=function e(t,n,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(e){"function"==typeof e.__c&&e.__c()}),t.__c.__H=null),null!=(t=kL({},t)).__c&&(t.__c.__P===r&&(t.__c.__P=n),t.__c=null),t.__k=t.__k&&t.__k.map(function(t){return e(t,n,r)})),t}(this.__b,n,r.__O=r.__P)}this.__b=null}var i=t.__e&&SA(AA,null,e.fallback);return i&&(i.__h=null),[SA(AA,null,t.__e?null:e.children),i]};var YL=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function $L(e){return this.getChildContext=function(){return e.context},e.children}function qL(e){var t=this,n=e.i;t.componentWillUnmount=function(){YA(null,t.l),t.l=null,t.i=null},t.i&&t.i!==n&&t.componentWillUnmount(),e.__v?(t.l||(t.i=n,t.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(e){this.childNodes.push(e),t.i.appendChild(e)},insertBefore:function(e,n){this.childNodes.push(e),t.i.appendChild(e)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t.i.removeChild(e)}}),YA(SA($L,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}function zL(e,t){return SA(qL,{__v:e,i:t})}(jL.prototype=new LA).__e=function(e){var t=this,n=GL(t.__v),r=t.o.get(e);return r[0]++,function(i){var o=function(){t.props.revealOrder?(r.push(i),YL(t,e,r)):i()};n?n(o):o()}},jL.prototype.render=function(e){this.u=null,this.o=new Map;var t=DA(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},jL.prototype.componentDidUpdate=jL.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,n){YL(e,n,t)})};var KL="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,XL=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,ZL="undefined"!=typeof document,JL=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(e)};LA.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(LA.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var QL=_A.event;function eI(){}function tI(){return this.cancelBubble}function nI(){return this.defaultPrevented}_A.event=function(e){return QL&&(e=QL(e)),e.persist=eI,e.isPropagationStopped=tI,e.isDefaultPrevented=nI,e.nativeEvent=e};var rI,iI={configurable:!0,get:function(){return this.class}},oI=_A.vnode;_A.vnode=function(e){var t=e.type,n=e.props,r=n;if("string"==typeof t){var i=-1===t.indexOf("-");for(var o in r={},n){var a=n[o];ZL&&"children"===o&&"noscript"===t||"value"===o&&"defaultValue"in n&&null==a||("defaultValue"===o&&"value"in n&&null==n.value?o="value":"download"===o&&!0===a?a="":/ondoubleclick/i.test(o)?o="ondblclick":/^onchange(textarea|input)/i.test(o+t)&&!JL(n.type)?o="oninput":/^onfocus$/i.test(o)?o="onfocusin":/^onblur$/i.test(o)?o="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(o)?o=o.toLowerCase():i&&XL.test(o)?o=o.replace(/[A-Z0-9]/,"-$&").toLowerCase():null===a&&(a=void 0),r[o]=a)}"select"==t&&r.multiple&&Array.isArray(r.value)&&(r.value=DA(n.children).forEach(function(e){e.props.selected=-1!=r.value.indexOf(e.props.value)})),"select"==t&&null!=r.defaultValue&&(r.value=DA(n.children).forEach(function(e){e.props.selected=r.multiple?-1!=r.defaultValue.indexOf(e.props.value):r.defaultValue==e.props.value})),e.props=r,n.class!=n.className&&(iI.enumerable="className"in n,null!=n.className&&(r.class=n.className),Object.defineProperty(r,"className",iI))}e.$$typeof=KL,oI&&oI(e)};var aI=_A.__r;_A.__r=function(e){aI&&aI(e),rI=e.__c};var sI={ReactCurrentDispatcher:{current:{readContext:function(e){return rI.__n[e.__c].props.value}}}};function lI(e){return!!e&&e.$$typeof===KL}var cI={useState:aL,useReducer:sL,useEffect:lL,useLayoutEffect:cL,useRef:uL,useImperativeHandle:function(e,t,n){JA=6,cL(function(){"function"==typeof e?e(t()):e&&(e.current=t())},null==n?n:n.concat(e))},useMemo:dL,useCallback:_L,useContext:hL,useDebugValue:pL,version:"17.0.2",Children:UL,render:function(e,t,n){return null==t.__k&&(t.textContent=""),YA(e,t),"function"==typeof n&&n(),e?e.__c:null},hydrate:function(e,t,n){return $A(e,t),"function"==typeof n&&n(),e?e.__c:null},unmountComponentAtNode:function(e){return!!e.__k&&(YA(null,e),!0)},createPortal:zL,createElement:SA,createContext:zA,createFactory:function(e){return SA.bind(null,e)},cloneElement:function(e){return lI(e)?qA.apply(null,arguments):e},createRef:function(){return{current:null}},Fragment:AA,isValidElement:lI,findDOMNode:function(e){return e&&(e.base||1===e.nodeType&&e)||null},Component:LA,PureComponent:NL,memo:function(e,t){function n(e){var n=this.props.ref,r=n==e.ref;return!r&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!r:DL(this.props,e)}function r(t){return this.shouldComponentUpdate=n,SA(e,t)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r},forwardRef:VL,flushSync:function(e,t){return e(t)},unstable_batchedUpdates:function(e,t){return e(t)},StrictMode:AA,Suspense:WL,SuspenseList:jL,lazy:function(e){var t,n,r;function i(i){if(t||(t=e()).then(function(e){n=e.default||e},function(e){r=e}),r)throw r;if(!n)throw t;return SA(n,i)}return i.displayName="Lazy",i.__f=!0,i},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:sI};const uI="undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?lL:cL;function dI(e){const t="function"==typeof e?function(e){let t;const n=new Set,r=(e,r)=>{const i="function"==typeof e?e(t):e;if(i!==t){const e=t;t=r?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,o={setState:r,getState:i,subscribe:(e,r,o)=>r||o?((e,r=i,o=Object.is)=>{let a=r(t);function s(){const n=r(t);if(!o(a,n)){const t=a;e(a=n,t)}}return n.add(s),()=>n.delete(s)})(e,r,o):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(r,i,o),o}(e):e,n=(e=t.getState,n=Object.is)=>{const[,r]=sL(e=>e+1,0),i=t.getState(),o=uL(i),a=uL(e),s=uL(n),l=uL(!1),c=uL();let u;void 0===c.current&&(c.current=e(i));let d=!1;(o.current!==i||a.current!==e||s.current!==n||l.current)&&(u=e(i),d=!n(c.current,u)),uI(()=>{d&&(c.current=u),o.current=i,a.current=e,s.current=n,l.current=!1});const _=uL(i);uI(()=>{const e=()=>{try{const e=t.getState(),n=a.current(e);s.current(c.current,n)||(o.current=e,c.current=n,r())}catch(e){l.current=!0,r()}},n=t.subscribe(e);return t.getState()!==_.current&&e(),n},[]);const h=d?u:c.current;return pL(h),h};return Object.assign(n,t),n[Symbol.iterator]=function(){const e=[n,t];return{next(){const t=e.length<=0;return{value:e.shift(),done:t}}}},n}function _I(){const e=zA(void 0);return{Provider:({initialStore:t,createStore:n,children:r})=>{const i=uL();return i.current||(t&&(n||(n=()=>t)),i.current=n()),SA(e.Provider,{value:i.current},r)},useStore:(t,n=Object.is)=>{const r=hL(e);if(!r)throw new Error("Seems like you have not used zustand provider as an ancestor.");return r(t,n)},useStoreApi:()=>{const t=hL(e);if(!t)throw new Error("Seems like you have not used zustand provider as an ancestor.");return dL(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])}}}function hI({debugCollector:e}){return e.getDebugPayload()}class pI{constructor(e=(e,t)=>e<t){this._data={},this._sortedKeys=[],this._sort=e}_insert(e){var t=this._sortedKeys.length;if(0===t)this._sortedKeys.push(e);else{for(var n=0;n<t;n++)if(this._sort(e,this._sortedKeys[n])){this._sortedKeys[n-1]!==e&&this._sortedKeys.splice(n,0,e);break}n===t&&this._sortedKeys[n-1]!==e&&this._sortedKeys.splice(n,0,e)}}_binarySearch(e,t,n,r){if(r<n)return-1;let i=parseInt(n+(r-n)/2,10);return e[i]>t?this._binarySearch(e,t,n,i-1):e[i]<t?this._binarySearch(e,t,i+1,r):i}get size(){return this._sortedKeys.length}delete(e){const t=this._binarySearch(this._sortedKeys,e,0,this._sortedKeys.length);if(-1===t)throw new Error("key does not exist");this._sortedKeys.splice(t,1),delete this._data[e]}set(e,t){return this._data[e]=t,this._insert(e),this}get(e){return this._data[e]}keys(){return this._sortedKeys.slice()}values(){return this.keys().map(e=>this._data[e])}forEach(e){const t=this._sortedKeys.length;for(let n=0;n<t&&!1!==e(this._data[this._sortedKeys[n]],this._sortedKeys[n],this);n++);}}const mI={},fI=e=>{var t;const n=new pI;return null!=(t=e.embed)&&null!=(t=t.cards)&&t.length&&e.embed.cards.forEach(e=>{const t=e.url?p(p({},e),{},{url:ag(e.url)}):e;n.set(e.timecode,yy(t))}),n},vI=e=>{const{events:t,set:n}=e,r=function(e){return{cardsMap:fI(e.config),activeCard:null,hoveredCard:null,displayedCard:null,cardPressed:void 0}}(e),i=e=>{const{hoveredCard:t,activeCard:n}=e,r=null!==t?t:n;return{cards:p(p({},e),{},{displayedCard:r})}},o=e=>{e&&t.fire(Rp,e.id,e)},a=e=>e.timecode;return t.on(ap,(e,t)=>{n(e=>{const n=p(p({},e.cards),{},{cardsMap:fI(t),activeCard:null,hoveredCard:null});return i(n)})}),t.on(N_,e=>{n(t=>{let{cardsMap:n}=t.cards;n.set(e.timecode,e),o(e);const r=p(p({},t.cards),{},{cardsMap:n,activeCard:e.timecode});return i(r)})}),t.on(M_,e=>{n(t=>{let{cardsMap:n}=t.cards;n.delete(e.timecode);const r=p(p({},t.cards),{},{cardsMap:n,activeCard:null,hoveredCard:null});return i(r)})}),t.on(Pi.TIME_UPDATE,({currentTime:e})=>{n(t=>{const n=((e,t)=>{const{cardsMap:n}=e.cards;let r=n.values().filter(e=>((e,t)=>t>=a(e)&&t<(e=>a(e)+(e.displayTime||6))(e))(e,t)).slice(-1)[0];return(null==r?void 0:r.timecode)||null})(t,e),r=t.cards.cardsMap.get(n);if(n===t.cards.activeCard)return mI;const s=p(p({},t.cards),{},{activeCard:n});return o(r),i(s)})}),t.on(Z_,()=>{n(e=>{const t=p(p({},e.cards),{},{activeCard:null,hoveredCard:null});return i(t)})}),{cards:r,setCards:(e,r)=>{"cardPressed"!==e||"string"!=typeof r&&void 0!==r?((e,t)=>{n(n=>{const r=p(p({},n.cards),{},{[e]:t});return i(r)})})(e,r):t.fire(wp,r)}}};function gI(e){var t,n;const{config:r}=e,{title:i}=r.video,{title:o,portrait:a}=r.embed.settings,s=Xg(),l=r.embed.settings.spatial_label,c=!(!r.video.spatial||!l),u=r.request.file_codecs||r.video.file_codecs,d=!Mu(u),_=r.request.hdr_formats||[],h=d&&(null==(t=u.hevc)||null==(t=t.hdr)?void 0:t.length)>0,m=_.includes(My.HDR10_PLUS),f=_.includes(My.DV84)||d&&(null==(n=u.hevc)||null==(n=n.dvh1)?void 0:n.length)>0,v=!!r.video.ai,g=r.video.channel_layout||"stereo",E=r.video.owner[Q.devicePixelRatio>1?"img_2x":"img"],b=r.video.owner.name,y=function(e){let t={displayByline:!1,displayBadge:!1};if(e.embed.settings.byline){const{type:n,url:r}=e.embed.settings.byline_badge||{};Object.assign(t,{displayByline:!0,displayBadge:!e.video.live_event,bylineBadgeType:n,bylineBadgeUrl:r})}return t}(r);let T=Kv(Zd,r),S=Kv(Xd,r),C=Kv(Kd,r);return e.segmentedPlaybackEnabled&&(C=cg(C,e.startTime,e.endTime)),p({ownerLinkUrl:T,titleLinkUrl:C,bylineLinkUrl:S,displayTitle:!!o,displayPortrait:!!a,ownerName:b,targetBlank:s,portraitImg:E,title:i,is360:c,hasAIContent:v,hasHDR:h,hasHDR10Plus:m,hasDolbyVision:f,channelLayout:g},y)}let EI;function bI(e){var t;const{config:n,store:r}=e,{request:i,video:o}=n,a=null==(t=o.vod)?void 0:t.button_text,s=r.get("ui.player.breakpoint"),l=r.get("ui.player.mode"),c=FE(UE.FULL_CONTROLS,l,s);return{overrideBehavior:!1,trailerButtonText:a,vimeoLogoUrl:Kv(zd,e.config),thumbnailPreview:i.thumb_preview,showAllControls:c,progressBarTransitionState:"collapsed",isExpanded:!1,shouldRestoreButtonsDisplayed:c}}let yI=function(e){return e.EMPTY="empty",e.UNMUTE="unmute",e.WATCH_FULL_VIDEO="watchFullVideo",e.SPATIAL_INSTRUCTIONS_CLICK="spatialInstructionsClick",e.SPATIAL_INSTRUCTIONS_ARROWS="spatialInstructionsArrows",e}({});const TI=[yI.SPATIAL_INSTRUCTIONS_CLICK,yI.SPATIAL_INSTRUCTIONS_ARROWS,yI.WATCH_FULL_VIDEO,yI.UNMUTE];function SI(e){const{config:t}=e,{autoplay:n,settings:r}=t.embed;return{purpose:e.segmentedPlaybackEnabled&&n&&r.watch_full_video?yI.WATCH_FULL_VIDEO:yI.EMPTY}}function CI({displayList:e,playback:t,embed:n}){const{outro:r,controlBar:i}=e,{isSegmentedPlaybackEnabled:o,paused:a,scrubbing:s}=t;return!!o&&(!r&&i&&!(a&&!s)&&n.watchFullVideo)}function AI(e){const t=e.embed.access_gates;if(!t)return null;const n=t.find(e=>e.placement===iE.BEFORE_VIDEO);return n?uE(null==n?void 0:n.gate_type,e)?null:((e,t)=>{const n=aE[e];return!n||n.includes(t.view)})(null==n?void 0:n.gate_type,e)?n:null:null}const LI=e=>!e.title&&!e.portrait&&!e.byline,II=e=>{var t;const{config:n,element:r,get:i}=e,{embed:o}=n,a=r.classList.contains("player-tiny"),s=SI(e),l=(null==s?void 0:s.purpose)===yI.WATCH_FULL_VIDEO;return!(a||null!==AI(n)||(null==(t=i())||null==(t=t.overlay)?void 0:t.purpose)===rv.INTERACTIVE||n.view&&!Gf(n.view)||null!=o&&o.autoplay||LI(null==o?void 0:o.settings)||!ov(o)||l)},PI=e=>{var t;const{config:n,get:r}=e,{view:i,video:o,embed:a,request:s}=n,{vod:l}=o,c=i!==Jm.main&&i!==Jm.privateUnlocked,u=!!a.settings.instant_sidedock,d=l&&"purchase_options"in l&&!!l.purchase_options.length,_=l&&Wf(l.countries,s.country);return(null==(t=r())||null==(t=t.overlay)?void 0:t.purpose)!==rv.INTERACTIVE&&null===AI(n)&&!!ov(a)&&!e.segmentedPlaybackEnabled&&(Q.touch||c||u||d&&_)},RI=e=>{var t,n;const{config:r,get:i}=e,{view:o,embed:a,request:s}=r;return!(null!==AI(e.config)||(null==(t=i())||null==(t=t.overlay)?void 0:t.purpose)===rv.INTERACTIVE||o&&!Gf(o)||a.autoplay&&null!=(n=s.flags)&&n.autohide_controls||!ov(a))};let wI=function(e){return e.IMAGE="image",e.STATIC_IMAGE="static-image",e.VOD="vod",e.LINK="link",e.NOTHING="nothing",e.BLANK="blank",e.SHARE="share",e.TEXT="text",e.BEGINNING="beginning",e.VIDEOS="videos",e.THREEVIDEOS="threevideos",e.PROMOTED="promoted",e.APP_REDIRECT="app-redirect",e}({});const OI=(e,t,n)=>!(e&&e===t)&&!1!==n.final;function kI({get:e,set:t}){return{purpose:rv.EMPTY,spatialRedirectContext:null,overlayElementsUpdatedCount:0,showCloseButton:!0,incrementOverlayElementsUpdatedCount:()=>{t(t=>({overlay:p(p({},t.overlay),{},{overlayElementsUpdatedCount:e().overlay.overlayElementsUpdatedCount+1})}))}}}function DI(e){return Object.values(rv).includes(e)}let NI=function(e){return e.EMPTY="empty",e.SPATIAL_UNSUPPORTED="spatial-unsupported",e.SPATIAL_FAILURE="spatial-failure",e}({});const MI=({element:e,config:t})=>{if(e.classList.contains("player-mini")||e.classList.contains("player-tiny"))return!1;const{embed:n}=t;return!(!n.settings.badge||n.autoplay&&16!==n.settings.badge.id)};let xI=function(e){return e.IDLE="idle",e.LOADED="loaded",e.ERROR="error",e.LOADING="loading",e}({}),VI=function(e){return e.MAIN="main",e.LANGUAGE="language",e}({}),BI=function(e){return e.SMALL="small",e.MEDIUM="medium",e.LARGE="large",e}({}),UI=function(e){return e.PREV="prev",e.NEXT="down",e.FIRST="first",e.LAST="last",e}({});const FI="en",HI=e=>{const t=document.createElement("div");return t.innerHTML=e,t.textContent||""},WI={language:FI,id:"",label:"Transcript",rtl:!1},GI=(e,t)=>{const{lang:n,cookie:r}=e.request,{captions:i,transcript:o}=r,[a]=(o||"").split("."),[s]=(i||"").split("."),l=o&&t.find(e=>e.language.includes(a))||s&&t.find(e=>e.language.includes(s))||n&&t.find(e=>n.includes(e.language))||t.find(e=>e.language.includes(FI))||t[0]||WI;return l},jI=(e,t)=>!!e.find(e=>e.index===t);function YI(e,t,n,r){const i=(e=>e.map((e,t)=>({startTime:e.startTime,endTime:e.endTime,startTimeDisplay:"",text:HI(e.text),originalIndex:t})))(e),o=((e,t,n=null,r=null)=>{let i;return i=t?e.reduce((e,n)=>(n.startTime>=t.startTime&&n.endTime<=t.endTime&&e.push(p(p({},n),{},{startTimeDisplay:uv(Kf(n.startTime,t))})),e),[]):(e=>e.map(e=>p(p({},e),{},{startTimeDisplay:uv(e.startTime)})))(null!==n||null!==r?e.filter(e=>{const t=null===n||e.startTime>=n,i=null===r||e.startTime<=r;return t&&i}):e),i})(i,!Q.isGoogleBot&&t,n,r),a=(e=>e.map((e,t,n)=>{const r=n[t+1];return r&&r.startTime<e.endTime?p(p({},e),{},{endTime:r.startTime}):e}))(((e,t=20,n=20,r=10)=>{if(0===e.length)return[];let i,o,a,s,l;return c(e[0]),e.reduce(function(a,s,l,d){var _;const{text:h,endTime:p}=s,m=function(e,t){return e+1===t.length}(l,d);if(o+=`${h} `,m)return u(p,a);const f=h.split(" "),v=function(e){return function(e){return[".","?","!"].some(t=>e.trim().endsWith(t))}(e[e.length-1])}(f);i+=f.length;const g=i>=n,E=i>=t&&v,b=function(e,t,n){return t-e>n}(s.endTime,null==(_=d[l+1])?void 0:_.startTime,r);return(g||E||b)&&(a=u(p,a),c(e[l+1])),a},[]).map((e,t)=>p(p({},e),{},{originalIndex:t}));function c(e){e&&(i=0,o="",a=e.startTime,s=e.originalIndex,l=e.startTimeDisplay)}function u(e,t){return t.concat({originalIndex:s,text:o.trim(),startTime:a,startTimeDisplay:l,endTime:e})}})(o));return a}const $I=e=>Q.isGoogleBot||Boolean(null==e?void 0:e.config.embed.tq),qI=[rv.EMPTY,rv.HELP,rv.SHARE,rv.INTERACTIVE],zI=({config:e,store:t})=>{const{embed:n}=e;if(!n.settings.playbar)return!1;if(!ov(n))return!1;const r=t.get("ui.player.breakpoint"),i=t.get("ui.player.mode");return FE(UE.PROGRESS_BAR,i,r,e.request.flags)},KI=e=>{const t=$I(e);return Q.isGoogleBot&&t};function XI(e){e(e=>({displayList:p(p({},e.displayList),{},{aiWidget:!1})}))}const ZI=({config:e,store:t})=>{const{embed:n}=e;if(!ov(n))return!1;const r=t.get("ui.player.breakpoint"),i=t.get("ui.player.mode");return FE(UE.FULL_CONTROLS,i,r)},JI=e=>{const{set:t,get:n}=e,r=function(e){const t=PI(e),n=II(e),r=(e=>kI(e).purpose!==rv.EMPTY)(e),i=(({store:e,config:t,events:n,set:r})=>{var i;return n.on(ap,(e,t)=>{r(e=>{var n;return{displayList:p(p({},e.displayList),{},{cards:!(null==(n=t.embed)||null==(n=n.cards)||!n.length||e.appearance.isMenuBlockingUI)})}})}),!(null==(i=t.embed)||null==(i=i.cards)||!i.length||e.get("ui.controlbar.isMenuFullWidth"))})(e),o=MI(e),a=RI(e),s=zI(e),l=KI(e),c=$I(e),u=function(e){const{purpose:t}=SI(e);return t!==yI.EMPTY}(e),d=(e=>{const{config:t}=e;return null!==AI(t)})(e),_=ZI(e),h=r||d;return(({set:e,get:t,events:n,subscribe:r,performDelegateAction:i})=>{const o=e=>{t().displayList.outro!==e&&(e&&(t().displayList.accessGate||t().displayList.ad||t().embed.background||t().embed.loop||t().outro.purpose===wI.BEGINNING)||(e?i(Xy,()=>{s(e)}):s(e)))};function a(e){e?o(!1):t().playback.ended&&o(!0)}function s(t){e(e=>({displayList:p(p({},e.displayList),{},{outro:t})})),n.fire(t?vp:gp)}n.on([Pi.PLAY,Pi.SEEKED,fh,L_,u_],()=>o(!1)),n.on(A_,()=>o(!0)),r(e=>{var t;return null==e||null==(t=e.playback)?void 0:t.ended},e=>o(e)),r(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.accessGate},a),r(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.ad},a)})(e),(({store:e,config:t,set:n})=>{e.watch("ui.controlbar.isMenuFullWidth",e=>{n(n=>{var r;return{displayList:p(p({},n.displayList),{},{cards:!(null==(r=t.embed)||null==(r=r.cards)||!r.length||e)})}})})})(e),(({set:e,events:t,store:n})=>{n.watch("ui.player.mode",t=>{t===Iv.TINY&&e(e=>({displayList:p(p({},e.displayList),{},{debugPanel:!1})}))}),t.on(Yh,()=>{e(e=>n.get("ui.player.mode")===Iv.TINY?mI:{displayList:p(p({},e.displayList),{},{debugPanel:!e.displayList.debugPanel})})})})(e),(e=>{const{set:t,get:n,subscribe:r,events:i}=e;function o(e={}){n().displayList.sideDock&&t(t=>{const{playback:n,displayList:r,appearance:o,embed:a,cards:s}=t,{fullPlayerElement:l,alert:c,menu:d,toast:_}=r,{playInitiated:h,targetTimeReached:m}=n,{forceExitedFullscreen:f}=o,v=Hf(o,e,"mousedOverSidedock"),g=l||c||d&&o.isMenuBlockingUI||!!s.displayedCard||_&&u();return f?mI:h&&m||g||a.autoHideControls?v?mI:!o.externalDisplay&&!o.pictureInPictureActive||g?(i.fire(bh,!1),{appearance:p(p({},t.appearance),{},{mousedOverSidedock:v}),displayList:p(p({},t.displayList),{},{sideDock:!1})}):mI:mI})}function a(e={}){n().displayList.sideDock||t(t=>{const{displayList:n,appearance:r,embed:o,cards:a,playback:s}=t,{menu:l,fullPlayerElement:c,alert:d,toast:_}=n,h=c||d||l&&r.isMenuBlockingUI||!!a.displayedCard||_&&u();return ov(o)?h||s.isSegmentedPlaybackEnabled?mI:(i.fire(bh,!0),{appearance:p(p({},t.appearance),{},{mousedOverSidedock:Hf(t.appearance,e,"mousedOverSidedock")}),displayList:p(p({},t.displayList),{},{sideDock:!0})}):mI})}function s(){return o({mousedOverSidedock:!1})}function l(e,t){e&&t&&s()}function c(e,t){!e&&t&&a()}function u(){return[wE.XXS,wE.XS].includes(n().appearance.playerBreakpoint)}i.on([Kh,Zh,ih],o),i.on([Xh,Up,Pi.ENTER_PICTURE_IN_PICTURE],a),i.on(ap,function(n,r){const i=PI(p(p({},e),{},{config:r}));t(e=>({displayList:p(p({},e.displayList),{},{sideDock:i})}))}),r(e=>{var t;return null==e||null==(t=e.playback)?void 0:t.targetTimeReached},e=>e&&o()),r(e=>{var t;return null==e||null==(t=e.appearance)?void 0:t.fullscreen},e=>!e&&s()),r(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.alert},e=>e&&o()),r(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.menu},e=>e?l(e,n().appearance.isMenuBlockingUI):c(e,n().appearance.isMenuBlockingUI)),r(e=>{var t;return null==e||null==(t=e.appearance)?void 0:t.isMenuBlockingUI},e=>e?l(n().displayList.menu,e):c(n().displayList.menu,e)),r(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.fullPlayerElement},e=>e?s():a()),r(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.ad},e=>{e?t(e=>({displayList:p(p({},e.displayList),{},{sideDock:!1})})):n().displayList.sideDock||a()}),r(e=>{var t;return null==e||null==(t=e.cards)?void 0:t.displayedCard},e=>e&&s()),r(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.toast},e=>e&&u()&&s()),r(e=>{var t;return null==e||null==(t=e.playback)?void 0:t.isSegmentedPlaybackEnabled},e=>{e?s():a()})})(e),(e=>{const{set:t,get:n,subscribe:r,events:i,config:o}=e;function a(){t(e=>{const{appearance:t,playback:n,embed:r}=e,{externalDisplay:i}=t,{scrubbing:a,paused:s}=n,l=u(e),{embed:c}=o;return ov(r)?t.playerSizeMode===Iv.TINY||LI(c.settings)||l?mI:i?{displayList:p(p({},e.displayList),{},{title:!0})}:!s||a?mI:{displayList:p(p({},e.displayList),{},{title:!0})}:mI})}function s(){t(e=>{const{appearance:t,playback:n}=e,{externalDisplay:r}=t,{playInitiated:i}=n,o=u(e);return t.playerSizeMode===Iv.TINY||o?{displayList:p(p({},e.displayList),{},{title:!1})}:r||!i?mI:{displayList:p(p({},e.displayList),{},{title:!1})}})}function l(e,t){e&&t&&s()}function c(e,t){!e&&t&&a()}function u(e){const{fullPlayerElement:t,outro:n,menu:r,toast:i,topCenterActionItem:o}=e.displayList,{isMenuBlockingUI:a}=e.appearance;return t||n||r&&a||i||o}r(e=>{var t;return null==e||null==(t=e.playback)?void 0:t.playInitiated},e=>e&&s()),r(e=>{var t;return null==e||null==(t=e.playback)?void 0:t.paused},e=>{e?a():s()}),r(e=>{var t;return null==e||null==(t=e.appearance)?void 0:t.fullscreen},e=>{e?s():a()}),r(e=>{var t;return null==e||null==(t=e.appearance)?void 0:t.externalDisplay},e=>{e?a():s()}),r(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.outro},e=>{e?s():a()}),r(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.fullPlayerElement},e=>{e?s():a()}),r(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.menu},e=>e?l(e,n().appearance.isMenuBlockingUI):c(e,n().appearance.isMenuBlockingUI)),r(e=>{var t;return null==e||null==(t=e.appearance)?void 0:t.isMenuBlockingUI},e=>e?l(n().displayList.menu,e):c(n().displayList.menu,e)),r(e=>{var t;return null==e||null==(t=e.overlay)?void 0:t.purpose},e=>{[rv.NOT_SUPPORTED,rv.HELP,rv.EMPTY].includes(e)||s()}),r(e=>{var t;return null==e||null==(t=e.appearance)?void 0:t.playerSizeMode},e=>{e===Iv.TINY?s():a()}),r(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.toast},e=>e?s():a()),r(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.topCenterActionItem},e=>e?s():a()),i.on(Z_,s).on(u_,a).on(ap,(n,r)=>{t(t=>({displayList:p(p({},t.displayList),{},{title:II(p(p({},e),{},{config:r}))})}))})})(e),(({set:e,subscribe:t})=>{t(e=>{var t;return null==e||null==(t=e.overlay)?void 0:t.purpose},t=>(t=>{e(e=>({displayList:p(p({},e.displayList),{},{overlay:t})}))})(!iv(t)))})(e),(({get:e,set:t,subscribe:n})=>{n(e=>{var t;return null==e||null==(t=e.alert)?void 0:t.currentAlert},n=>{const r=e().displayList.alert;if(!r&&n===NI.EMPTY)return;if(r&&n!==NI.EMPTY)return;const i=n!==NI.EMPTY;t(e=>({displayList:p(p({},e.displayList),{},{alert:i})}))})})(e),(({events:e,subscribe:t,set:n,get:r})=>{function i(){n(e=>{const{menu:t}=e.displayList;return t?{displayList:p(p({},e.displayList),{},{menu:!1})}:mI})}e.on(u_,i),t(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.menu},t=>{const n=t?cf:"";e.fire(yh,n)}),t(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.transcript},e=>{var t,n,o,a;return e&&((null==(t=r())?void 0:t.appearance.appBreakpoint)===wE.XS||(null==(n=r())?void 0:n.appearance.appBreakpoint)===wE.XXS||(null==(o=r())?void 0:o.appearance.appSizeMode)===Iv.MINI||(null==(a=r())?void 0:a.appearance.appSizeMode)===Iv.TINY)&&i()}),t(e=>{var t;return null==e||null==(t=e.appearance)?void 0:t.appBreakpoint},e=>{var t;return(null==(t=r())?void 0:t.displayList.transcript)&&(e===wE.XS||e===wE.XXS)&&i()}),t(e=>{var t;return null==e||null==(t=e.appearance)?void 0:t.appSizeMode},e=>{var t;return(null==(t=r())?void 0:t.displayList.transcript)&&(e===Iv.MINI||e===Iv.TINY)&&i()})})(e),(({set:e,events:t})=>{const n=t=>e(e=>({displayList:p(p({},e.displayList),{},{ad:t})}));t.on(K_,()=>n(!0)),t.on([X_,u_],()=>n(!1))})(e),(({set:e,get:t,config:n,events:r,subscribe:i,store:o,element:a})=>{let s=n;const l=(t={})=>{var n;(16!==(null==(n=s.embed)||null==(n=n.settings)||null==(n=n.badge)?void 0:n.id)||t.isStockBadgeBehavior)&&e(e=>({displayList:p(p({},e.displayList),{},{badge:!1})}))},c=(t={})=>{var n;(16!==(null==(n=s.embed)||null==(n=n.settings)||null==(n=n.badge)?void 0:n.id)||t.isStockBadgeBehavior)&&e(e=>{const{appearance:t}=e;return[Iv.MINI,Iv.TINY].includes(t.playerSizeMode)?mI:s.embed.settings.badge?{displayList:p(p({},e.displayList),{},{badge:!0}),appearance:p(p({},e.appearance),{},{shouldRestoreBadge:!1})}:mI})};function u(t){e(e=>({displayList:p(p({},e.displayList),{},{badge:MI({config:t,element:a})})}))}r.on(gh,e=>{var t;16===(null==(t=s.embed)||null==(t=t.settings)||null==(t=t.badge)?void 0:t.id)&&(e?c({isStockBadgeBehavior:!0}):l({isStockBadgeBehavior:!0}))}),r.on(Z_,l),r.on(ap,(e,t)=>{s=t,u(t)}),r.on(u_,()=>{u(s)}),o.watch("ui.player.mode",n=>{n!==Iv.TINY&&n!==Iv.MINI||!t().displayList.badge?t().appearance.shouldRestoreBadge&&c():e(e=>({displayList:p(p({},e.displayList),{},{badge:!1}),appearance:p(p({},e.appearance),{},{shouldRestoreBadge:!0})}))}),i(e=>{var t;return null==e||null==(t=e.playback)?void 0:t.paused},e=>{e?c():l()}),i(e=>{var t;return null==e||null==(t=e.playback)?void 0:t.playInitiated},e=>e&&l()),i(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.fullPlayerElement},e=>{(function(e){return[rv.NOT_SUPPORTED,rv.HELP,null].includes(e)})(e)||l(),e||t().playback.playInitiated||c()})})(e),(({set:e,events:t})=>{const n=t=>{e(e=>({displayList:p(p({},e.displayList),{},{pipOverlay:t})}))};t.on(Pi.ENTER_PICTURE_IN_PICTURE,()=>n(!0)),t.on(Pi.LEAVE_PICTURE_IN_PICTURE,()=>n(!1))})(e),(e=>{const{set:t,events:n,config:r,subscribe:i}=e;function o(e={}){t(t=>{const{controlBar:r,embed:i,playback:o,displayList:a,appearance:s}=t,l=Hf(s,e,"mousedOverControlBar"),c={appearance:p(p({},t.appearance),{},{mousedOverControlBar:l})};return r.overrideBehavior||s.forceExitedFullscreen?c:o.playInitiated&&o.targetTimeReached||a.fullPlayerElement||i.autoHideControls||a.ad?l?c:!s.externalDisplay&&!s.pictureInPictureActive||a.fullPlayerElement?o.buffering||o.scrubbing?c:(n.fire(gh,!1),p(p({},c),{},{displayList:p(p({},t.displayList),{},{controlBar:!1})})):c:c})}function a(){t(e=>{const{displayList:t,controlBar:r,embed:i}=e;return t.controlBar?mI:ov(i)?r.overrideBehavior||t.fullPlayerElement?mI:(n.fire(gh,!0),{displayList:p(p({},e.displayList),{},{controlBar:!0})}):mI})}function s(){return o({mousedOverControlBar:!1})}function l(n){const r=RI(p(p({},e),{},{config:n}));t(e=>({displayList:p(p({},e.displayList),{},{controlBar:r})}))}n.on([Xh,fh,s_,u_],a),n.on(Kh,s),n.on(Zh,o),n.on(ap,function(e,t){l(t)}),n.on([Pu.STREAM_ONLINE,Pu.STREAM_OFFLINE,Pu.EVENT_ENDED],function(){l(r)}),n.on(I_,function(e){t(t=>t.controlBar.overrideBehavior?{displayList:p(p({},t.displayList),{},{controlBar:e})}:mI)}),i(e=>{var t;return null==e||null==(t=e.appearance)?void 0:t.externalDisplay},e=>e&&a()),i(e=>{var t;return null==e||null==(t=e.playback)?void 0:t.targetTimeReached},e=>e&&o()),i(e=>{var t;return null==e||null==(t=e.appearance)?void 0:t.fullscreen},e=>{e?s():a()}),i(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.fullPlayerElement},e=>{e?o():a()}),i(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.menu},e=>{e&&a()})})(e),(e=>{const{get:t,set:n,events:r,subscribe:i,config:o,bigPicture:a}=e;function s(){n(e=>{const{transcript:t}=e.displayList;return t?l(e,!1):mI})}function l(e,t){return{displayList:p(p({},e.displayList),{},{transcript:t})}}r.on(ap,()=>{n(t=>l(t,$I(e)))}),r.on(cm,function(){var e,r,i,o,s;const l=null==(e=t())||null==(e=e.overlay)?void 0:e.purpose,c=null==(r=t().displayList)?void 0:r.transcript,u=null==(i=t())||null==(i=i.displayList)?void 0:i.outro,d=null==(o=t())||null==(o=o.displayList)?void 0:o.accessGate,_=null==(s=t())||null==(s=s.captions)?void 0:s.textTracks,h=!!c||!u&&qI.includes(l)&&!!_.length&&!d;t().embed.transcript&&h&&(n(e=>p(p({},e),{},{displayList:p(p({},e.displayList),{},{transcript:!e.displayList.transcript})})),a.sendEvent(yg.EMBEDDED_TRANSCRIPT_CLICK,{name:c?"exit_embed_transcript":"open_embed_transcript",copy:null,location:"keyboard_shortcut",element:"",current_transcript_language:""}))}),r.on(am,s),i(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.outro},e=>e&&s()),i(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.ad},e=>e&&s()),i(e=>{var t;return null==e||null==(t=e.appearance)?void 0:t.stereoscopicEnabled},e=>e&&s()),i(e=>{var t,n;return(null==e||null==(t=e.displayList)?void 0:t.overlay)&&!qI.includes(null==e||null==(n=e.overlay)?void 0:n.purpose)},e=>e&&s()),i(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.accessGate},e=>e&&s()),i(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.transcript},e=>{var n;(({events:e},t)=>{e.fire(H_,t)})({events:r},e);const i=null==(n=t())||null==(n=n.captions)?void 0:n.textTrackEls;e&&(({config:e,events:t},n)=>{var r;const i=n.map(e=>({id:e.id,label:e.label,language:e.srclang})),o=(null==(r=GI(e,i))?void 0:r.language)||"";t.fire(lm,{id:ve(),startTime:Date.now(),defaultLanguage:o})})({config:o,events:r},i)}),i(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.aiWidget},e=>e&&s())})(e),(e=>{const{set:t,get:n,subscribe:r,events:i,config:o}=e;function a(){t(e=>({displayList:p(p({},e.displayList),{},{progressBar:!1})}))}function s(){t(e=>{const{appearance:t,displayList:n,embed:r,controlBar:i}=e,{playerSizeMode:a,playerBreakpoint:s}=t;return r.playbar?n.ad?mI:FE(UE.PROGRESS_BAR,a,s,o.request.flags)?!i.showAllControls&&n.controlBarButtons?mI:{displayList:p(p({},e.displayList),{},{progressBar:!0})}:mI:mI})}r(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.controlBarButtons},e=>{e&&!n().controlBar.showAllControls?a():s()}),r(e=>{var t;return null==e||null==(t=e.controlBar)?void 0:t.showAllControls},e=>{!e&&n().displayList.controlBarButtons?a():s()}),r(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.ad},e=>{e?a():s()}),i.on(ap,(n,r)=>{t(t=>({displayList:p(p({},t.displayList),{},{progressBar:zI(p(p({},e),{},{config:r}))})}))})})(e),(e=>{const{subscribe:t,set:n,get:r,events:i}=e;function o(e){i.fire(im,e),n(t=>({displayList:p(p({},t.displayList),{},{rightContentArea:e}),appearance:p(p({},t.appearance),{},{rightContentAreaAnimating:!0})})),clearTimeout(a),a=setTimeout(function(){n(e=>({appearance:p(p({},e.appearance),{},{rightContentAreaAnimating:!1})}))},400)}let a;t(e=>{var t,n;return(null==e||null==(t=e.displayList)?void 0:t.transcript)||(null==e||null==(n=e.displayList)?void 0:n.aiWidget)},e=>{var t;const n=null==(t=r())||null==(t=t.displayList)?void 0:t.rightContentArea;e&&!n?o(!0):!e&&n&&o(!1)}),KI(e)&&i.fire(im,!0)})(e),(({set:e,get:t,events:n,subscribe:r,config:i,backbone:o})=>{function a(){e(e=>({displayList:p(p({},e.displayList),{},{captions:!1})}))}function s(){e(e=>{const{appearance:t,embed:n}=e;return n.cc?t.pictureInPictureActive||n.background?mI:{displayList:p(p({},e.displayList),{},{captions:!0})}:(o.disableTextTrack(),mI)})}n.on(iu,s),n.on(Pi.ENTER_PICTURE_IN_PICTURE,a),n.on(Pi.LEAVE_PICTURE_IN_PICTURE,s),n.on(Z_,()=>{i.embed.outro!==wI.NOTHING&&a()}),n.on(u_,a),r(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.fullPlayerElement},e=>{e?a():s()}),r(e=>{var t;return null==e||null==(t=e.playback)?void 0:t.paused},e=>{!e&&s()}),r(e=>{var t;return null==e||null==(t=e.playback)?void 0:t.scrubbing},e=>{e&&s()}),r(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.ad},e=>{e?a():s()}),r(e=>{var t;return null==e||null==(t=e.captions)?void 0:t.activeCues},e=>{var n;e.length&&null!=(n=t())&&null!=(n=n.playback)&&n.playInitiated?s():a()})})(e),(e=>{const{subscribe:t,events:n}=e;t(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.toast},e=>n.fire(Eh,e))})(e),(e=>{const{subscribe:t,set:n,get:r,events:i}=e;t(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.transcript},e=>e&&XI(n)),i.on(F_,e=>{e===Af.AI_WIDGET_ID&&XI(n)}),i.on(um,()=>{const{toggleDisplayList:e,embed:t}=r();t.aiWidget&&e("aiWidget")})})(e),(e=>{const{set:t,events:n}=e,r=e=>{t(t=>({displayList:p(p({},t.displayList),{},{accessGate:e})}))};n.on(gm,()=>{r(!0)}),n.on(Em,()=>{r(!1)})})(e),(({set:e,get:t,subscribe:n})=>{function r(){e(e=>({displayList:p(p({},e.displayList),{},{fullPlayerElement:t().displayList.accessGate||t().displayList.overlay})}))}n(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.overlay},()=>r()),n(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.accessGate},()=>r())})(e),(e=>{const{set:t,get:n,subscribe:r,events:i}=e;function o(){t(e=>({displayList:p(p({},e.displayList),{},{controlBarButtons:!1})}))}function a(){ov(n().embed)&&(n().controlBar.isExpanded||t(e=>({displayList:p(p({},e.displayList),{},{controlBarButtons:!0})})))}function s(){n().controlBar.shouldRestoreButtonsDisplayed?a():o()}r(e=>{var t;return null==e||null==(t=e.controlBar)?void 0:t.showAllControls},e=>{e?a():s()}),r(e=>{var t;return null==e||null==(t=e.controlBar)?void 0:t.isExpanded},e=>{e?o():s()}),i.on(ap,(n,r)=>{t(t=>({displayList:p(p({},t.displayList),{},{controlBarButtons:ZI(p(p({},e),{},{config:r}))})}))})})(e),{debugPanel:false,cards:i,sideDock:t,title:n,controlBar:a,outro:false,overlay:r,alert:false,menu:false,ad:false,badge:o,nudgeNotification:false,pipOverlay:false,transcript:c,progressBar:s,rightContentArea:l,captions:false,toast:false,topCenterActionItem:u,aiWidget:false,accessGate:d,fullPlayerElement:h,controlBarButtons:_}}(e),i=(e,n)=>{t(t=>({displayList:p(p({},t.displayList),{},{[e]:n})}))};return{displayList:r,setDisplayList:i,toggleDisplayList:e=>{const t=n().displayList[e];i(e,!t)}}};function QI(e){const{config:t,store:n,element:r}=e,{video:i}=t,o=n.get("ui.player.width"),a=n.get("ui.player.height"),s=i.width,l=i.height,{videoWidth:c,videoHeight:u}=eP(o,a,s,l),d=Jb(e);return{playerBreakpoint:n.get("ui.player.breakpoint"),appBreakpoint:n.get("ui.app.breakpoint"),playerSizeMode:n.get("ui.player.mode"),appSizeMode:n.get("ui.app.mode"),transcriptNavActive:!1,fullscreen:C(r),forceExitedFullscreen:!1,pictureInPictureActive:!1,externalDisplay:!1,mousedOverSidedock:!1,mousedOverControlBar:!1,isMenuBlockingUI:n.get("ui.controlbar.isMenuFullWidth"),isMenuVerticalVideoMode:n.get("ui.controlbar.isMenuVerticalVideoMode"),shouldRestoreBadge:!1,isVerticalVideo:n.get("ui.player.isVerticalVideo"),boundingClientRect:km(e.element),isDisplayContextBackbone:e.displayContext===e.backbone,showAirPlayPicker:!1,shouldMenuItemsWrap:n.get("ui.controlbar.doMenuItemsWrap"),stereoscopicEnabled:!1,videoWidth:c,videoHeight:u,playerWidth:o,playerHeight:a,containerWidth:n.get("ui.container.width"),containerHeight:n.get("ui.container.height"),placeholderThumbnail:null!=i&&i.thumbnail_url?me(null==i?void 0:i.thumbnail_url,{mw:"80",q:"85"}):"",rightContentAreaAnimating:!1,isStartTimeThumbLoading:d}}function eP(e,t,n,r){const i=n/r,o=i>e/t;return{videoWidth:o?e:Math.round(t*i),videoHeight:o?Math.round(e/i):t}}const tP=(e,t)=>{lL(()=>{const n=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(){return function(e,t){return e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e}(t.playbackEngineReady(),function(){e()})});n()})},nP=e=>({onClick:t=>{t.preventDefault(),t.stopPropagation(),e(t)},onKeyDown:t=>{["Enter"," "].includes(t.key)&&document.body.classList.contains(bf.SHOWFOCUS)&&(t.preventDefault(),t.stopPropagation(),e(t))},onMouseDown:e=>{e.preventDefault()}}),rP=()=>{const e=jw(e=>e.playback.paused),t=jw(e=>e.playback.scrubbing),n=jw(e=>e.playback.scrubbingByFrame),r=jw(e=>e.playback.playInitiated),i=jw(e=>e.chromecast.isChromecastPlaying),o=jw(e=>e.chromecast.isChromecastConnected),a=jw(e=>e.playback.buffering),s=jw(e=>e.playback.isAdPlaying),l=jw(e=>e.embed.isTrailer),c=jw(e=>e.embed.autoPlay),u=jw(e=>e.displayList.outro),d=jw(e=>e.displayList.ad),_=l&&!r;let h=Ov.PLAY;_?h=Ov.TRAILER:c&&(h=Ov.PAUSE);const[p,m]=aL(h);return o&&m(i?Ov.PAUSE:Ov.PLAY),d&&m(s?Ov.PAUSE:Ov.PLAY),lL(()=>{u?m(Ov.REPLAY):t&&!u&&m(e?Ov.PLAY:Ov.PAUSE)},[u]),lL(()=>{t&&!n||a||_||o||u||d||m(e?Ov.PLAY:Ov.PAUSE)},[e,a,_,o,u,d]),lL(()=>{r&&m(Ov.PAUSE)},[r]),{buttonState:p,setButtonState:m}};let iP=function(e){return e.PREFS="prefs",e.CHAPTERS="chapters",e.TRANSCRIPT="transcript",e.SIDEDOCK="sidedock",e}({}),oP=function(e){return e.EMPTY="empty",e.PREFS="prefs",e.QUALITY="quality",e.SPEED="speed",e.AUDIO="audio",e.CHAPTERS="chapters",e.SUBTITLES="subtitles",e.CUSTOMIZE="customize",e.FONT="font",e.BACKGROUND="background",e.WINDOW="window",e.PREVIEW="preview",e.TRANSCRIPT_SETTINGS="transcriptSettings",e.TRANSCRIPT_LANGUAGES="transcriptLanguages",e.SIDEDOCK="sidedock",e}({}),aP=function(e){return e.SMALL="small",e.MEDIUM="medium",e.LARGE="large",e}({});const sP=()=>{const e=gP(),t=jw(e=>e.embed.cc),n=jw(e=>e.embed.speedChangeEnabled),r=jw(e=>e.playback.qualities),i=jw(e=>e.embed.quality),o=jw(e=>e.chromecast.isChromecastConnected),a=jw(e=>e.chapters.chapters),s=jw(e=>e.embed.transcript),l=jw(e=>e.embed.chapters),c=jw(e=>e.playback.isSegmentedPlaybackEnabled),u=jw(e=>e.playback.audioTracks),d=jw(e=>e.displayList.ad),_=jw(e=>e.appearance.isDisplayContextBackbone),h=e&&t,p=!(!i||null==r||!r.length),m=u.length>1,f=_&&!!(n||p||m||h)&&!o&&!d,v=!(null==a||!a.length)&&l&&!d&&!c,g=e&&s;return{[iP.PREFS]:f,[iP.CHAPTERS]:v,[iP.TRANSCRIPT]:g}};let lP=function(e){return e.IDLE="idle",e.LOADING="loading",e.LOADED="loaded",e.ERROR="error",e}({});function cP(){}const uP=e=>{const[t,n]=aL(lP.IDLE),r=uL(),i=_L(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(){if(null==r||!r.current)return function(e){if(e&&e.then)return e.then(cP)}(function(t,i){try{var o=function(){let t;return n(lP.LOADING),function(e,t){var n=e();return n&&n.then?n.then(t):t(n)}(function(){return function(e,t){if(void 0)return t?t(e()):e();try{var n=Promise.resolve(e());return t?n.then(t):n}catch(e){return Promise.reject(e)}}(e,function(e){t=e})},function(){r.current=t,n(lP.LOADED)})}()}catch(e){return i()}return o&&o.then?o.then(void 0,i):o}(0,function(e){n(lP.ERROR)}))}),[e]);return{readyState:t,load:i,module:(null==r?void 0:r.current)||null}},dP=(e,t,n)=>{lL(()=>{function r(n){n.key!==e&&n.code!==e||t(n)}function i(t){t.key!==e&&t.code!==e||!n||n(t)}return window.addEventListener("keydown",r),n&&window.addEventListener("keyup",i),()=>{window.removeEventListener("keydown",r),n&&window.removeEventListener("keyup",i)}},[t,n,e])},_P=({setHoveredChapterId:e,progressBarAndButtonsRef:t})=>{const n=jw(e=>e.displayList.menu),r=jw(e=>e.setDisplayList),i=uL(null),o=uL(null),[a,s]=aL(!1),[l,c]=aL(!1),u=e=>t=>{e(t),r("menu",t),e!==s&&s(!1),e!==c&&c(!1)};n||(s(!1),c(!1));const d=u(s),_=u(c),h={[iP.PREFS]:{isMenuDisplayed:a,setMenuDisplayed:d,buttonRef:i,progressBarAndButtonsRef:t},[iP.CHAPTERS]:{isMenuDisplayed:l,setMenuDisplayed:_,buttonRef:o,progressBarAndButtonsRef:t,onMenuOptionMouseEnter:t=>{var n;return e(parseInt(null==t||null==(n=t.currentTarget)||null==(n=n.dataset)?void 0:n.id,10))},onMenuOptionMouseLeave:()=>e(null)}};return h};let hP=function(e){return e[e.AUTO=0]="AUTO",e[e.BOTTOM=1]="BOTTOM",e[e.CENTER=2]="CENTER",e}({});const pP=()=>{const e=jw(e=>e.embed.playButtonPosition),t=jw(e=>e.embed.playbar),n=jw(e=>e.appearance.playerSizeMode),r=jw(e=>e.appearance.isVerticalVideo),{buttonState:i}=rP(),o=n===Iv.TINY,a=n===Iv.MINI&&r;return i===Ov.REPLAY?hP.BOTTOM:o||a||e===hP.CENTER?hP.CENTER:e===hP.BOTTOM||e!==hP.AUTO||t?hP.BOTTOM:hP.CENTER},mP=()=>{const e=jw(e=>e.playback.volume),t=jw(e=>e.playback.muted),n=jw(e=>e.setPlayback),r=()=>{n("muted",!1),e<=0&&n("volume",100)},i=()=>{n("muted",!0)};return{mute:i,unmute:r,toggleMuted:()=>{t||e<=0?r():i()}}},fP=(e=1e4)=>{const[t,n]=aL(!1),[r,i]=aL(e),[o,a]=aL(Date.now());return{hasError:t,componentTimeout:r,componentVersion:o,onError:()=>{n(!0)},onReload:()=>{n(!1),i(r+1e3),a(Date.now())}}};let vP=function(e){return e.CC="cc",e.VOLUME="volume",e.CHROMECAST="chromecast",e.AIRPLAY="airplay",e.STEREOSCOPIC="stereoscopic",e.PIP="pip",e.FULLSCREEN="fullscreen",e.VIMEO_LOGO="vimeo_logo",e}({});const gP=()=>jw(e=>Vy(e)),EP=()=>{const e=gP(),t=jw(e=>e.embed.cc),n=jw(e=>e.playback.canPlayPictureInPicture),r=jw(e=>e.embed.fullscreen),i=jw(e=>e.embed.showVimeoLogo),o=jw(e=>e.embed.volume),a=jw(e=>e.appearance.fullscreen),s=jw(e=>e.embed.airplay),l=jw(e=>e.playback.supportsAirPlay),c=jw(e=>e.embed.chromecast),u=jw(e=>e.chromecast.supportsChromecast),d=jw(e=>e.chromecast.isChromecastReady),_=jw(e=>e.appearance.stereoscopicEnabled),h=jw(e=>e.playback.supportsStereoscopic),p=jw(e=>e.displayList.ad),m=jw(e=>{var t;return null==(t=e.interactive.hotspots)?void 0:t.length}),f=jw(e=>e.interactive.enabled),v=jw(e=>e.interactive.ready),g=jw(e=>e.liveEvent.isLiveEvent),E=jw(e=>e.liveEvent.isArchived),b=!!f&&(!v||m),y=e&&t,T=l&&!p&&!b&&s,S=c&&u&&d&&!p&&!b&&(!g||E),C=_&&h&&!p,A=n&&!p,L=(r||a)&&!(Q.iOS&&m),I=i&&!p;return{[vP.CC]:y,[vP.AIRPLAY]:T,[vP.CHROMECAST]:S,[vP.FULLSCREEN]:L,[vP.PIP]:A,[vP.STEREOSCOPIC]:C,[vP.VIMEO_LOGO]:I,[vP.VOLUME]:o}},bP=e=>{const t=jw(e=>e.appearance.playerSizeMode),n=jw(e=>e.appearance.playerBreakpoint),r=jw(e=>e.config.request.flags);return FE(e,t,n,r)},yP=e=>{let t=[];return(null!=e&&e.children?Array.from(e.children):[]).forEach(e=>{var n;const r=window.getComputedStyle(e);if(!r.display||"none"===r.display)return;const i="none"!==r.pointerEvents;e.tabIndex>-1&&i&&t.push(e),null!=(n=e.children)&&n.length&&(t=t.concat(yP(e)))}),t},TP=e=>{document.body.classList.toggle(bf.SHOWFOCUS,e)};function SP(){return document.activeElement}function CP(e){return null==e?void 0:e.contains(SP())}function AP(e,t){let n=yP(e),r=n.indexOf(SP()),i="prev"===t?r-1:r+1,o=null;o=i>=n.length?n[0]:i<0?n[n.length-1]:n[i],o&&o.focus()}const LP=["s","?"],IP=({parentRef:e,isActive:t,toggleKey:n,customKeyHandlers:r={},externalElement:i,onEscape:o=Cv,onToggle:a=Cv})=>{const s=jw(e=>e.config.view),l=jw(e=>e.embed.controls),c=jw(e=>e.embed.background),u=jw(e=>e.embed.keyboard),d=jw(e=>e.element),_=uL(null),h=uL(t),p=uL(null),m=uL(null);function f(e){0!==e.detail&&TP(!1)}function v(e,t=0){t>=5||e&&(e.focus(),e!==SP()&&(clearTimeout(p.current),p.current=setTimeout(()=>v(e,t+1),100)))}function g(){const t=yP(e.current);t.length>0&&v(t[0])}function E(){_.current&&(v(_.current),_.current=null),clearTimeout(m.current),m.current=setTimeout(()=>{!d.contains(SP())&&null!=i&&i.current&&v(i.current)},500)}function b(){var t;return null==e||null==(t=e.current)?void 0:t.contains(SP())}function y(e){if(LP.includes(e.key)||"Space"===e.code)return!0;if(e.ctrlKey||e.metaKey||e.altKey||"Shift"===e.key)return!0;if("keydown"!==e.type)return!0;if(!l||c)return!0;const t=e.target||e.srcElement,n=d.contains(t),r=t.tagName;if("INPUT"===r||"SELECT"===r||"TEXTAREA"===r||t.isContentEditable){const t=!n,r=n&&"Escape"!==e.key&&"Tab"!==e.key&&e.shiftKey;if(t||r)return!0}return!Gf(s)}const T=_L(i=>{if(y(i))return;"Escape"!==i.key?TP(!0):TP(!1);const s=i.key,l={Escape:()=>{null!=e&&e.current&&h.current&&(i.preventDefault(),null==o||o(),E())},Tab:()=>{var n;const r=i.shiftKey?"prev":"next",o="dialog"===(null==e||null==(n=e.current)||null==n.getAttribute?void 0:n.getAttribute("role"));(t||b())&&o&&(i.preventDefault(),AP(e.current,r))}};n&&(l[n]=()=>{null==a||a(!h.current)}),"function"==typeof l[s]&&l[s](),"function"==typeof r[s]&&r[s](i)},[r,t,b,o,a,e,y,n]);return lL(()=>{t?g():!t&&h.current&&E(),h.current=t},[t]),lL(()=>(u&&(document.addEventListener("click",f,!1),document.addEventListener("keydown",T,!1)),()=>{document.removeEventListener("click",f,!1),document.removeEventListener("keydown",T,!1)}),[u,T]),{onFocus:function(t){var n,r;(null==(n=e.current)?void 0:n.contains(SP()))&&(null==(r=e.current)||!r.contains(t.relatedTarget))&&!_.current&&(_.current=t.relatedTarget)},focusFirstItem:g}},PP=({menuRef:e,panelRef:t,buttonRef:n,isActive:r,toggleKey:i,shouldTrapFocus:o=!1,onBack:a=Cv,setMenuDisplayed:s=Cv})=>{const l=_L(e=>{CP(t.current)&&(e.preventDefault(),AP(t.current,"prev"))},[t]),c=_L(e=>{CP(t.current)&&(e.preventDefault(),AP(t.current,"next"))},[t]),u=_L(e=>{if(CP(t.current)){const t=e.target,n=t.getAttribute("aria-haspopup"),r=t.getAttribute("aria-expanded");"true"===n&&"true"===r?t.click():a(e)}},[t,a]),d=_L(e=>{if(CP(t.current)){const t=e.target,n=t.getAttribute("aria-haspopup"),r=t.getAttribute("aria-expanded");"true"===n&&"false"===r&&t.click()}},[t]),_=_L(t=>{var r;if((null==(r=e.current)?void 0:r.contains(t.target))&&null!=n&&n.current){const r=!t.shiftKey;if(o){const n=r?"next":"prev";return t.preventDefault(),void AP(e.current,n)}const a=yP(e.current),s=a.indexOf(t.target);var i;(r&&s===a.length-1||!r&&0===s)&&(t.preventDefault(),null==(i=n.current)||i.focus())}},[e,n,o]);return IP({parentRef:t,isActive:r,toggleKey:i,onEscape:()=>{s(!1)},onToggle:e=>{s(e)},externalElement:n,customKeyHandlers:{ArrowUp:l,ArrowDown:c,ArrowLeft:u,ArrowRight:d,Tab:_}})},RP=e=>{const t=jw(e=>e.appearance.appSizeMode),n=jw(e=>e.appearance.appBreakpoint),r=t===Iv.MINI||t===Iv.TINY||n===wE.XXS||n===wE.XS;return{role:r?"dialog":void 0,ariaModal:!!r||void 0,ariaHidden:!e||void 0}},wP=(e,t,n=300)=>{const r=vb(t,n),i=uL(new ResizeObserver(r));lL(()=>{const t=i.current,n=null==e?void 0:e.current;return n&&t.observe(n),()=>{n&&t.unobserve(n)}},[])};let OP=function(e){return e.DOLBY_VISION="dolbyVision",e.CLOSE="close",e.PIP="pip",e.AIRPLAY="airPlay",e.ENTER_FULLSCREEN="enterFullscreen",e.EXIT_FULLSCREEN="exitFullscreen",e.GEAR="gear",e.VIMEO="vimeo",e.VIMEO_SMALL="vimeoSmall",e.ENTER_PICTURE_IN_PICTURE="enterPictureInPicture",e.EXIT_PICTURE_IN_PICTURE="exitPictureInPicture",e.PAUSE="pause",e.PLAY="play",e.REPLAY="replay",e.CHAPTERS="chapters",e.POINT="point",e.CC="cc",e.CC_FILLED="ccFilled",e.CHECKMARK="checkmark",e.STEREOSCOPIC="stereoscopic",e.PERSON_FILLED="personFilled",e.CHEVRON_DOWN="chevronDown",e.CHEVRON_RIGHT="chevronRight",e.CLOCK="clock",e.CLOCK_FILLED="clockFilled",e.COLLECTIONS="collections",e.DISMISS_X="dismissX",e.HEART="heart",e.HEART_FILLED="heartFilled",e.HEART_WIDER_FILLED="heartWiderFilled",e.HEART_WIDER_BROKEN_FILLED="heartWiderBrokenFilled",e.ONDEMAND="ondemand",e.PAPER_PLANE="paperPlane",e.POP_OUT="popOut",e.VOLUME_OFF_FILLED="volumeOffFilled",e.VOLUME_ON_FILLED="volumeOnFilled",e.FAST_FORWARD="fastForward",e.INFO_CIRCLE="infoCircle",e.TRANSCRIPT_ON="transcriptOn",e.TRANSCRIPT_OFF="transcriptOff",e.SEARCH="search",e.CHEVRON_UP="chevronUp",e.CLOSE_CIRCLE="closeCircle",e.SPINNER="spinner",e.SLIDERS="sliders",e.SWITCH_CONTAINER="switchContainer",e.SWITCH_CIRCLE="switchCircle",e.WARN_CIRCLE="warnCircle",e.THUMBS_UP="thumbsUp",e.THUMBS_DOWN="thumbsDown",e.THUMBS_UP_FILLED="thumbsUpFilled",e.THUMBS_DOWN_FILLED="thumbsDownFilled",e.LINK="link",e.SPARKLE_TWO_STARS_FILLED="sparkleTwoStarsFilled",e.WARN_TRIANGLE="warnTriangle",e.VERTICAL_ELLIPSIS="verticalEllipsis",e.PLUS_SYMBOL="plusSymbol",e.FACEBOOK="facebook",e.EMAIL="email",e.EMBED="embed",e.PREVIOUS="previous",e.TWITTER="twitter",e.VOD="vod",e.VOD_DOWNLOAD="vodDownload",e.VOD_RENT="vodRent",e.VOD_SUBSCRIBE="vodSubscribe",e.CAMERA="camera",e}({});const kP=()=>{const e=jw(e=>e.toggleDisplayList);return{label:"Ask Vimeo AI",enabled:jw(e=>e.embed.aiWidget),onSelect:()=>e("aiWidget"),icon:OP.SPARKLE_TWO_STARS_FILLED}},DP=()=>{const e=jw(e=>e.setUser);return{label:"Add to collections",enabled:jw(e=>e.embed.collections),onSelect:()=>e("collected",!0),icon:OP.COLLECTIONS}};var NP=0;function MP(e,t,n,r,i){var o,a,s={};for(a in t)"ref"==a?o=t[a]:s[a]=t[a];var l={type:e,props:s,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--NP,__source:r,__self:i};if("function"==typeof e&&(o=e.defaultProps))for(a in o)void 0===s[a]&&(s[a]=o[a]);return _A.vnode&&_A.vnode(l),l}const{Provider:xP,useStore:VP}=_I(),BP=({player:e,children:t})=>(function(){var e=oL(KA++,10),t=aL();e.__=e=>{},XA.componentDidCatch||(XA.componentDidCatch=function(n){e.__&&e.__(n),t[1](n)}),t[0]}(),MP(xP,{createStore:()=>dI((t,n)=>{const{config:r,events:i,uuid:o,element:a,store:s,loadVideoViaIframe:l,loadVideoViaConfig:c,performDelegateAction:u,bigPicture:d}=e,_={set:t,get:n,events:i,store:s,get config(){return e.config},get bigPicture(){return e.bigPicture},get backbone(){return e.backbone}};return p(p(p(p(p(p(p(p({config:r,element:a,uuid:o,view:r.view,events:i,bigPicture:d,performDelegateAction:u,loadVideoViaIframe:l,loadVideoViaConfig:c},(e=>{const t=p(p({},function(){const t=AI(e.config),n=(null==t?void 0:t.gate_type)||rE.EMPTY;return lE(n,e.config,null==t?void 0:t.gate_id)}()),{},{accessGateLoaded:!1,accessGateReady:!1,setAccessGateLoaded:function(){e.set(e=>({accessGate:p(p({},null==e?void 0:e.accessGate),{},{accessGateLoaded:!0})}))},setAccessGateReady:function(){e.set(e=>({accessGate:p(p({},null==e?void 0:e.accessGate),{},{accessGateReady:!0})})),n(oE.OPENED)},closeAccessGate:i,sendGateBPEvent:n});function n(t,n){var r;null!=(r=e.config.embed.access_gates)&&r.length&&e.bigPicture.sendEvent(yg.PROCESS_STEP,{process_name:"access_gate",step_name:t,status:t===oE.ERROR?"fail":"success",error:(null==n?void 0:n.message)||null,error_code:"number"==typeof(null==n?void 0:n.code)?`${n.code}`:null})}function r(t,n=null){const r=lE(t,e.config,n);e.set(e=>({accessGate:p(p({},null==e?void 0:e.accessGate),r)})),e.events.fire(gm,r.purpose)}function i(t){e.set(t=>({accessGate:p(p({},null==t?void 0:t.accessGate),{},{accessGateLoaded:!1,accessGateReady:!1},lE(rE.EMPTY,e.config))})),e.events.fire(Em,t),n(oE.CLOSED)}function o(){var t,n;const o=e.config.embed.access_gates;null!=o&&o.length&&o.forEach(t=>{!function(t){const{gate_type:n,placement:i,timecode:o,gate_id:a}=t;function s({currentTime:t}){t>=o&&(r(n,a),e.events.off(Pi.TIME_UPDATE,s))}function l(){r(n,a),e.events.off(Z_,l)}uE(n,e.config)||(i===iE.DURING_VIDEO&&e.events.on(Pi.TIME_UPDATE,s),i===iE.AFTER_VIDEO&&e.events.on(Z_,l),e.events.on(ap,function(){e.events.off(Pi.TIME_UPDATE,s),e.events.off(Z_,l)}))}(t)});const a=AI(e.config),s=null==(t=e.get())||null==(t=t.accessGate)?void 0:t.gateId,l=(null==(n=e.get())||null==(n=n.accessGate)?void 0:n.purpose)||rE.EMPTY,c=null==a?void 0:a.gate_id,u=(null==a?void 0:a.gate_type)||rE.EMPTY,d=s!==c||l!==u;l!==rE.EMPTY&&d&&i(),u!==rE.EMPTY&&c&&d&&(r(u,c),e.events.once(xp,()=>{e.events.fire(gm,u)}))}return o(),e.events.on(ap,function(){o()}),{accessGate:t}})(_)),UP(_)),HP(_)),jP(_)),YP(_)),zP(_)),eR(_)),tR(_))}),children:t})),UP=e=>{const t=FP(e),{set:n,events:r}=e;return r.on(u_,()=>{n(()=>({colors:FP(e)}))}),r.on(p_,(e,t)=>{const r=Tv(e);if(!r)return;const i=ff[t];n(e=>({colors:p(p({},e.colors),{},{[i]:r})}))}),{colors:t}};function FP(e){const{embed:t}=e.config;return{colorOne:Tv(t.color_one)||Tv(pf[uf]),colorTwo:Tv(t.color_two)||Tv(t.color)||Tv(pf[df]),colorThree:Tv(t.color_three)||Tv(pf[_f]),colorFour:Tv(t.color_four)||Tv(pf[hf])}}const HP=e=>{const t=WP(e),{set:n,events:r}=e;return r.on(ap,()=>{n(()=>({embed:WP(e)}))}),{embed:t}};function WP(e){const{config:t}=e;return{playerUrl:t.player_url,referrer:t.request.referrer,transparent:!!t.embed.transparent,videoId:t.video.id,vimeoUrl:t.vimeo_url,onsite:!!t.embed.on_site}}let GP=function(e){return e.EMPTY="empty",e.PRIVATE_LOCKED="private-locked",e.PASSWORD="password",e.ERROR="error",e.GEO_BLOCKED="geo-blocked",e.DRM_PLAYBACK_UNAVAILABLE="drm-playback-unavailable",e}({});const jP=e=>{const{get:t,set:n,events:r}=e;function i(){n(()=>({error:{type:null,title:null,message:null}}))}return r.on(Y_,(e,r)=>{var i;const o=null==(i=t())||null==(i=i.error)?void 0:i.type;OI(o,e,r)&&n(()=>({error:{type:e,title:null==r?void 0:r.title,message:null==r?void 0:r.message}}))}),r.on(j_,(e,t)=>{e!==GP.ERROR||n(()=>({error:{type:Nf.LOCAL_ACCESS_GATE_ERROR,title:t.title,message:t.message}}))}),r.on(c_,e=>{e===rv.ERROR&&n(()=>({error:{type:Nf.LOAD_VIDEO_VIA_CONFIG,title:"Sorry",message:"There was a problem. Please try again."}}))}),r.on(Fh,i),r.on(hp,()=>{var e;const n=Mf();(null==(e=t())||null==(e=e.error)?void 0:e.type)===n.type&&i()}),{error:{type:null,title:null,message:null}}},YP=e=>{const{set:t,events:n}=e,r={purpose:$P(e.config.view)};return n.on(ap,function(){t(()=>({localAccessGate:{purpose:$P(e.config.view)}}))}),n.on(j_,e=>{t(t=>({localAccessGate:p(p({},t.localAccessGate),{},{purpose:e})}))}),{localAccessGate:r}};function $P(e){return e===Jm.geoBlocked?GP.GEO_BLOCKED:e===Jm.error?GP.ERROR:e===Jm.privateLocked?GP.PRIVATE_LOCKED:e===Jm.privatePassword?GP.PASSWORD:e===Jm.drmPlaybackUnavailable?GP.DRM_PLAYBACK_UNAVAILABLE:GP.EMPTY}const qP=[Jm.main,Jm.privateUnlocked],zP=e=>{const{set:t,events:n}=e,r=KP(e);return n.on(Sm,e=>{t(t=>({login:p(p({},t.login),{},{status:e})}))}),n.on(rp,()=>{t(()=>({login:KP(e)}))}),n.on(ap,()=>{t(()=>({login:KP(e)}))}),{login:r}};function KP(e){return{status:XP(e)}}function XP(e){const{config:t}=e;return t.user.logged_in?qP.includes(t.view)?_E.LOGGED_IN_HAS_ACCESS:_E.LOGGED_IN_NO_ACCESS:_E.NOT_LOGGED_IN}function ZP(e,t){let n=e,r=t;return n%320!=0&&(n=100*Math.ceil(e/100),r=Math.round(n/e*t)),{width:n,height:r}}function JP({width:e,height:t,baseUrl:n,crop:r=!1}){n=n.replace(/\.[^/.]+$/,"");let i={};const o=parseInt(e,10),a=parseInt(t,10);return 0===o||isNaN(o)||(r?i.w=o:i.mw=o),0===a||isNaN(a)||(r?i.h=a:i.mh=a),Q.devicePixelRatio>1&&(i.q=70),me(n,i)}function QP(e,t=0){return function(e){return new Promise((t,n)=>{const r=new Image;function i(){Ab.captureBreadcrumb(`Load image: ${e}`,{}),n(new Error("Failed to load image."))}r.onload=function(){r&&r.width>0&&r.height>0?t(r):i()},r.onerror=i,r.src=e})}(e).catch(n=>(Ab.captureException(n,{extra:{imageUrl:e}}),t>0?QP(e,t-1):new Promise(()=>{})))}const eR=e=>{const{set:t,get:n,events:r,store:i}=e,o=(e,n)=>{t(t=>({videoThumbnail:p(p({},t.videoThumbnail),{},{[e]:n})}))},a=()=>o("isDisplayed",!0),s=()=>o("isDisplayed",!1);function l(){return!!e.config.video.thumbnail_url}function c(){const t=i.get(Ay)&&!i.get(Iy),n=e.config.embed.autoplay,r=e.backbone&&!e.backbone.paused;return t||!n&&!r||vy.isCastConnected}function u(){return ZP(i.get("ui.player.width")*Q.devicePixelRatio,i.get("ui.player.height")*Q.devicePixelRatio)}const d=()=>(r.fire(Tm),Promise.resolve());function _(){if(!l())return c()&&a(),d();const{width:n,height:r}=u(),s=e.config.video.thumbnail_url,_=JP({width:n,height:r,baseUrl:s});o("width",n);const h=QP(_,3).then(e=>(e&&i.dispatch(((e,t)=>({type:dT,payload:{width:e,height:t}}))(e.width,e.height)),c()&&(t(e=>({videoThumbnail:p(p({},e.videoThumbnail),{},{thumbnailUrl:_,thumbnailBaseUrl:s})})),a()),e));if(!c())return d();const m=new Promise(e=>{setTimeout(e,2e3)});return Promise.race([h,m]).catch(e=>{}).finally(()=>{d()})}function h(){var e,t,r;if(null==(e=n())||null==(e=e.videoThumbnail)||!e.isDisplayed||null==(t=n())||null==(t=t.videoThumbnail)||!t.thumbnailUrl)return;const{width:i}=u();i<=(null==(r=n())||null==(r=r.videoThumbnail)?void 0:r.width)||0===i||_()}r.on(W_,a),r.on(G_,s),r.on(ap,t=>{var r;const i=e.config.video.thumbnail_url,o=null==(r=n())||null==(r=r.videoThumbnail)?void 0:r.thumbnailBaseUrl;t||i&&o&&o!==i?_():d()}),r.on(Rh,h),r.on([ki.BUFFER_ENDED,Pi.PLAYING],s),i.watch("ui.player.width",vb(h,150)),i.watch("ui.preview.scaleFactor",e=>{o("shouldCoverBackground",e>1)});const{width:m,height:f}=u(),v=e.config.video.thumbnail_url;return{videoThumbnail:{thumbnailUrl:l()?JP({width:m,height:f,baseUrl:v}):"",thumbnailBaseUrl:v,width:m,isDisplayed:!1,shouldCoverBackground:i.get("ui.preview.scaleFactor")>1},setVideoThumbnail:o}},tR=e=>{const t=nR(e),{set:n,events:r}=e;return r.on(ap,()=>{n(()=>({user:nR(e)}))}),r.on(rp,()=>{n(()=>({user:nR(e)}))}),{user:t}};function nR(e){const{config:t}=e,{user:n}=t;return{isClipOwner:!!n.owner}}let rR=function(e){return e.LIKES="likes",e.WATCH_LATER="watchlater",e.FOLLOWING="following",e}({});const iR=()=>{const[e,t]=aL(!1),n=uL(null);return{animating:e,startAnimating:()=>{clearTimeout(n.current),t(!0),n.current=setTimeout(()=>{t(!1)},1e3)}}};function oR(){}const aR=()=>{const e=VP(e=>e.events),t=VP(e=>e.bigPicture),n=VP(e=>e.user.isClipOwner),r=VP(e=>e.performDelegateAction),i=jw(e=>e.user.loggedIn),o=jw(e=>e.user.liked),a=jw(e=>e.embed.like),s=jw(e=>e.embed.likePopupUrl),l=jw(e=>e.user.persistUserAction),c=o?"Unlike":"Like",u=i?c:"Like (this opens in a new window)",d=OP.HEART_FILLED,{openLoginPopup:_}=mR({url:s,context:hE.LOGIN_LIKE}),{animating:h,startAnimating:p}=iR(),m=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(){if(t.sendEvent(yg.SELECT_LIKE_HEART_ICON,{},{[Tg.WEB]:{target:i?null:"reg modal",target_path:i?null:s,copy:"like"},[Tg.PRODUCT_ANALYTICS]:{flow:i?null:"open_embed_reg_modal",element:"icon",copy:"like"}}),e.fire(kh),!n)return function(e,t){var n=function(){if(!i)return function(e,t){return function(e,t,n){if(n)return t?t(e()):e();try{var r=Promise.resolve(e());return t?r.then(t):r}catch(e){return Promise.reject(e)}}(e,oR,t)}(_)}();return n&&n.then?n.then(t):t()}(0,function(){o?r(Gy,()=>{l(rR.LIKES,"DELETE"),e.fire(Qh)}):r(Wy,()=>{l(rR.LIKES,"PUT"),e.fire(Jh)}),p()})});return{label:c,ariaLabel:u,enabled:a,onSelect:m,icon:d,animating:h,active:o}};function sR(){}const lR=()=>{const e=jw(e=>e.bigPicture),t=jw(e=>e.setOverlay),n=jw(e=>e.embed.shareUrl),r=jw(e=>e.title.title),i=uL(!1),o=Xv(n,xv.SHARE),a=jw(e=>e.embed.share),s=jw(e=>e.embed.embedOnlyShare),l=s?"Embed":"Share",c=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(){if(i.current)return;i.current=!0,e.sendEvent(yg.SELECT_PLAYER_SHARE,{ab_group:null},{[Tg.WEB]:{target:"share overlay",target_path:null,copy:"share"},[Tg.PRODUCT_ANALYTICS]:{flow:"viewer_home_from_embed_player",element:"icon",copy:"share"}});const n=Q.webShare&&(Q.iOS||Q.android||Q.mobileAndroid)&&!s;return function(i,a){var s=function(){if(n)return function(e){if(e&&e.then)return e.then(sR)}(function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(function(){return function(e,t){return void 0?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}(navigator.share({title:r,url:o}),function(){e.sendEvent(yg.SELECT_PLAYER_SHARE_COMPLETE,{ab_group:null},{[Tg.WEB]:{target:null,target_path:o,copy:null},[Tg.PRODUCT_ANALYTICS]:{flow:"share_video",element:"icon",copy:null}})})},function(e){"AbortError"!==e.name&&t("purpose",rv.SHARE)}));t("purpose",rv.SHARE)}();return s&&s.then?s.then(a):a()}(0,function(){i.current=!1})});return{label:l,enabled:a,onSelect:c,icon:OP.PAPER_PLANE}},cR=()=>{const e=jw(e=>e.vod.vodButtonVisible),t=jw(e=>e.vod.vodLabel);return{label:t,enabled:!(!e||!t),onSelect:ER(),icon:OP.ONDEMAND}};function uR(){}const dR=()=>{const e=VP(e=>e.events),t=VP(e=>e.bigPicture),n=VP(e=>e.performDelegateAction),r=jw(e=>e.embed.privacy),i=jw(e=>e.embed.videoUrl),o=jw(e=>e.user.watchLater),a=jw(e=>e.user.loggedIn),s=jw(e=>e.embed.watchLaterPopupUrl),l=jw(e=>e.user.persistUserAction),c=jw(e=>e.embed.watchLater),u=jw(e=>e.user.watchLater),d=u?"Remove from Watch Later":"Add to Watch Later",_=a?d:"Add to Watch Later (this opens in a new window)",h=u?OP.CLOCK_FILLED:OP.CLOCK,{openLoginPopup:p}=mR({url:s,context:hE.LOGIN_WATCH_LATER}),{animating:m,startAnimating:f}=iR(),v=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(){if(t.sendEvent(yg.SELECT_PLAYER_ADD_TO_WATCH_LATER,{},{[Tg.WEB]:{target:a?null:"reg modal",target_path:a?null:s,copy:"add to watch later"},[Tg.PRODUCT_ANALYTICS]:{flow:a?null:"open_embed_reg_modal",element:"icon",copy:"add to watch later"}}),e.fire(Dh),i||r===i_)return function(e,t){var n=function(){if(!a)return function(e,t){return function(e,t,n){if(n)return t?t(e()):e();try{var r=Promise.resolve(e());return t?r.then(t):r}catch(e){return Promise.reject(e)}}(e,uR,t)}(p)}();return n&&n.then?n.then(t):t()}(0,function(){o?n(Yy,()=>{l(rR.WATCH_LATER,"DELETE"),e.fire(tp)}):n(jy,()=>{l(rR.WATCH_LATER,"PUT"),e.fire(ep)}),f()})});return{label:d,ariaLabel:_,enabled:c,onSelect:v,icon:h,animating:m,active:u}};let _R=function(e){return e.VOD="vod",e.LIKE="like",e.WATCH_LATER="watch_later",e.COLLECTIONS="collections",e.SHARE="share",e.AI="ai",e}({});const hR=()=>({[_R.VOD]:cR(),[_R.LIKE]:aR(),[_R.WATCH_LATER]:dR(),[_R.COLLECTIONS]:DP(),[_R.SHARE]:lR(),[_R.AI]:kP()});let pR=null;const mR=({url:e,context:t,delegateArg:n})=>{const r=VP(e=>e.events),i=VP(e=>e.embed.onsite),o=VP(e=>e.loadVideoViaIframe),a=VP(e=>e.performDelegateAction);return{openLoginPopup:()=>new Promise(s=>{switch(t){case hE.PRIVATE_LOCKED:a(zy,()=>{pR=xm(e,"login",{width:670,height:545,scrollbars:"yes",resizable:"yes",toolbar:"no"})});break;case hE.LOGIN_LIKE:case hE.LOGIN_WATCH_LATER:a(zy,()=>{pR=xm(e,"login",{width:670,height:545})}),r.fire(jh,t);break;case hE.PURCHASE:a($y,()=>{pR=xm(e,"purchase",{width:790,height:670})},n),r.fire(jh,t)}window.confirmLoginAction=function(e,t){r.fire(np,t),r.once(rp,()=>s())},window.closePopup=function(){if(pR){try{pR.close(),r.fire($h,t),r.once(rp,()=>s())}catch(e){}pR=null}},i||(window.confirmPurchase=function(e,t,n){if(t)return o(e),void s();n&&r.fire(uh)})})}};function fR(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function vR(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function gR(){}const ER=e=>{const t=vR(function(){return function(){var e=function(){if(!Xg())return function(e){if(e&&e.then)return e.then(gR)}(function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(function(){return fR(p(s),function(){_("paused",!1)})},function(e){Ab.captureException(e),m("purpose",rv.ERROR)}));h(s)}();if(e&&e.then)return e.then(gR)}()}),n=VP(e=>e.events),r=VP(e=>e.embed.videoId),i=VP(e=>e.embed.referrer),o=VP(e=>e.embed.playerUrl),a=jw(e=>e.vod.productId),s=jw(e=>e.vod.featureId),l=jw(e=>e.vod.isFeature),c=jw(e=>e.vod.purchased),u=jw(e=>e.vod.url),d=jw(e=>e.vod.isComingSoon),_=jw(e=>e.setPlayback),h=VP(e=>e.loadVideoViaIframe),p=VP(e=>e.loadVideoViaConfig),m=jw(e=>e.setOverlay),f=(()=>{const e=Yw().getState,t=VP(e=>e.embed.onsite);return function(n){if(!n)return;const r=n.indexOf("#")>-1,i=e().playback.currentTime,o=e().playback.duration,a=e().playback.paused,s=e().setPlayback;!r&&i>0&&i<o-30&&!a&&(n+=`#at=${Math.floor(i)}`),t?window.location.href=n:(window.open(n),s("paused",!0))}})(),v=e||a;let g=`https://${o}/video/${s||r}/purchase/vod`;v&&(g+=`/${v}`),g+=`?referrer=${encodeURIComponent(i||"")}`;const{openLoginPopup:E}=mR({url:g,context:hE.PURCHASE,delegateArg:[v]});return vR(function(){return n.fire(xh,v),c?!l&&s?void t():void _("paused",!1):d?void f(u):(E(),fR())})},bR=()=>{const e=jw(e=>e.playback.canSeekForward),t=jw(e=>e.playback.maxPlayedTime);return n=>e||t>=n},yR=()=>{const e=uL(null),t=uL(null),n=Yw(),r=jw(e=>e.setControlBar);return{startExpandingProgressBar:function(){clearTimeout(e.current),clearTimeout(t.current),e.current=setTimeout(()=>{"expanded"!==n.getState().controlBar.progressBarTransitionState&&r("progressBarTransitionState","expanding")},YE)},endExpandingProgressBar:function(){clearTimeout(e.current),clearTimeout(t.current);const i=n.getState().controlBar.progressBarTransitionState;"collapsed"!==i&&("expanded"===i?t.current=setTimeout(()=>{r("progressBarTransitionState","collapsing")},YE):r("progressBarTransitionState","collapsing"))},onExpandTransitionEnd:function(){const e=n.getState().controlBar.progressBarTransitionState;"expanding"===e?r("progressBarTransitionState","expanded"):"collapsing"===e&&r("progressBarTransitionState","collapsed")}}},TR=()=>{const e=uL(!1),t=Yw(),n=jw(e=>e.element),r=jw(e=>e.setPlayback),i=jw(e=>e.progressController),o=VP(e=>e.bigPicture),a=e=>n.classList.toggle(Tf.SCRUBBING,e);function s(e){return i.canSeekNow||i.canSeekToTime(e)}function l(n){e.current=!s(n),e.current||(r("scrubbing",!0),a(!0),(e=>{const{chapters:n,embed:r,playback:i}=t.getState(),{chapters:a}=n;if(!a.length||!r.chapters)return;const s=((e,t)=>t.reduce((t,n)=>{if(null===t)return n;const r=n.startTime-e,i=t.startTime-e;return Math.abs(r)>Math.abs(i)?t:n},null))(e,a);if(!s)return;const l=s.startTime,c=e-l,u=Math.abs(c)<=5,d=nv(a,i.currentFragment);o.sendEvent(yg.CHAPTER_SEGMENT_CLICK,{seek_event_start_time:e,is_chapter_seek:u,nearest_chapter_start_time:l,chapter_seek_event_delta:c,total_no_chapters_at_seek:a.length,fragment_no_chapters_at_seek:d.length})})(n),r("currentTime",n))}return{startScrub:l,continueScrub:function(n){s(n)&&"expanding"!==t.getState().controlBar.progressBarTransitionState&&(e.current?l(n):r("currentTime",n))},endScrub:function(){e.current=!1,r("scrubbing",!1),a(!1),function(){const{playback:e,liveEvent:n}=t.getState();n.dvrEnabled&&!n.isArchived&&o.sendEvent(e.atLiveEdge?yg.SEEK_TO_LIVE_EDGE:yg.SEEK_BEHIND_LIVE_EDGE)}()}}},SR=(e,t)=>{const n=jw(e=>e.playback.currentFragment),r=jw(e=>e.playback.currentTime),i=jw(e=>e.playback.liveEdgeTime),o=jw(e=>e.playback.liveTailTime),a=jw(e=>e.playback.atLiveEdge),s=jw(e=>e.liveEvent.isLiveEvent),l=jw(e=>e.liveEvent.dvrEnabled),c=jw(e=>e.liveEvent.isPlayable),u=jw(e=>e.liveEvent.isArchived),d=jw(e=>e.liveEvent.isEnded),_=jw(e=>e.playback.playInitiated),h=d&&!_&&0===r,p=u&&0!==n.duration;return s&&(l?h:!u&&!c)?0:s&&(l?!h&&!p&&a:!u&&c)?1:!l||h||p||a?((e,t)=>{const{startTime:n,endTime:r}=t;return e<n?0:e>r?1:(e-n)/(r-n)})(t,e):tv(t,o,i)},CR=()=>{const e=jw(e=>e.liveEvent.isLiveEvent),t=jw(e=>e.liveEvent.isPlayable),n=jw(e=>e.liveEvent.isArchived),r=jw(e=>e.liveEvent.isEnded),i=jw(e=>e.liveEvent.dvrEnabled);return!e||t||n||i&&r};function AR(){}const LR=()=>{const e=jw(e=>e.playback.currentTime),t=jw(e=>e.debugCollector),n=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(){return function(e,t){return e&&e.then?e.then(t):t()}(function(e,n){try{var r=function(e){return e&&e.then?e.then(AR):Promise.resolve()}(t.sendDebugPayload())}catch(e){return n(e)}return r&&r.then?r.then(void 0,n):r}(0,AR),function(){if(e){ny(window.location.hash);const t=`at=${Math.floor(e)}`,n=-1===window.location.hash.indexOf("#")?`#${t}`:`${window.location.hash}&${t}`;window.location.hash=n}window.location.reload()})});return n},IR=e=>{const t=VP(e=>e.colors.colorOne),n=VP(e=>e.colors.colorTwo),r=VP(e=>e.colors.colorThree),i=VP(e=>e.colors.colorFour),o={[uf]:t,[df]:n,[_f]:r,[hf]:i};return(e=>{const t=Object.keys(e);for(let n=0;n<t.length;n++){const r=t[n],i=Tv(e[r]),o=Tv(pf[r]);if(i&&i!==o)return!1}return!0})(e.reduce((e,t)=>(e[t]=o[t],e),{}))};function PR(e){var t,n,r,i,o,a,s;const{config:l,events:c,parentUrl:u,backbone:d}=e,{embed:_,request:h,video:m}=l,f=!!_.autoplay,v=!(!_.autoplay||null==(t=h.flags)||!t.autohide_controls),g=!!_.settings.playbar,E=!!_.settings.like,b=!!_.settings.share,y="number"!=typeof _.settings.share&&!(null==(n=_.settings.share)||!n.embed_only),T=!!_.settings.collections,S=!!_.settings.watch_later,C=!(null==(r=_.settings)||!r.watch_trailer||_.autoplay||!_.on_site),A=RE(d,null==(i=m.live_event)?void 0:i.dvr),L=!!(_.settings.speed&&A&&hc.settingPlaybackRate),I=!!_.keyboard,P=!!_.settings.logo,R=!!_.settings.volume,w=!!_.settings.fullscreen,O=!(null==(o=m.live_event)||null==(o=o.settings)||!o.hide_live_label),k=!(null==(a=m.live_event)||!a.show_viewer_count),D=!!_.settings.custom_logo,N=function(e){var t;const{config:n}=e;let r={customLogoUrl:null,customLogoImg:null,customLogoSticky:!1,customLogoWidth:null,customLogoHeight:null};if(null==(t=n.embed.settings.custom_logo)||!t.img)return r;const i=n.embed.settings.custom_logo;let o=i.img;return Q.devicePixelRatio>=2&&(o=o.replace(/(mw|mh)=(\d+)/g,function(e,t,n){return t+"="+2*parseInt(n,10)})),r={customLogoUrl:ag(i.url),customLogoImg:o,customLogoSticky:i.sticky,customLogoWidth:i.width,customLogoHeight:i.height},r}(e),M=!!_.settings.background,x=0!==_.settings.controls,V=!!_.transparent,B=RR(e),U=!!_.settings.audio_tracks,F=!!_.settings.airplay,H=!!_.settings.chapters,W=!!_.settings.chromecast,G=!!_.settings.cc,j=!!_.settings.quality,Y=_.settings.play_button_position,$=!!_.settings.watch_full_video,q=!!_.settings.ask_ai,z=!!m.spatial&&!!_.settings.spatial_compass,K=m.unlisted_hash,X=!!l.embed.settings.badge,Z=_.tq||"",J=h.ai_widget_signature,ee=0!==_.unmute_button,te=!!_.settings.pip,ne=!!_.loop,re=rg(_.context),ie=Boolean("public"===m.embed_permission&&_.settings.embed),oe=m.share_url,ae=`https://${l.player_url}/video/${m.id}/share`,se=m.embed_code,le=m.url,ce=m.privacy,ue=1===(l.embed.dnt||(null==(s=l.request.flags)?void 0:s.dnt)),de=function(e){return Object.keys(e).reduce((t,n)=>p(p({},t),{},{[n]:HE(e[n])}),{})}(l.request.flags),_e=l.vimeo_api_url,he=l.embed.cards,pe=!!B||!!q;return pe&&c.fire(om),{autoPlay:f,autoHideControls:v,playbar:g,like:E,share:b,embedOnlyShare:y,collections:T,watchLater:S,isTrailer:C,speedChangeEnabled:L,keyboard:I,showVimeoLogo:P,volume:R,fullscreen:w,hideLiveLabel:O,showViewerCount:k,customLogo:D,customLogoFields:N,background:M,controls:x,transparent:V,transcript:B,rightContentAreaEnabled:pe,multipleAudioTracks:U,airplay:F,chapters:H,cc:G,chromecast:W,quality:j,playButtonPosition:Y,parentUrl:u,watchFullVideo:$,aiWidget:q,compass:z,videoUnlistedHash:K,badge:X,transcriptQuery:Z,aiWidgetSignature:J,unmuteButton:ee,pip:te,loop:ne,svvContext:re,allowEmbedShare:ie,shareUrl:oe,embedCode:se,videoUrl:le,playerShareUrl:ae,privacy:ce,doNotTrack:ue,flags:de,vimeoApiUrl:_e,cards:he,likePopupUrl:Xv(`https://${l.player_url}/video/${m.id}/login/like`,xv.LIKE),watchLaterPopupUrl:Xv(`https://${l.player_url}/video/${m.id}/login/watch-later`,xv.WATCH_LATER)}}function RR(e){const{embed:t,video:n}=e.config,r=n.live_event,i=!r||r.archive.status===Eg.done||r.dvr;return!!t.settings.transcript&&i}function wR(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Vt;++t<n;)this.add(e[t])}function OR(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function kR(e,t){return e.has(t)}function DR(e,t,n,r,i,o){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(e),u=o.get(t);if(c&&u)return c==t&&u==e;var d=-1,_=!0,h=2&n?new wR:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var p=e[d],m=t[d];if(r)var f=a?r(m,p,d,t,e,o):r(p,m,d,e,t,o);if(void 0!==f){if(f)continue;_=!1;break}if(h){if(!OR(t,function(e,t){if(!kR(h,t)&&(p===e||i(p,e,n,r,o)))return h.push(t)})){_=!1;break}}else if(p!==m&&!i(p,m,n,r,o)){_=!1;break}}return o.delete(e),o.delete(t),_}function NR(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function MR(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}wR.prototype.add=wR.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},wR.prototype.has=function(e){return this.__data__.has(e)};var xR=nt?nt.prototype:void 0,VR=xR?xR.valueOf:void 0,BR=Object.prototype.hasOwnProperty,UR="[object Arguments]",FR="[object Array]",HR="[object Object]",WR=Object.prototype.hasOwnProperty;function GR(e,t,n,r,i){return e===t||(null==e||null==t||!ut(e)&&!ut(t)?e!=e&&t!=t:function(e,t,n,r,i,o){var a=Je(e),s=Je(t),l=a?FR:xr(e),c=s?FR:xr(t),u=(l=l==UR?HR:l)==HR,d=(c=c==UR?HR:c)==HR,_=l==c;if(_&&Mn(e)){if(!Mn(t))return!1;a=!0,u=!1}if(_&&!u)return o||(o=new yn),a||$n(e)?DR(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new Br(e),new Br(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ot(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=NR;case"[object Set]":var l=1&r;if(s||(s=MR),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var u=DR(s(e),s(t),r,i,o,a);return a.delete(e),u;case"[object Symbol]":if(VR)return VR.call(e)==VR.call(t)}return!1}(e,t,l,n,r,i,o);if(!(1&n)){var h=u&&WR.call(e,"__wrapped__"),p=d&&WR.call(t,"__wrapped__");if(h||p){var m=h?e.value():e,f=p?t.value():t;return o||(o=new yn),i(m,f,n,r,o)}}return!!_&&(o||(o=new yn),function(e,t,n,r,i,o){var a=1&n,s=Er(e),l=s.length;if(l!=Er(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:BR.call(t,u)))return!1}var d=o.get(e),_=o.get(t);if(d&&_)return d==t&&_==e;var h=!0;o.set(e,t),o.set(t,e);for(var p=a;++c<l;){var m=e[u=s[c]],f=t[u];if(r)var v=a?r(f,m,u,t,e,o):r(m,f,u,e,t,o);if(!(void 0===v?m===f||i(m,f,n,r,o):v)){h=!1;break}p||(p="constructor"==u)}if(h&&!p){var g=e.constructor,E=t.constructor;g==E||!("constructor"in e)||!("constructor"in t)||"function"==typeof g&&g instanceof g&&"function"==typeof E&&E instanceof E||(h=!1)}return o.delete(e),o.delete(t),h}(e,t,n,r,i,o))}(e,t,n,r,GR,i))}function jR(e,t){return GR(e,t)}function YR(e,t){var n;return null!=e&&null!=(n=e.request)&&null!=(n=n.ab_tests)&&n[t]?e.request.ab_tests[t]:{}}const $R=[{id:.5,label:"0.5x"},{id:.75,label:"0.75x"}],qR={id:1,label:"Normal"},zR=[{id:1.25,label:"1.25x"},{id:1.5,label:"1.5x"},{id:2,label:"2x"}],KR=[qR].concat(zR),XR=[].concat($R,[qR],zR),ZR=[].concat($R,[qR]);function JR(e){var t;const{config:n,backbone:r,progressController:i}=e,o=QR(e),a=!!Q.airPlay,s=n.embed.quality?$f(r.qualities,n.embed.quality):r.qualities,l=ew(r.qualities,n.embed.quality),c=nw(n);return{playInitiated:!1,targetTimeReached:!1,scrubbing:!1,scrubbingByFrame:!1,paused:!n.embed.autoplay||(null==(t=n.video.live_event)||null==(t=t.archive)?void 0:t.status)===Eg.done,buffering:!1,loadedTime:0,currentTime:r.currentTime,maxPlayedTime:i.maxPlayedTime,liveEdgeTime:r.liveEdgeTime,atLiveEdge:r.atLiveEdge,liveTailTime:r.liveTailTime,hasFragments:c,currentFragment:e.fragmentsHandler.currentFragment,duration:n.video.duration,qualities:s,currentQuality:l,playbackRates:o,loadedMetadata:r.readyState>=1,loadedData:r.readyState>1,canPlayPictureInPicture:e.canPlayPictureInPicture,supportsAirPlay:a,supportsTextTracks:hc.textTracks,supportsStereoscopic:tw(e),isAdPlaying:!1,supportsSettingVolume:hc.settingVolume,volume:r.volume,muted:r.muted||!!n.embed.muted,audioTracks:r.audioTracks,isSegmentedPlaybackEnabled:e.segmentedPlaybackEnabled,startTime:e.startTime,endTime:e.endTime,ended:r.ended,hasFirstTimeUpdate:!1,drm:!!n.request.drm,drmCdm:"",drmMode:rc,canSeekForward:e.progressController.canSeekForward,canPlayForward:e.progressController.canPlayForward}}function QR(e){var t;const{backbone:n,config:r}=e;let i=[];if(RE(n,null==(t=r.video.live_event)?void 0:t.dvr)&&hc.settingPlaybackRate&&r.embed.settings.speed){const e=function(e,t){return e?KR:t?ZR:XR}(n.atLiveTail,n.atLiveEdge);i=$f(e,`${n.playbackRate}`)}return i}function ew(e,t){var n;if(t){var r;const n="string"==typeof t?t:t.quality||`${t.height}p`,i=null==e||null==(r=e.find(e=>e.id===n))?void 0:r.label;if(i)return i}return null==e||null==(n=e.find(e=>e.active))?void 0:n.label}function tw(e){const{config:t}=e;return"disable"!==t.video.privacy&&(Q.webvr||Q.stereoscopic)&&t.video.spatial&&YR(t,"webvr").group}function nw(e){var t;return!Mu(null==(t=e.embed.interactive)?void 0:t.fragments)}function rw(e){const{atLiveEdge:t,liveEdgeTime:n,liveTailTime:r}=e;return{atLiveEdge:t,liveEdgeTime:n,liveTailTime:r}}function iw(){}function ow({config:e,get:t}){const{user:n,video:r}=e,i=n.id,o=YT(r.owner),a=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(n,r,i=null){const o=t().user.vimeoApiClientToken,a=t().user.vimeoApiInteractionTokens,s=t().embed.videoUnlistedHash;return function(e){if(e&&e.then)return e.then(iw)}(function(l,c){try{var u=function(e,t){return e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e}(t().updatePhpTokens(),function(){const l=n===rR.FOLLOWING?t().user.ownerId:e.video.id;let c;o&&(n===rR.LIKES?c=a.likes:n===rR.WATCH_LATER?c=a.watch_later:n===rR.FOLLOWING&&(c=a.following));const u=`?auth=${c}`,d=s&&n!==rR.FOLLOWING?`:${s}`:"",_=`https://${t().embed.vimeoApiUrl}/users/${t().user.id}/${n}/${l}${d}${u}`;return function(e){return e&&e.then?e.then(iw):Promise.resolve()}((i??We)(_,{jwt:o,method:r}))})}catch(e){return c(e)}return u&&u.then?u.then(void 0,c):u}(0,function(e){Ab.captureException(e,{extra:{action:n,method:r}})}))});return{id:i,liked:!!n.liked,loggedIn:n.logged_in,watchLater:!!n.watch_later,ownerName:r.owner.name,ownerId:r.owner.id,following:!!n.following,collected:!1,shared:!1,isPayingOwner:o,vimeoBucketedLiveClientToken:n.vimeo_bucketed_live_client_token,vimeoApiInteractionTokens:n.vimeo_api_interaction_tokens,vimeoApiClientToken:n.vimeo_api_client_token,persistUserAction:a}}const aw={isVOD:!1,vodButtonVisible:!1};function sw(e){const{video:t,embed:n,user:r,request:i}=e.config;let o=p({},aw);if(t.vod){const e=!0,a=t.vod.is_coming_soon,s="ondemand.main"===n.context||"Vimeo\\Controller\\OnDemandController.main"===n.context,l=t.vod&&r.purchased,c=t.vod.countries,u=i.country,d=t.vod.purchase_options||[];let _=n.settings.vod&&Wf(c,u);_&&a&&s&&(_=!1);const[h]=d;let m=null;h&&(m=lw(i.dynamic_translation_map,"label_string",i.currency,h)),o.isVOD=e,o.vodLabel=m,o.purchased=!!l,o.productId=null==h?void 0:h.product_id,o.isExpiring=!(null==h||!h.expiring),o.isPreorder=void 0!==t.vod.is_preorder?!!t.vod.is_preorder:!!t.vod.date_available,o.isComingSoon=!!t.vod.is_coming_soon,o.vodButtonVisible=_,o.purchaseOptions=d.map(e=>p(p({},e),{},{formattedLabel:lw(i.dynamic_translation_map,"outro_string",i.currency,e)})),o.title=t.vod.feature_title,o.url=t.vod.url,o.releaseDate=t.vod.date_available_formatted_datetime||t.vod.date_available,o.isFeature=!!t.vod.is_feature,o.featureId=t.vod.feature_id,o.isAvailableInCountry=!c||0===c.length||-1!==c.indexOf(u)}return o}function lw(e,t,n,r){var i=r[t];return i?(i=function(e,t,n){let r=n.USD;return t in n&&(r=n[t]),-1!==e.indexOf("${price}")?e.replace("${price}",r):-1!==e.indexOf("{PRICE}")?e.replace("{PRICE}",r):e}(i=function(e,t){return void 0!==e&&void 0!==e[t]?e[t]:t}(e,i),n,r.prices),r.expires_in_duration_str&&(i=i.replace("{TIME}",r.expires_in_duration_str)),r.available_on_formatted&&(i=i.replace("{DATE}",r.available_on_formatted)),i):null}function cw({config:e}){const{badge:t}=e.embed.settings;let n=Q.devicePixelRatio>1?"img_2x":"img";return Q.svg&&t.svg&&(n="svg"),{link:t.link,img:t[n],margin:t.margin||!1,width:t.width,height:t.height,name:t.name,shadow:!!t.shadow,id:t.id}}function uw(e){const t=Kv(Jd,e.config),n=Xg()?t:window.location.href;return{chapters:dw(e),chapterShareBaseUrl:n,activeCueId:null}}function dw(e){const t=Array.from(e.backbone.chapters),n=e.config.embed.chapters||[];return t.map(e=>{const t=n.find(t=>t.timecode===e.startTime);return{cueId:e.id,startTime:e.startTime,endTime:e.endTime,text:e.text,chapterId:null==t?void 0:t.id,clipId:null==t?void 0:t.clip_id,timecode:null==t?void 0:t.timecode,title:null==t?void 0:t.title}})}let _w=function(e){return e.RTL="rtl",e.LTR="ltr",e}({});const hw={black:"#000",red:"#f00",yellow:"#ff0",green:"#0f0",blue:"#00f",white:"#fff",cyan:"#0ff",magenta:"#f0f"};function pw(e){var t,n,r;const{backbone:i,config:o}=e,a=i.enabledTextTrack,s=i.textTracks,l=!!o.video.live_event,{textTracks:c,activeTextTrackId:u,language:d,direction:_,provenance:h}=mw(s,l,a),m=fw(e);return p({textTracks:c,textTrackEls:(null==s||null==(t=s.filter(e=>e.trackElement))?void 0:t.map(e=>e.trackElement))||[],activeTextTrackId:u,requiresCrossOrigin:1===(null==o||null==(n=o.request)||null==(n=n.flags)?void 0:n.ott)||"dev"===(null==o||null==(r=o.request)||null==(r=r.build)?void 0:r.js)||"gedevplayer.vimeows.com"===(null==o?void 0:o.player_url),activeCues:[],language:d,direction:_,rtlTracks:(s||[]).reduce((e,t)=>t.rtl?e.concat(t.id):e,[]),provenance:h},m)}function mw(e,t,n){const r="off";let i=[],o=gw(n);return null!=e&&e.length&&(o||(o=r),i.push({label:"Off",id:r,active:o===r,provenance:null,language:r}),e.forEach(e=>{let n="CC"===e.label.substring(e.label.length-2),r="captions"!==e.kind||n?"":" CC",a=t?"Display Captions":e.label+r;const s=gw(e),l={label:a,id:s,active:o===s,language:e.language,provenance:e.provenance};i.push(l)})),{textTracks:i,activeTextTrackId:o,language:null==n?void 0:n.language,direction:vw(n),provenance:null==n?void 0:n.provenance}}function fw(e){const{store:t}=e,n=Object.keys(_b()),r={};return n.forEach(e=>{const n=t.get(`ui.captions.${e}`);r[e]=n}),r}function vw(e){return e?e.rtl?_w.RTL:_w.LTR:null}function gw(e){return e?""!==e.id?`${e.id}`:`${e.language}.${e.kind}`:""}function Ew(e){var t,n;const{config:r}=e,i=r.video.live_event,o=null==i?void 0:i.status,a=!!o,s=null==i||null==(t=i.archive)?void 0:t.status,l=yw(o),c=bw(s),u=l.isStarted&&eE(i),d=null==i||null==(n=i.ingest)?void 0:n.scheduled_start_time,_=null==i?void 0:i.settings.event_schedule;return p(p(p({isLiveEvent:a,isPlayable:u},l),c),{},{dvrEnabled:null==i?void 0:i.dvr,viewerCount:Im(0),liveStatsRequestSucceeded:null,isOnline:null,liveEventSchedule:d,showEventSchedule:_})}function bw(e){return{isArchived:e===Km}}function yw(e){return{isStarted:e===bg.started,isEnded:e===bg.ended,isPending:e===bg.pending,isActive:e===bg.active}}function Tw(e,t){let n;return function(r){if(void 0!==n)return n;if(t in window)return n=Promise.resolve(window[t]),n;const i=function(e){switch(e.player_url){case"player.vimeo.com":return nf;case"master.playerci.vimeows.com":case"player-backend-ci.vimeows.com":return"CI";case"player2.vimeo.dev":return"DEV";default:return}}(r)===nf?"https://embedder-sdk.wirewax.video":"https://embedder-sdk.wirewax.tv";return n=((e,t=!1)=>new Promise((n,r)=>{if(t){const t=document.querySelector(`script[src="${e}"]`);if(t&&!t.dataset.error)return void setTimeout(n,0)}const i=document.createElement("script");i.src=e,i.addEventListener("load",n),i.addEventListener("error",e=>{i.dataset.error="true",r(e.error)}),document.head.appendChild(i)}))(`${i}/${e}`,!0).then(()=>window[t]),n}}const Sw=Tw("latest/wirewax-embedder-sdk@beta.umd.js","WIREWAX"),Cw=Tw("latest-create/create-interactive-plugin@beta.umd.js","CREATE_INTERACTIVE_PLUGIN");function Aw(){}function Lw(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function Iw(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Pw(e,t){const n=Lw(function(){return function(n,a){try{var p=function(){d("loading");const n=function(e){const{interactive_id:t,interactive_params:n,create_interactive:r}=e.config.embed;return r.has_create_interactive?{vidDataURL:r.viddata_url,metricsClient:new Tb(e)}:{vidId:t,interactiveParams:n}}(e);return Iw(function(e){return e.embed.create_interactive.has_create_interactive?Cw(e):Sw(e)}(r),function(e){const a=e;if(d("loaded"),!s)return l=a(t,n),Iw(l.ready(),function(){if(d("initialized"),s)return d("destroyed"),void l.destroy();const e=l.getInteractiveData("hotspots"),t=l.getInteractiveData("polls"),n=l.getInteractiveData("quizzes")||[];i().setInteractive("hotspots",e),i().setInteractive("polls",t),i().setInteractive("quizzes",n),u=function(e){const t=()=>i().backbone.play(),n=()=>i().backbone.pause(),r=e=>o.fire(Qp,e),a=e=>o.fire(em,e),s=({seekTo:e,seekType:t})=>{o.fire(nm,{type:t}),i().progressController.maxPlayedTime=e,i().backbone.currentTime=e},l=e=>{e.overlayOnDisplay?(o.fire(Uh,rv.INTERACTIVE),i().setInteractive("active",!0)):(o.fire(Fh,rv.INTERACTIVE),i().setInteractive("active",!1))};return e.on("play",t),e.on("pause",n),e.on("hotspotClick",r),e.on("overlayPanelClick",a),e.on("seeked",s),e.on("toggleOverlay",l),()=>{e.off("play",t),e.off("pause",n),e.off("hotspotClick",r),e.off("overlayPanelClick",a),e.off("seeked",s),e.off("toggleOverlay",l)}}(l),c=function(e){function t(){_(e),e.play()}function n(){h(),e.pause()}function r(){e.setCurrentTime(i().playback.currentTime)}function a(){e.setEnded(!0),e.setCurrentTime(i().backbone.duration)}function s(){d("destroyed"),e.destroy(),l()}function l(){h(),o.off(Pi.PLAY,t),o.off(Pi.PAUSE,n),o.off(Pi.SEEKED,r),o.off(Pi.ENDED,a)}return o.on(Pi.PLAY,t),o.on(Pi.PAUSE,n),o.on(Pi.SEEKED,r),o.on(Pi.ENDED,a),o.once(nh,t),s}(l),r.embed.autoplay&&(_(l),l.play())});d("destroyed")})}()}catch(e){return a()}return p&&p.then?p.then(void 0,a):p}(0,function(e){d("error")})}),{config:r,get:i,events:o}=e;let a,s=!1,l=null,c=null,u=null;return{load:Lw(function(){if(!s)return function(e,t){return function(e,t,n){if(n)return t?t(e()):e();try{var r=Promise.resolve(e());return t?r.then(t):r}catch(e){return Promise.reject(e)}}(e,Aw,t)}(n)}),destroy(){s=!0,null==u||u(),null==c||c()}};function d(e){i().setInteractive("embedderStateHistory",i().interactive.embedderStateHistory.concat(e))}function _(e){cancelAnimationFrame(a),a=requestAnimationFrame(()=>{e.setCurrentTime(i().backbone.currentTime),_(e)})}function h(){cancelAnimationFrame(a)}}function Rw(){}const ww=e=>{const t=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(){return function(){var t=function(){if(function(){var e,t,n;return!(null!=(e=r())&&null!=(e=e.interactive)&&e.destroyed)&&(null==(t=r())||null==(t=t.interactive)?void 0:t.enabled)&&!(null==(n=r().interactive)||!n.instanceId)&&!Q.browser.ie}()){const t=Pw(e,r().interactive.instanceId);return s("embedderManager",t),function(e,t){return void 0?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}(t.load(),function(){s("ready",!0)})}}();if(t&&t.then)return t.then(Rw)}()}),{set:n,get:r,events:i,subscribe:o}=e,a=Ow(e),s=(e,t)=>{n(n=>({interactive:p(p({},n.interactive),{},{[e]:t})}))},l=()=>{c(),n(()=>({interactive:Ow(e)}))};function c(){var e;s("destroyed",!0);const t=null==(e=r().interactive)?void 0:e.embedderManager;t&&(t.destroy(),s("embedderManager",null),s("instanceId",null))}return i.on(ap,e=>{e&&l()}),i.on(mp,l),i.on(V_,c),o(e=>{var t;return null==e||null==(t=e.interactive)?void 0:t.instanceId},t),{interactive:a,setInteractive:s}};function Ow({config:e}){const{interactive:t}=e.embed,n=!(null==t||!t.markers);return{hotspots:[],polls:[],quizzes:[],enabled:kw(e.embed),showMarkers:n,instanceId:null,active:!1,embedderManager:null,ready:!1,destroyed:!1,embedderStateHistory:[]}}function kw(e){return!!e.interactive_id||!!e.create_interactive&&(1===e.create_interactive.has_create_interactive||!0===e.create_interactive.has_create_interactive)}let Dw=function(e){return e.EMPTY="empty",e.QOE_SURVEY="qoe_survey",e.SKIP_TO_LIVE="skip_to_live",e.BROADCAST_OVER="broadcast_over",e.FRAME_CAPTURED="frame_captured",e.CHANGE_LANGUAGES="change_languages",e}({});const Nw=[Dw.QOE_SURVEY,Dw.BROADCAST_OVER,Dw.FRAME_CAPTURED,Dw.SKIP_TO_LIVE,Dw.CHANGE_LANGUAGES];function Mw(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}const xw=Bw(function(e,t){var n;const{width:r,height:i}=t().appearance.boundingClientRect;let o=Object.assign({},e);if(null!=e&&e.img_base&&(o.imageUrl=function(e,t,n){const{width:r,height:i}=ZP(t*Q.devicePixelRatio,n*Q.devicePixelRatio);return JP({baseUrl:e,width:r,height:i})}(e.img_base,r,i)),(null==o||null==(n=o.videos)?void 0:n.length)>0){const e=t().user.ownerId,n=t().user.ownerName,a=Math.round(r/o.videos.length),s=Math.round(i/o.videos.length);o.videos=o.videos.map(function(e,t,n,r){return i=>{const{owner:o}=i,a=Object.assign({},i);return o.id!==e&&(a.byline="from "+t),i.thumbnail_base&&(a.thumbnail=JP({baseUrl:i.thumbnail_base,width:n,height:r})),a}}(e,n,a,s))}return o}),Vw=function(e,t){return Mw(xw(e,t),function(e){return null!=e&&e.url&&(e.url=ag(e.url)),null!=e&&e.url2&&(e.url2=ag(e.url2)),e})};function Bw(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function Uw(){}const Fw=e=>{const{set:t,get:n,events:r,subscribe:i,config:o}=e,a=(e,n)=>{t(t=>({outro:p(p({},t.outro),{},{[e]:n})}))};r.on(ap,(e,r)=>{r.embed.outro!==n().outro.purpose&&t(e=>({outro:p(p({},e.outro),{},{outroData:null,fetchingOutroData:!1,purpose:r.embed.outro})}))}),r.on(A_,Bw(function(e,t){let r=!1;a("purpose",e);const i=!(null==t||!t.data);return function(o,s){var l=function(){if(i)return Mw(Vw(t.data,n),function(t){a("outroData",t),d(e,t),r=!0})}();return l&&l.then?l.then(s):s(l)}(0,function(t){if(r)return t;e===n().outro.purpose&&n().outro.outroData||u(e)})})),i(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.outro},l),i(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.overlay},l),i(e=>{var t;return null==e||null==(t=e.playback)?void 0:t.currentTime},c),i(e=>{var t;return null==e||null==(t=e.playback)?void 0:t.ended},c),i(e=>{var t;return null==e||null==(t=e.playback)?void 0:t.ended},function(e){e&&n().outro.purpose===wI.BEGINNING&&r.fire(u_)});const s=function({config:e}){let{outro:t}=e.embed;return t!==wI.THREEVIDEOS&&t!==wI.PROMOTED||(t=wI.VIDEOS),{purpose:t,active:!1,outroData:null,fetchingOutroData:!1}}(e);function l(){const e=n().displayList.outro&&!n().displayList.overlay;e!==n().outro.active&&a("active",e)}function c(){const e=n().outro.fetchingOutroData,t=n().playback.currentTime>=(n().playback.isSegmentedPlaybackEnabled?n().playback.endTime-n().playback.startTime:n().playback.duration)-10,r=null!==n().outro.outroData,i=n().embed.background;e||!t||r||i||u(n().outro.purpose)}function u(e){const t=Bw(function(){return function(e){if(e&&e.then)return e.then(Uw)}(function(t,i){try{var o=function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(function(){return a("fetchingOutroData",!0),Mw(We(h,{withCredentials:!0,retry:3}),function(t){return Mw(t.json(),function(t){return Mw(Vw(t.data,n),function(t){return Mw(function(e){const t=function(e){var t;let n=[];return null!=e&&e.imageUrl&&n.push(e.imageUrl),(null==e||null==(t=e.videos)?void 0:t.length)>0&&n.concat(e.videos.map(e=>e.thumbnail)),n}(e);return Promise.all(t.map(e=>QP(e)))}(t),function(){r.fire(ym,t),a("outroData",t),d(e,t)})})})})},function(e){})}catch(e){return i(!0,e)}return o&&o.then?o.then(i.bind(null,!1),i.bind(null,!0)):i(!1,o)}(0,function(e,t){return a("fetchingOutroData",!1),function(e,t){if(e)throw t;return t}(e,t)}))});if(n().outro.fetchingOutroData)return;const{player_url:i}=o,{id:s,unlisted_hash:l}=o.video,{on_site:c}=o.embed,u=`https://${i}/video/${s}/outro`,_={on_site:c?1:0,type:e};l&&(_.h=l);const h=me(u,_);t()}function d(e,t){var r;[wI.VIDEOS,wI.THREEVIDEOS].includes(e)&&t.following&&(null==(r=n())||r.setUser("following",!!t.following))}return{outro:s,setOutro:a}};function Hw(e){const{config:t}=e;return{supportsChromecast:ug(t),isChromecastConnected:!1,isChromecastPlaying:!1,isChromecastBuffering:!1,isChromecastReady:Ww(),receiverFriendlyName:null}}function Ww(){return vy.castState!==Av.NOT_SETUP&&vy.castState!==Av.NO_DEVICES_AVAILABLE}const{Provider:Gw,useStore:jw,useStoreApi:Yw}=_I(),$w=({player:e,children:t})=>{const[n,r]=aL(!1);return tP(()=>r(!0),e),n?MP(Gw,{createStore:()=>dI((t,n,r)=>{const i=r.subscribe;return r.subscribe=(e,t,n)=>{let o=e;if(t){const i=(null==n?void 0:n.equalityFn)||Object.is;let a=e(r.getState());o=n=>{const r=e(n);if(!i(a,r)){const e=a;t(a=r,e)}},(null==n?void 0:n.fireImmediately)&&t(a,a)}return i(o)},((t,n,{subscribe:r})=>{const i=p(p({set:t,get:n,subscribe:r},e),{},{get backbone(){return e.backbone},get displayContext(){return e.displayContext},get config(){return e.config},get fragmentsHandler(){return e.fragmentsHandler},get startTime(){return e.startTime},set startTime(t){e.startTime=t},get endTime(){return e.endTime},set endTime(t){e.endTime=t},get segmentedPlaybackEnabled(){return e.segmentedPlaybackEnabled},get canPlayPictureInPicture(){return e.canPlayPictureInPicture},get parentUrl(){return e.parentUrl},set parentUrl(t){e.parentUrl=t},get progressController(){return e.progressController},get bigPicture(){return e.bigPicture}}),{config:o,backbone:a,element:s,expose:l,verifyConfig:c,events:u,updatePhpTokens:d,progressController:_,bigPicture:h,debugCollector:m}=e,f=p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p({},(e=>{const{set:t,events:n}=e,r=hI(e);return n.on(zh,()=>{t(()=>({debug:hI(e)}))}),{debug:r}})(i)),(e=>{const{set:t,get:n,events:r,subscribe:i}=e,o=bI(e),a=(e,n)=>{t(t=>({controlBar:p(p({},t.controlBar),{},{[e]:n})}))};function s(){const e=FE(UE.FULL_CONTROLS,n().appearance.playerSizeMode,n().appearance.playerBreakpoint);a("showAllControls",e)}return r.on(ap,()=>{t(()=>({controlBar:bI(e)}))}),r.on(P_,e=>{a("overrideBehavior",e)}),i(e=>{var t;return null==e||null==(t=e.appearance)?void 0:t.playerSizeMode},s),i(e=>{var t;return null==e||null==(t=e.appearance)?void 0:t.playerBreakpoint},s),i(e=>{var t;return null==e||null==(t=e.controlBar)?void 0:t.progressBarTransitionState},e=>a("isExpanded","expanded"===e||"expanding"===e)),{controlBar:o,setControlBar:a}})(i)),JI(i)),(e=>{const{store:t,set:n,events:r,element:i,backbone:o,config:a}=e,s=QI(e),l=(e,t)=>n(n=>({appearance:p(p({},n.appearance),{},{[e]:t})}));return t.watch("ui.player.breakpoint",e=>l("playerBreakpoint",e)),t.watch("ui.player.mode",e=>l("playerSizeMode",e)),t.watch("ui.app.breakpoint",e=>l("appBreakpoint",e)),t.watch("ui.app.mode",e=>l("appSizeMode",e)),t.watch("ui.controlbar.isMenuFullWidth",e=>l("isMenuBlockingUI",e)),t.watch("ui.player.isVerticalVideo",e=>{l("isVerticalVideo",e)}),t.watch("ui.controlbar.isMenuVerticalVideoMode",e=>l("isMenuVerticalVideoMode",e)),t.watch("ui.player.width",()=>{l("boundingClientRect",km(i))}),t.watch("ui.controlbar.doMenuItemsWrap",e=>{l("shouldMenuItemsWrap",e)}),t.watch("ui.player.width",e=>{const{videoHeight:r,videoWidth:i}=eP(e,t.get("ui.player.height"),a.video.width,a.video.height);n(t=>({appearance:p(p({},t.appearance),{},{videoHeight:r,videoWidth:i,playerWidth:e})}))}),t.watch("ui.player.height",e=>{const{videoHeight:r,videoWidth:i}=eP(t.get("ui.player.width"),e,a.video.width,a.video.height);n(t=>({appearance:p(p({},t.appearance),{},{videoHeight:r,videoWidth:i,playerHeight:e})}))}),t.watch("ui.container.height",e=>{l("containerHeight",e)}),t.watch("ui.container.width",e=>{l("containerWidth",e)}),r.on(Ph,()=>l("fullscreen",!0)),r.on(Oh,e=>{n(t=>{const n={fullscreen:!1,forceExitedFullscreen:t.appearance.forceExitedFullscreen};return e||(n.forceExitedFullscreen=!0),{appearance:p(p({},t.appearance),n)}})}),r.on(Pi.WEBKIT_END_FULLSCREEN,()=>{l("fullscreen",!1)}),r.on(Up,()=>{n(e=>({appearance:p(p({},e.appearance),{},{showAirPlayPicker:!0})}))}),r.on(Fp,()=>{n(e=>({appearance:p(p({},e.appearance),{},{showAirPlayPicker:!1})}))}),r.on(u_,()=>{n(()=>({appearance:QI(e)}))}),r.on(Up,()=>{n(e=>({appearance:p(p({},e.appearance),{},{externalDisplay:!0})}))}),r.on(Fp,()=>{n(e=>({appearance:p(p({},e.appearance),{},{externalDisplay:!1})}))}),r.on(Pi.ENTER_PICTURE_IN_PICTURE,()=>{n(e=>({appearance:p(p({},e.appearance),{},{pictureInPictureActive:!0})}))}),r.on(Pi.LEAVE_PICTURE_IN_PICTURE,()=>{n(e=>({appearance:p(p({},e.appearance),{},{pictureInPictureActive:!1})}))}),r.on(Ni.WEBVR_ENTER,()=>{n(e=>({appearance:p(p({},e.appearance),{},{stereoscopicEnabled:!0})}))}),r.on(Ni.WEBVR_EXIT,()=>{n(e=>({appearance:p(p({},e.appearance),{},{stereoscopicEnabled:!1})}))}),r.on(Pi.LOADED_DATA,()=>{n(t=>({appearance:p(p({},t.appearance),{},{isStartTimeThumbLoading:Jb(e)})}))}),{appearance:s,setAppearance:(e,t)=>{"fullscreen"!==e?"pictureInPictureActive"!==e?"showAirPlayPicker"!==e?("stereoscopicEnabled"===e&&r.fire(Ah),"transcriptNavActive"===e&&"boolean"==typeof t&&r.fire(sm,t),l(e,t)):r.fire(Hp):r.fire(o.pictureInPictureActive?w_:R_):r.fire(lh)}}})(i)),(e=>{const{set:t,events:n,subscribe:r,get:i}=e,o=PR(e);return n.on(ap,()=>{t(()=>({embed:PR(e)}))}),n.on(hm,function(e){e&&t(t=>({embed:p(p({},t.embed),{},{parentUrl:e})}))}),r(e=>{var t;return null==e||null==(t=e.liveEvent)?void 0:t.isArchived},r=>{var o;const a=RR(e),s=null==(o=i())||null==(o=o.embed)?void 0:o.transcript;r&&a&&!s&&(n.fire(om),t(e=>({embed:p(p({},e.embed),{},{rightContentAreaEnabled:!0,transcript:!0})})))}),{embed:o}})(i)),vI(i)),(e=>{const{events:t,set:n}=e,r={direction:null,time:null},i=()=>{clearTimeout(EI),EI=setTimeout(()=>{n(e=>({displayList:p(p({},e.displayList),{},{nudgeNotification:!1})})),t.fire(ah)},1050)},o=e=>{i(),n(t=>({displayList:p(p({},t.displayList),{},{nudgeNotification:!0}),nudge:e}))};return t.on(oh,({direction:e,time:t})=>{o({direction:e,time:t})}),{nudge:r,setNudge:(e,t)=>{i(),n(n=>({nudge:p(p({},n.nudge),{},{[e]:t})}))},setNudgeProperties:o,startNudgeHideTimeout:i}})(i)),(e=>{const{events:t,set:n,get:r,backbone:i,subscribe:o,progressController:a,bigPicture:s}=e,l=(e,t)=>{n(n=>({playback:p(p({},n.playback),{},{[e]:t})}))},c=JR(e);return t.on(u_,()=>{n(()=>({playback:JR(e)}))}),t.on(ap,t=>{t&&n(()=>({playback:JR(e)}))}),t.on(iu,()=>l("playInitiated",!0)),t.once(nh,()=>l("hasFirstTimeUpdate",!0)),t.on(Pi.PLAY,()=>{n(e=>({playback:p(p({},e.playback),{},{scrubbing:!1,scrubbingByFrame:!1,paused:!1,playInitiated:!0,ended:!1})}))}),t.on(uh,()=>l("paused",!1)),t.on([Pi.PAUSE,z_,ch],()=>l("paused",!0)),t.on(th,()=>l("targetTimeReached",!0)),t.on(ki.BUFFER_STARTED,()=>l("buffering",!0)),t.on(ki.BUFFER_ENDED,()=>l("buffering",!1)),t.on(Wp,()=>l("buffering",!0)),t.on([Gp,K_],()=>l("buffering",!1)),t.on(fh,e=>{l("scrubbing",!0),"keyboard"===(null==e?void 0:e.seekType)&&null!=e&&e.isFrameByFrame&&l("scrubbingByFrame",!0)}),t.on(vh,()=>{l("scrubbing",!1),l("scrubbingByFrame",!1)}),t.on(D_,e=>{n(t=>{const n=t.liveEvent.dvrEnabled?t.playback.liveTailTime:0,r=t.liveEvent.dvrEnabled?t.playback.liveEdgeTime:t.playback.duration,i=Mm(e,n,r);return{playback:p(p({},t.playback),{},{currentTime:i})}})}),t.on(Pi.TIME_UPDATE,({currentTime:t,timeProgress:r,liveEdgeTime:i,atLiveEdge:o,liveTailTime:s,atLiveTail:l})=>{n(n=>{const c=Math.min(Fm(100*r),100);t=t||n.playback.duration*c||0;const u=QR(e),d=a.maxPlayedTime,_=a.canSeekForward,h=a.canPlayForward;return{playback:p(p({},n.playback),{},{currentTime:t,liveEdgeTime:i,atLiveEdge:o,liveTailTime:s,atLiveTail:l,playbackRates:u,maxPlayedTime:d,canSeekForward:_,canPlayForward:h})}})}),t.on(Z_,()=>{const e=r().liveEvent.dvrEnabled&&!r().playback.atLiveEdge,t=r().liveEvent.dvrEnabled&&r().playback.atLiveEdge;e||n(e=>({playback:p(p({},e.playback),{},{ended:!0,currentTime:t?0:e.playback.currentFragment.duration})}))}),t.on(Pi.PROGRESS,({loaded:e})=>{n(t=>({playback:p(p({},t.playback),{},{loadedTime:e})}))}),t.on([sh,Pi.DURATION_CHANGE],()=>{if(!jR(r().playback.currentFragment,e.fragmentsHandler.currentFragment)){const t=nw(e.config);n(n=>({playback:p(p({},n.playback),{},{hasFragments:t,currentFragment:e.fragmentsHandler.currentFragment,maxPlayedTime:a.maxPlayedTime})}))}}),t.on(Pi.LOADED_METADATA,()=>{n(e=>({playback:p(p({},e.playback),{},{loadedMetadata:!0})}))}),t.on(Pi.LOADED_DATA,()=>{n(e=>({playback:p(p({},e.playback),{},{loadedData:!0})}))}),t.on([ki.STREAM_CHANGE,uu],e=>{const t={currentQuality:ew(i.qualities,e)};r().liveEvent.isLiveEvent&&Object.assign(t,{qualities:i.qualities}),n(e=>({playback:p(p({},e.playback),t)}))}),t.on(eh,e=>{n(t=>({playback:p(p({},t.playback),{},{qualities:i.qualities,currentQuality:ew(i.qualities,e)})}))}),t.on(ki.AUDIO_TRACK_CHANGED,()=>{l("audioTracks",i.audioTracks)}),t.once(cu,()=>l("canPlayPictureInPicture",e.canPlayPictureInPicture)),t.on(Vp,()=>{n(e=>({playback:p(p({},e.playback),{},{supportsAirPlay:!0})}))}),t.on(Bp,()=>{n(e=>({playback:p(p({},e.playback),{},{supportsAirPlay:!1})}))}),t.on(rh,()=>{n(t=>({playback:p(p({},t.playback),{},{playbackRates:QR(e)})}))}),t.on(J_,e=>{n(t=>({playback:p(p({},t.playback),{},{volume:e,muted:i.muted})}))}),t.on(Q_,e=>{n(t=>({playback:p(p({},t.playback),{},{muted:e})}))}),t.on([ki.AVAILABLE_STREAMS_CHANGED,ki.CURRENT_FILE_CHANGE],()=>{n(e=>({playback:p(p({},e.playback),{},{qualities:i.qualities,currentQuality:ew(i.qualities)})}))}),t.on([Yp,qp,jp,$p,Xp,Zp],()=>{n(e=>({playback:p(p({},e.playback),{},{isAdPlaying:!1})}))}),t.on([Kp,zp],()=>{n(e=>({playback:p(p({},e.playback),{},{isAdPlaying:!0})}))}),t.on([mm,fm],()=>{n(t=>({playback:p(p({},t.playback),{},{isSegmentedPlaybackEnabled:e.segmentedPlaybackEnabled,startTime:e.startTime,endTime:e.endTime})}))}),t.on(Pu.LATENCY_UPDATED,function(){n(e=>e.playback.paused||e.playback.buffering?e.playback.scrubbing?mI:{playback:p(p({},e.playback),rw(i))}:mI)}),t.on(ki.SCANNER_CHANGE,function(){n(e=>({playback:p(p({},e.playback),rw(i))}))}),o(e=>{var t;return null==e||null==(t=e.playback)?void 0:t.atLiveEdge},e=>!e&&r().liveEvent.dvrEnabled&&!r().liveEvent.isArchived&&s.sendEvent(yg.DVR_MODE_ENTERED)),o(e=>{var t;return null==e||null==(t=e.embed)?void 0:t.pip},()=>{n(t=>({playback:p(p({},t.playback),{},{canPlayPictureInPicture:e.canPlayPictureInPicture})}))}),t.on(ki.DRM_CDM_CHANGE,e=>{jR(r().playback.drmCdm,e)||l("drmCdm",e)}),t.on(ki.DRM_KEY_SWITCH,e=>{l("drmMode",e)}),t.on([Am,Lm],()=>{n(e=>({playback:p(p({},e.playback),{},{canSeekForward:a.canSeekForward,canPlayForward:a.canPlayForward})}))}),{playback:c,clearSegment:()=>{e.startTime=null,e.endTime=null},setPlayback:(e,o,a)=>{if("paused"!==e){if("qualities"===e&&"string"==typeof o)return t.fire(__,o),void n(e=>{const t=$f(e.playback.qualities,o);return{playback:p(p({},e.playback),{},{qualities:t,currentQuality:ew(t)})}});if("playbackRates"===e&&"string"==typeof o)return t.fire(x_,o),void n(e=>{const t=$f(e.playback.playbackRates,o);return{playback:p(p({},e.playback),{},{playbackRates:t})}});if("scrubbing"!==e)if("currentTime"!==e||"number"!=typeof o)if("volume"!==e||"number"!=typeof o)if("muted"!==e||"boolean"!=typeof o){if("audioTracks"===e){const e=i.audioTracks.find(e=>e.id===`${o}`);return void(e&&(i.enableAudioTrack(e),t.fire(B_,e)))}l(e,o)}else t.fire(l_,o);else t.fire(s_,o);else switch(null==a?void 0:a.seekType){case"interactive-marker":t.fire(a_,o),t.fire(uh),t.fire(tm,{type:"interactive-marker",action:null==a?void 0:a.action});break;case"nudge":t.fire(ih),t.fire(a_,o),r().playback.playInitiated||t.fire(uh);break;default:t.fire(a_,o)}else o?t.fire(fh):t.fire(vh)}else!1===o?t.fire(uh):t.fire(ch)}}})(i)),(e=>{const{events:t,set:n}=e,r=(e,t)=>{n(n=>({user:p(p({},n.user),{},{[e]:t})}))};return t.on(Jh,()=>r("liked",!0)),t.on(Qh,()=>r("liked",!1)),t.on(ep,()=>r("watchLater",!0)),t.on(tp,()=>r("watchLater",!1)),t.on(ap,(e,t)=>{n(()=>({user:ow({config:t})}))}),t.on(rp,()=>{n(()=>({user:ow(e)}))}),t.on(Lp,()=>r("following",!1)),t.on(Ap,()=>r("following",!0)),{user:ow(e),setUser:(n,i)=>{if("collected"!==n){if("shared"===n){const{share:n}=e.config.embed.settings,r="number"!=typeof n&&null!=n&&n.embed_only?Mh:Nh;return void t.fire(r)}r(n,i)}else t.fire(Vh)}}})(i)),(e=>{const{set:t,get:n,events:r,subscribe:i}=e,o=sw(e);function a(e){e&&n().vod.vodButtonVisible?t(e=>({vod:p(p({},e.vod),{},{vodButtonVisible:!1})})):e||!n().vod.isVOD||n().vod.vodButtonVisible||t(e=>({vod:p(p({},e.vod),{},{vodButtonVisible:!0})}))}return i(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.fullPlayerElement},e=>{a(e)}),i(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.ad},e=>a(e)),r.on(ap,(n,r)=>{t(()=>({vod:sw(p(p({},e),{},{config:r}))}))}),{vod:o,setVod:(e,n)=>{t(t=>({vod:p(p({},t.vod),{},{[e]:n})}))}}})(i)),(e=>{const{set:t,get:n,events:r}=e,i=kI(e);let o=null;const a=(e,r)=>{if("purpose"===e){const e=n().overlay.purpose===r?rv.EMPTY:r;return void t(t=>({overlay:p(p({},t.overlay),{},{purpose:e})}))}t(t=>({overlay:p(p({},t.overlay),{},{[e]:r})}))};return r.on(Uh,(e,t)=>{t||(n().overlay.purpose===e?r.fire(Fh):a("purpose",e))}),r.on(Fh,()=>{o=null,a("purpose",rv.EMPTY),a("showCloseButton",!0)}),r.on(c_,(e,t,i)=>{i||(e===rv.SPATIAL_REDIRECT&&a("spatialRedirectContext",t),n().displayList.accessGate||r.fire(Uh,e))}),r.on(Y_,(e,t)=>{OI(o,e,t)&&(o=e,a("showCloseButton",!1),a("purpose",rv.ERROR))}),r.on(hp,()=>{o===Nf.NETWORK&&(o=null,a("purpose",rv.EMPTY))}),Q.stereoscopic&&r.on(qh,()=>{a("spatialRedirectContext","headset"),a("purpose",rv.SPATIAL_REDIRECT)}),{overlay:i,setOverlay:(e,t)=>{("purpose"!==e||DI(t))&&("purpose"===e&&t===rv.EMPTY||t===rv.INTERACTIVE?r.fire(Fh):("purpose"===e&&DI(t)&&(r.fire(c_,t,{},!0),r.fire(Uh,t,!0)),a(e,t)))}}})(i)),(e=>{const{set:t,events:n}=e,r=gI(e);return n.on(ap,(n,r)=>{t(()=>({title:gI(p(p({},e),{},{config:r}))}))}),n.on([mm,fm],()=>{const{segmentedPlaybackEnabled:n}=e;let r=Kv(Kd,e.config);n&&(r=cg(r,e.startTime,e.endTime)),t(e=>({title:p(p({},e.title),{},{titleLinkUrl:r})}))}),{title:r}})(i)),(e=>{const{events:t,set:n}=e,r=cw(e);return t.on(ap,(e,t)=>{n(()=>({badge:cw({config:t})}))}),{badge:r,setBadge:(e,r)=>{"id"!==e||"number"!=typeof r?((e,t)=>{n(n=>({badge:p(p({},n.badge),{},{[e]:t})}))})(e,r):t.fire(Ih,r)}}})(i)),(e=>{const{set:t,events:n}=e,r=(e,n)=>{t(t=>({chapters:p(p({},t.chapters),{},{[e]:n})}))},i=uw(e),o=({backbone:e})=>{if(e.chaptersTrack){const t=()=>n.fire(mh,null==e?void 0:e.currentChapterID);e.chaptersTrack.addEventListener("cuechange",t)}};return o(e),n.on(mh,e=>{t(t=>({chapters:p(p({},t.chapters),{},{activeCueId:e})}))}),n.on(ki.CHAPTER_CUES_UPDATED,()=>r("chapters",dw(e))),n.on(ap,()=>{t(()=>({chapters:uw(e)})),o(e)}),{chapters:i,setChapters:r}})(i)),(e=>{const{set:t,get:n,events:r,backbone:i}=e,o=_b(),a=e=>{var r;const o=mw(i.textTracks,null==(r=n())||null==(r=r.liveEvent)?void 0:r.isLiveEvent,e);t(e=>({captions:p(p({},e.captions),o)}))},s=pw(e);return r.on(Th,e=>{a(e)}),r.on(ki.TEXT_TRACKS_AVAILABLE,()=>{a()}),r.on(ap,()=>{t(()=>({captions:pw(e)}))}),r.on(au,(e,n=[])=>{i.enabledTextTrack&&"disabled"!==(null==e?void 0:e.mode)&&t(e=>({captions:p(p({},e.captions),{},{activeCues:ni(n)})}))}),r.on(y_,()=>{t(e=>({captions:p(p({},e.captions),{},{activeCues:[]})}))}),{captions:s,setCaptions:(n,i)=>{if("activeTextTrackId"===n&&"string"==typeof i)return"off"!==i&&i?void r.fire(b_,i):void r.fire(y_);if(Object.values(kv).includes(n)&&"string"==typeof i){const a=o[n];return r.fire(T_,a,i),void t(t=>({captions:p(p({},t.captions),fw(e))}))}((e,n)=>{t(t=>({captions:p(p({},t.captions),{},{[e]:n})}))})(n,i)},resetCaptionsStyles:()=>{r.fire(S_),t(t=>({captions:p(p({},t.captions),fw(e))}))}}})(i)),(e=>{const{events:t,set:n,subscribe:r}=e,i=Ew(e),o=(e,t)=>{n(n=>({liveEvent:p(p({},n.liveEvent),{},{[e]:t})}))};t.on(ap,()=>{n(()=>({liveEvent:Ew(e)}))});const{EVENT_ACTIVE:a,EVENT_PENDING:s,EVENT_STARTED:l,EVENT_ENDED:c}=Pu,u={[a]:bg.active,[s]:bg.pending,[l]:bg.started,[c]:bg.ended};Object.getOwnPropertySymbols(u).forEach(e=>t.on(e,()=>n(t=>({liveEvent:p(p({},t.liveEvent),yw(u[e]))}))));const{ARCHIVE_STARTED:d,ARCHIVE_DONE:_,ARCHIVE_ERROR:h}=Pu,m={[d]:Eg.started,[_]:Eg.done,[h]:Eg.error};return Object.getOwnPropertySymbols(m).forEach(e=>t.on(e,()=>n(t=>({liveEvent:p(p({},t.liveEvent),bw(m[e]))})))),t.on(Pu.LIVE_STATS_SUCCESS,({viewerCount:e})=>{n(t=>({liveEvent:p(p({},t.liveEvent),{},{viewerCount:Im(e),liveStatsRequestSucceeded:!0})}))}),t.on(Pu.LIVE_STATS_FAILURE,()=>{o("liveStatsRequestSucceeded",!1)}),t.on(Pu.STREAM_ONLINE,()=>{o("isOnline",!0)}),t.on(Pu.STREAM_OFFLINE,()=>{o("isOnline",!1),Q.iOS&&sS.element&&(t.fire(wh),sS.exit())}),t.on(pm,()=>{o("isPlayable",!0)}),r(e=>{var t;return null==e||null==(t=e.liveEvent)?void 0:t.isStarted},e=>!e&&o("isPlayable",!1)),{liveEvent:i,setLiveEvent:o}})(i)),ww(i)),(e=>{const{set:t,events:n,config:r}=e,i={cuePoints:[]};return n.on(ap,()=>{t(()=>({cuePoints:{cuePoints:[]}}))}),r.embed.on_site&&(n.on(Sh,e=>{t(t=>{const n=t.cuePoints.cuePoints.concat(e);return{cuePoints:p(p({},t.cuePoints),{},{cuePoints:n})}})}),n.on(Ch,e=>{t(t=>{const n=t.cuePoints.cuePoints.filter(t=>t.id!==e.id);return{cuePoints:p(p({},t.cuePoints),{},{cuePoints:n})}})})),{cuePoints:i,setCuePoints:(e,n)=>{t(t=>({cuePoints:p(p({},t.cuePoints),{},{[e]:n})}))}}})(i)),(e=>{const{set:t,get:n,events:r,subscribe:i,element:o,config:a}=e,s={purpose:Dw.EMPTY};let l=function(e){const{request:t,video:n,embed:r}=e.config,{qoe_survey_forced:i,ott:o}=t.flags,{qoe_survey_vote:a}=t.cookie,{duration:s,live_event:l}=n;return!(!i&&(s<60&&!l||!ov(r)||o||av(7776e6)<a/1e3||!(Math.random()<.005)))}(e),c=!!a.request.cookie.languages_toast;const u=(e,r)=>{ov(a.embed)&&zg({newPriority:r,currentPriority:n().toast.purpose,priorityOrder:Nw})&&t(t=>({toast:p(p({},t.toast),{},{[e]:r})}))},d=()=>{l&&zg({newPriority:Dw.QOE_SURVEY,currentPriority:n().toast.purpose,priorityOrder:Nw})&&(e=>{if(!e)return!1;const t=e.getBoundingClientRect(),n=t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth),r="visible"===document.visibilityState;return n&&r})(o)&&(u("purpose",Dw.QOE_SURVEY),r.fire(dm),l=!1)};function _(){t(e=>{const{liveEvent:t,toast:n,playback:r,displayList:i}=e;return t.dvrEnabled&&n.purpose!==Dw.SKIP_TO_LIVE?r.atLiveEdge?mI:t.isPlayable?r.paused&&!r.scrubbing?mI:i.controlBar?{toast:{purpose:Dw.SKIP_TO_LIVE}}:mI:mI:mI})}function h(){t(e=>e.toast.purpose!==Dw.SKIP_TO_LIVE?mI:{toast:{purpose:Dw.EMPTY}})}return i(e=>{var t;return null==e||null==(t=e.playback)?void 0:t.playInitiated},e=>{var t,r;const i=function(e,t){return t?6e5:Math.round(.4*e*1e3)}(null==(t=n())||null==(t=t.playback)?void 0:t.duration,null==(r=n())||null==(r=r.liveEvent)?void 0:r.isLiveEvent);e&&i&&setTimeout(d,i)}),i(e=>{var t;return null==e||null==(t=e.playback)?void 0:t.atLiveEdge},e=>{e?h():_()}),i(e=>{var t;return null==e||null==(t=e.liveEvent)?void 0:t.isEnded},e=>e&&void t(e=>e.liveEvent.dvrEnabled&&e.liveEvent.isEnded?{toast:{purpose:Dw.BROADCAST_OVER}}:mI)),i(e=>{var t;return null==e||null==(t=e.playback)?void 0:t.paused},e=>{n().liveEvent.isEnded||n().playback.scrubbing||(e?h():_())}),i(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.controlBar},e=>e?_():h()),r.on(Cm,()=>{u("purpose",Dw.FRAME_CAPTURED)}),r.on(_h,()=>!c&&void(c||Vy(n())&&a.embed.settings.cc&&(u("purpose",Dw.CHANGE_LANGUAGES),r.fire(_m)))),r.on(_m,()=>{c=!0}),{toast:s,setToast:u,closeToast:()=>{u("purpose",Dw.EMPTY)}}})(i)),(e=>{const{get:t,set:n,subscribe:r,config:i,backbone:o}=e,a=SI(e),s=(e,r)=>{ov(i.embed)&&zg({newPriority:r,currentPriority:t().topCenterActionItem.purpose,priorityOrder:TI})&&n(t=>({topCenterActionItem:p(p({},t.topCenterActionItem),{},{[e]:r})}))},l=e=>{e&&t().topCenterActionItem.purpose!==e||s("purpose",yI.EMPTY)},c=()=>l(yI.UNMUTE),u=()=>s("purpose",yI.WATCH_FULL_VIDEO),d=()=>l(yI.WATCH_FULL_VIDEO);return r(e=>{var t;return null==e||null==(t=e.playback)?void 0:t.loadedData},e=>{if(!e)return;const n=t(),r=n.embed.autoPlay||n.liveEvent.isLiveEvent,i=0===n.playback.volume||n.playback.muted,a=ov(n.embed),l=o.hasAudio||n.liveEvent.isLiveEvent;i&&r&&a&&l&&n.embed.unmuteButton&&s("purpose",yI.UNMUTE)}),r(e=>{var t;return null==e||null==(t=e.playback)?void 0:t.volume},e=>e>0&&c()),r(e=>{var t;return null==e||null==(t=e.playback)?void 0:t.muted},e=>!e&&c()),r(e=>{var t;return null==e||null==(t=e.liveEvent)?void 0:t.isEnded},e=>e&&c()),r(e=>{var t;return null==e||null==(t=e.playback)?void 0:t.isSegmentedPlaybackEnabled},()=>{CI(t())?u():d()}),r(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.controlBar},()=>{CI(t())?u():d()}),r(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.outro},()=>{CI(t())?u():d()}),r(e=>{var t;return null==e||null==(t=e.playback)?void 0:t.paused},()=>{CI(t())?u():d()}),r(e=>{var t;return null==e||null==(t=e.playback)?void 0:t.hasFirstTimeUpdate},e=>{if(i.video.spatial&&e){const e=t().embed.cards;if((null==e?void 0:e.length)&&e[0].timecode<15)return;setTimeout(()=>{s("purpose",yI.SPATIAL_INSTRUCTIONS_CLICK),setTimeout(()=>l(),3e3)},7e3),Q.android||setTimeout(()=>{s("purpose",yI.SPATIAL_INSTRUCTIONS_ARROWS),setTimeout(()=>l(),3e3)},14e3)}}),{topCenterActionItem:a,setTopCenterActionItem:s,closeTopCenterActionItem:l}})(i)),(e=>{const{events:t,set:n}=e,r=(e,t)=>{n(n=>({spatial:p(p({},n.spatial),{},{[e]:t})}))};return t.on(Ni.WEBVR_ENTER,()=>{r("webVRActive",!0)}),t.on(Ni.WEBVR_EXIT,()=>{r("webVRActive",!1)}),t.on(Ni.CAMERA_UPDATE,e=>{n(t=>({spatial:p(p({},t.spatial),{},{latitude:e.pitch,longitude:e.yaw})}))}),{spatial:function(e){const{spatial:t}=e.config.video;return{webVRActive:!1,longitude:0,latitude:0,fieldOfView:t?t.fov:0}}(e),setSpatial:r}})(i)),Fw(i)),(e=>{const{set:t,events:n,subscribe:r,get:i}=e,o=(e,n)=>{t(t=>({alert:p(p({},t.alert),{},{[e]:n})}))},a=e=>{t(t=>{const n=t.embed.background;return t.displayList.overlay||n?mI:{alert:p(p({},t.alert),{},{currentAlert:e})}})};return n.on($d,()=>a(NI.SPATIAL_UNSUPPORTED)),n.on(qd,()=>a(NI.SPATIAL_FAILURE)),r(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.overlay},e=>{e&&i().alert.currentAlert!==NI.EMPTY&&o("currentAlert",NI.EMPTY)}),{alert:{currentAlert:NI.EMPTY},setAlert:o}})(i)),(e=>{const{set:t}=e,n=(e,n)=>{t(t=>({chromecast:p(p({},t.chromecast),{},{[e]:n})}))},r=Hw(e);return vy.on([hy.initialized,hy.castStateChanged],()=>{n("isChromecastReady",Ww())}),vy.on(hy.buffering,()=>{n("isChromecastBuffering",!0)}),vy.on(hy.error,()=>{n("supportsChromecast",!1)}),vy.on(hy.connected,e=>{t(t=>{var n;return{chromecast:p(p({},t.chromecast),{},{isChromecastConnected:!0,receiverFriendlyName:null==e||null==(n=e.receiver)?void 0:n.friendlyName})}})}),vy.on(hy.disconnected,()=>{t(()=>({chromecast:Hw(e)}))}),vy.on(hy.playing,()=>{t(e=>({chromecast:p(p({},e.chromecast),{},{isChromecastPlaying:!0,isChromecastBuffering:!1})}))}),vy.on([hy.error,hy.idle,hy.paused,hy.ended,hy.disconnected],()=>{t(e=>({chromecast:p(p({},e.chromecast),{},{isChromecastPlaying:!1,isChromecastBuffering:!1})}))}),{chromecast:r}})(i)),{},{config:o,backbone:a,element:s,name:(null==l?void 0:l.name)||Lv.VimeoPlayer,verifyConfig:c,events:u,subscribe:r,updatePhpTokens:d,progressController:_,bigPicture:h,debugCollector:m});return u.fire(bm,f),f})(t,n,r)}),children:t}):null},qw=e=>`opacity ${e}ms ease-out`,zw=({children:e,visible:t,duration:n=250,styleOverrides:r={},onFaded:i,delay:o=0,fadeIn:a=!0,fadeOut:s=!0})=>{const l=jw(e=>e.embed.background||!e.embed.controls||e.displayList.accessGate),c=qw(n),u={enter:{opacity:0},enterActive:{opacity:1,transition:c,transitionDelay:`${o}ms`},enterDone:{opacity:1},exit:{opacity:1},exitActive:{opacity:0,transition:c,transitionDelay:`${o}ms`},exitDone:l?{display:"none"}:{overflow:"hidden",opacity:0,pointerEvents:"none"}};return Object.keys(r).forEach(e=>{e in u&&Object.assign(u[e],r[e])}),a||delete u.enter,s||delete u.exit,MP(OL,{in:t,duration:n,styles:u,alwaysMounted:!0,onExited:()=>{i&&i()},children:e})};const Kw=({children:e,text:t})=>{const n=uL(t),[r,i]=aL(!1),[o,a]=aL(!1),s=()=>{o||a(!0)},l=()=>{r&&(s(),i(!1))},c=()=>{r||Q.touch||(s(),i(!0))},u=_L(()=>{o&&a(!1)},[o]),d={className:"LabeledButton_module_box__a4450693",onMouseEnter:c,onMouseLeave:l,onFocus:c,onBlur:l},_=p({className:"LabeledButton_module_labeledButton__a4450693"},Bf(t=>{l(),e.props.onClick&&e.props.onClick(t)})),h=`${qw(YE)} transform 250 ease-out`,m={visible:r,styleOverrides:{enterActive:{transform:"translateX(0)",transition:h},exitActive:{transform:"translateX(5px)",transition:h}}};return n.current!==t&&(o?m.onFaded=u:n.current=t),MP("div",p(p({},d),{},{children:[MP(zw,p(p({},m),{},{children:MP("label",p(p({},_),{},{role:"presentation","aria-hidden":"true",children:MP("span",{children:n.current})}))})),e]}))};const Xw=["href","children","element","className","targetBlank"],Zw=VL((e,t)=>{let{href:n,children:r,element:i="div",className:o="",targetBlank:a=!0}=e,s=m(e,Xw);const l=SA(i,p(p({},s),{},{className:o}),r);return n?MP("a",p(p(p({href:n,className:Yf("Link_module_link__bdf8051d",o),ref:t,"aria-describedby":Sf.NEW_WINDOW_DESCRIPTION},a?{target:"_blank",rel:"noopener"}:{}),s),{},{children:r})):l}),Jw=["direction"],Qw=["fill"],eO={[OP.CLOSE]:e=>MP("svg",p(p({viewBox:"0 0 20 20"},Object.assign({},(_(e),e))),{},{children:MP("path",{d:"M11.06 10l4.597-4.596a.749.749 0 1 0-1.061-1.06L10 8.938 5.404 4.343a.749.749 0 1 0-1.06 1.061L8.938 10l-4.596 4.596a.749.749 0 1 0 1.061 1.06L10 11.062l4.596 4.596a.749.749 0 1 0 1.06-1.061L11.062 10z",fill:"#fff",fillRule:"evenodd"})})),[OP.AIRPLAY]:e=>MP("svg",p(p({viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg","data-airplay-icon":!0},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.6666 4.99992H3.33329V13.3333H5.43825L4.0911 14.9999H3.33329C2.41282 14.9999 1.66663 14.2537 1.66663 13.3333V4.99992C1.66663 4.07944 2.41282 3.33325 3.33329 3.33325H16.6666C17.5871 3.33325 18.3333 4.07944 18.3333 4.99992V13.3333C18.3333 14.2537 17.5871 14.9999 16.6666 14.9999H15.9088L14.5617 13.3333H16.6666V4.99992ZM10.7777 12.6288C10.3774 12.1336 9.62249 12.1336 9.22224 12.6288L6.26454 16.288C5.73597 16.9419 6.2014 17.9166 7.04225 17.9166H12.9577C13.7985 17.9166 14.2639 16.9419 13.7354 16.288L10.7777 12.6288Z"})})),[OP.DOLBY_VISION]:e=>MP("svg",p(p({viewBox:"0 0 844 126","aria-labelledby":"dv-logo-title"},Object.assign({},(_(e),e))),{},{children:[MP("title",{id:"dv-logo-title",children:"Dolby Vision"}),MP("path",{d:"M478.94 30.12l-18.96 42.63-18.95-42.63h-15.9l26.9 60.48-6.59 14.85a7.77 7.77 0 01-10.25 3.94l-2.08-.93-5.88 13.19h.03l5.04 2.26a18.86 18.86 0 0024.85-9.56l37.69-84.23h-15.9zm-66.52 33.04c0-11-9.05-20.05-20.06-20.05a20.08 20.08 0 00-19.02 26.37 20.05 20.05 0 0039.08-6.32zm13.2.13a33.3 33.3 0 01-33.26 33.26 33.08 33.08 0 01-19.02-6v6.02h-14.58V.47h14.58v35.55c5.4-3.77 11.96-6 19.02-6a33.3 33.3 0 0133.27 33.27zm-93.64 33.29h14.55V.48h-14.55v96.1zm-22.62-33.4c0-11-9.05-20.06-20.06-20.06a20.07 20.07 0 000 40.11c11 0 20.06-8.92 20.06-20.05zm13.2.03a33.3 33.3 0 01-33.26 33.26 33.3 33.3 0 01-33.26-33.26 33.3 33.3 0 0133.26-33.27 33.3 33.3 0 0133.27 33.27zM234.1 48.47a33.5 33.5 0 00-33.44-33.45h-20.12v66.9h20.12a33.5 33.5 0 0033.44-33.45zm14.56 0c0 26.47-21.54 48-48 48h-34.68v-96h34.68c26.46 0 48 21.53 48 48zM136.92.47h-14.17c-26.44 0-48 21.56-48 48s21.56 48 48 48h14.17v-96zM.36 96.47h14.16c26.45 0 48-21.56 48-48s-21.55-48-48-48H.36v96zm789.18-66.35c.4 4.2.54 12.61.54 16.14v50.32h7.46V62.8c0-17.63 9.9-26.44 20.88-26.44 13.96 0 17.9 10.3 17.9 22.78v37.44h7.32V56.43c0-14.92-7.05-26.3-23.6-26.3-9.48 0-18.97 5.55-22.63 14.23h-.27c0-3.39-.28-10.7-.55-14.24h-7.05zM769.7 63.28c0 15.02-9.88 26.65-25.7 26.65-15.7 0-25.57-11.63-25.57-26.65 0-15.01 9.88-26.78 25.57-26.78 15.82 0 25.7 11.77 25.7 26.78zm7.57 0c0-19.2-13.66-33.14-33.27-33.14-19.48 0-33.14 13.94-33.14 33.14 0 19.07 13.66 33.28 33.14 33.28 19.61 0 33.27-14.2 33.27-33.28zm-78.51-33.16h-7.85v66.44h7.85V30.12zm1.57-24.1a5.58 5.58 0 00-5.56-5.55 5.55 5.55 0 000 11.12c2.85 0 5.56-2.3 5.56-5.56zm-24.88 34.81c-4.06-6.91-12.04-10.7-21.24-10.7-10.96 0-21.51 5.42-21.51 17.62 0 23.46 36.66 13.01 36.66 30.24 0 8.8-7.71 12.33-15.56 12.33a21.65 21.65 0 01-18.13-9.76l-5.81 4.2c5.4 8 14.47 11.8 23.94 11.8 11.5 0 22.87-5.7 22.87-19.12 0-10.3-7.71-15.18-21.1-18.17-10.43-2.3-15.84-4.74-15.84-12.06 0-7.87 7.58-10.98 14.21-10.98 7.03 0 12.72 3.38 15.83 8.67l5.68-4.07zM617.6 30.1h-7.46v66.48h7.46V30.1zm1.76-23.96A5.58 5.58 0 00613.8.6a5.56 5.56 0 000 11.11c2.85 0 5.56-2.3 5.56-5.56zm-61.1 80.8h.27L590.92.47h8.27l-36.6 96.1h-8.68L517.44.48h8.4l32.4 86.47z",fill:"currentColor",fillRule:"nonzero"})]})),[OP.PIP]:e=>{let{direction:t="enter"}=e;return MP("svg",p(p({viewBox:"0 0 16 12"},m(e,Jw)),{},{children:[MP("polygon",{className:bf.FILL,points:"6 8 1 8 1 1 14 1 14 6 15 6 15 0 0 0 0 9 6 9 6 8"}),MP("rect",{className:bf.FILL,x:"7",y:"7",width:"9",height:"5"}),MP("polyline",{className:bf.FILL,transform:"enter"===t?"translate(4, 4) rotate(180) translate(-4, -4)":"",points:"5.33 2 5.33 3 3.67 3 5.67 5 5 5.67 3 3.67 3 5.33 2 5.33 2 2"})]}))},[OP.ENTER_FULLSCREEN]:()=>MP("svg",{className:Tf.ENTER_FULLSCREEN_ICON,width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","data-enter-fullscreen":!0,children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 5L17.5858 5L14.2929 8.29292C13.9024 8.68345 13.9024 9.31661 14.2929 9.70714C14.6834 10.0977 15.3166 10.0977 15.7071 9.70714L19 6.41426V8C19 8.55228 19.4477 9 20 9C20.5523 9 21 8.55228 21 8V4C21 3.73478 20.8946 3.48043 20.7071 3.29289C20.5196 3.10536 20.2652 3 20 3H16C15.4477 3 15 3.44772 15 4C15 4.55228 15.4477 5 16 5ZM5 8.00002V6.4142L8.29292 9.70712C8.68345 10.0976 9.31661 10.0976 9.70714 9.70712C10.0977 9.3166 10.0977 8.68343 9.70714 8.29291L6.41424 5.00001L8 5.00002C8.55228 5.00002 9 4.5523 9 4.00002C9 3.44773 8.55228 3.00002 8 3.00002H4C3.73478 3.00002 3.48043 3.10537 3.29289 3.29291C3.10536 3.48044 3 3.7348 3 4.00002V8.00002C3 8.5523 3.44772 9.00001 4 9.00001C4.55228 9.00001 5 8.5523 5 8.00002ZM8.00002 19H6.4142L9.70712 15.7071C10.0976 15.3166 10.0976 14.6834 9.70712 14.2929C9.3166 13.9024 8.68343 13.9024 8.29291 14.2929L5.00001 17.5858V16C5.00001 15.4477 4.5523 15 4.00001 15C3.44773 15 3.00002 15.4477 3.00002 16L3.00002 20C3.00002 20.2652 3.10537 20.5196 3.29291 20.7071C3.48044 20.8947 3.7348 21 4.00002 21H8.00002C8.5523 21 9.00001 20.5523 9.00001 20C9.00001 19.4477 8.5523 19 8.00002 19ZM19 17.5858V16C19 15.4477 19.4477 15 20 15C20.5523 15 21 15.4477 21 16V20C21 20.2652 20.8946 20.5196 20.7071 20.7071C20.5196 20.8947 20.2652 21 20 21H16C15.4477 21 15 20.5523 15 20C15 19.4477 15.4477 19 16 19H17.5858L14.2929 15.7071C13.9023 15.3166 13.9023 14.6834 14.2929 14.2929C14.6834 13.9024 15.3166 13.9024 15.7071 14.2929L19 17.5858Z"})}),[OP.EXIT_FULLSCREEN]:()=>MP("svg",{className:Tf.EXIT_FULLSCREEN_ICON,width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","data-exit-fullscreen":!0,children:[MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.41425 7.00003L8.41425 4.41425L10.4142 4.41425L10.4142 9.41425C10.4142 9.67946 10.3089 9.93382 10.1214 10.1214C9.93382 10.3089 9.67946 10.4142 9.41425 10.4142L4.41425 10.4142L4.41425 8.41425L7.00003 8.41425L3 4.41422L4.41422 3L8.41425 7.00003Z"}),MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.0097 8.41425L21 4.42398L19.5858 3.00977L15.5858 7.0098L15.5858 4.42401L13.5858 4.42401L13.5858 9.41424C13.5858 9.67946 13.6911 9.93382 13.8787 10.1214C14.0662 10.3089 14.3205 10.4142 14.5858 10.4142L19.5858 10.4142L19.5858 8.41425L17.0097 8.41425Z"}),MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.41419 17L4.41421 21L3 19.5858L6.99997 15.5858L4.41419 15.5858L4.41419 13.5858L9.41419 13.5858C9.96647 13.5858 10.4142 14.0335 10.4142 14.5858L10.4142 19.5858L8.41419 19.5858L8.41419 17Z"}),MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5858 16.9986L19.5855 21L21 19.5861L17.0015 15.5858L19.5813 15.5858L19.5813 13.5858L14.5858 13.5858C14.3206 13.5858 14.0662 13.6912 13.8787 13.8787C13.6912 14.0662 13.5858 14.3206 13.5858 14.5858L13.5858 19.5858L15.5858 19.5858L15.5858 16.9986Z"})]}),[OP.GEAR]:e=>MP("svg",p(p({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.16668 1.66699C8.2462 1.66699 7.50001 2.41318 7.50001 3.33366V4.72835C7.21484 4.86382 6.94241 5.02175 6.68499 5.19984L5.46953 4.4981C4.68103 4.04285 3.66009 4.31415 3.20034 5.11047L2.36526 6.55686C1.90707 7.35046 2.17605 8.3701 2.96953 8.82822L4.18535 9.53017C4.17298 9.68526 4.16668 9.84206 4.16668 10.0003C4.16668 10.1586 4.17298 10.3154 4.18535 10.4705L2.96953 11.1724C2.17605 11.6306 1.90707 12.6502 2.36526 13.4438L3.20034 14.8902C3.66009 15.6865 4.68103 15.9578 5.46953 15.5026L6.685 14.8008C6.94241 14.9789 7.21484 15.1368 7.50001 15.2723V16.667C7.50001 17.5875 8.2462 18.3337 9.16668 18.3337H10.8333C11.7538 18.3337 12.5 17.5875 12.5 16.667V15.2723C12.7851 15.1369 13.0574 14.979 13.3147 14.801L14.5298 15.5026C15.3183 15.9578 16.3393 15.6865 16.799 14.8902L17.6341 13.4438C18.0923 12.6502 17.8233 11.6306 17.0298 11.1724L15.8146 10.4708C15.827 10.3156 15.8333 10.1587 15.8333 10.0003C15.8333 9.84193 15.827 9.68501 15.8146 9.52981L17.0298 8.82822C17.8233 8.3701 18.0923 7.35046 17.6341 6.55686L16.799 5.11047C16.3393 4.31415 15.3183 4.04285 14.5298 4.4981L13.3147 5.19963C13.0574 5.02162 12.7851 4.86377 12.5 4.72835V3.33366C12.5 2.41318 11.7538 1.66699 10.8333 1.66699H9.16668ZM12.5 10.0003C12.5 11.381 11.3807 12.5003 10 12.5003C8.6193 12.5003 7.50001 11.381 7.50001 10.0003C7.50001 8.61961 8.6193 7.50033 10 7.50033C11.3807 7.50033 12.5 8.61961 12.5 10.0003Z"})})),[OP.VIMEO]:e=>MP("svg",p(p({width:"54",height:"18",viewBox:"0 0 54 18",role:"img",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{children:MP("path",{fill:"#fff",fillRule:"evenodd",clipRule:"evenodd",d:"M17.1192 1.32529C17.1011 1.76753 16.8758 2.19197 16.4427 2.59836C15.9559 3.05781 15.3789 3.28759 14.7119 3.28759C13.6845 3.28759 13.1881 2.84607 13.2245 1.96218C13.2418 1.50286 13.5168 1.06061 14.0487 0.636176C14.5808 0.21258 15.1711 0 15.8207 0C16.1992 0 16.5146 0.146412 16.7675 0.437671C17.0197 0.729653 17.1367 1.02548 17.1192 1.32529ZM17.7011 13.0761C17.6 13.1708 17.4962 13.2641 17.3896 13.3562C16.181 14.3855 14.9735 14.9003 13.766 14.9003C13.2063 14.9003 12.778 14.7228 12.4809 14.3676C12.1837 14.0126 12.0438 13.5517 12.062 12.9831C12.0794 12.3977 12.2642 11.4922 12.6159 10.2672C12.9677 9.04241 13.1439 8.3853 13.1439 8.29652C13.1439 7.83551 12.981 7.60428 12.6571 7.60428C12.555 7.60428 12.2769 7.77023 11.8227 8.10073C11.4798 9.10988 10.7329 10.3442 9.58186 11.8036C7.94436 13.9012 6.5589 14.9501 5.42559 14.9501C4.72371 14.9501 4.1294 14.3115 3.64413 13.0338L2.67201 9.5206C2.31167 8.24356 1.92519 7.60426 1.51184 7.60426C1.42173 7.60426 1.10644 7.79121 0.566591 8.16344L0 7.44389C0.59431 6.92922 1.18068 6.41456 1.75765 5.89905C2.55027 5.22401 3.14543 4.86899 3.54217 4.83314C4.47949 4.74436 5.05646 5.37584 5.27308 6.72759C5.50692 8.18593 5.66896 9.09304 5.75981 9.44818C6.03016 10.6581 6.32726 11.2625 6.65219 11.2625C6.90423 11.2625 7.28277 10.87 7.78781 10.0852C8.29201 9.3002 8.56236 8.70301 8.59875 8.29265C8.67067 7.61521 8.40032 7.2757 7.78781 7.2757C7.49939 7.2757 7.20217 7.34115 6.89641 7.47036C7.48828 5.55955 8.61926 4.63151 10.2884 4.68432C11.403 4.71661 11.9869 5.3614 12.04 6.6187C12.3087 6.37895 12.5773 6.1391 12.846 5.89907C13.6213 5.22403 14.1982 4.86889 14.5776 4.83316C15.1719 4.78023 15.609 4.95226 15.8887 5.35096C16.1677 5.74953 16.2713 6.2666 16.2001 6.90362C15.9654 7.9836 15.7124 9.35472 15.4422 11.0178C15.424 11.7794 15.7037 12.1594 16.2807 12.1594C16.5328 12.1594 16.9833 11.897 17.6329 11.3707L17.6568 11.3514C17.6982 10.9804 17.7648 10.5395 17.8569 10.029C18.0055 9.20512 18.0884 8.56353 18.1059 8.10264C18.1414 7.78419 18.06 7.62455 17.8624 7.62455C17.7541 7.62455 17.4475 7.8044 16.9425 8.16339L16.2936 7.44397C16.3838 7.37383 16.9512 6.85832 17.9976 5.899C18.7546 5.20689 19.2684 4.85174 19.5387 4.83382C20.0074 4.79809 20.3859 4.98877 20.6745 5.40623C20.9629 5.82357 21.1075 6.3078 21.1075 6.85832C21.1075 7.03589 21.0894 7.2048 21.0539 7.36457C21.3241 6.95649 21.6394 6.60063 22.0006 6.29854C22.8296 5.58837 23.7584 5.18812 24.7858 5.09933C25.6694 5.02847 26.3001 5.23251 26.6795 5.71217C26.9852 6.10304 27.1291 6.66294 27.1117 7.39091C27.2382 7.28504 27.3733 7.16907 27.518 7.04443C27.9322 6.56489 28.3376 6.18329 28.7343 5.899C29.4013 5.41935 30.096 5.15311 30.8168 5.09933C31.6822 5.02847 32.3041 5.23179 32.6828 5.70988C33.0067 6.09919 33.1514 6.65669 33.1159 7.38165C33.0976 7.87755 32.976 8.59866 32.7508 9.54546C32.5246 10.4923 32.4124 11.0358 32.4124 11.1775C32.3943 11.5498 32.4307 11.8059 32.5207 11.9476C32.6108 12.0893 32.8266 12.1593 33.1696 12.1593C33.3237 12.1593 33.5517 12.0614 33.8539 11.8652C33.8254 11.6415 33.8136 11.4089 33.8184 11.1674C33.8359 9.72924 34.4855 8.36197 35.7659 7.06471C37.1718 5.64451 38.8307 4.9335 40.7418 4.9335C42.5089 4.9335 43.4462 5.64282 43.5545 7.06002C43.6264 7.96328 43.1214 8.89372 42.0402 9.85075C40.8856 10.8964 39.4338 11.5607 37.6855 11.844C38.0096 12.2871 38.4964 12.5083 39.146 12.5083C40.4438 12.5083 41.8593 12.1836 43.3925 11.5326C43.4607 11.5043 43.528 11.4758 43.5944 11.4474C43.5823 11.339 43.5733 11.2286 43.5673 11.1161C43.4765 9.5907 44.0351 8.18902 45.2443 6.9121C46.5421 5.49333 48.1733 4.78413 50.1388 4.78413C51.4003 4.78413 52.3559 5.20147 53.0054 6.03459C53.6187 6.79769 53.8977 7.78179 53.8439 8.98725C53.7714 10.6192 53.1587 12.0294 52.0049 13.2175C50.851 14.4058 49.4173 15 47.7047 15C46.2805 15 45.1985 14.5475 44.4596 13.6427C44.2931 13.4353 44.1496 13.2118 44.0292 12.9724C43.8357 13.0907 43.6324 13.209 43.4193 13.3273C41.5083 14.4097 39.5697 14.9501 37.605 14.9501C36.1444 14.9501 35.098 14.4704 34.4673 13.512C34.4211 13.4446 34.3774 13.3759 34.3361 13.3059L34.2784 13.3561C33.0701 14.3856 31.8623 14.9003 30.6549 14.9003C29.4819 14.9003 28.9146 14.2618 28.9507 12.9832C28.9682 12.4147 29.0813 11.7319 29.2882 10.9331C29.4953 10.1341 29.6084 9.51274 29.6266 9.06893C29.6448 8.39462 29.4368 8.05668 29.0021 8.05668C28.532 8.05668 27.9716 8.60792 27.3204 9.70896C26.6328 10.8637 26.2614 11.9826 26.2076 13.0657C26.1712 13.8304 26.2471 14.4168 26.4352 14.8247C25.177 14.8606 24.2956 14.6558 23.793 14.2119C23.3426 13.821 23.1363 13.1733 23.1727 12.2669C23.1901 11.6985 23.2786 11.13 23.4382 10.5617C23.597 9.99324 23.6856 9.48711 23.7038 9.04247C23.7402 8.38536 23.4959 8.05668 22.9727 8.05668C22.5206 8.05668 22.0329 8.56353 21.5098 9.57578C20.9866 10.588 20.6974 11.6455 20.6436 12.7466C20.6072 13.7416 20.672 14.4338 20.8372 14.8247C19.5995 14.8606 18.7207 14.6035 18.2006 14.0538C17.9631 13.8005 17.7966 13.4746 17.7011 13.0761ZM40.3632 7.9913C40.3807 7.51477 40.183 7.27573 39.7689 7.27573C39.2283 7.27573 38.6798 7.64254 38.1219 8.37592C37.5638 9.10942 37.2754 9.81177 37.2579 10.483C37.2477 10.483 37.2477 10.5982 37.2579 10.8279C38.1399 10.5101 38.9051 10.0243 39.5531 9.37024C40.0748 8.80505 40.345 8.34476 40.3632 7.9913ZM50.5847 7.56539C50.738 7.96564 50.8059 8.40644 50.7877 8.88682C50.7515 9.74099 50.4905 10.5593 50.0038 11.3426C49.4268 12.2864 48.7321 12.7574 47.9212 12.7574C47.56 12.7574 47.2802 12.562 47.0827 12.1703C46.9026 11.8324 46.8212 11.4408 46.8393 10.9953C46.8748 10.0882 47.1452 9.23414 47.6511 8.43291C48.2453 7.4541 49.0025 6.96434 49.9223 6.96434C50.2102 6.96434 50.4313 7.16513 50.5847 7.56539Z"})})),[OP.VIMEO_SMALL]:e=>MP("svg",p(p({viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{children:MP("path",{fill:"#fff",fillRule:"evenodd",clipRule:"evenodd",d:"M18.7781 6.00913C18.6943 7.81161 17.4171 10.2795 14.9465 13.4122C12.3922 16.6841 10.231 18.3203 8.46324 18.3203C7.36838 18.3203 6.44133 17.3242 5.68438 15.331C5.17905 13.5043 4.67352 11.6776 4.168 9.85093C3.60591 7.8589 3.00305 6.86167 2.35829 6.86167C2.21771 6.86167 1.7259 7.1533 0.88381 7.73392L0 6.61152C0.927048 5.80871 1.84171 5.00589 2.74171 4.20176C3.9781 3.14879 4.90648 2.59501 5.52533 2.53908C6.98743 2.40059 7.88743 3.38562 8.22533 5.49419C8.5901 7.76902 8.84286 9.18398 8.98457 9.73796C9.40629 11.6253 9.86971 12.5681 10.3766 12.5681C10.7697 12.5681 11.3602 11.9557 12.148 10.7316C12.9345 9.50713 13.3562 8.57558 13.413 7.93547C13.5251 6.87875 13.1034 6.34917 12.148 6.34917C11.6981 6.34917 11.2345 6.45126 10.7575 6.65281C11.6808 3.67218 13.445 2.22456 16.0486 2.30695C17.9792 2.36287 18.8891 3.59693 18.7781 6.00913Z"})})),[OP.ENTER_PICTURE_IN_PICTURE]:e=>MP("svg",p(p({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{"data-enter-pip":!0,children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33329 4.99992H16.6666V9.99992H18.3333V4.99992C18.3333 4.07944 17.5871 3.33325 16.6666 3.33325H3.33329C2.41282 3.33325 1.66663 4.07944 1.66663 4.99992V13.3333C1.66663 14.2537 2.41282 14.9999 3.33329 14.9999H8.33329V13.3333H3.33329V4.99992ZM9.99996 12.6666C9.99996 12.1143 10.4477 11.6666 11 11.6666H17.3333C17.8856 11.6666 18.3333 12.1143 18.3333 12.6666V17.3333C18.3333 17.8855 17.8856 18.3333 17.3333 18.3333H11C10.4477 18.3333 9.99996 17.8855 9.99996 17.3333V12.6666ZM7.91663 7.60408V8.59492L6.17079 6.84909C6.05829 6.73659 5.90163 6.66659 5.72913 6.66659C5.38413 6.66659 5.10413 6.94575 5.10413 7.29159C5.10413 7.46409 5.17413 7.61992 5.28746 7.73325L7.03246 9.47909H6.04163C5.69663 9.47909 5.41663 9.75825 5.41663 10.1041C5.41663 10.4491 5.69663 10.7291 6.04163 10.7291H8.54163C8.88663 10.7291 9.16663 10.4491 9.16663 10.1041V7.60408C9.16663 7.25825 8.88663 6.97909 8.54163 6.97909C8.19663 6.97909 7.91663 7.25825 7.91663 7.60408Z",fill:"white"})})),[OP.EXIT_PICTURE_IN_PICTURE]:e=>MP("svg",p(p({width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","data-exit-pip":!0},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 6H20V12H22V6C22 4.89543 21.1046 4 20 4H4C2.89543 4 2 4.89543 2 6V16C2 17.1046 2.89543 18 4 18H10V16H4V6ZM12 15C12 14.4477 12.4477 14 13 14H21C21.5523 14 22 14.4477 22 15V21C22 21.5523 21.5523 22 21 22H13C12.4477 22 12 21.5523 12 21V15ZM7.625 11.75V10.561L9.72 12.656C9.855 12.791 10.043 12.875 10.25 12.875C10.664 12.875 11 12.54 11 12.125C11 11.918 10.916 11.731 10.78 11.595L8.686 9.5H9.875C10.289 9.5 10.625 9.165 10.625 8.75C10.625 8.336 10.289 8 9.875 8L6.875 8C6.461 8 6.125 8.336 6.125 8.75V11.75C6.125 12.165 6.461 12.5 6.875 12.5C7.289 12.5 7.625 12.165 7.625 11.75Z"})})),[OP.PAUSE]:e=>MP("svg",p(p({width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","data-pause-icon":!0},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",className:bf.FILL,d:"M8 4C6.89543 4 6 4.89543 6 6V18C6 19.1046 6.89543 20 8 20C9.10457 20 10 19.1046 10 18V6C10 4.89543 9.10457 4 8 4ZM16 4C14.8954 4 14 4.89543 14 6V18C14 19.1046 14.8954 20 16 20C17.1046 20 18 19.1046 18 18V6C18 4.89543 17.1046 4 16 4Z"})})),[OP.PLAY]:e=>MP("svg",p(p({width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","data-play-icon":!0},Object.assign({},(_(e),e))),{},{children:MP("path",{d:"M19 12C19 12.3557 18.8111 12.6846 18.5039 12.8638L6.50387 19.8638C6.19458 20.0442 5.81243 20.0455 5.50194 19.8671C5.19145 19.6888 5 19.3581 5 19L5 5C5 4.64193 5.19145 4.3112 5.50194 4.13286C5.81243 3.95452 6.19458 3.9558 6.50387 4.13622L18.5039 11.1362C18.8111 11.3154 19 11.6443 19 12Z",className:bf.FILL})})),[OP.REPLAY]:e=>MP("svg",p(p({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{children:MP("path",{className:bf.FILL,d:"M0 1V5C0 5.6 0.4 6 1 6H5C5.6 6 6 5.6 6 5C6 4.4 5.6 4 5 4H3.5C4.6 2.8 6.2 2 8 2C11.3 2 14 4.7 14 8C14 11.3 11.3 14 8 14C5.7 14 3.60001 12.7 2.60001 10.6C2.40001 10.1 1.79999 9.89998 1.29999 10.1C0.799988 10.3 0.599988 10.9 0.799988 11.4C2.09999 14.2 5 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0C5.7 0 3.5 1.00001 2 2.70001V1C2 0.4 1.6 0 1 0C0.4 0 0 0.4 0 1Z"})})),[OP.CHAPTERS]:e=>MP("svg",p(p({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.6665 4.1665V4.99984V5.83317H2.49984H3.33317V4.99984V4.1665H2.49984H1.6665ZM5.83317 4.99984C5.83317 4.5396 6.20627 4.1665 6.6665 4.1665H17.4998C17.9601 4.1665 18.3332 4.5396 18.3332 4.99984C18.3332 5.46007 17.9601 5.83317 17.4998 5.83317H6.6665C6.20627 5.83317 5.83317 5.46007 5.83317 4.99984ZM5.83317 9.99984C5.83317 9.5396 6.20627 9.1665 6.6665 9.1665H17.4998C17.9601 9.1665 18.3332 9.5396 18.3332 9.99984C18.3332 10.4601 17.9601 10.8332 17.4998 10.8332H6.6665C6.20627 10.8332 5.83317 10.4601 5.83317 9.99984ZM6.6665 14.1665C6.20627 14.1665 5.83317 14.5396 5.83317 14.9998C5.83317 15.4601 6.20627 15.8332 6.6665 15.8332H17.4998C17.9601 15.8332 18.3332 15.4601 18.3332 14.9998C18.3332 14.5396 17.9601 14.1665 17.4998 14.1665H6.6665ZM1.6665 9.99984V9.1665H2.49984H3.33317V9.99984V10.8332H2.49984H1.6665V9.99984ZM3.33317 14.9998V14.1665H2.49984H1.6665V14.9998V15.8332H2.49984H3.33317V14.9998Z"})})),[OP.POINT]:e=>MP("svg",p(p({width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{children:MP("circle",{className:bf.FILL,cx:"4",cy:"4",r:"4"})})),[OP.CC]:e=>MP("svg",p(p({viewBox:"0 0 24 24","data-cc-icon":!0},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 6H4V18H20V6ZM4 4C2.89543 4 2 4.89543 2 6V18C2 19.1046 2.89543 20 4 20H20C21.1046 20 22 19.1046 22 18V6C22 4.89543 21.1046 4 20 4H4ZM11.486 12.8238C11.3743 13.5215 11.0859 14.0974 10.6307 14.5377C10.1676 14.9833 9.56909 15.2094 8.85284 15.2094C7.97089 15.2094 7.26496 14.9058 6.7557 14.3063C6.25372 13.7133 6 12.8972 6 11.8775C6 10.7761 6.28832 9.91206 6.85646 9.30664C7.36026 8.77164 8.00852 8.5 8.78364 8.5C9.81431 8.5 10.5828 8.86515 11.0677 9.58479C11.3306 9.98486 11.475 10.3944 11.4963 10.801L11.5054 10.9803H11.3215H10.1026H9.96788L9.93328 10.8536C9.86226 10.5844 9.77364 10.3826 9.66802 10.2535C9.48229 10.0281 9.21096 9.91857 8.83402 9.91857C8.46012 9.91857 8.17059 10.0766 7.95146 10.4027C7.7202 10.7465 7.60305 11.2484 7.60305 11.897C7.60305 12.5403 7.72445 13.0226 7.9636 13.3304C8.19547 13.6292 8.48015 13.7748 8.83342 13.7748C9.197 13.7748 9.46468 13.6541 9.65285 13.4038C9.75968 13.2659 9.85073 13.0475 9.92478 12.7569L9.95634 12.6285H10.0941H11.313H11.5169L11.486 12.8238ZM17.1137 14.5377C17.569 14.0974 17.8567 13.5215 17.9684 12.8238L17.9999 12.6285H17.796H16.5766H16.44L16.4078 12.7569C16.3344 13.0475 16.2427 13.2659 16.1353 13.4038C15.9477 13.6541 15.6794 13.7748 15.3158 13.7748C14.9632 13.7748 14.6791 13.6292 14.4472 13.3304C14.2081 13.0226 14.0855 12.5403 14.0855 11.897C14.0855 11.2484 14.2032 10.7465 14.4351 10.4027C14.653 10.0766 14.9425 9.91857 15.3171 9.91857C15.6934 9.91857 15.9659 10.0281 16.1504 10.2535C16.2561 10.3826 16.3459 10.5844 16.4169 10.8536L16.4503 10.9803H16.5863H17.8045H17.9878L17.9799 10.801C17.9574 10.3944 17.8136 9.98486 17.5502 9.58479C17.0652 8.86515 16.2979 8.5 15.2673 8.5C14.4909 8.5 13.8433 8.77164 13.3395 9.30664C12.7707 9.91206 12.483 10.7761 12.483 11.8775C12.483 12.8972 12.7368 13.7133 13.2381 14.3063C13.748 14.9058 14.4533 15.2094 15.3359 15.2094C16.0521 15.2094 16.65 14.9833 17.1137 14.5377Z"})})),[OP.CC_FILLED]:e=>MP("svg",p(p({viewBox:"0 0 24 24","data-cc-filled-icon":!0},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 6C2 4.89543 2.89543 4 4 4H20C21.1046 4 22 4.89543 22 6V18C22 19.1046 21.1046 20 20 20H4C2.89543 20 2 19.1046 2 18V6ZM11.486 12.8238C11.3743 13.5215 11.0859 14.0974 10.6307 14.5377C10.1676 14.9833 9.56909 15.2094 8.85284 15.2094C7.97089 15.2094 7.26496 14.9058 6.7557 14.3063C6.25372 13.7133 6 12.8972 6 11.8775C6 10.7761 6.28832 9.91206 6.85646 9.30664C7.36026 8.77164 8.00852 8.5 8.78364 8.5C9.81431 8.5 10.5828 8.86515 11.0677 9.58479C11.3306 9.98486 11.475 10.3944 11.4963 10.801L11.5054 10.9803H11.3215H10.1026H9.96788L9.93328 10.8536C9.86226 10.5844 9.77364 10.3826 9.66802 10.2535C9.48229 10.0281 9.21096 9.91857 8.83402 9.91857C8.46012 9.91857 8.17059 10.0766 7.95146 10.4027C7.7202 10.7465 7.60305 11.2484 7.60305 11.897C7.60305 12.5403 7.72445 13.0226 7.9636 13.3304C8.19547 13.6292 8.48015 13.7748 8.83342 13.7748C9.197 13.7748 9.46468 13.6541 9.65285 13.4038C9.75968 13.2659 9.85073 13.0475 9.92478 12.7569L9.95634 12.6285H10.0941H11.313H11.5169L11.486 12.8238ZM17.9684 12.8238C17.8567 13.5215 17.569 14.0974 17.1137 14.5377C16.65 14.9833 16.0521 15.2094 15.3359 15.2094C14.4533 15.2094 13.748 14.9058 13.2381 14.3063C12.7368 13.7133 12.483 12.8972 12.483 11.8775C12.483 10.7761 12.7707 9.91206 13.3395 9.30664C13.8433 8.77164 14.4909 8.5 15.2673 8.5C16.2979 8.5 17.0652 8.86515 17.5502 9.58479C17.8136 9.98486 17.9574 10.3944 17.9799 10.801L17.9878 10.9803H17.8045H16.5863H16.4503L16.4169 10.8536C16.3459 10.5844 16.2561 10.3826 16.1504 10.2535C15.9659 10.0281 15.6934 9.91857 15.3171 9.91857C14.9425 9.91857 14.653 10.0766 14.4351 10.4027C14.2032 10.7465 14.0855 11.2484 14.0855 11.897C14.0855 12.5403 14.2081 13.0226 14.4472 13.3304C14.6791 13.6292 14.9632 13.7748 15.3158 13.7748C15.6794 13.7748 15.9477 13.6541 16.1353 13.4038C16.2427 13.2659 16.3344 13.0475 16.4078 12.7569L16.44 12.6285H16.5766H17.796H17.9999L17.9684 12.8238Z"})})),[OP.CHECKMARK]:e=>MP("svg",p(p({width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.66668 6.39041L10.1953 0.861816L11.1381 1.80463L5.13808 7.80463C4.87773 8.06498 4.45562 8.06498 4.19527 7.80463L0.861938 4.47129L1.80475 3.52848L4.66668 6.39041Z",fill:"white"})})),[OP.STEREOSCOPIC]:()=>MP("svg",{viewBox:"0 0 64 64",children:MP("path",{d:"M55.3066 16H8.53325C6.79992 16 5.33325 17.52 5.33325 19.3867V47.28C5.33325 49.1467 6.79992 50.6667 8.61325 50.6667H21.3333C22.7733 50.6667 23.9999 49.8133 24.4266 48.56L28.1333 39.3067C28.7733 37.76 30.2666 36.6667 31.9999 36.6667C33.7333 36.6667 35.2266 37.76 35.8666 39.3067L39.5733 48.56C40.0799 49.8133 41.2266 50.6667 42.5333 50.6667H55.3066C57.1999 50.6667 58.6666 49.1467 58.6666 47.28V19.3867C58.6666 17.52 57.1999 16 55.3066 16ZM19.2533 38.88C15.9999 38.88 13.3333 36.1333 13.3333 32.7733C13.3333 29.3333 15.9999 26.6667 19.2533 26.6667C22.5066 26.6667 25.1466 29.3333 25.1466 32.7733C25.1466 36.1333 22.5066 38.88 19.2533 38.88ZM44.7466 38.88C41.4933 38.88 38.8533 36.1333 38.8533 32.7733C38.8533 29.4133 41.4933 26.6667 44.7466 26.6667C47.9999 26.6667 50.6666 29.4133 50.6666 32.7733C50.6666 36.1333 47.9999 38.88 44.7466 38.88Z"})}),[OP.PERSON_FILLED]:e=>MP("svg",p(p({width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{children:MP("path",{fill:"white",fillRule:"evenodd",clipRule:"evenodd",d:"M7.99999 1.33398C6.15904 1.33398 4.66666 2.82637 4.66666 4.66732C4.66666 6.50827 6.15904 8.00065 7.99999 8.00065C9.84094 8.00065 11.3333 6.50827 11.3333 4.66732C11.3333 2.82637 9.84094 1.33398 7.99999 1.33398ZM2.66666 12.0007C2.66666 10.1597 4.15904 8.66732 5.99999 8.66732H9.99999C11.8409 8.66732 13.3333 10.1597 13.3333 12.0007V14.6673H2.66666V12.0007Z"})})),[OP.CHEVRON_DOWN]:e=>MP("svg",p(p({width:"24",height:"24",viewBox:"0 0 24 24"},Object.assign({},(_(e),e))),{},{children:MP("path",{d:"M12 15.5a1 1 0 0 1-.67-.26l-5-4.5 1.34-1.48L12 13.15l4.33-3.9 1.34 1.49-5 4.5a1 1 0 0 1-.67.26z",fill:"#1a2e3b"})})),[OP.CHEVRON_RIGHT]:e=>MP("svg",p(p({viewBox:"0 0 24 24"},Object.assign({},(_(e),e))),{},{children:MP("path",{d:"M9.71 17.71l-1.42-1.42 4.3-4.29-4.3-4.29 1.42-1.42 5 5a1 1 0 0 1 0 1.41z",fill:"#1a2e3b"})})),[OP.CLOCK]:e=>MP("svg",p(p({viewBox:"0 0 20 20"},Object.assign({},(_(e),e))),{},{children:MP("path",{d:"M10 20C4.477 20 0 15.523 0 10S4.477 0 10 0s10 4.477 10 10-4.477 10-10 10zm0-1.5a8.5 8.5 0 1 0 0-17 8.5 8.5 0 0 0 0 17zM10.75 5v4.69l3.075 3.075a.75.75 0 1 1-1.06 1.06L9.25 10.311V5a.75.75 0 0 1 1.5 0z"})})),[OP.CLOCK_FILLED]:e=>MP("svg",p(p({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 10C20 15.5228 15.5228 20 10 20C4.47715 20 0 15.5228 0 10C0 4.47715 4.47715 0 10 0C15.5228 0 20 4.47715 20 10ZM10 4C10.5523 4 11 4.44772 11 5V9.49995L14.6001 12.2C15.0419 12.5314 15.1314 13.1582 14.8001 13.6C14.4687 14.0418 13.8419 14.1314 13.4001 13.8L9.41174 10.8088C9.38636 10.7903 9.36189 10.7706 9.3384 10.7499C9.24863 10.6708 9.17612 10.5786 9.12159 10.4783C9.04406 10.3362 9 10.1733 9 10V9.99923V5C9 4.44772 9.44772 4 10 4Z"})})),[OP.COLLECTIONS]:e=>MP("svg",p(p({viewBox:"0 0 20 20"},Object.assign({},(_(e),e))),{},{children:MP("path",{d:"M20 10a1 1 0 0 0-.52-.88L17.44 8l2-1.13A1 1 0 0 0 20 6a1 1 0 0 0-.52-.87l-8-4.45a3 3 0 0 0-2.9 0l-8 4.45A1 1 0 0 0 0 6a1 1 0 0 0 .51.88L2.56 8l-2 1.13a1 1 0 0 0 0 1.75l2 1.13-2 1.12a1 1 0 0 0 0 1.75l8 4.46a3 3 0 0 0 2.92 0l8-4.46a1 1 0 0 0 0-1.75l-2-1.12 2-1.13A1 1 0 0 0 20 10zM9.52 2.41a1 1 0 0 1 1 0L16.94 6l-6.45 3.57a1 1 0 0 1-1 0L3.06 6zm-1 8.91a3 3 0 0 0 2.92 0l3.92-2.18 1.56.86-6.45 3.59a1.06 1.06 0 0 1-1 0L3.06 10l1.56-.86zM16.94 14l-6.45 3.59a1.06 1.06 0 0 1-1 0L3.06 14l1.54-.86 3.94 2.19a3 3 0 0 0 2.92 0l3.94-2.18z",fill:"#1a2e3b"})})),[OP.DISMISS_X]:e=>MP("svg",p(p({viewBox:"0 0 20 20"},Object.assign({},(_(e),e))),{},{children:MP("path",{d:"M11.06 10l4.597-4.596a.749.749 0 1 0-1.061-1.06L10 8.938 5.404 4.343a.749.749 0 1 0-1.06 1.061L8.938 10l-4.596 4.596a.749.749 0 1 0 1.061 1.06L10 11.062l4.596 4.596a.749.749 0 1 0 1.06-1.061L11.062 10z",fill:"#1A2E3B",fillRule:"evenodd"})})),[OP.HEART]:e=>MP("svg",p(p({viewBox:"0 0 20 20"},Object.assign({},(_(e),e))),{},{children:MP("path",{d:"M10 18a1 1 0 0 1-.81-.42 15.8 15.8 0 0 0-4.35-3.71C2.46 12.3 0 10.68 0 7.5a5.38 5.38 0 0 1 1.61-3.92A6 6 0 0 1 6 2a5.54 5.54 0 0 1 4.05 1.88A5.74 5.74 0 0 1 14 2c2.9 0 6 2.21 6 5.5s-2.46 4.8-4.84 6.37a15.8 15.8 0 0 0-4.35 3.71A1 1 0 0 1 10 18zM5.78 4A4 4 0 0 0 3 5a3.37 3.37 0 0 0-1 2.5c0 2 1.5 3.09 3.94 4.7A20.94 20.94 0 0 1 10 15.42a20.94 20.94 0 0 1 4.06-3.22C16.5 10.59 18 9.5 18 7.5 18 5.22 15.68 4 14 4c-1.44 0-2.78 1.49-3.17 2.06a1 1 0 0 1-.92.44 1 1 0 0 1-.82-.58A3.65 3.65 0 0 0 6 4z",fill:"#1a2e3b"})})),[OP.HEART_FILLED]:e=>MP("svg",p(p({viewBox:"0 0 24 24",fill:"none"},Object.assign({},(_(e),e))),{},{children:MP("path",{d:"M20.8 5.3c-2.1-2.8-6-3.4-8.8-1.3-2.5-1.8-6-1.6-8.2.6-2.4 2.4-2.4 6.4 0 8.9l7.5 7.5c.2.2.4.3.7.3.3 0 .5-.1.7-.3l7.5-7.5c2.2-2.2 2.4-5.7.6-8.2Z",fill:"#0E1216"})})),[OP.HEART_WIDER_FILLED]:e=>MP("svg",p(p({viewBox:"0 0 110 81"},Object.assign({},(_(e),e))),{},{children:MP("path",{d:"M82.496 1c-14.698 0-25.969 11.785-27.496 13.457-1.526-1.672-12.798-13.457-27.494-13.457-16.299 0-27.506 15.037-27.506 27.885 0 12.795 12.562 22.558 22.245 27.592 9.186 4.771 30.601 18.349 32.755 24.523 2.154-6.174 23.57-19.752 32.755-24.523 9.684-5.034 22.245-14.797 22.245-27.592 0-12.848-11.206-27.885-27.504-27.885z",fill:"#1a2e3b"})})),[OP.HEART_WIDER_BROKEN_FILLED]:e=>MP("svg",p(p({viewBox:"0 0 110 81"},Object.assign({},(_(e),e))),{},{children:MP("path",{d:"M82.496 1c-14.594 0-23.198 10.043-25.948 14.48l-6.77 10.727 13.661 8.543-13.661 12.535 5.695 15.348-9.686-15.348 11.389-11.975-11.969-7.402s4.22-14.27 4.621-15.521c.782-2.438.782-2.438-.813-3.289-5.516-2.944-12.608-8.098-21.509-8.098-16.299 0-27.506 15.037-27.506 27.885 0 12.795 12.562 22.558 22.245 27.592 9.186 4.771 30.601 18.349 32.755 24.523 2.154-6.174 23.57-19.752 32.753-24.523 9.684-5.034 22.247-14.797 22.247-27.592 0-12.848-11.208-27.885-27.504-27.885z",fill:"#1a2e3b"})})),[OP.ONDEMAND]:e=>MP("svg",p(p({viewBox:"0 0 20 20"},Object.assign({},(_(e),e))),{},{children:MP("path",{d:"M17.44 3.83L11.6.4a3.33 3.33 0 0 0-3.14 0l-5.9 3.43A3.41 3.41 0 0 0 1 6.57v6.86a3.41 3.41 0 0 0 1.56 2.74l5.87 3.43A3.08 3.08 0 0 0 10 20a3.18 3.18 0 0 0 1.57-.39l5.87-3.44A3.41 3.41 0 0 0 19 13.43V6.57a3.41 3.41 0 0 0-1.56-2.74zm-8-1.71A1.13 1.13 0 0 1 10 2a1.19 1.19 0 0 1 .56.12l5.84 3.43a1.47 1.47 0 0 1 .57 1v2.71a1 1 0 0 0-.38-.26L8.08 4.13 8 4.11V3zM8 6.4l6.3 3.6L8 13.66zm-5 7V6.57a1.43 1.43 0 0 1 .57-1L6 4.14v10.68l-.9.52-1.53-.9A1.43 1.43 0 0 1 3 13.43zm13.43 1l-5.87 3.44a1.37 1.37 0 0 1-1.12 0L7.08 16.5l9.22-5.32.7.4v1.85a1.43 1.43 0 0 1-.57 1.01z",fill:"#1a2e3b"})})),[OP.PAPER_PLANE]:e=>MP("svg",p(p({viewBox:"0 0 24 24",fill:"none"},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.34 2.096c1.577-.496 3.06.987 2.564 2.564l-4.999 15.908c-.547 1.742-2.93 1.948-3.768.324L9.73 14.29a.045.045 0 0 0-.019-.02l-6.603-3.406c-1.624-.837-1.419-3.22.324-3.768l15.908-5ZM19.958 4s-.008 0-.018.004L4.032 9.003c-.015.004-.021.009-.021.009l-.002.002A.058.058 0 0 0 4 9.042a.058.058 0 0 0 .004.03l.002.001s.005.006.018.013l6.251 3.224 5.026-5.026a1 1 0 1 1 1.414 1.414l-5.025 5.026 3.224 6.252a.077.077 0 0 0 .013.018l.002.002a.06.06 0 0 0 .03.004.058.058 0 0 0 .027-.009l.002-.002s.005-.006.01-.02L19.995 4.06C20 4.05 20 4.042 20 4.042v-.005a.055.055 0 0 0-.015-.022.053.053 0 0 0-.022-.014h-.005Z",fill:"#0E1216"})})),[OP.POP_OUT]:e=>MP("svg",p(p({viewBox:"0 0 20 20"},Object.assign({},(_(e),e))),{},{children:[MP("path",{d:"M16 17a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h5V2H3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-5h-2z",fill:"#1a2e3b"}),MP("path",{d:"M19 0h-7v2h4.59l-8 8L10 11.41l8-8V8h2V1a1 1 0 0 0-1-1z",fill:"#1a2e3b"})]})),[OP.VOLUME_OFF_FILLED]:e=>MP("svg",p(p({viewBox:"0 0 24 24"},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 2.20001C15.1263 2.42863 16.1838 2.84654 17.1379 3.41908L15.5513 4.82943C15.0606 4.58595 14.5414 4.39136 14 4.25201V2.20001ZM21.1249 7.90287L19.5378 9.31361C19.8371 10.1532 20 11.0576 20 12C20 15.7277 17.4505 18.8599 14 19.7479V21.7999C18.5645 20.8734 22 16.8379 22 12C22 10.5401 21.6872 9.15325 21.1249 7.90287ZM12 4.00396V7.98614L3.17811 15.8278C2.48346 15.5143 2 14.8156 2 14.004V10.004C2 8.89939 2.89543 8.00396 4 8.00396H6.58579L10.2929 3.29685C10.9229 2.66689 12 3.11305 12 4.00396ZM12 10.662L5.99037 16.004L2.33565 19.2526C1.92286 19.6195 1.88568 20.2516 2.2526 20.6644C2.61952 21.0772 3.25159 21.1143 3.66437 20.7474L21.6644 4.74742C22.0772 4.3805 22.1143 3.74843 21.7474 3.33565C21.3805 2.92286 20.7484 2.88568 20.3356 3.2526L12 10.662ZM10.2929 20.7111L8.81985 18.8407L12 16.0139V20.004C12 20.8949 10.9229 21.341 10.2929 20.7111ZM14 15.4648C15.0633 14.8498 15.8172 13.7593 15.971 12.4841L17.8778 10.7892C17.9579 11.1803 18 11.5852 18 12C18 14.6124 16.3304 16.8349 14 17.6586V15.4648Z"})})),[OP.VOLUME_ON_FILLED]:e=>MP("svg",p(p({viewBox:"0 0 24 24"},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 12C20 15.7277 17.4505 18.8599 14 19.7479V21.7999C18.5645 20.8734 22 16.8379 22 12C22 7.16206 18.5645 3.12655 14 2.20001V4.25201C17.4505 5.1401 20 8.2723 20 12ZM18 12C18 9.38754 16.3304 7.16506 14 6.34139V8.53511C15.1956 9.22672 16 10.5194 16 12C16 13.4805 15.1956 14.7732 14 15.4648V17.6586C16.3304 16.8349 18 14.6124 18 12ZM6.58579 8.00396H4C2.89543 8.00396 2 8.89939 2 10.004V14.004C2 15.1085 2.89543 16.004 4 16.004H6.58579L10.2929 20.7111C10.9229 21.341 12 20.8949 12 20.004V4.00396C12 3.11305 10.9229 2.66689 10.2929 3.29685L6.58579 8.00396Z"})})),[OP.FAST_FORWARD]:e=>MP("svg",p(p({viewBox:"0 0 64 64"},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.4506 12.0055L32.4643 30.0179C33.6413 31.0772 33.6413 32.9228 32.4643 33.9821L12.4506 51.9945C10.7345 53.5389 8 52.3211 8 50.0124V13.9876C8 11.6789 10.7345 10.4611 12.4506 12.0055ZM39.1172 12.0055L59.131 30.0179C60.308 31.0772 60.308 32.9228 59.131 33.9821L39.1172 51.9945C37.4012 53.5389 34.6667 52.3211 34.6667 50.0124V13.9876C34.6667 11.6789 37.4012 10.4611 39.1172 12.0055Z"})})),[OP.INFO_CIRCLE]:e=>MP("svg",p(p({width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.6667 6C10.6667 8.57733 8.57733 10.6667 6 10.6667C3.42267 10.6667 1.33333 8.57733 1.33333 6C1.33333 3.42267 3.42267 1.33333 6 1.33333C8.57733 1.33333 10.6667 3.42267 10.6667 6ZM12 6C12 9.31371 9.31371 12 6 12C2.68629 12 0 9.31371 0 6C0 2.68629 2.68629 0 6 0C9.31371 0 12 2.68629 12 6ZM6 4.66667C6.36819 4.66667 6.66667 4.36819 6.66667 4C6.66667 3.63181 6.36819 3.33333 6 3.33333C5.63181 3.33333 5.33333 3.63181 5.33333 4C5.33333 4.36819 5.63181 4.66667 6 4.66667ZM6 5.33333C6.36819 5.33333 6.66667 5.54653 6.66667 5.80952V8.19048C6.66667 8.45347 6.36819 8.66667 6 8.66667C5.63181 8.66667 5.33333 8.45347 5.33333 8.19048V5.80952C5.33333 5.54653 5.63181 5.33333 6 5.33333Z",fill:"white"})})),[OP.TRANSCRIPT_ON]:e=>MP("svg",p(p({viewBox:"0 0 24 24"},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.5 3C3.39543 3 2.5 3.89543 2.5 5V19C2.5 20.1046 3.39543 21 4.5 21H14.7547C14.0868 20.7085 13.461 20.2895 12.9142 19.7426C10.5711 17.3995 10.5711 13.6005 12.9142 11.2574C14.4297 9.74185 16.5543 9.20655 18.5 9.65145V5C18.5 3.89543 17.6046 3 16.5 3H4.5ZM18.5 11.7313C17.0907 11.2301 15.4565 11.5435 14.3284 12.6716C14.1332 12.8668 13.9623 13.0773 13.8159 13.2991C12.7907 14.8517 12.9616 16.9616 14.3284 18.3284C15.4515 19.4515 17.0762 19.7671 18.4812 19.2754C18.725 19.19 18.9622 19.0804 19.1891 18.9464L21.3995 21.1569C21.79 21.5474 22.4232 21.5474 22.8137 21.1569C23.2042 20.7663 23.2042 20.1332 22.8137 19.7426L20.6033 17.5322C21.5092 15.9983 21.3032 13.9895 19.9853 12.6716C19.5512 12.2375 19.0423 11.9241 18.5 11.7313ZM7.5 7C6.94772 7 6.5 7.44772 6.5 8C6.5 8.55228 6.94772 9 7.5 9H12.5C13.0523 9 13.5 8.55228 13.5 8C13.5 7.44772 13.0523 7 12.5 7H7.5ZM7.5 11C6.94772 11 6.5 11.4477 6.5 12C6.5 12.5523 6.94772 13 7.5 13H9.5C10.0523 13 10.5 12.5523 10.5 12C10.5 11.4477 10.0523 11 9.5 11H7.5ZM6.5 16C6.5 15.4477 6.94772 15 7.5 15H8.5C9.05228 15 9.5 15.4477 9.5 16C9.5 16.5523 9.05228 17 8.5 17H7.5C6.94772 17 6.5 16.5523 6.5 16Z"})})),[OP.TRANSCRIPT_OFF]:e=>MP("svg",p(p({viewBox:"0 0 24 24"},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.5 5H16.5V9.53585C17.1669 9.46283 17.8436 9.50136 18.5 9.65145V5C18.5 3.89543 17.6046 3 16.5 3H4.5C3.39543 3 2.5 3.89543 2.5 5V19C2.5 20.1046 3.39543 21 4.5 21H14.7547C14.0868 20.7085 13.461 20.2895 12.9142 19.7426C12.6802 19.5086 12.4696 19.2601 12.2823 19H4.5V5ZM15.2182 19C16.2222 19.5567 17.415 19.6485 18.4812 19.2754C18.725 19.19 18.9622 19.0804 19.1891 18.9464L21.3995 21.1569C21.79 21.5474 22.4232 21.5474 22.8137 21.1569C23.2042 20.7663 23.2042 20.1332 22.8137 19.7426L20.6033 17.5322C21.5092 15.9983 21.3032 13.9895 19.9853 12.6716C19.5512 12.2375 19.0423 11.9241 18.5 11.7313C17.857 11.5026 17.1672 11.4435 16.5 11.554C15.7048 11.6857 14.9418 12.0582 14.3284 12.6716C12.7663 14.2337 12.7663 16.7663 14.3284 18.3284C14.5992 18.5992 14.8992 18.8231 15.2182 19ZM6.5 8C6.5 7.44772 6.94772 7 7.5 7H12.5C13.0523 7 13.5 7.44772 13.5 8C13.5 8.55228 13.0523 9 12.5 9H7.5C6.94772 9 6.5 8.55228 6.5 8ZM6.5 12C6.5 11.4477 6.94772 11 7.5 11H10.5C11.0523 11 11.5 11.4477 11.5 12C11.5 12.5523 11.0523 13 10.5 13H7.5C6.94772 13 6.5 12.5523 6.5 12ZM7.5 15C6.94772 15 6.5 15.4477 6.5 16C6.5 16.5523 6.94772 17 7.5 17H8.5C9.05228 17 9.5 16.5523 9.5 16C9.5 15.4477 9.05228 15 8.5 15H7.5Z"})})),[OP.SEARCH]:e=>MP("svg",p(p({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{children:MP("path",{className:bf.FILL,d:"M11 4C7.13401 4 4 7.13401 4 11C4 14.866 7.13401 18 11 18C12.5725 18 14.0238 17.4815 15.1925 16.6062L18.298 19.7076C18.6888 20.0978 19.3219 20.0974 19.7122 19.7066C20.1025 19.3159 20.1021 18.6827 19.7113 18.2924L16.6066 15.1919C17.4817 14.0233 18 12.5722 18 11C18 7.13401 14.866 4 11 4ZM6 11C6 8.23858 8.23858 6 11 6C13.7614 6 16 8.23858 16 11C16 13.7614 13.7614 16 11 16C8.23858 16 6 13.7614 6 11Z"})})),[OP.CHEVRON_UP]:e=>MP("svg",p(p({width:"24",height:"24",viewBox:"0 0 24 24"},Object.assign({},(_(e),e))),{},{children:MP("path",{d:"M12 11.3454L16.331 15.2433L17.6689 13.7567L12.6689 9.25671C12.2886 8.91443 11.7113 8.91443 11.331 9.25671L6.33102 13.7567L7.66895 15.2433L12 11.3454Z",fill:"#1a2e3b"})})),[OP.CLOSE_CIRCLE]:e=>MP("svg",p(p({width:"24",height:"24",viewBox:"0 0 24 24"},Object.assign({},(_(e),e))),{},{children:MP("path",{clipRule:"evenodd",d:"M12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM14.7071 9.26251C14.3571 8.9125 13.7896 8.9125 13.4396 9.26251L12 10.7023L10.5604 9.26252C10.2104 8.9125 9.64292 8.9125 9.29293 9.26252L9.26302 9.29244C8.91306 9.64243 8.91306 10.2099 9.26302 10.5599L10.7027 11.9997L9.26247 13.4401C8.91251 13.7901 8.91251 14.3576 9.26247 14.7076L9.29239 14.7375C9.64237 15.0875 10.2098 15.0875 10.5598 14.7375L12 13.2971L13.4402 14.7375C13.7902 15.0875 14.3576 15.0875 14.7076 14.7375L14.7375 14.7076C15.0875 14.3576 15.0875 13.7901 14.7375 13.4401L13.2973 11.9997L14.737 10.5599C15.0869 10.2099 15.0869 9.64243 14.737 9.29244L14.7071 9.26251Z",fill:"#fff",fillRule:"evenodd"})})),[OP.SPINNER]:e=>MP("svg",p(p({viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",fill:"none","data-spinner":!0},Object.assign({},(_(e),e))),{},{children:[MP("circle",{"data-spinner-trace":!0,cx:"24",cy:"24",r:"22",stroke:"white"}),MP("circle",{"data-spinner-circle":!0,cx:"24",cy:"24",r:"22",stroke:"white"})]})),[OP.SLIDERS]:e=>MP("svg",p(p({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 7C16.4477 7 16 6.55228 16 6C16 5.44772 16.4477 5 17 5C17.5523 5 18 5.44772 18 6C18 6.55228 17.5523 7 17 7ZM19.8293 5C19.4175 3.83481 18.3062 3 17 3C15.6938 3 14.5825 3.83481 14.1707 5H3C2.44772 5 2 5.44772 2 6C2 6.55228 2.44772 7 3 7H14.1707C14.5825 8.16519 15.6938 9 17 9C18.3062 9 19.4175 8.16519 19.8293 7H21C21.5523 7 22 6.55228 22 6C22 5.44772 21.5523 5 21 5H19.8293ZM3 11C2.44772 11 2 11.4477 2 12C2 12.5523 2.44772 13 3 13H4.17071C4.58254 14.1652 5.69378 15 7 15C8.30622 15 9.41746 14.1652 9.82929 13H21C21.5523 13 22 12.5523 22 12C22 11.4477 21.5523 11 21 11H9.82929C9.41746 9.83481 8.30622 9 7 9C5.69378 9 4.58254 9.83481 4.17071 11H3ZM7 11C7.55228 11 8 11.4477 8 12C8 12.5523 7.55228 13 7 13C6.44772 13 6 12.5523 6 12C6 11.4477 6.44772 11 7 11ZM3 17C2.44772 17 2 17.4477 2 18C2 18.5523 2.44772 19 3 19H14.1707C14.5825 20.1652 15.6938 21 17 21C18.3062 21 19.4175 20.1652 19.8293 19H21C21.5523 19 22 18.5523 22 18C22 17.4477 21.5523 17 21 17H19.8293C19.4175 15.8348 18.3062 15 17 15C15.6938 15 14.5825 15.8348 14.1707 17H3ZM18 18C18 17.4477 17.5523 17 17 17C16.4477 17 16 17.4477 16 18C16 18.5523 16.4477 19 17 19C17.5523 19 18 18.5523 18 18Z"})})),[OP.SWITCH_CIRCLE]:e=>MP("svg",p(p({width:"12",height:"12",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",fill:"none","data-toggle-container":!0},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 12C9.31371 12 12 9.31371 12 6C12 2.68629 9.31371 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12Z",fill:"white"})})),[OP.SWITCH_CONTAINER]:e=>MP("svg",p(p({width:"32",height:"16",viewBox:"0 0 32 16",xmlns:"http://www.w3.org/2000/svg",fill:"none","data-toggle-container":!0},Object.assign({},(_(e),e))),{},{children:MP("rect",{width:"32",height:"16",rx:"8",fill:"#2F8363"})})),[OP.WARN_CIRCLE]:e=>MP("svg",p(p({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12ZM12 14C11.4477 14 11 13.5523 11 13V8C11 7.44772 11.4477 7 12 7C12.5523 7 13 7.44772 13 8V13C13 13.5523 12.5523 14 12 14ZM11 16C11 15.4477 11.4477 15 12 15C12.5523 15 13 15.4477 13 16C13 16.5523 12.5523 17 12 17C11.4477 17 11 16.5523 11 16Z",fill:"white"})})),[OP.THUMBS_UP]:e=>MP("svg",p(p({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.0514 9H19.0738C20.0444 9 20.8299 9.35394 21.3493 9.99618C21.8401 10.6031 22 11.3518 22 12V15C22 16.9967 21.2949 18.6828 20.5308 19.8635C20.1484 20.4545 19.7394 20.9376 19.3716 21.2847C19.1892 21.4569 19.0014 21.6105 18.8178 21.7283C18.7263 21.787 18.6199 21.8471 18.5035 21.8953C18.3992 21.9384 18.2213 22 18.0043 22H12C10.837 22 9.83327 21.7103 9.12861 21.4285C8.99855 21.3765 8.87772 21.3243 8.76692 21.2737C8.25906 21.7332 7.59078 22 6.88197 22H4C2.89543 22 2 21.1046 2 20V11C2 9.89643 2.89367 9 3.99924 9H7.90182C8.9732 8.60827 9.61763 8.20384 10.1078 7.63449C10.6376 7.01903 11.0675 6.11901 11.5331 4.57534L11.5413 4.53968C11.6279 4.16374 11.7631 3.57633 12.062 3.09009C12.2335 2.81089 12.4762 2.53151 12.8223 2.32587C13.1723 2.11782 13.5711 2.01926 14 2.01926C14.8534 2.01926 15.466 2.41723 15.8386 2.78144C16.0237 2.9623 16.1588 3.14255 16.2496 3.28199C16.2954 3.35222 16.3322 3.41568 16.3605 3.4686C16.3951 3.5336 16.4261 3.60015 16.4492 3.67019C16.5013 3.82791 16.5197 4.0011 16.5373 4.167L16.5425 4.21554C16.5696 4.46535 16.5931 4.81409 16.583 5.23366C16.5627 6.07019 16.4078 7.208 15.8625 8.40636C15.7274 8.70327 15.7031 8.87123 15.7005 8.94441C15.741 8.96116 15.8033 8.97895 15.8838 8.99016C15.9396 8.99795 15.9952 9 16.0514 9ZM13.4759 5.05072L13.4741 5.05871C13.4693 5.07933 13.4638 5.09979 13.4577 5.12006C12.9658 6.75821 12.4366 7.99485 11.6235 8.93936C10.9182 9.75858 10.0581 10.2914 9 10.7202V19.2174C9.08899 19.2196 9.17122 19.2384 9.24448 19.2784C9.38703 19.3561 9.60104 19.4634 9.87139 19.5715C10.4167 19.7897 11.163 20 12 20H17.8014C17.8514 19.9621 17.9179 19.9067 17.9987 19.8304C18.2399 19.6027 18.5483 19.2459 18.8517 18.777C19.4594 17.8379 20 16.5239 20 15V12C20 11.6482 19.9099 11.3969 19.7942 11.2538C19.707 11.1461 19.5294 11 19.0738 11H16.0654C16.0365 11.0006 15.9909 11.0009 15.9325 10.999C15.8501 10.9964 15.7377 10.9891 15.6076 10.971C15.3617 10.9367 14.9841 10.8544 14.6237 10.6345C14.2372 10.3985 13.8666 9.99723 13.7424 9.38864C13.6261 8.81811 13.7562 8.20634 14.0421 7.57802C14.4491 6.68359 14.568 5.82532 14.5835 5.18521C14.5913 4.86647 14.5732 4.60676 14.5541 4.43084C14.55 4.39233 14.5458 4.35787 14.5418 4.32773C14.5154 4.29227 14.4815 4.25162 14.4407 4.21169C14.323 4.09673 14.1856 4.01926 14 4.01926C13.8867 4.01926 13.8489 4.04221 13.8443 4.04499C13.8371 4.04925 13.8089 4.06724 13.7659 4.13728C13.7194 4.21297 13.6697 4.32623 13.6182 4.49311C13.5668 4.65929 13.5255 4.83727 13.4759 5.05072ZM7 19.9889V11H4V20H6.88197C6.91933 20 6.95876 19.9961 7 19.9889Z",fill:"white"})})),[OP.THUMBS_DOWN]:e=>MP("svg",p(p({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.94864 15.0193H4.9262C3.95557 15.0193 3.17013 14.6653 2.65073 14.0231C2.15987 13.4161 2 12.6675 2 12.0193V9.01926C2 7.02253 2.70509 5.33649 3.46916 4.15574C3.85161 3.56472 4.26059 3.08171 4.62837 2.73451C4.81075 2.56233 4.99859 2.40877 5.18217 2.291C5.27374 2.23225 5.38005 2.17217 5.49649 2.12398C5.60076 2.08082 5.77867 2.01926 5.99567 2.01926L12 2.01926C13.163 2.01926 14.1667 2.30892 14.8714 2.59078C15.0015 2.64281 15.1223 2.69495 15.2331 2.74553C15.7409 2.28605 16.4092 2.01926 17.118 2.01926H20C21.1046 2.01926 22 2.91469 22 4.01926L22 13.0193C22 14.1228 21.1063 15.0193 20.0008 15.0193H16.0982C15.0268 15.411 14.3824 15.8154 13.8922 16.3848C13.3624 17.0002 12.9325 17.9003 12.4669 19.4439L12.4587 19.4796C12.3721 19.8555 12.2369 20.4429 11.938 20.9292C11.7665 21.2084 11.5238 21.4878 11.1777 21.6934C10.8277 21.9014 10.4289 22 10 22C9.14656 22 8.53398 21.602 8.16136 21.2378C7.97632 21.057 7.84124 20.8767 7.7504 20.7373C7.70464 20.667 7.66777 20.6036 7.63954 20.5507C7.60486 20.4857 7.57388 20.4191 7.55075 20.3491C7.49868 20.1913 7.48029 20.0182 7.46266 19.8523L7.45748 19.8037C7.43043 19.5539 7.40687 19.2052 7.41704 18.7856C7.43731 17.9491 7.59222 16.8113 8.13751 15.6129C8.27262 15.316 8.29694 15.148 8.29953 15.0748C8.25898 15.0581 8.19666 15.0403 8.11624 15.0291C8.06037 15.0213 8.00485 15.0193 7.94864 15.0193ZM10.5241 18.9685L10.5259 18.9606C10.5307 18.9399 10.5362 18.9195 10.5423 18.8992C11.0342 17.2611 11.5634 16.0244 12.3765 15.0799C13.0818 14.2607 13.9419 13.7279 15 13.2991L15 4.80189C14.911 4.79964 14.8288 4.78086 14.7555 4.7409C14.613 4.66315 14.399 4.55587 14.1286 4.44773C13.5833 4.2296 12.837 4.01926 12 4.01926L6.1986 4.01926C6.14859 4.05717 6.08207 4.11258 6.00131 4.18882C5.76012 4.41652 5.4517 4.77339 5.14827 5.24229C4.54059 6.18137 4 7.49534 4 9.01926V12.0193C4 12.371 4.09013 12.6224 4.20582 12.7654C4.29297 12.8732 4.47062 13.0193 4.9262 13.0193H7.93463C7.96345 13.0186 8.00911 13.0183 8.06745 13.0202C8.14991 13.0229 8.26226 13.0301 8.39236 13.0483C8.63827 13.0825 9.01586 13.1648 9.37627 13.3848C9.76282 13.6207 10.1334 14.022 10.2576 14.6306C10.3739 15.2012 10.2438 15.8129 9.95791 16.4412C9.55092 17.3357 9.43197 18.1939 9.41645 18.834C9.40873 19.1528 9.4268 19.4125 9.44585 19.5884C9.45002 19.6269 9.45424 19.6614 9.45823 19.6915C9.48457 19.727 9.5185 19.7676 9.55935 19.8076C9.67696 19.9225 9.81438 20 10 20C10.1133 20 10.1511 19.9771 10.1557 19.9743C10.1629 19.97 10.1911 19.952 10.2341 19.882C10.2806 19.8063 10.3303 19.693 10.3818 19.5262C10.4332 19.36 10.4745 19.182 10.5241 18.9685ZM17 4.03039V13.0193H20L20 4.01926H17.118C17.0807 4.01926 17.0412 4.02315 17 4.03039Z",fill:"white"})})),[OP.THUMBS_UP_FILLED]:e=>MP("svg",p(p({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.0514 9H19.0738C20.0444 9 20.8299 9.35394 21.3493 9.99618C21.8401 10.6031 22 11.3518 22 12V15C22 16.9967 21.2949 18.6828 20.5308 19.8635C20.1484 20.4545 19.7394 20.9376 19.3716 21.2847C19.1892 21.4569 19.0014 21.6105 18.8178 21.7283C18.7263 21.787 18.6199 21.8471 18.5035 21.8953C18.3992 21.9384 18.2213 22 18.0043 22H12C10.837 22 9.83327 21.7103 9.12861 21.4285C9.08468 21.4109 9.0418 21.3933 9 21.3758V8.51408C9.46407 8.25834 9.8137 7.9761 10.1078 7.63449C10.6376 7.01903 11.0675 6.11901 11.5331 4.57534L11.5413 4.53968C11.6279 4.16374 11.7631 3.57633 12.062 3.09009C12.2335 2.81089 12.4762 2.53151 12.8223 2.32587C13.1723 2.11782 13.5711 2.01926 14 2.01926C14.8534 2.01926 15.466 2.41723 15.8386 2.78144C16.0237 2.9623 16.1588 3.14255 16.2496 3.28199C16.2954 3.35222 16.3322 3.41568 16.3605 3.4686C16.3951 3.5336 16.4261 3.60015 16.4492 3.67019C16.5013 3.82791 16.5197 4.0011 16.5373 4.167L16.5425 4.21554C16.5696 4.46535 16.5931 4.81409 16.583 5.23366C16.5627 6.07019 16.4078 7.208 15.8625 8.40636C15.7274 8.70327 15.7031 8.87123 15.7005 8.94441C15.741 8.96116 15.8033 8.97895 15.8838 8.99016C15.9396 8.99795 15.9952 9 16.0514 9ZM7 9H3.99924C2.89367 9 2 9.89643 2 11V20C2 21.1046 2.89543 22 4 22H6.88197C6.92144 22 6.96079 21.9992 7 21.9975V9Z",fill:"white"})})),[OP.THUMBS_DOWN_FILLED]:e=>MP("svg",p(p({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.94864 15.0193H4.9262C3.95557 15.0193 3.17013 14.6653 2.65073 14.0231C2.15987 13.4161 2 12.6675 2 12.0193V9.01926C2 7.02253 2.70509 5.33649 3.46916 4.15574C3.85161 3.56472 4.26059 3.08171 4.62837 2.73451C4.81075 2.56233 4.99859 2.40877 5.18217 2.291C5.27374 2.23225 5.38006 2.17217 5.49649 2.12398C5.60076 2.08082 5.77867 2.01926 5.99567 2.01926H12C13.163 2.01926 14.1667 2.30892 14.8714 2.59078C14.9153 2.60835 14.9582 2.62594 15 2.64348V15.5052C14.5359 15.7609 14.1863 16.0432 13.8922 16.3848C13.3624 17.0002 12.9325 17.9003 12.4669 19.4439L12.4587 19.4796C12.3721 19.8555 12.2369 20.4429 11.938 20.9292C11.7665 21.2084 11.5238 21.4878 11.1777 21.6934C10.8277 21.9014 10.4289 22 10 22C9.14656 22 8.53398 21.602 8.16136 21.2378C7.97632 21.057 7.84124 20.8767 7.7504 20.7373C7.70464 20.667 7.66777 20.6036 7.63954 20.5507C7.60486 20.4857 7.57388 20.4191 7.55075 20.3491C7.49868 20.1913 7.48029 20.0182 7.46266 19.8523L7.45748 19.8037C7.43043 19.5539 7.40687 19.2052 7.41704 18.7856C7.43731 17.9491 7.59222 16.8113 8.13751 15.6129C8.27262 15.316 8.29694 15.148 8.29953 15.0748C8.25898 15.0581 8.19666 15.0403 8.11624 15.0291C8.06037 15.0213 8.00485 15.0193 7.94864 15.0193ZM17 15.0193H20.0008C21.1063 15.0193 22 14.1228 22 13.0193V4.01926C22 2.91469 21.1046 2.01926 20 2.01926H17.118C17.0786 2.01926 17.0392 2.02008 17 2.02173V15.0193Z",fill:"white"})})),[OP.LINK]:e=>MP("svg",p(p({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{children:MP("path",{className:bf.FILL,d:"M11.2929 8.46447C10.9024 8.07395 10.9024 7.44078 11.2929 7.05026L13.4142 4.92894C14.9763 3.36684 17.509 3.36684 19.0711 4.92894C20.6332 6.49103 20.6332 9.02369 19.0711 10.5858L16.9498 12.7071C16.5593 13.0976 15.9261 13.0976 15.5356 12.7071C15.145 12.3166 15.145 11.6834 15.5356 11.2929L17.6569 9.17158C18.4379 8.39053 18.4379 7.1242 17.6569 6.34315C16.8758 5.5621 15.6095 5.5621 14.8285 6.34315L12.7071 8.46447C12.3166 8.85499 11.6834 8.85499 11.2929 8.46447ZM8.46443 11.2929C8.07391 10.9024 7.44074 10.9024 7.05022 11.2929L4.9289 13.4142C3.3668 14.9763 3.3668 17.509 4.9289 19.0711C6.49099 20.6332 9.02365 20.6332 10.5858 19.0711L12.7071 16.9497C13.0976 16.5592 13.0976 15.9261 12.7071 15.5355C12.3165 15.145 11.6834 15.145 11.2929 15.5355L9.17154 17.6569C8.39049 18.4379 7.12416 18.4379 6.34311 17.6569C5.56206 16.8758 5.56206 15.6095 6.34311 14.8284L8.46443 12.7071C8.85495 12.3166 8.85495 11.6834 8.46443 11.2929ZM9.87874 12.7071C9.48821 13.0976 9.48821 13.7308 9.87874 14.1213C10.2693 14.5118 10.9024 14.5118 11.293 14.1213L14.1214 11.2929C14.5119 10.9024 14.5119 10.2692 14.1214 9.87868C13.7309 9.48816 13.0977 9.48816 12.7072 9.87868L9.87874 12.7071Z"})})),[OP.SPARKLE_TWO_STARS_FILLED]:e=>{let{fill:t}=e,n=m(e,Qw);const r={};return t&&(r.fill=t),MP("svg",p(p({width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"none"},n),{},{children:[MP("path",{style:r,"data-shape":"smallStar",fillRule:"evenodd",clipRule:"evenodd",d:"M 20.861 4.11 L 21.903 4.472 L 21.899 4.474 C 22.105 4.546 22.214 4.771 22.144 4.978 C 22.105 5.095 22.013 5.186 21.896 5.224 L 20.859 5.585 C 20.401 5.745 20.047 6.099 19.887 6.557 L 19.526 7.599 C 19.452 7.806 19.225 7.914 19.018 7.842 C 18.901 7.802 18.811 7.709 18.774 7.592 L 18.414 6.555 C 18.257 6.099 17.899 5.741 17.443 5.583 L 16.4 5.222 C 16.112 5.121 16.041 4.746 16.272 4.546 C 16.314 4.511 16.362 4.484 16.414 4.468 L 17.445 4.11 C 17.902 3.951 18.255 3.597 18.415 3.139 L 18.779 2.097 C 18.877 1.809 19.25 1.736 19.45 1.965 C 19.486 2.005 19.513 2.053 19.529 2.104 L 19.889 3.139 C 20.048 3.597 20.402 3.951 20.86 4.11 L 20.861 4.11 Z"}),MP("path",{style:r,"data-shape":"largeStar",fillRule:"evenodd",clipRule:"evenodd",d:"M 15.732 10.906 L 18.352 11.817 L 18.354 11.815 C 18.734 11.949 18.935 12.364 18.804 12.745 C 18.73 12.96 18.56 13.127 18.344 13.197 L 15.732 14.107 C 14.507 14.528 13.545 15.49 13.122 16.714 L 12.212 19.336 C 12.077 19.712 11.669 19.912 11.289 19.789 C 11.069 19.718 10.897 19.545 10.828 19.324 L 9.922 16.716 C 9.499 15.492 8.538 14.531 7.314 14.108 L 4.697 13.2 C 4.165 13.02 4.027 12.331 4.449 11.96 C 4.521 11.897 4.606 11.848 4.697 11.817 L 7.314 10.907 C 8.538 10.485 9.5 9.524 9.922 8.3 L 10.832 5.677 C 10.894 5.495 11.026 5.346 11.198 5.262 C 11.594 5.068 12.069 5.265 12.213 5.681 L 13.123 8.3 C 13.545 9.524 14.508 10.486 15.732 10.907 L 15.732 10.906 Z"})]}))},[OP.WARN_TRIANGLE]:e=>MP("svg",p(p({width:"36",height:"32.326",fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"287.915 380.297 36 32.326"},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"white",d:"M309.646 382.963c-2.052-3.555-5.41-3.555-7.462 0L288.79 406.16c-2.05 3.555-.372 6.463 3.732 6.463h26.786c4.104 0 5.783-2.908 3.73-6.463l-13.392-23.197zm-2 23.224c0 .983-.804 1.788-1.788 1.788-.983 0-1.788-.805-1.788-1.788 0-.984.805-1.79 1.788-1.79s1.79.805 1.788 1.79zm-.317-7.76c-.254 2.604-.916 4.735-1.472 4.735-.557 0-1.22-2.13-1.477-4.735-.255-2.604-.464-5.72-.464-6.925 0-1.204.87-2.19 1.935-2.19 1.066 0 1.936.986 1.936 2.19s-.205 4.32-.457 6.925z"})})),[OP.VERTICAL_ELLIPSIS]:e=>MP("svg",p(p({width:"4",height:"19",viewBox:"0 0 4 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{children:MP("path",{d:"M2 4.5C2.39556 4.5 2.78224 4.3827 3.11114 4.16294C3.44004 3.94318 3.69639 3.63082 3.84776 3.26537C3.99914 2.89992 4.03874 2.49778 3.96157 2.10982C3.8844 1.72186 3.69392 1.36549 3.41421 1.08579C3.13451 0.806082 2.77814 0.615601 2.39018 0.53843C2.00222 0.46126 1.60009 0.500867 1.23463 0.652242C0.869182 0.803617 0.556825 1.05996 0.337062 1.38886C0.117299 1.71776 1.07779e-06 2.10444 1.07779e-06 2.5C1.07779e-06 3.03043 0.210715 3.53914 0.585788 3.91421C0.960861 4.28929 1.46957 4.5 2 4.5ZM2 14.5C1.60444 14.5 1.21776 14.6173 0.888861 14.8371C0.559963 15.0568 0.303617 15.3692 0.152242 15.7346C0.000866562 16.1001 -0.0387401 16.5022 0.0384303 16.8902C0.115601 17.2781 0.306083 17.6345 0.585788 17.9142C0.865493 18.1939 1.22186 18.3844 1.60982 18.4616C1.99778 18.5387 2.39992 18.4991 2.76537 18.3478C3.13082 18.1964 3.44318 17.94 3.66294 17.6111C3.8827 17.2822 4 16.8956 4 16.5C4 15.9696 3.78929 15.4609 3.41421 15.0858C3.03914 14.7107 2.53043 14.5 2 14.5ZM2 7.5C1.60444 7.5 1.21776 7.6173 0.888861 7.83706C0.559963 8.05682 0.303617 8.36918 0.152242 8.73463C0.000866562 9.10009 -0.0387401 9.50222 0.0384303 9.89018C0.115601 10.2781 0.306083 10.6345 0.585788 10.9142C0.865493 11.1939 1.22186 11.3844 1.60982 11.4616C1.99778 11.5387 2.39992 11.4991 2.76537 11.3478C3.13082 11.1964 3.44318 10.94 3.66294 10.6111C3.8827 10.2822 4 9.89556 4 9.5C4 8.96957 3.78929 8.46086 3.41421 8.08579C3.03914 7.71071 2.53043 7.5 2 7.5Z"})})),[OP.PLUS_SYMBOL]:e=>MP("svg",p(p({viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid"},Object.assign({},(_(e),e))),{},{children:MP("path",{d:"M24 10h-10v-10h-4v10h-10v4h10v10h4v-10h10z"})})),[OP.FACEBOOK]:e=>MP("svg",p(p({width:"21",height:"20",viewBox:"0 0 21 20",fill:"none"},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5 0C4.97759 0 0.5 4.5048 0.5 10.0608C0.5 15.082 4.15636 19.2444 8.93769 20V12.9697H6.39792V10.0608H8.93769V7.84376C8.93769 5.32252 10.4311 3.92892 12.7149 3.92892C13.809 3.92892 14.9537 4.12557 14.9537 4.12557V6.60155H13.6923C12.4506 6.60155 12.0624 7.37688 12.0624 8.1734V10.0607H14.8355L14.3925 12.9696H12.0623V19.9999C16.8436 19.2457 20.5 15.0833 20.5 10.0607C20.5001 4.5048 16.0225 0 10.5 0Z",fill:"black"})})),[OP.EMAIL]:e=>MP("svg",p(p({width:"28",height:"22",viewBox:"0 0 28 22",fill:"none"},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33366 3.00016H24.667V5.0154L14.0012 13.311L3.33366 5.01403V3.00016ZM3.33366 8.39233V19.0002H24.667V8.3937L14.8198 16.0526C14.3383 16.4271 13.6641 16.4271 13.1826 16.0526L3.33366 8.39233ZM0.666992 3.00016C0.666992 1.5274 1.8609 0.333496 3.33366 0.333496H24.667C26.1398 0.333496 27.3337 1.5274 27.3337 3.00016V19.0002C27.3337 20.4729 26.1398 21.6668 24.667 21.6668H3.33366C1.8609 21.6668 0.666992 20.4729 0.666992 19.0002V3.00016Z",fill:"black"})})),[OP.EMBED]:e=>MP("svg",p(p({viewBox:"0 0 55 48"},Object.assign({},(_(e),e))),{},{children:[MP("polygon",{points:"16.019,16.385 11.968,13.131 0,24.543 12.082,35.955 16.132,32.703 7.439,24.543"}),MP("polygon",{points:"42.92,13.131 38.868,16.384 47.561,24.542 38.981,32.701 43.033,35.955 55,24.542"}),MP("polygon",{points:"24.083,39.221 28.76,39.221 36.243,8.351 31.566,8.351"})]})),[OP.PREVIOUS]:e=>MP("svg",p(p({viewBox:"0 0 27 48",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{children:MP("path",{d:"M7.243,24L26.414,4.828c0.781-0.781,0.781-2.047,0-2.828L25,0.586 c-0.781-0.781-2.047-0.781-2.828,0L0.879,21.879c-1.172,1.172-1.172,3.071,0,4.243l21.293,21.293c0.781,0.781,2.047,0.781,2.828,0 L26.414,46c0.781-0.781,0.781-2.047,0-2.828L7.243,24z"})})),[OP.TWITTER]:e=>MP("svg",p(p({width:"28",height:"25",viewBox:"0 0 28 25",fill:"none"},Object.assign({},(_(e),e))),{},{children:MP("path",{d:"M21.6686 0H25.7576L16.8242 10.2103L27.3337 24.1042H19.1049L12.6598 15.6776L5.28511 24.1042H1.19358L10.7487 13.1831L0.666992 0H9.1047L14.9305 7.70222L21.6686 0ZM20.2334 21.6567H22.4992L7.87353 2.31895H5.4421L20.2334 21.6567Z",fill:"#0E1216"})})),[OP.VOD]:e=>MP("svg",p(p({width:"21",height:"23",viewBox:"0 0 21 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{children:MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.602,4.716l-7.665-4.385C11.169-0.108,9.91-0.111,9.139,0.327L1.4,4.721C0.63,5.158,0,6.234,0,7.112v8.776c0,0.878,0.63,1.955,1.398,2.393l0.526,0.3l7.176,4.09c0.77,0.438,2.028,0.438,2.798,0l7.702-4.39c0.77-0.438,1.4-1.516,1.4-2.393V7.112C21,6.234,20.37,5.156,19.602,4.716z M7.336,15.761L7.337,7.24l8.008,4.26L7.336,15.761z",fill:"white"})})),[OP.VOD_DOWNLOAD]:e=>MP("svg",p(p({width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{children:[MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.707 24.707l-5 5c-.39.39-1.024.39-1.414 0l-5-5c-.39-.39-.39-1.024 0-1.414l1.06-1.06c.392-.392 1.025-.392 1.415 0L14 23.462V15c0-.552.448-1 1-1h2c.552 0 1 .448 1 1v8.464l1.232-1.232c.39-.39 1.024-.39 1.414 0l1.06 1.06c.392.39.392 1.025 0 1.415z",fill:"white"}),MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.894 12.31c.063-.43.106-.864.106-1.31 0-4.97-4.03-9-9-9-3.6 0-6.7 2.12-8.138 5.175C10.175 6.75 9.368 6.5 8.5 6.5 6.015 6.5 4 8.515 4 11c0 .445.067.874.187 1.28C1.76 13.05 0 15.318 0 18c0 3.314 2.686 6 6 6h1c0-2.42 1.718-4.436 4-4.9V15c0-2.21 1.79-4 4-4h2c2.21 0 4 1.79 4 4v4.1c2.282.464 4 2.48 4 4.9h1c3.314 0 6-2.686 6-6 0-2.65-1.72-4.896-4.106-5.69z",fill:"white"})]})),[OP.VOD_RENT]:e=>MP("svg",p(p({width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{children:[MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 11H9c-.552 0-1 .448-1 1v8c0 .552.448 1 1 1h14c.552 0 1-.448 1-1v-8c0-.552-.448-1-1-1z",fill:"white"}),MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32 22V10c-2.76 0-5-2.24-5-5H5c0 2.76-2.24 5-5 5v12c2.76 0 5 2.24 5 5h22c0-2.76 2.24-5 5-5zm-6-1c0 1.105-.895 2-2 2H8c-1.105 0-2-.895-2-2V11c0-1.105.895-2 2-2h16c1.105 0 2 .895 2 2v10z",fill:"white"})]})),[OP.VOD_SUBSCRIBE]:e=>MP("svg",p(p({width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{children:[MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 9v2c0 .552.448 1 1 1h10c.552 0 1-.448 1-1V1c0-.552-.448-1-1-1h-2c-.552 0-1 .448-1 1v4.445C24.98 2.01 20.523-.128 15.558.005 7.293.23.413 6.96.018 15.216-.42 24.41 6.905 32 16 32c8.47 0 15.404-6.583 15.964-14.912.04-.585-.413-1.088-1-1.088H28.96c-.514 0-.956.388-.994.9C27.506 23.107 22.326 28 16 28 9.217 28 3.748 22.37 4.01 15.53 4.246 9.284 9.47 4.147 15.72 4.003 19.38 3.92 22.674 5.483 24.926 8H21c-.552 0-1 .448-1 1z",fill:"white"}),MP("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 20v-8l8 4",fill:"white"})]})),[OP.CAMERA]:e=>MP("svg",p(p({width:"560",height:"560",viewBox:"0 0 560 560",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object.assign({},(_(e),e))),{},{children:[MP("circle",{cx:"280",cy:"280",r:"280",fill:"#141414"}),MP("path",{d:"M388.448 342.355L394.026 336.62V336.62L388.448 342.355ZM333.924 289.317L328.346 295.051L328.346 295.051L333.924 289.317ZM333.924 270.684L328.346 264.949L328.346 264.949L333.924 270.684ZM388.448 217.646L394.026 223.38L394.026 223.38L388.448 217.646ZM165 222.988C165 214.158 172.158 207 180.987 207V191C163.321 191 149 205.321 149 222.988H165ZM165 337.012V222.988H149V337.012H165ZM180.987 353C172.158 353 165 345.842 165 337.012H149C149 354.679 163.321 369 180.987 369V353ZM304.334 353H180.987V369H304.334V353ZM320.321 337.012C320.321 345.842 313.164 353 304.334 353V369C322 369 336.321 354.679 336.321 337.012H320.321ZM320.321 222.988V337.012H336.321V222.988H320.321ZM304.334 207C313.164 207 320.321 214.158 320.321 222.988H336.321C336.321 205.321 322 191 304.334 191V207ZM180.987 207H304.334V191H180.987V207ZM399.001 208.514H391.235V224.514H399.001V208.514ZM410.999 220.512C410.999 213.885 405.628 208.514 399.001 208.514V224.514C396.791 224.514 394.999 222.722 394.999 220.512H410.999ZM410.999 339.489V220.512H394.999V339.489H410.999ZM399.001 351.487C405.628 351.487 410.999 346.115 410.999 339.489H394.999C394.999 337.279 396.791 335.487 399.001 335.487V351.487ZM391.235 351.487H399.001V335.487H391.235V351.487ZM382.87 348.089C385.109 350.268 388.111 351.487 391.235 351.487V335.487C392.278 335.487 393.279 335.893 394.026 336.62L382.87 348.089ZM328.346 295.051L382.87 348.089L394.026 336.62L339.502 283.582L328.346 295.051ZM324.714 286.451C324.714 289.691 326.024 292.792 328.346 295.051L339.502 283.582C340.277 284.336 340.714 285.37 340.714 286.451H324.714ZM324.714 273.549V286.451H340.714V273.549H324.714ZM328.346 264.949C326.024 267.208 324.714 270.31 324.714 273.549H340.714C340.714 274.63 340.277 275.665 339.502 276.418L328.346 264.949ZM382.87 211.911L328.346 264.949L339.502 276.418L394.026 223.38L382.87 211.911ZM391.235 208.514C388.111 208.514 385.109 209.733 382.87 211.912L394.026 223.38C393.279 224.107 392.278 224.514 391.235 224.514V208.514Z",fill:"#3d3d3d"})]}))},tO=["name","className"],nO=e=>{let{name:t,className:n}=e,r=m(e,tO);const i=eO[t];return i&&MP(i,p({className:n},r))};const rO=({headerContent:e,panelContent:t,bodyRef:n,headerRef:r,panelRef:i,bodyClassName:o,panelClassName:a,bodyInlineStyles:s={},ariaLabel:l})=>MP(AA,{children:[e&&MP("div",{ref:r,children:e}),MP("div",{ref:n,className:o,style:s,children:MP("div",{className:a,ref:i,role:"menu","aria-label":l,children:t})})]}),iO=({isMenuDisplayed:e,setMenuDisplayed:t=Cv,panel:n,buttonRef:r,panelContent:i,headerContent:o,toggleKey:a,className:s,id:l,type:c,ariaLabel:u,onBack:d=Cv})=>{const _=uL(null),h=uL(null),p=uL(null),m=uL(null),f=jw(e=>e.element),v=jw(e=>e.displayList.controlBar),g=jw(e=>e.appearance.playerWidth),E=jw(e=>e.appearance.playerHeight),b=jw(e=>e.appearance.fullscreen),[y,T]=aL(!1),S=Kg(f),{onFocus:C,focusFirstItem:A}=PP({menuRef:_,panelRef:p,buttonRef:r,isActive:e&&y,toggleKey:a,shouldTrapFocus:S,setMenuDisplayed:t,onBack:d});lL(()=>{e&&A()},[n]),lL(()=>{b&&t(!1)},[b,t]),lL(()=>{v||t(!1)},[v,t]),lL(()=>{const e=_.current;return()=>{null==e||null==e.close||e.close(),T(!1)}},[_,T]),lL(()=>{var t,n,r,i;e&&(null!=_&&null!=(t=_.current)&&t.open&&(null==_||null==(n=_.current)||null==n.close||n.close()),S?null==_||null==(r=_.current)||null==r.showModal||r.showModal():null==_||null==(i=_.current)||null==i.show||i.show(),T(!0))},[S,e,_]);const L=Yf(bf.VP_MENU,"ModalMenu_module_menu__4fe0e031",s);return MP(zw,{visible:e&&y,styleOverrides:{exitDone:{display:"none"}},onFaded:()=>{var e;null==_||null==(e=_.current)||null==e.close||e.close(),T(!1)},children:MP("dialog",{id:l,className:L,ref:_,onFocus:C,onBlur:e=>{var n;!e.relatedTarget||null!=(n=_.current)&&n.contains(e.relatedTarget)||t(!1)},"data-menu":c||!0,style:b?{}:{maxWidth:`${g}px`,maxHeight:`${E}px`,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},"aria-modal":"true",children:MP(rO,{headerContent:o,headerRef:m,bodyRef:h,bodyClassName:"ModalMenu_module_menuBody__4fe0e031",panelClassName:"ModalMenu_module_menuPanel__4fe0e031",panelRef:p,panelContent:i,ariaLabel:u})})})};const oO=({isMenuDisplayed:e,setMenuDisplayed:t=Cv,panel:n,buttonRef:r,progressBarAndButtonsRef:i,panelContent:o,headerContent:a,toggleKey:s,className:l,id:c,type:u,resizeDependencies:d,ariaLabel:_,onBack:h=Cv})=>{const m=uL(null),f=uL(null),v=uL(null),g=uL(null),E=uL(null),[b,y]=aL({height:"auto"}),[T,S]=aL({}),[C,A]=aL(!1),[L,I]=aL(!1),P=jw(e=>e.appearance.isMenuVerticalVideoMode),R=jw(e=>e.appearance.boundingClientRect),w=jw(e=>e.appearance.playerBreakpoint),O=jw(e=>e.displayList.controlBar),{isAccordionToggling:k}=hL(lO),{onFocus:D,focusFirstItem:N}=PP({menuRef:m,panelRef:v,buttonRef:r,isActive:e,toggleKey:s,setMenuDisplayed:t,onBack:h});lL(()=>{e&&N()},[n]);const M=e=>{const t=window.getComputedStyle(e);return parseFloat(t.fontSize)},x=()=>{A(!1),cancelAnimationFrame(null==E?void 0:E.current)},V=()=>{if(!(null==m?void 0:m.current)||!e)return;let t="auto";const n=km(m.current),r=M(m.current),i=n.bottom-m.current.scrollHeight,o=Math.max(R.top,0)-i;if(o>0){let e=m.current.scrollHeight-o-r;t=e/r+"em"}y(e=>p(p({},e),{},{height:t})),I(o>0)},B=()=>{if(null==v||!v.current)return;if(!e)return void S({height:"0"});const t=M(v.current),n=(v.current.scrollHeight+16)/t+"em";S({height:n})},U=()=>{V(),C&&(E.current=requestAnimationFrame(U))},F=vb(n=>{null!=m&&m.current&&null!=r&&r.current&&e&&(r.current.contains(n.target)||m.current.contains(n.target)||!document.contains(n.target)||t(!1))},200),H=vb(()=>{t(!1)},200);lL(()=>(document.addEventListener("click",F,!1),window.addEventListener("blur",H,!1),()=>{document.removeEventListener("click",F,!1),window.removeEventListener("blur",H,!1)}),[m,r,e]),lL(()=>((()=>{if(!((null==m?void 0:m.current)&&(null==r?void 0:r.current)&&(null==i?void 0:i.current)&&e))return;if(P&&w===wE.XXS&&(null==R?void 0:R.width))return void y(e=>p(p({},e),{},{width:"",right:""}));const t=km(r.current),n=km(m.current.offsetParent),o=km(i.current),a=km(m.current);let s=-8-o.right+n.right;const l=t.right-t.width/2+a.width/2+8;l<o.right&&(s=n.right-l);const c=M(m.current);y(e=>p(p({},e),{},{right:s/c+"em"}))})(),e?(B(),A(!0),U()):(x(),B(),V()),()=>{x()}),[e,n,null==R?void 0:R.width,w,d]),lL(()=>{O||t(!1)},[O]),lL(()=>{(()=>{if(null!=f&&f.current){if(k)return S(e=>p(p({},e),{},{height:"auto"})),A(!0),void U();B(),U()}})()},[k]);const W=Yf(bf.VP_MENU,"PopoverMenu_module_menu__db00fd03",l,L&&"PopoverMenu_module_scroll__db00fd03",P&&"PopoverMenu_module_verticalVideo__db00fd03");return MP(zw,{visible:e,styleOverrides:{exitDone:{display:"none"}},children:MP("div",{id:c,className:W,ref:m,style:b,onTransitionEnd:e=>{e.target===(null==f?void 0:f.current)&&"height"===e.propertyName&&(V(),x())},onFocus:D,onBlur:e=>{var n;!e.relatedTarget||null!=(n=m.current)&&n.contains(e.relatedTarget)||t(!1)},"data-menu":u||!0,children:MP(rO,{headerContent:a,headerRef:g,bodyRef:f,bodyClassName:"PopoverMenu_module_menuBody__db00fd03",panelClassName:"PopoverMenu_module_menuPanel__db00fd03",panelRef:v,panelContent:o,ariaLabel:_,bodyInlineStyles:T})})})},aO=["forceModalMenu","setMenuDisplayed"],sO=e=>{let{forceModalMenu:t,setMenuDisplayed:n}=e,r=m(e,aO);const i=jw(e=>e.appearance.isMenuBlockingUI),o=t||i,a=_L(n,[]);return MP(o?iO:oO,p({setMenuDisplayed:a},r))},lO=zA({isAccordionToggling:!1,activeAccordion:"",setAccordionToggling:()=>{},setActiveAccordion:()=>{}}),cO=({children:e})=>{const[t,n]=aL(!1),[r,i]=aL(""),o={isAccordionToggling:t,activeAccordion:r,setAccordionToggling:n,setActiveAccordion:i};return MP(lO.Provider,{value:o,children:e})};const uO=({buffer:e=!1})=>MP("div",{className:"Divider_module_divider__0e3f0149 "+(e?"Divider_module_buffer__0e3f0149":"")});const dO=({onBack:e=null,title:t,forceModalMenu:n,setMenuDisplayed:r=Cv,hasCloseButton:i=!0,onClose:o=()=>r(!1),size:a=ME.MD})=>{const s=jw(e=>e.appearance.isMenuBlockingUI),l=n||s;return MP("div",{className:Yf("MenuHeader_module_menuHeader__aa712564",l&&"MenuHeader_module_fullWidth__aa712564",e&&"MenuHeader_module_hasBack__aa712564",!i&&"MenuHeader_module_hideCloseButton__aa712564"),children:[MP("header",{className:"MenuHeader_module_header__aa712564",children:[MP("div",{className:"MenuHeader_module_backButtonWrapper__aa712564",children:MP(WO,{className:"MenuHeader_module_backButton__aa712564",onClick:e,"aria-label":"Back",color:kE.ALTERNATIVE,icon:MP(nO,{name:OP.CHEVRON_RIGHT}),iconSize:OE.MD})}),MP(OO,{size:a,className:"MenuHeader_module_title__aa712564",color:VE.WHITE,element:l?"h1":"h2",children:t}),MP("div",{className:"MenuHeader_module_closeButtonWrapper__aa712564",children:MP(WO,{className:"MenuHeader_module_closeButton__aa712564","aria-label":"Close menu",onClick:o,color:kE.ALTERNATIVE,icon:MP(nO,{name:OP.DISMISS_X}),iconSize:OE.MD})})]}),MP(uO,{})]})};const _O=["className","id","active","withActive","onSelect","onMouseEnter","onMouseLeave","element","styled","children","role","describedBy"],hO=e=>{let{className:t,id:n,active:r,withActive:i=!0,onSelect:o,onMouseEnter:a,onMouseLeave:s,element:l="div",styled:c=!0,children:u,role:d="menuitemradio",describedBy:_}=e,h=m(e,_O);const{onClick:f,onKeyDown:v}=nP(o),g=p({className:Yf("MenuOption_module_option__5ad9c96b",i&&"MenuOption_module_withActive__5ad9c96b",c&&"MenuOption_module_styled__5ad9c96b",t),role:d,"aria-checked":r,"aria-selected":r,"aria-describedby":_,"data-id":n,"data-menu-option":!0,tabIndex:0,onClick:f,onKeyDown:v,onMouseDown:e=>e.preventDefault(),onMouseEnter:a,onMouseLeave:s},h);return SA(l,g,u)};const pO=({className:e,onSelect:t,label:n,value:r,id:i,isAccordion:o=!1,hasPopup:a=!1,isOpened:s=!1,size:l=aP.MEDIUM,role:c="menuitem"})=>{let u,d=ME.MD;l===aP.LARGE?(d=ME.LG,u=ME.MD):o&&(d=ME.SM);const _={};return a&&Object.assign(_,{"aria-haspopup":"true","aria-expanded":s}),MP(hO,p(p({className:Yf("MenuItem_module_optionButton__2ed021e3",l===aP.SMALL&&"MenuItem_module_small__2ed021e3",e),onSelect:t,id:i,withActive:!1,role:c,"data-menu-item":!0},_),{},{children:[MP(OO,{size:d,weight:o?xE.BOLD:xE.NORMAL,className:"MenuItem_module_label__2ed021e3",color:VE.WHITE,children:n}),r&&MP(OO,{weight:xE.NORMAL,size:u,className:"MenuItem_module_value__2ed021e3",color:VE.WHITE,children:r}),MP("div",{className:Yf("MenuItem_module_icon__2ed021e3",s&&"MenuItem_module_open__2ed021e3"),children:MP(nO,{name:o?OP.CHEVRON_DOWN:OP.CHEVRON_RIGHT})})]}))};const mO=ME.MD,fO=ME.SM,vO=({onSelect:e,onMouseEnter:t,onMouseLeave:n,label:r,active:i,id:o,ordered:a=!1,index:s,isAccordion:l=!1,tabIndex:c,icon:u=null,role:d="menuitemradio",hidden:_,className:h})=>{const p=Yf("MenuOptionListItem_module_listItem__5ba640e5",a&&"MenuOptionListItem_module_ordered__5ba640e5",i&&"MenuOptionListItem_module_active__5ba640e5",l&&"MenuOptionListItem_module_accordion__5ba640e5",h);return MP(hO,{className:p,onSelect:e,onMouseEnter:t,onMouseLeave:n,active:i,id:o,tabIndex:c,role:d,hidden:_,children:[u&&MP("div",{className:"MenuOptionListItem_module_icon__5ba640e5",children:MP(nO,{name:u})}),a&&!u&&MP("div",{className:"MenuOptionListItem_module_number__5ba640e5",children:s}),!a&&!u&&MP("div",{className:"MenuOptionListItem_module_check__5ba640e5 "+(i?"MenuOptionListItem_module_activeCheck__5ba640e5":""),children:MP(nO,{name:OP.CHECKMARK})}),MP(OO,{className:"MenuOptionListItem_module_text__5ba640e5",weight:xE.NORMAL,size:l?fO:mO,color:VE.WHITE,children:r}),a&&i&&MP("div",{className:"MenuOptionListItem_module_point__5ba640e5",children:MP(nO,{name:OP.POINT})})]})},gO=({items:e,onSelect:t,onMenuOptionMouseEnter:n,onMenuOptionMouseLeave:r,ordered:i=!1,isAccordion:o=!1,listItemTabIndex:a=0,hidden:s,itemComponent:l})=>{const c=e.map(e=>{const c={key:e.id,id:e.id,active:e.active,label:e.label,onSelect:t,onMouseEnter:n,onMouseLeave:r,ordered:i,isAccordion:o,tabIndex:a,icon:e.icon,hidden:s,className:e.className};return l?l(p(p({},c),e)):MP(vO,p({},c))});return MP(AA,{children:c})};const EO=({id:e,label:t,items:n=[],onSelect:r})=>{var i;const o=uL(null),a=uL(null),{setAccordionToggling:s,activeAccordion:l,setActiveAccordion:c}=hL(lO),[u,d]=aL(!1),[_,h]=aL({}),p=null==(i=n.find(e=>e.active))?void 0:i.label,m=(e=void 0)=>{const n=void 0!==e?e:!u;d(n),s(!0),n&&c(t)},f=e=>{e.target===a.current&&"height"===e.propertyName&&s(!1)},v=e=>{null!=o&&o.current&&!o.current.contains(e.target)&&o.current!==e.target&&m(!1)};return lL(()=>(document.addEventListener("click",v),document.addEventListener("transitionend",f),()=>{c(""),document.removeEventListener("click",v),document.removeEventListener("transitionend",f)}),[]),lL(()=>{h((()=>{let e={};if(u&&null!=a&&a.current){const t=window.getComputedStyle(a.current),n=parseFloat(t.fontSize);e={height:a.current.scrollHeight/n+"em"}}return e})())},[u,a]),lL(()=>{l&&l!==t&&m(!1)},[l]),n.length&&MP("div",{className:"Accordion_module_accordion__4336dd83",role:"group",ref:o,"aria-controls":e,children:[MP(pO,{label:t,value:p,onSelect:()=>m(),isAccordion:!0,hasPopup:!0,isOpened:u,role:"button"}),MP("div",{className:"Accordion_module_content__4336dd83","aria-hidden":!u,ref:a,style:_,role:"menu",id:e,"aria-label":t,children:MP(gO,{items:n,onSelect:r,isAccordion:!0,listItemTabIndex:u?0:-1,hidden:!u||void 0})})]})};const bO=({id:e,label:t,className:n=""})=>MP("div",{className:`MenuFieldLabel_module_menuField__080b7b9c ${n}`,"aria-hidden":!0,children:MP(OO,{id:e,className:"MenuFieldLabel_module_label__080b7b9c",color:VE.WHITE,children:t})}),yO=({labelId:e,items:t=[],label:n,onSelect:r})=>{const i=jw(e=>e.appearance.shouldMenuItemsWrap);return MP(AA,{children:[MP(bO,{label:n,id:e}),MP("ul",{className:"ButtonRow_module_buttonRow__45a1df77 "+(i?"ButtonRow_module_wrap__45a1df77":""),role:"radiogroup","aria-labelledby":e,children:t.map(t=>MP(hO,{element:"li",className:"ButtonRow_module_filledButton__45a1df77 "+(t.active?"ButtonRow_module_active__45a1df77":""),active:t.active,id:t.id,onSelect:r,styled:!1,role:"radio",describedBy:e,children:MP(OO,{className:"ButtonRow_module_label__45a1df77",color:VE.WHITE,children:t.label})},t.id))})]})};const TO=({labelId:e,items:t=[],label:n,onSelect:r})=>{const i=jw(e=>e.appearance.shouldMenuItemsWrap);return MP(AA,{children:[MP(bO,{label:n,id:e}),MP("ul",{className:"ColorSwabs_module_colorSwabs__1985ad2c "+(i?"ColorSwabs_module_wrap__1985ad2c":""),role:"radiogroup","aria-labelledby":e,children:t.map(t=>MP(hO,{id:t.id,element:"li",className:"ColorSwabs_module_colorSwab__1985ad2c "+(t.active?"ColorSwabs_module_active__1985ad2c":""),active:t.active,"aria-label":t.label,onSelect:r,styled:!1,describedBy:e,role:"radio",children:MP("div",{className:"ColorSwabs_module_inner__1985ad2c",style:{backgroundColor:t.id}})},t.id))})]})};let SO=function(e){return e.TOP="top",e.BOTTOM="bottom",e.LEFT="left",e.RIGHT="right",e}({});const CO={onPointerDown:e=>e.preventDefault()},AO=({children:e,tooltipContent:t,className:n="",containerEl:r,position:i,margin:o,visible:a=null,preventFocusOnClick:s=!1,id:l=null,animating:c=!1})=>{var u,d,_;const[h,m]=aL(!1),v=()=>m(!0),g=()=>m(!1),E=null!==a,b=E?a:h,y=LO("onPointerEnter",e,e=>{"mouse"===e.pointerType&&v()}),T=LO("onPointerLeave",e,g),S=LO("onFocus",e,()=>{document.body.classList.contains(bf.SHOWFOCUS)&&v()}),C=LO("onBlur",e,g);dP("Escape",g);let A=null==e?void 0:e.ref;const L=uL(null);A=A||L;const I=uL(null),P=Yf("Tooltip_module_tooltipContainer__b2bc4d16",null==e||null==(u=e.props)?void 0:u.className,E&&a&&"Tooltip_module_forceVisible__b2bc4d16"),R=p(p({},null==e?void 0:e.props),{},{className:P,ref:A,onPointerEnter:y,onPointerLeave:T,onFocus:S,onBlur:C,"aria-labelledby":l??null,"data-touch-device":Q.touch.toString()});s&&Object.assign(R,CO);const w=(({tooltipEl:e,wrappedEl:t,visible:n,containerEl:r,position:i=SO.TOP,margin:o=0,animating:a=!1})=>{const s=uL(null),[l,c]=aL({top:null,bottom:null,left:i===SO.LEFT?"auto":"50%",right:i===SO.LEFT?`calc(100% + ${o}px)`:"auto"}),u=jw(e=>e.element),d=_L(()=>{const r={};if(e&&t&&n){const{left:n,right:a}=u.getBoundingClientRect(),{left:s,right:l,width:c}=t.getBoundingClientRect(),{width:d}=e.getBoundingClientRect();if(i===SO.TOP||i===SO.BOTTOM){const e=(d-c)/2,t=s-e,i=l+e,u=Math.max(n+o-t,0),_=Math.max(i+o-a,0);Object.assign(r,{left:`calc(50% + ${u-_}px)`})}}return r},[o,u,i,e,n,t]),_=_L(()=>{const t={};if(e&&r&&n){const{bottom:e}=r.getBoundingClientRect(),{top:n}=u.getBoundingClientRect();if(i===SO.BOTTOM){const r=e-n-o;isNaN(r)||Object.assign(t,{top:`${r}px`})}}return t},[r,o,u,i,e,n]),h=_L(()=>{c(e=>{const t=p(p(p({},e),d()),_());return jR(t,e)?e:t})},[d,_]);return lL(()=>(a?function e(){h(),s.current=requestAnimationFrame(e)}():(cancelAnimationFrame(s.current),h()),()=>{cancelAnimationFrame(s.current)}),[a,h]),l})({tooltipEl:null==I?void 0:I.current,wrappedEl:null==(d=A)?void 0:d.current,containerEl:null==r?void 0:r.current,position:i,margin:o,visible:E&&a||h,animating:c}),O=Yf("Tooltip_module_tooltip__b2bc4d16",n,i===SO.LEFT&&"Tooltip_module_tooltipLeft__b2bc4d16"),k=MP(zw,{visible:b,children:MP("span",{id:l,ref:I,style:w,className:O,"aria-hidden":"true",children:t})}),D=DA(null==e||null==(_=e.props)?void 0:_.children);return qA(e,R,[k].concat(f(D)))};function LO(e,t,n){return r=>{var i;null!=t&&null!=(i=t.props)&&i[e]&&t.props[e](r),n(r)}}var IO={text:"Text_module_text__73112353",sm:"Text_module_sm__73112353",md:"Text_module_md__73112353",lg:"Text_module_lg__73112353",xl:"Text_module_xl__73112353",bpxxs_fontsm:"Text_module_bpxxs_fontsm__73112353",bpxxs_fontmd:"Text_module_bpxxs_fontmd__73112353",bpxxs_fontlg:"Text_module_bpxxs_fontlg__73112353",bpxxs_fontxl:"Text_module_bpxxs_fontxl__73112353",bpxs_fontsm:"Text_module_bpxs_fontsm__73112353",bpxs_fontmd:"Text_module_bpxs_fontmd__73112353",bpxs_fontlg:"Text_module_bpxs_fontlg__73112353",bpxs_fontxl:"Text_module_bpxs_fontxl__73112353",bpsm_fontsm:"Text_module_bpsm_fontsm__73112353",bpsm_fontmd:"Text_module_bpsm_fontmd__73112353",bpsm_fontlg:"Text_module_bpsm_fontlg__73112353",bpsm_fontxl:"Text_module_bpsm_fontxl__73112353",bpmd_fontsm:"Text_module_bpmd_fontsm__73112353",bpmd_fontmd:"Text_module_bpmd_fontmd__73112353",bpmd_fontlg:"Text_module_bpmd_fontlg__73112353",bpmd_fontxl:"Text_module_bpmd_fontxl__73112353",bplg_fontsm:"Text_module_bplg_fontsm__73112353",bplg_fontmd:"Text_module_bplg_fontmd__73112353",bplg_fontlg:"Text_module_bplg_fontlg__73112353",bplg_fontxl:"Text_module_bplg_fontxl__73112353",bpxl_fontsm:"Text_module_bpxl_fontsm__73112353",bpxl_fontmd:"Text_module_bpxl_fontmd__73112353",bpxl_fontlg:"Text_module_bpxl_fontlg__73112353",bpxl_fontxl:"Text_module_bpxl_fontxl__73112353",bpxxl_fontsm:"Text_module_bpxxl_fontsm__73112353",bpxxl_fontmd:"Text_module_bpxxl_fontmd__73112353",bpxxl_fontlg:"Text_module_bpxxl_fontlg__73112353",bpxxl_fontxl:"Text_module_bpxxl_fontxl__73112353",bold:"Text_module_bold__73112353",normal:"Text_module_normal__73112353",medium:"Text_module_medium__73112353",white:"Text_module_white__73112353"};const PO={[ME.SM]:"sm",[ME.MD]:"md",[ME.LG]:"lg",[ME.XL]:"xl"},RO={[xE.BOLD]:IO.bold,[xE.NORMAL]:IO.normal,[xE.NUM_500]:IO.medium},wO={[VE.WHITE]:IO.white},OO=({element:e="span",children:t,size:n=ME.SM,sizeMap:r,weight:i=xE.BOLD,color:o=VE.CUSTOM,className:a="",id:s="",ariaHidden:l=!1,role:c,containsMarkup:u=!1})=>{let d=[];r?Object.keys(r).forEach(e=>{const t=PO[r[e]];d.push(IO[`bp${e}_font${t}`])}):d.push(IO[PO[n]]);const _={className:Yf.apply(void 0,[IO.text].concat(d,[RO[i],wO[o],a])),id:s,ariaHidden:l,role:c};return u&&(_.dangerouslySetInnerHTML={__html:t}),SA(e,_,t)},kO=e=>MP(Zw,{className:e.classNames,href:e.url,tabIndex:e.url?"0":"-1",style:e.style,children:MP("img",{className:e.imgClassNames,src:e.img,alt:e.imgAlt})});var DO="shared_module_focusable__29a0c6d5",NO="shared_module_focusableButton__29a0c6d5",MO="shared_module_focusableCircle__29a0c6d5",xO="shared_module_focusableMarker__29a0c6d5",VO="shared_module_visuallyHidden__29a0c6d5";const BO=["children","className","childrenClassName","color","size","focusable","icon","iconPosition","iconSize","type","style","tabIndex"],UO={[kE.PRIMARY]:"Button_module_primary__61be5b9c",[kE.ALTERNATIVE]:"Button_module_alternative__61be5b9c"},FO={[OE.MD]:"Button_module_md__61be5b9c",[OE.SM]:"Button_module_sm__61be5b9c",[OE.XS]:"Button_module_xs__61be5b9c"},HO={[OE.MD]:"Button_module_iconMd__61be5b9c",[OE.SM]:"Button_module_iconSm__61be5b9c"},WO=VL((e,t)=>{let{children:n,className:r,childrenClassName:i,color:o=kE.CUSTOM,size:a=OE.CUSTOM,focusable:s=!0,icon:l,iconPosition:c=DE.LEFT,iconSize:u=OE.CUSTOM,type:d,style:_={},tabIndex:h=0}=e,f=m(e,BO);return MP("button",p(p({className:Yf("Button_module_button__61be5b9c",s&&DO,UO[o],FO[a],l&&"Button_module_icon__61be5b9c",l&&HO[u],Tf.EXCLUDE_GLOBAL_BUTTON_STYLES,r),ref:t,type:d||NE.BUTTON,style:_,tabIndex:h},f),{},{children:[c===DE.LEFT&&l,n&&MP("span",{className:Yf("Button_module_buttonChildren__61be5b9c",i),children:n}),c===DE.RIGHT&&l]}))});const GO=({linkUrl:e,className:t="",ariaDescribedBy:n,icon:r,text:i,onClick:o,setDisplayLinkCopied:a,onPointerEnter:s,onPointerLeave:l,onFocus:c,onBlur:u})=>{const d=uL(null),_=uL(null),h=Yf("CopyLinkButton_module_copyLinkButton__fd675415",t),p=()=>{clearTimeout(d.current),clearTimeout(_.current)},m=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(t){return t.preventDefault(),t.stopPropagation(),function(e,t){return e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e}(Uf(e),function(){null==o||o(),a(!0),p(),d.current=setTimeout(()=>a(!1),2e3)})});return MP(WO,{"data-copy-link-button":!0,icon:r,iconSize:OE.MD,className:h,onPointerEnter:s,onPointerLeave:e=>{p(),_.current=setTimeout(()=>a(!1),150),null==l||l(e)},onClick:m,onFocus:c,onBlur:u,"aria-describedby":n,children:i})};const jO=["Shift","Tab"],YO=Q.iOS?"SearchInput_module_mobileSafari__e264b933":"",$O=VL(({onChange:e,onEnter:t,onSearchIterate:n,value:r,numSearchResults:i,ariaControls:o,disabled:a,placeholder:s,searchItemIterator:l},c)=>{const u={defaultPlaceholder:"Search",clearResults:"Clear Search Results",previousResult:"Previous search result",nextResult:"Next search result",noResults:"No results",numberResults:1===i?i+" result":i+" results"},[d,_]=aL(!1),[h,m]=aL(!1),f=uL(null),v=r.length>0,g=(()=>{const[e,t]=aL(!1);return dP("Shift",()=>{t(!0)},()=>{t(!1)}),e})();let E=s;i&&d&&(E=u.numberResults),!i&&r&&d&&(E=u.noResults);const[b,y]=aL(u.nextResult),[T,S]=aL(u.previousResult);s=s??u.defaultPlaceholder,lL(function(){return clearTimeout(f.current),f.current=setTimeout(()=>{_(!0)},1e3),()=>clearTimeout(f.current)},[r]);const C=()=>{null!=c&&c.current&&(null==c.current.focus||c.current.focus())},A=()=>{e&&e(""),t&&t(""),C()},L=e=>{let t;null==e||e.preventDefault(),null==e||e.stopPropagation(),t=l<i-1?l+1:0,i&&y("Result "+(t+1)+" of "+i),n&&n(t)},I=e=>{let t;null==e||e.preventDefault(),null==e||e.stopPropagation(),t=l>0?l-1:i-1,i&&S("Result "+(t+1)+" of "+i),n&&n(t)},P=Yf("SearchInput_module_inputForm__e264b933",v&&"SearchInput_module_active__e264b933"),R=Yf("SearchInput_module_searchButton__e264b933",NO),w=0!==i&&Number.isInteger(l)?`${l+1}/${i}`:"0/0";return MP("form",{className:P,role:"search","data-component-type":"SearchInput","data-focused":`${h}`,"data-disabled":`${a}`,onReset:()=>A(),onSubmit:e=>{e.preventDefault(),t&&t(r),g?I():L()},onClick:C,children:[!v&&MP("div",p(p({"data-icon":"search",className:"SearchInput_module_searchIcon__e264b933"},Bf(C)),{},{children:MP(nO,{name:OP.SEARCH,"aria-hidden":"true"})})),MP("input",{"aria-live":"polite",type:"text",ref:c,className:YO,onFocus:()=>m(!0),onBlur:()=>m(!1),onKeyDown:e=>{jO.includes(e.key)||e.stopPropagation()},"aria-controls":o,onInput:t=>{t.preventDefault(),e&&e(t.target.value),_(!1)},value:r,"aria-describedby":"searchResultsStatus",disabled:a,id:Of.SEARCH_INPUT}),!v&&MP("label",{htmlFor:Of.SEARCH_INPUT,className:"SearchInput_module_label__e264b933",children:s}),r&&MP("span",{id:"searchResultsStatus","aria-live":"polite",className:VO,children:E}),v&&MP(AA,{children:[Number.isInteger(l)&&MP("div",{"data-purpose":"search-item",className:"SearchInput_module_searchItem__e264b933","aria-hidden":"true",children:w}),MP(WO,p(p({"aria-live":"polite"},Bf(I)),{},{"data-purpose":"decrement-search","aria-label":T,icon:MP(nO,{name:OP.CHEVRON_UP}),iconSize:OE.SM,className:R,disabled:a||!i,onBlur:()=>{S(u.previousResult)}})),MP(WO,p(p({"aria-live":"polite"},Bf(L)),{},{"aria-label":b,"data-purpose":"increment-search",icon:MP(nO,{name:OP.CHEVRON_DOWN}),iconSize:OE.SM,className:R,disabled:a||!i,onBlur:()=>{y(u.nextResult)}})),MP(WO,p(p({},Bf(A)),{},{"data-icon":"close","data-purpose":"close","aria-label":u.clearResults,icon:MP(nO,{name:OP.CLOSE_CIRCLE,"data-icon":"close"}),iconSize:OE.SM,type:NE.RESET,className:R,disabled:a}))]})]})});const qO=["className","size"],zO=e=>{let{className:t="",size:n=BE.SM}=e,r=m(e,qO);const i=Yf(bf.VP_SPIN,n===BE.LG&&"Spinner_module_lg__795e5e53",n===BE.SM&&"Spinner_module_sm__795e5e53",t);return MP(nO,p({"data-component-type":"spinner",name:OP.SPINNER,className:`Spinner_module_spinner__795e5e53 ${i}`},r))};const KO=({checked:e,onSelect:t,className:n,children:r,isMenuItem:i,role:o="switch"})=>{const a=Yf("Switch_module_switch__c1fb02cb",i&&"Switch_module_isMenuItem__c1fb02cb",n),s=Yf("Switch_module_switchContainer__c1fb02cb",e&&"Switch_module_checked__c1fb02cb");return MP("div",p(p({tabIndex:0,role:o,"aria-checked":e,className:a},Bf(e=>null==t?void 0:t(e))),{},{children:[r,MP("div",{className:s,children:[MP(nO,{name:OP.SWITCH_CONTAINER}),MP(nO,{name:OP.SWITCH_CIRCLE,className:"Switch_module_handle__c1fb02cb"})]})]}))};const XO=({cues:e,language:t,direction:n,className:r,fontSize:i,fontFamily:o,fontOpacity:a,color:s,windowOpacity:l,windowColor:c,bgOpacity:u,bgColor:d,edgeStyle:_,height:h,style:m={}})=>{const f=_b(),v=(e,t)=>{const n=new vv(hw[e]||e);return n.alpha=t/100,n.rgba},g=p(p(p(p(p({},{fontSize:`${(e=>Math.max(10,Math.round(.045*h*e)))(i)}px`}),(()=>{const e=((e,t)=>f.fontFamily.items.find(e=>e.id===t))(0,o);return{fontVariant:"small_capitals"===e.id?"small-caps":"initial",fontFamily:e.value}})()),{color:v(s,a)}),(()=>{const e="0, 0, 0, "+Number(a)/100;let t;switch(_){case"shadow":t=`2px 2px 2px rgba(${e})`;break;case"outline":t=`1px 0px 1px rgba(${e}), 0px 1px 1px rgba(${e}), -1px 0px 1px rgba(${e}), 0px -1px 1px rgba(${e})`;break;case"raised":t=`rgba(${e}) 1px 1px, rgba(${e}) 1.5px 1.5px`;break;case"depressed":t=`rgba(${e}) -1px -1px, rgba(${e}) -1.5px -1.5px`;break;default:t="none"}return{textShadow:t}})()),m),E=p({},{backgroundColor:v(c,l)}),b=p({},{background:v(d,u)});return MP("div",{className:Yf(bf.VP_CAPTIONS,"CaptionsRenderer_module_captions__04afad3c",r),"aria-live":"assertive",lang:t,dir:n,style:g,children:MP("span",{className:"CaptionsRenderer_module_captionsWindow__04afad3c",style:E,children:(()=>{let t=[];return e.forEach(e=>{const n=e.html.split(/<br\s?\/?>/i).filter(Boolean);t=t.concat(n)}),t})().map(e=>MP("span",{className:"CaptionsRenderer_module_captionsLine__04afad3c",style:b,dangerouslySetInnerHTML:{__html:e}},e))})})};const ZO=VL(({children:e,className:t,style:n,role:r="status",ariaLabelledby:i},o)=>MP("div",{role:r,"aria-labelledby":i,className:`ToastBase_module_toast__211c883d ${t||""}`,ref:o,style:n,children:e}));const JO=()=>MP("div",{className:"ToastDivider_module_divider__6ba5f3ac"});const QO=["tooltipLabel","icon","onClick","containerRef","fullToast","className","onMouseEnter","onMouseLeave"],ek=e=>{let{tooltipLabel:t,icon:n,onClick:r,containerRef:i,fullToast:o,className:a,onMouseEnter:s,onMouseLeave:l}=e,c=m(e,QO);const u=jw(e=>e.appearance.playerBreakpoint),d=["xl","xxl"].includes(u)?16:8,_=Yf("ToastButton_module_toastButton__609a14eb",o&&"ToastButton_module_fullToast__609a14eb",a);return t?MP(AO,{tooltipContent:t,position:SO.BOTTOM,containerEl:i,margin:d,children:MP(WO,p({color:o?kE.PRIMARY:kE.ALTERNATIVE,icon:n,onClick:r,onMouseEnter:s,onMouseLeave:l,className:_},c))}):MP(WO,p({color:o?kE.PRIMARY:kE.ALTERNATIVE,icon:n,onClick:r,onMouseEnter:s,onMouseLeave:l,className:_},c))},tk={[wE.XXS]:ME.MD,[wE.LG]:ME.LG,[wE.XXL]:ME.XL},nk=({onClick:e,onMouseEnter:t,onMouseLeave:n,label:r})=>MP(ek,{fullToast:!0,onClick:e,onMouseEnter:t,onMouseLeave:n,children:MP(OO,{sizeMap:tk,children:r})});const rk=({transitionTime:e,delay:t=400,ariaLabelledby:n})=>{const r=`width ${e-t}ms linear`,[i,o]=aL({});return lL(()=>{const e=setTimeout(()=>{o({transition:r,width:"100%"})},t);return()=>{clearTimeout(e)}},[o,r,t]),MP("div",{className:"ToastProgress_module_progressWrapper__b38b38c9",role:"progressbar","aria-labelledby":n,children:MP("div",{className:"ToastProgress_module_progress__b38b38c9",style:i})})};const ik=({id:e,children:t,className:n})=>{const r=Yf("ToastMessage_module_label__ce6e9106",n);return MP(OO,{id:e,weight:xE.NORMAL,className:r,color:VE.WHITE,sizeMap:{[wE.XXS]:ME.SM,[wE.SM]:ME.MD,[wE.XL]:ME.LG,[wE.XXL]:ME.XL},children:t})};const ok=({onClick:e,describedBy:t,selected:n})=>MP(ek,{className:"CloseToastButton_module_close__a71d1b4f "+(n?"CloseToastButton_module_selected__a71d1b4f":""),icon:MP(nO,{name:OP.DISMISS_X}),onClick:e,"aria-label":"Close","aria-describedby":t}),ak=({children:e,targetContent:t,onContentChange:n=Cv,delay:r=250,styleOverrides:i,fadeIn:o=!0,fadeOut:a=!0})=>{const s=uL(null),[l,c]=aL(t),u=t!==l,d=!u&&!!t;if(u){const e=u&&!l?0:r;s.current=function(e,r,i){const o=new Promise(e=>setTimeout(()=>(c(t),n(t),e(void 0)),i));return e?e.then(()=>o):o}(s.current,0,e)}return MP(zw,{fadeIn:o,fadeOut:a,visible:d,duration:r,styleOverrides:i,children:null==e?void 0:e(l)})};let sk=function(e){return e.LOAD_TIMEOUT="Load timeout",e}({});const lk=1e3,ck=100*Math.random()<=100,uk=[Qm.PLAYER_LOGIN_SUCCESSFUL,Qm.PLAYER_LOGIN_FAILED,Qm.COMPONENT_VISIBILITY_CHANGE,Qm.APP_BREAKPOINT_CHANGE],dk=e=>{const{id:t,url:n,title:r,visible:i,userLoggedIn:o,appBreakpoint:a,bigPicture:s,onIframeLoad:l=Cv,onError:c=Cv,onRemoteComponentReady:u=Cv,waitForReady:d=!1,isAnimating:_=!1,timeout:h=lk,className:m}=e,f=uL(!1),[v,g]=aL(!1),[E,b]=aL(!1),y=uL(jT()),T=uL(null),S=uL(null),C=Yf("RemoteComponent_module_remoteComponent__c2722e03",E&&"RemoteComponent_module_loaded__c2722e03",m),A=uL(Date.now()),L=_L(e=>{f.current=!1,g(!0),c(e)},[c]),I=_L(()=>{d&&b(!0),clearTimeout(S.current),u()},[d,u]);lL(function(){T.current&&function(e,t,n){const{url:r,onPlay:i=Cv,onPause:o=Cv,onSeek:a=Cv,onClose:s=Cv,onRemoteComponentReady:l=Cv,onError:c=Cv}=e,u=Dm(r);t.configureClient(n.contentWindow,u),t.extendMethods({play:i,pause:o,set currentTime(e){a(e)},closeRemoteComponent:s,remoteComponentReady:l,reportRemoteComponentError:c}),uk.forEach(function(e){t.listeners[e]=!0})}(p(p({},e),{},{onRemoteComponentReady:I}),y.current,T.current)},[]),lL(function(){clearTimeout(S.current),S.current=setTimeout(()=>{E||(L({message:sk.LOAD_TIMEOUT,code:408}),s.sendEvent(yg.REMOTE_COMPONENT_TIMEOUT,{component_url:n,component_timeout:h}))},h)},[E,h,n,L,s]),lL(function(){o&&y.current.emit(Qm.PLAYER_LOGIN_SUCCESSFUL)},[o]),lL(function(){i||document.activeElement!==T.current||T.current.blur(),_||y.current.emit(Qm.COMPONENT_VISIBILITY_CHANGE,i)},[i,_]),lL(function(){y.current.emit(Qm.APP_BREAKPOINT_CHANGE,a)},[a]),lL(function(){A.current=Date.now()},[n]);const P=Yf("RemoteComponent_module_spinner__c2722e03",!E&&!v&&"RemoteComponent_module_visible__c2722e03");return MP(AA,{children:[MP(zO,{className:P}),MP("iframe",{id:t,ref:T,onLoad:()=>{v||(f.current=!0,l(),ck&&s.sendEvent(yg.REMOTE_COMPONENT_LOADED,{component_url:n,component_load_time:Date.now()-A.current}),d||(clearTimeout(S.current),b(!0)))},title:r,src:n,className:C})]})},_k=["onPlay","onPause","onSeek","url","visible"],hk=e=>{const{onPlay:t,onPause:n,onSeek:r,url:i,visible:o}=e,a=m(e,_k),s=jw(e=>e.setPlayback),l=VP(e=>e.bigPicture),c=jw(e=>e.user.loggedIn),u=jw(e=>e.appearance.appBreakpoint),d=VP(e=>e.colors.colorOne),_=VP(e=>e.colors.colorTwo),h=VP(e=>e.colors.colorThree),f=VP(e=>e.colors.colorFour),[v,g]=aL(pk(i,E()));function E(){return{loggedIn:c,appBreakpoint:u,visible:o,colorOne:d,colorTwo:_,colorThree:h,colorFour:f}}return lL(function(){g(pk(i,E()))},[i]),MP(dk,p({userLoggedIn:c,onPlay:()=>{s("paused",!1),null==t||t()},onPause:()=>{s("paused",!0),null==n||n()},onSeek:e=>{s("currentTime",e),null==r||r(e)},appBreakpoint:u,url:v,visible:o,bigPicture:l},a))};function pk(e,t){const n=Object.keys(t).filter(e=>void 0!==t[e]),r=OC(t,n);return me(e,r)}const mk=({playerBreakpoint:e})=>{const t=[wE.XS,wE.XXS].includes(e),n=t?OP.VIMEO_SMALL:OP.VIMEO,r=t?"data-vimeo-small-icon":"data-vimeo-icon";return MP(nO,{name:n,"aria-hidden":!0,[r]:!0})};const fk=({url:e,className:t})=>{const n={backgroundImage:`url(${e})`};return MP("div",{className:Yf("Image_module_image__2d6414b2",t),style:n})};const vk=["embedCode","onClick"],gk=e=>{let{embedCode:t,onClick:n}=e,r=m(e,vk);const[i,o]=aL(!1),a=uL(null);return MP(WO,p(p({onClick:()=>{o(!0),Uf(t),n(),clearTimeout(a.current),a.current=setTimeout(function(){o(!1)},2e3)},className:"CopyEmbedCodeButton_module_copyEmbedCodeButton__9ab4105c"},r),{},{children:i?"Copied!":"Copy"}))};const Ek=({visible:e})=>{const t=jw(e=>e.embed.allowEmbedShare),n=jw(e=>e.embed.embedCode),r=jw(e=>e.embed.videoUrl),i=jw(e=>e.displayList.outro),o=jw(e=>e.embed.embedOnlyShare),a=VP(e=>e.bigPicture),s=uL(null),l={title:"Embed",subtitle:"Add this video to your site with the embed code below.",customize:`<a href="${r}#embed" target="_blank" rel="noopener" aria-describedby="${Sf.NEW_WINDOW_DESCRIPTION}">Customize this embed</a> on Vimeo`},c=Yf("EmbedShare_module_embedShareContainer__ce226e34",o&&"EmbedShare_module_embedOnlyShare__ce226e34",!e&&"EmbedShare_module_hidden__ce226e34"),u=_L(e=>{const t=i?"end_screen":"share_overlay";a.sendEvent(yg.COPY_VIDEO_EMBED_CODE,{location:`player_embed_${t}_${e}`,path:window.location.pathname})},[i,a]);return lL(()=>{s.current&&s.current.setSelectionRange(0,n.length)},[n]),t&&MP(OL,{duration:200,alwaysMounted:!0,in:e,styles:$E("translateX(125%)","translateX(-17%)"),children:MP("section",{className:c,children:MP("div",{children:[MP(OO,{element:"h1",color:VE.WHITE,size:ME.XL,className:"EmbedShare_module_embedShareTitle__ce226e34",children:l.title}),MP(OO,{element:"p",color:VE.WHITE,className:"EmbedShare_module_embedShareSubtitle__ce226e34",size:ME.MD,containsMarkup:!0,children:l.subtitle}),MP("div",{className:"EmbedShare_module_embedShareEmbedCode__ce226e34",children:[MP("div",{children:MP("input",{onClick:e=>{e.currentTarget.select()},onCut:()=>u("keyboard"),onCopy:()=>u("keyboard"),className:"EmbedShare_module_embedInput__ce226e34",readOnly:!0,"aria-readonly":"true",value:n,ref:s})}),MP(gk,{embedCode:n,onClick:()=>u("button")})]}),MP(OO,{element:"p",size:ME.MD,className:"shared_module_shareFootnote__360a097f EmbedShare_module_shareFootnote__ce226e34",containsMarkup:!0,children:l.customize})]})})})};const bk={facebook:OP.FACEBOOK,twitter:OP.TWITTER,email:OP.EMAIL,embed:OP.EMBED},yk={facebook:Hh,twitter:Wh,email:Gh,embed:Mh},Tk={facebook:"Share on Facebook",twitter:"Share on Twitter",email:"Share via Email",embed:"Get embed code"},Sk=VL(({destination:e,onClick:t,startTime:n,endTime:r,url:i},o)=>{const a=jw(e=>e.title.title),s=jw(e=>e.title.ownerName),l=jw(e=>e.embed.videoUrl),c=jw(e=>e.embed.playerShareUrl),u=jw(e=>e.embed.videoUnlistedHash),d=jw(e=>e.events),_={emailSubject:"Check out “"+a+"” from "+s+" on Vimeo",emailBody:"Check out “"+a+"” from "+s+" on Vimeo.\n\nThe video is available for your viewing pleasure at "+Xv(i,xv.SHARE)+"\n\nIf you like this video, make sure you share it, too!\n\nVimeo is filled with lots of amazing videos. See more at https://vimeo.com."},h=_L(e=>{if("email"===e)return`mailto:?subject=${encodeURIComponent(_.emailSubject)}&body=${encodeURIComponent(_.emailBody)}`;if("embed"===e)return`${l}#share`;let t=Xv(`${c}/${e}`,xv.SHARE);return u&&(t=tg(t,"h",u)),(n||r)&&(t=cg(t,n,r),t=t.replace("#",t.includes("?")?"&":"?")),t},[c,u,l,_.emailBody,_.emailSubject,n,r]),p=_L(n=>{n.preventDefault(),d.fire(yk[e],h(e)),t(e,n.currentTarget.href)},[d,t]);return MP(Zw,{"data-social-share-button":!0,ref:o,className:"SocialShareLink_module_shareButton__cb9db123",role:"button",href:h(e),onClick:p,ariaLabel:Tk[e],children:MP(nO,{name:bk[e]})})});var Ck="SocialShare_module_hidden__241f1ad7",Ak="SocialShare_module_shareButtonItem__241f1ad7",Lk="SegmentShareInputs_module_inputWrapper__d711f219";const Ik=({id:e,label:t,value:n,className:r="",disabled:i=!1,invalid:o=!1,useEnd:a=!1,errorId:s,onChange:l,onBlur:c})=>{const u=jw(e=>e.playback.currentTime),d=jw(e=>e.playback.duration),[_,h]=aL(""),[p,m]=aL(!1),f=uL(null);lL(()=>{p||h(null!=n?uv(n):"")},[n,p]),lL(()=>{var e;a||i||(null==(e=f.current)||e.focus(),h(uv(u)))},[i,a,u,d]);let v="";return a||(v=uv(u)),MP("div",{className:r,children:[MP("input",{ref:f,id:e,type:"text",className:"TimeInput_module_segmentShareInput__87e7fee4",value:_,inputMode:"numeric",pattern:"[0-9:]*",placeholder:v,disabled:i,tabIndex:i?-1:0,onFocus:()=>m(!0),onBlur:()=>{m(!1);const e=lv(_);if(null===e)return;const t=uv(e);h(t),c(e)},onChange:e=>{const t=(e=>{const t=e.replace(/\D/g,"");if(!t)return"00:00";const n=parseInt(t,10).toString().slice(-6).padStart(6,"0"),r=n.slice(0,2),i=n.slice(2,4),o=n.slice(4,6);return parseInt(r,10)>0?`${r}:${i}:${o}`:`${i}:${o}`})(e.target.value);e.currentTarget.value=t,h(t),l(lv(t))},"aria-invalid":o,"aria-describedby":s,"aria-labelledby":e}),MP("label",{htmlFor:e,id:e,className:"TimeInput_module_floatingLabel__87e7fee4 "+(!a||_||p?"":"TimeInput_module_inline__87e7fee4"),children:t})]})},Pk=({setTimeParams:e,onErrorChange:t})=>{const n=jw(e=>e.playback.currentTime),r=jw(e=>e.playback.duration),[i,o]=aL(!1),[a,s]=aL(null),[l,c]=aL(null),[u,d]=aL(""),[_,h]=aL(""),p={checkboxLabel:i?"Turn off start and end times when sharing":"Select start and end times to share",startTimeLabel:"Start",endTimeLabel:"End",errors:{startMustBeBeforeEnd:"Start must come before end",startMustBeBeforeVideoEnd:"Start must come before video ends",endMustBeBeforeVideoEnd:"End must come before video ends",endMustBeAfterStart:"End must come after start"}},m=u?`${Df.START_INPUT}-error`:`${Df.END_INPUT}-error`;lL(()=>{t(!!u||!!_)},[u,_,t]);const f=_L((t,n,r=i)=>{r?e(t,null!==n&&n>0?n:null):e(null,null)},[i,e,r]),v=_L(()=>{o(t=>{const r=!t;return r?f(n,null,r):(s(null),c(null),d(""),h(""),e(null,null)),r})},[n,e,f]),g=_L((e,t,n)=>{const{startTimeIsValid:i,endTimeIsValid:o}=((e,t,n)=>{const r=null==e,i=null==t,o=r||i||t>e;return{startTimeIsValid:r||(r||e>=0&&e<n)&&o,endTimeIsValid:i||(i||t>0&&t<=n)&&o}})(e,t,r);return d(""),h(""),null!==e&&e>=r?d(p.errors.startMustBeBeforeVideoEnd):null!==t&&t>r?h(p.errors.endMustBeBeforeVideoEnd):null!==e&&null!==t&&e>=t&&d("start"===n?p.errors.startMustBeBeforeEnd:p.errors.endMustBeAfterStart),{startTimeIsValid:i,endTimeIsValid:o}},[r,p.errors]),E=_L((e,t)=>{s(n=>(c(r=>{const i="start"===t?e:n,o="end"===t?e:r,{startTimeIsValid:a,endTimeIsValid:s}=g(i,o,t);return f(a?i:null,s?o:null),o}),"start"===t?e:n))},[f,g]),b=_L((e,t)=>{let r=a,i=l;"start"===t?r=e:i=e;const{startTimeIsValid:o,endTimeIsValid:u}=g(r,i,t),d="start"!==t||o?r:n,_="end"!==t||u?i:null;s(d),c(_),g(d,_,t),f(d,_)},[a,l,n,f,g]),y=dL(()=>vb(E,300),[E]);return lL(()=>()=>y.cancel(),[y]),MP("div",{className:"SegmentShareInputs_module_segmentShareWrapper__d711f219",children:[MP("div",{"data-segment-share-checkbox":!0,role:"checkbox","aria-checked":i,"aria-label":p.checkboxLabel,tabIndex:0,className:"SegmentShareInputs_module_checkboxContainer__d711f219",onClick:v,onKeyPress:v,children:MP("span",{className:"SegmentShareInputs_module_customCheckbox__d711f219 "+(i?"SegmentShareInputs_module_checked__d711f219":"")})}),MP("div",{className:"SegmentShareInputs_module_inputWithError__d711f219",children:[MP(Ik,{id:Df.START_INPUT,label:p.startTimeLabel,value:i?a:null,className:Lk,disabled:!i,onChange:e=>y(e,"start"),onBlur:e=>b(e,"start"),invalid:!!u,errorId:m}),MP(Ik,{id:Df.END_INPUT,label:p.endTimeLabel,value:i?l:null,className:Lk,disabled:!i,onChange:e=>y(e,"end"),onBlur:e=>b(e,"end"),useEnd:!0,invalid:!!_,errorId:m}),(u||_)&&MP("span",{id:m,className:"SegmentShareInputs_module_errorMessage__d711f219",children:u||_})]})]})},Rk=({linkUrl:e,className:t})=>{const[n,r]=aL(!1);return MP(GO,{linkUrl:e,className:t,text:n?"Copied!":"Copy",setDisplayLinkCopied:r})},wk=({visible:e,onEmbedClick:t})=>{const n=jw(e=>e.embed.shareUrl),r=jw(e=>e.embed.allowEmbedShare),i=jw(e=>e.appearance.playerBreakpoint),o=jw(e=>e.appearance.playerSizeMode),a=jw(e=>e.bigPicture),s=jw(e=>e.playback.canSeekForward),l=uL(null),c=uL(null),[u,d]=aL(null),[_,h]=aL(null),[p,m]=aL(!1),f=e&&o!==Iv.TINY&&s,v=i!==wE.XXS&&i!==wE.XS||!p||!f;let g=n;(u||_)&&(g=cg(g,u,_));const E=Xv(g,xv.SHARE),b=p&&(i===wE.XXS||i===wE.XS),y=Yf("SocialShare_module_shareButtons__241f1ad7",b&&Ck),T=Yf("SocialShare_module_socialShareContainer__241f1ad7",!e&&Ck),S=(e,n)=>{a.sendEvent(yg.SELECT_PLAYER_SHARE_COMPLETE,{ab_group:null},{[Tg.WEB]:{target:null,target_path:n,copy:e},[Tg.PRODUCT_ANALYTICS]:{flow:"share_video",element:"icon",copy:e}}),"embed"!==e?"email"!==e?xm(n,e,{width:600,height:600}):window.top.location=n:null==t||t()};return MP(OL,{duration:200,alwaysMounted:!0,in:e,styles:$E(),children:MP("section",{className:T,children:[MP(OO,{element:"h1",color:VE.WHITE,className:"SocialShare_module_shareTitle__241f1ad7",children:"Share"}),g&&MP("div",{className:"SocialShare_module_linkWrapper__241f1ad7",children:[MP(Zw,{"data-social-share-url":!0,className:"SocialShare_module_clipUrl__241f1ad7",href:E,children:g}),MP(Rk,{linkUrl:E,className:"SocialShare_module_copyLinkButton__241f1ad7"})]}),MP("div",{className:"SocialShare_module_shareOptions__241f1ad7",children:[f&&MP(Pk,{setTimeParams:(e,t)=>{d(e),h(t)},onErrorChange:m}),MP(zw,{visible:v,children:MP("ul",{className:y,children:[MP("li",{className:Ak,children:MP(Sk,{destination:"facebook",onClick:S,ref:l,startTime:u,endTime:_,url:g})}),MP("li",{className:Ak,children:MP(Sk,{destination:"twitter",onClick:S,startTime:u,endTime:_,url:g})}),g&&MP("li",{className:Ak,children:MP(Sk,{destination:"email",onClick:S,startTime:u,endTime:_,url:g})}),r&&MP("li",{className:Ak,children:MP(Sk,{onClick:S,destination:"embed",ref:c,startTime:u,endTime:_,url:g})})]})})]})]})})};const Ok=({onEmbedShareVisibilityChange:e})=>{const t=jw(e=>e.embed.embedOnlyShare),[n,r]=aL(t),i=Yf("Share_module_backButton__b91002f4",n&&"Share_module_visible__b91002f4");return lL(function(){t!==n&&r(t)},[t]),lL(function(){null==e||e()},[n]),MP(AA,{children:[MP("div",{className:"Share_module_shareWrapper__b91002f4",children:[MP(wk,{visible:!n,onEmbedClick:()=>r(!0)}),MP(Ek,{visible:n})]}),!t&&MP(WO,p(p({className:i,onClick:()=>r(!1),"aria-label":"Back",tabIndex:n?0:-1},CO),{},{children:MP(nO,{className:"Share_module_backButtonIcon__b91002f4",name:OP.PREVIOUS})}))]})};const kk={enter:{opacity:0,animation:"wiggle 300ms linear 1"},enterActive:{opacity:1,transition:"opacity 300ms",animation:"wiggle 300ms linear 1"},enterDone:{opacity:1},exit:{opacity:1},exitActive:{opacity:0,transition:"opacity 300ms"},exitDone:{display:"none"}},Dk=({message:e,visible:t,wrapperEl:n})=>{const[r,i]=aL(t),o=n&&km(n);return lL(()=>{let e;return clearTimeout(e),t?(i(!0),e=setTimeout(()=>{i(!1)},5e3)):i(!1),()=>clearTimeout(e)},[t]),MP(OL,{in:r,styles:kk,children:MP("div",{className:"ValidationBubble_module_validationBubble__6b620843",style:{top:(null==o?void 0:o.height)+4+"px"},children:MP(OO,{weight:xE.BOLD,className:"ValidationBubble_module_message__6b620843",children:e})})})};var Nk="Error_module_button__b6661b70";const Mk=()=>{const e=LR();return MP(xk,{children:MP("div",{className:"Error_module_buttonsWrapper__b6661b70",children:[MP(Hk,{className:Nk,label:"Send Error Log"}),MP(WO,{"data-test-id":"reload-player-button",className:Nk,onClick:e,children:"Reload Player"})]})})};const xk=({children:e})=>{const t=VP(e=>e.error.title),n=VP(e=>e.error.message);return MP("div",{className:"BaseError_module_error__896e096f","aria-live":"assertive",role:"alert","data-error":!0,children:[t&&MP(OO,{element:"h1",className:"BaseError_module_header__896e096f",weight:xE.BOLD,children:t}),n&&MP(OO,{className:"BaseError_module_description__896e096f",weight:xE.NORMAL,containsMarkup:!0,children:n}),e]})};const Vk=()=>{const e=jw(e=>e.setOverlay),t=Bf(t=>{t.preventDefault(),e("purpose",rv.EMPTY)});return MP("button",p(p(p({className:`CloseOverlayButton_module_closeOverlayButton__74aa447b ${NO}`,"aria-label":"Close overlay"},CO),t),{},{"data-close-overlay":!0,children:MP(nO,{name:OP.CLOSE})}))};const Bk=({children:e,visible:t,style:n})=>{const r=uL(null),i=jw(e=>e.setOverlay),o=jw(e=>e.overlay.purpose),a=jw(e=>e.overlay.showCloseButton),s=jw(e=>e.overlay.overlayElementsUpdatedCount),l=DA(e).length>0,{onFocus:c,focusFirstItem:u}=IP({parentRef:r,isActive:t&&l,onEscape:a?()=>i("purpose",rv.EMPTY):void 0}),d=Yf("OverlayBase_module_overlay__42ef25fe",t&&"OverlayBase_module_visible__42ef25fe");return lL(function(){u()},[s,u]),lL(function(){!iv(o)&&t&&u()},[o,t,u]),MP("div",{ref:r,onFocus:c,className:"OverlayBase_module_overlayWrapper__42ef25fe "+(t?"":"OverlayBase_module_hidden__42ef25fe"),role:a?"dialog":"alert","aria-modal":a?"true":"false","aria-labelledby":Sf.VP_OVERLAY_LABELLEDBY,"data-content-area-sibling-eligible":!0,style:n,"data-overlay":!0,children:[MP("div",{className:"OverlayBase_module_overlayCell__42ef25fe",children:MP("div",{className:d,children:e})}),a&&MP("nav",{className:"OverlayBase_module_overlayNav__42ef25fe",children:MP(Vk,{})})]})};let Uk;function Fk(){}const Hk=({onSendSuccess:e,className:t,label:n})=>{const r=jw(e=>e.debugCollector),[i,o]=aL(!1),[a,s]=aL(!1),l=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(){return clearTimeout(Uk),function(e){if(e&&e.then)return e.then(Fk)}(function(t,n){try{var i=function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(function(){return function(e,t){return e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e}(r.sendDebugPayload(),function({ID:t}){e&&e(t),o(!0)})},function(){s(!0)})}catch(e){return n(!0,e)}return i&&i.then?i.then(n.bind(null,!1),n.bind(null,!0)):n(!1,i)}(0,function(e,t){return Uk=setTimeout(()=>{clearTimeout(Uk),o(!1),s(!1)},1500),function(e,t){if(e)throw t;return t}(e,t)}))});let c=n??"Send Debug Payload";return i?c="Sent":a&&(c="Something Went Wrong"),MP(WO,{className:t,onClick:l,"data-test-id":"send-debug-button",children:c})};var Wk="AnimatedClock_module_hands__8976d762",Gk="AnimatedClock_module_animate__8976d762",jk="AnimatedClock_module_reverse__8976d762";const Yk=({style:e,animateDirection:t="forward",animateHour:n,animateMinute:r,className:i})=>{const o=Yf(Wk,"AnimatedClock_module_hour__8976d762","reverse"===t&&jk,n&&Gk),a=Yf(Wk,"AnimatedClock_module_minute__8976d762","reverse"===t&&jk,r&&Gk);return MP("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",style:e,className:i,children:[MP("circle",{cx:"12",cy:"12",r:"10.77",fillOpacity:"1",strokeWidth:"2.46",className:"AnimatedClock_module_circle__8976d762","data-animated-clock-circle":!0}),MP("path",{className:a,d:"M11.94 11.61V5.49",strokeWidth:"2.08",strokeLinecap:"round","data-animated-clock-hand":"minute"}),MP("path",{className:o,d:"M15.19 13.97L11.94 11.97",strokeWidth:"2.08",strokeLinecap:"round","data-animated-clock-hand":"hour"})]})},$k=["label","icon","onClick","className","children"],qk=VL((e,t)=>{let{label:n,icon:r,onClick:i,className:o="",children:a}=e,s=m(e,$k);const l=jw(e=>e.displayList.sideDock);return MP(WO,p(p({tabIndex:l?0:-1,ref:t,size:OE.SM,color:kE.PRIMARY,icon:r,iconSize:OE.SM,"aria-label":n,onClick:i,className:o},s),{},{children:a}))}),zk=()=>{const{enabled:e,icon:t,label:n,onSelect:r}=DP();return e&&MP(Kw,{text:n,children:MP(qk,{label:n,onClick:r,icon:MP(nO,{name:t,focusable:"false"})})})};const Kk=()=>{const{label:e,ariaLabel:t,enabled:n,icon:r,animating:i,onSelect:o,active:a}=aR(),s=IR([uf,df,_f]),l=Yf(yf.LIKE_BUTTON,"LikeButton_module_likeButton__3908feee",i&&"LikeButton_module_animating__3908feee"),c=Yf(bf.LIKE_ICON,"LikeButton_module_likeIcon__3908feee",a&&"LikeButton_module_liked__3908feee",a&&s&&"LikeButton_module_redHeart__3908feee");return n&&MP(Kw,{text:e,children:MP(qk,{label:t,className:l,on:a,icon:MP(nO,{name:r,className:c,focusable:"false"}),"data-like-button":!0,onClick:o})})};const Xk=()=>{const{label:e,icon:t,onSelect:n,enabled:r}=lR(),i=Yf(yf.SHARE_BUTTON,"ShareButton_module_shareButton__26260904"),o=Yf(bf.SHARE_ICON,"ShareButton_module_shareIcon__26260904");return r&&MP(Kw,{text:e,children:MP(qk,{label:e,className:i,"data-share-button":!0,onClick:n,icon:MP(nO,{name:t,className:o,focusable:"false"})})})};const Zk=()=>{const e=jw(e=>e.vod.purchased),t=jw(e=>e.vod.isExpiring),{onSelect:n,enabled:r,icon:i,label:o}=cR(),a=Bf(n);return r&&MP("div",p(p({},a),{},{className:"VODButton_module_vodButtonContainer__33b65469 "+(t?"VODButton_module_expiring__33b65469":""),"data-vod-expiring":t,"data-vod-purchased":e,"data-vod-button":!0,children:MP(WO,{size:OE.SM,color:kE.PRIMARY,iconPosition:DE.RIGHT,className:Yf(yf.VOD_BUTTON,"VODButton_module_vodButton__33b65469"),"data-vod-button":!0,icon:MP(nO,{name:i,className:Yf("VODButton_module_icon__33b65469"),"data-vod-icon":!0}),iconSize:OE.SM,children:MP("span",{"data-vod-button-label":!0,children:o})})}))};const Jk=()=>{const{enabled:e,label:t,ariaLabel:n,animating:r,onSelect:i,active:o}=dR(),a=Yf(yf.WATCH_LATER_BUTTON,"WatchLaterButton_module_watchLaterButton__238c6c3b",o&&"WatchLaterButton_module_filled__238c6c3b",r&&"WatchLaterButton_module_animating__238c6c3b"),s=Yf("WatchLaterButton_module_watchLaterIcon__238c6c3b",bf.WATCH_LATER_ICON),[l,c]=aL(!1);return e&&MP(Kw,{text:t,children:MP(qk,{label:n,className:a,on:o,onClick:i,onPointerEnter:()=>{c(!0)},onPointerLeave:()=>{c(!1)},icon:MP(Yk,{animateMinute:l&&!r,className:s}),"data-watch-later-button":!0})})};var Qk="AIButton_module_button__0964f090";const eD=()=>{const[e,t]=aL(!1),[n,r]=aL(!1),i=uL(null),o=jw(e=>e.displayList.aiWidget),a=IR([uf,df,_f]),s=uL(null),l=uL(!1),{label:c,onSelect:u,enabled:d,icon:_}=kP(),h=o?[Af.AI_WIDGET_ID,Sf.RIGHT_CONTENT_AREA].join(" "):Sf.RIGHT_CONTENT_AREA;lL(()=>{function e(){document.activeElement.id===Af.AI_WIDGET_ID&&(l.current=!0)}return window.addEventListener("blur",e),()=>{window.removeEventListener("blur",e)}},[]),dP("Tab",e=>{const t=document.activeElement===document.body;var n;l.current&&t&&(e.preventDefault(),l.current=!1,null==(n=s.current)||n.focus())});const m=()=>{clearTimeout(i.current),t(!1),r(!0)},f=()=>{clearTimeout(i.current),r(!1),t(!0),i.current=setTimeout(function(){t(!1)},420)},v=Yf(Qk,a&&"AIButton_module_animateColor__0964f090",n&&"AIButton_module_transitionIn__0964f090",e&&"AIButton_module_transitionOut__0964f090"),g={backgroundColor:a?"rgb(0,0,0,0.9)":"",transitionProperty:n||e?"background-position":"none"};return d&&MP(AA,{children:[MP("style",{children:`\n                    .${Qk} {\n                        --shimmer-speed-in: 450ms;\n                        --shimmer-speed-out: 420ms;\n                    }\n                `}),MP(Kw,{text:c,children:MP(qk,p({label:c,"data-ai-button":!0,onClick:u,ref:s,className:v,"aria-expanded":o,"aria-controls":h,"aria-haspopup":"true",onFocus:m,onBlur:f,onPointerEnter:e=>{"mouse"===e.pointerType&&m()},onPointerLeave:e=>{"mouse"===e.pointerType&&f()},style:g,icon:MP(nO,{fill:a?"#fff":"",name:_,focusable:"false",className:"AIButton_module_icon__0964f090"})},CO))})]})};const tD=({isMenuDisplayed:e,setMenuDisplayed:t,buttonRef:n})=>{const r=hR(),i="More options",o=Object.keys(r).filter(e=>r[e].enabled).map(e=>{const t=r[e];return{id:e,label:t.label,icon:t.icon,className:!1===t.active?"SideDockMenu_module_inactive__3e8760ae":""}});return MP(sO,{type:iP.SIDEDOCK,className:"SideDockMenu_module_menu__3e8760ae",ariaLabel:i,isMenuDisplayed:e,setMenuDisplayed:t,panel:oP.SIDEDOCK,panelContent:MP(gO,{items:o,onSelect:e=>{const t=e.currentTarget.dataset.id;(0,r[t].onSelect)(e)}}),headerContent:MP(dO,{title:i,onClose:()=>t(!1),forceModalMenu:!0}),forceModalMenu:!0,buttonRef:n})},nD=VL(({onClick:e,isMenuDisplayed:t},n)=>{const r=hR(),i="More options";return Object.values(r).filter(e=>e.enabled).length?MP(Kw,{text:i,children:MP(qk,{ref:n,label:i,onClick:e,icon:MP(nO,{name:OP.VERTICAL_ELLIPSIS,focusable:"false"}),"aria-haspopup":"dialog",ariaExpanded:t})}):null}),rD=()=>{const e=uL(null),t=jw(e=>e.displayList.sideDock),n=jw(e=>e.appearance.fullscreen),r=jw(e=>e.displayList.outro),i=jw(e=>e.vod.purchased),o=jw(e=>e.displayList.menu),a=jw(e=>e.setAppearance),s=jw(e=>e.setDisplayList),l=cR(),c=bP(UE.SIDE_DOCK_MENU),[u,d]=aL(!1),_=e=>{s("menu",e),d(e)};o||d(!1);const h={className:Yf(bf.VP_SIDEDOCK,"SideDock_module_root__eeb5e08f",t&&"SideDock_module_visible__eeb5e08f",r&&"SideDock_module_outroVisible__eeb5e08f",n&&"SideDock_module_fullscreen__eeb5e08f"),onPointerEnter:()=>a("mousedOverSidedock",!0),onMouseEnter:()=>a("mousedOverSidedock",!0),onPointerLeave:()=>a("mousedOverSidedock",!1),onMouseLeave:()=>a("mousedOverSidedock",!1)};return MP(cO,{children:[MP("div",p(p({},h),{},{"data-sidedock":!0,children:[l.enabled&&!i&&MP(Zk,{}),MP(zw,{visible:t,children:MP("div",{className:"SideDock_module_sidedockInner__eeb5e08f","data-sidedock-inner":!0,children:c?MP(nD,{ref:e,onClick:()=>_(!0),isMenuDisplayed:u}):MP(AA,{children:[l.enabled&&i&&MP(Zk,{}),MP(Kk,{}),MP(Jk,{}),MP(zk,{}),MP(Xk,{}),MP(eD,{})]})})})]})),c&&MP(tD,{isMenuDisplayed:u,setMenuDisplayed:_,buttonRef:e})]})};const iD=Object.entries(bC).reduce((e,[t,n])=>(e[n]=TC[t],e),{}),oD=({max:e=1,timeSeries:t=[],debugMarkers:n=[]})=>{const r=t.length,i=r<100?0:r-100,o=t[i],a=t[r-1],s=o?o.time:0,l=a?a.time:0,c=t.slice(i).map(t=>{let n=(t.time-s)/(l-s)*250,r=14-14*t.value/e;return isNaN(r)&&(r=0),isNaN(n)&&(n=0),`${n},${function(e){return Math.min(Math.max(e,0),14)}(r)}`}).join(" ");return MP("svg",{width:250,height:14,viewBox:"0 0 250 14",children:[MP("g",{children:MP("polyline",{stroke:"white",fill:"none",points:c})}),MP("g",{children:!!n.length&&n.filter(e=>e.t>=s&&e.t<=l).map((e,t)=>{let n=(e.t-s)/(l-s)*250;return isNaN(n)&&(n=0),MP("g",{children:MP("line",{className:"BandwidthSeriesDisplay_module_marker__e795ff85",x1:n,y1:"0",x2:n,y2:14,strokeWidth:"1",stroke:iD[e.type]})},`${e.t}-${t}`)})})]})};const aD=({title:e="",value:t})=>MP("div",{children:[MP("dt",{children:e}),MP("dd",{children:t})]}),sD=({payloadId:e,showSessionId:t})=>{const n=jw(e=>e.debug.currentScanner),r=jw(e=>e.debug.codec),i=jw(e=>e.debug.isLive),o=jw(e=>e.debug.isDash),a=jw(e=>e.debug.delivery),s=jw(e=>e.debug.resolution),l=jw(e=>e.debug.embedSize),c=jw(e=>e.playback.drm),u=jw(e=>e.playback.drmMode),d=jw(e=>e.debug.sessionId),_=jw(e=>e.debug.ecdnVendor),h=jw(e=>e.debug.p2pSources),m=jw(e=>e.debug.p2pOffload),f=jw(e=>e.debug.totalFrames),v=jw(e=>e.debug.liveLatency),g=jw(e=>e.debug.currentTime),E=jw(e=>e.debug.bufferEnd),b=jw(e=>e.debug.bufferAhead),y=jw(e=>e.debug.bufferTarget),T=jw(e=>e.debug.presentationDelay),S=jw(e=>e.debug.droppedFrames),C=jw(e=>e.debug.vrHeadsetName),A=jw(e=>e.debug.liveSessionID),L=jw(e=>e.debug.bandwidthKbps),I=jw(e=>e.debug.bandwidthMinKbps),P=jw(e=>e.debug.bandwidthMaxKbps),R=jw(e=>e.debug.separateAudioVideo),w=jw(e=>e.debug.bandwidthSeriesData),O=jw(e=>e.debug.droppedFramesPercent),k=jw(e=>e.debug.clipId),{max:D,debugMarkers:N,timeSeries:M}=w,x=n===Ys?" *":"";return MP("dl",{className:"DebugValues_module_values__54d9bb7b",children:[k&&MP("div",p(p({},Bf(()=>{Uf(`${k}`)})),{},{children:[MP("dt",{children:"Clip ID:"}),MP("br",{}),MP("dd",{className:"DebugValues_module_clipId__54d9bb7b",children:k})]})),!!a&&MP(aD,{title:"Delivery:",value:`${a}${x}`}),!!r&&MP(aD,{title:"Codec:",value:r}),!!s&&MP(aD,{title:"Playing:",value:s}),!!l&&MP(aD,{title:"Embed Size:",value:l}),o&&MP(aD,{title:"Separate AV:",value:`${R}`}),(o||i)&&MP(aD,{title:"Dropped Frames:",value:`${S} / ${f} - ${O}`}),!!C&&MP(aD,{title:"VR Hardware:",value:C}),!!_&&MP(AA,{children:[MP(aD,{title:"eCDN Vendor:",value:_}),MP(aD,{title:"Peers - P2P Delivery:",value:`${h} - ${m}`})]}),c&&MP(aD,{title:"DRM:",value:`${c.toString()} / ${u.toString().replace("sd-","")}`}),i&&MP(AA,{children:[!!A&&MP(aD,{title:"Live Session ID:",value:A}),MP(aD,{title:"Live Latency / Target:",value:`${v} / ${T}`})]}),MP(aD,{title:"Playhead / Buffer End:",value:`${g} / ${E}`}),!!y&&MP(aD,{title:"Buffer Ahead / Target:",value:`${b} / ${y}`}),(o||i)&&MP(AA,{children:[MP(aD,{title:"Bandwidth:",value:L}),MP("div",{className:"DebugValues_module_bandwidthMinMax__54d9bb7b",children:["(",MP("b",{className:"DebugValues_module_bandwidthMin__54d9bb7b",children:I}),MP("b",{className:"DebugValues_module_bandwidthMax__54d9bb7b",children:P}),")"]}),MP("div",{className:"DebugValues_module_timeSeries__54d9bb7b",children:MP(oD,{max:D,debugMarkers:N,timeSeries:M})})]}),d&&t&&MP("div",{children:[MP("dt",{children:"Key:"}),MP("br",{}),MP("dd",{className:"DebugValues_module_sessionId__54d9bb7b",children:d})]}),e&&MP("div",{children:[MP("dt",{children:"Debug Key:"}),MP("br",{}),MP("dd",{className:"DebugValues_module_payloadId__54d9bb7b",children:e})]})]})};var lD="DebugPanel_module_debugButton__42adb963";const cD=["bandwidthSeriesData"];function uD(){}let dD;const _D=({onCopyFailed:e,className:t})=>{const[n,r]=aL(!1),i=jw(e=>e.debug),{bandwidthSeriesData:o}=i,a=m(i,cD),s=uL(null);if(!a)return;const l=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(){const t={version:2,tpl:a,mark:o.debugMarkers};return clearTimeout(dD),function(e){if(e&&e.then)return e.then(uD)}(function(n,i){try{var o=function(){const n=btoa(JSON.stringify(t));return function(e,t){return void 0?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}(Uf(n),function(t){t?(r(!0),dD=setTimeout(()=>{clearTimeout(dD),r(!1)},1500)):e&&e(),s.current.focus()})}()}catch(e){return i()}return o&&o.then?o.then(void 0,i):o}(0,function(){e&&e()}))});return MP(WO,{ref:s,className:t,onClick:l,children:n?"Copied":"Copy Debug Payload"})},hD=()=>{const e=jw(e=>e.appearance.playerBreakpoint),t=jw(e=>e.displayList.debugPanel),n=jw(e=>e.setDisplayList),r=jw(e=>e.debug.isDNTEnabled),i=jw(e=>e.debug.hideCloseButton),o=jw(e=>e.debug.isCopyDisabled),[a,s]=aL(void 0),[l,c]=aL(!1),u=uL(null),d=uL(null),_=e=>n("debugPanel",e),h=!i,m=!o,f=Yf("DebugPanel_module_root__42adb963","shared_module_roundedBox__29a0c6d5",(e===wE.XS||e===wE.XXS)&&"DebugPanel_module_smallPlayer__42adb963"),{onFocus:v}=IP({parentRef:u,isActive:t,onEscape:()=>{_(!1)}});return t&&MP("div",{ref:u,className:f,role:"dialog","aria-label":"Debug log",onFocus:v,children:[MP(sD,{payloadId:a,showSessionId:l}),m&&MP("div",{className:"DebugPanel_module_buttonWrapper__42adb963",children:[MP(_D,{className:lD,onCopyFailed:()=>c(!0)}),MP(Hk,{className:lD,onSendSuccess:e=>s(e)})]}),h&&MP("button",p(p({},Bf(()=>_(!1))),{},{className:"DebugPanel_module_closeButton__42adb963","aria-label":"Close stats debug panel",ref:d,children:MP(nO,{name:OP.DISMISS_X})})),!!r&&"No Debug Key available as Do Not Track is enabled."]})};const pD=()=>{const{link:e,img:t,margin:n,width:r,height:i,name:o,id:a}=jw(e=>e.badge),s=jw(e=>e.setBadge),l=jw(e=>e.displayList.badge),c=o+" Badge",u={};return n&&Object.assign(u,{margin:n}),MP(zw,{visible:l,children:MP("div",{className:"Badge_module_badge__43ce2278",style:u,"data-badge":!0,children:MP(Zw,{href:e,onClick:()=>s("id",a),targetBlank:!0,className:`Badge_module_badgeLink__43ce2278 ${DO}`,children:MP("img",{src:t,width:r,height:i,alt:c})})})})};const mD=({clip:e,is360:t,hasHDRNot10Plus:n,hasHDR10Plus:r,hasDolbyVision:i,hasAIContent:o,hasSurroundSound:a,hasAmbosonic:s,channelLayout:l,className:c})=>{const u=Yf("TitleTags_module_tag__20a17f3b",c);return MP("div",{className:"TitleTags_module_tagWrapper__20a17f3b",children:[e&&MP("span",{className:u,children:"Clip"}),t&&MP("span",{className:u,children:s?"360 ambisonic":"360"}),n&&MP("span",{className:u,children:"HDR"}),r&&MP("span",{className:u,children:"HDR10+"}),i&&MP("span",{className:`${u} TitleTags_module_dolbyVisionTag__20a17f3b`,children:MP(nO,{name:OP.DOLBY_VISION})}),o&&MP(Zw,{href:"https://help.vimeo.com/hc/en-us/articles/25551485186833/",className:`${u} TitleTags_module_aiTag__20a17f3b`,"data-ai-content-tag":"true",children:"Includes AI"}),a&&MP("span",{className:u,children:l})]})};const fD=()=>{const e=jw(e=>e.title.displayTitle),t=jw(e=>e.title.displayPortrait),n=jw(e=>e.title.ownerLinkUrl),r=jw(e=>e.title.targetBlank),i=jw(e=>e.title.portraitImg),o=jw(e=>e.title.titleLinkUrl),a=jw(e=>e.title.title),s=jw(e=>e.title.ownerName),l=jw(e=>e.title.is360),c=jw(e=>e.title.hasHDR),u=jw(e=>e.title.hasHDR10Plus),d=jw(e=>e.title.hasDolbyVision),_=jw(e=>e.title.channelLayout),h=jw(e=>e.title.bylineLinkUrl),m=jw(e=>e.title.displayByline),f=jw(e=>e.title.hasAIContent),v="5.1"===_||"7.1"===_,g=_.startsWith("ambisonic"),E=jw(e=>e.displayList.title),b=jw(e=>e.embed.badge),y=jw(e=>e.displayList.badge),[T,S]=aL(t&&!y),C=jw(e=>e.playback.isSegmentedPlaybackEnabled),A=jw(e=>e.bigPicture),L={is360:l,hasHDRNot10Plus:c&&!u,hasHDR10Plus:u,hasDolbyVision:d,hasAIContent:f,hasSurroundSound:v,clip:C},I=Object.values(L).some(Boolean);return lL(()=>{let e;return!y&&t?e=setTimeout(()=>S(!0),YE):S(!1),()=>clearTimeout(e)},[y,t]),MP(AA,{children:[b&&MP(pD,{}),MP(zw,{visible:E,children:MP("div",{className:`${bf.VP_TITLE} Title_module_title__2159b884`,role:"presentation",children:MP("header",{className:"Title_module_header__2159b884",role:"presentation",children:[T&&MP("div",{className:"Title_module_portrait__2159b884",children:MP(Zw,{href:n,targetBlank:r,variant:"minimal",className:Yf("Title_module_portraitLink__2159b884",MO),tabIndex:E?0:-1,onClick:()=>A.sendEvent(yg.SELECT_PLAYER_PROFILE_PHOTO,{},{[Tg.WEB]:{target:"profile page",target_path:n,copy:null},[Tg.PRODUCT_ANALYTICS]:{flow:"profile_page_from_embed_player",element:"icon",copy:"portrait"}}),children:MP("img",{src:i,alt:"Link to video owner's profile",width:"60",height:"60","data-trackClick":Zd})})}),MP("div",{className:"Title_module_headers__2159b884",children:[e&&MP("div",{className:"Title_module_titleWrapper__2159b884",children:[MP(Zw,{href:o,targetBlank:r,"data-track-click":Kd,variant:"minimal",className:Yf("Title_module_titleLink__2159b884",DO),tabIndex:E?0:-1,"aria-labelledby":If.TITLE_TEXT,onClick:()=>A.sendEvent(yg.SELECT_PLAYER_TITLE,{},{[Tg.WEB]:{target:"viewer home",target_path:o,copy:a},[Tg.PRODUCT_ANALYTICS]:{flow:"viewer_home_from_embed_player",element:"button",copy:"title"}})}),MP("div",{className:"Title_module_textAndTagsWrapper__2159b884","data-title-tags":!!I||void 0,children:[MP(OO,{id:If.TITLE_TEXT,className:Yf("Title_module_titleText__2159b884"),children:a}),MP(mD,p(p({},L),{},{hasAmbosonic:g,channelLayout:_,className:"Title_module_titleTag__2159b884"}))]})]}),m&&MP(Zw,{href:h,targetBlank:r,variant:"minimal",className:Yf("Title_module_subtitle__2159b884",DO),tabIndex:E?0:-1,onClick:()=>A.sendEvent(yg.SELECT_PLAYER_BYLINE,{},{[Tg.WEB]:{target:"profile page",target_path:h,copy:s},[Tg.PRODUCT_ANALYTICS]:{flow:"profile_page_from_embed_player",element:"button",copy:"byline"}}),children:MP(OO,{children:s})})]})]})})})]})};var vD="Card_module_text__924d992f";const gD=({id:e,timecode:t,className:n,teaser:r,url:i,imageUrl:o,headline:a,inView:s})=>{const l=jw(e=>e.appearance.isVerticalVideo),c=jw(e=>e.setCards),u=jw(e=>e.setPlayback),d=()=>{c("hoveredCard",null),c("cardPressed",e),i&&u("paused",!0)};return MP("div",{className:Yf("Card_module_card__924d992f",n,s&&"Card_module_active__924d992f",o&&"Card_module_hasThumbnail__924d992f",l&&"Card_module_vertical__924d992f"),onMouseEnter:()=>c("hoveredCard",t),onMouseLeave:()=>c("hoveredCard",null),onClick:d,onKeyUp:e=>{"Enter"===e.key&&d()},role:"link",tabIndex:-1,"aria-hidden":!s,children:MP(Zw,{href:i,className:"Card_module_inner__924d992f",tabIndex:s?0:-1,children:[!!o&&MP("div",{className:"Card_module_imageWrap__924d992f",children:MP("img",{className:"Card_module_image__924d992f",src:o,alt:""})}),MP("div",{className:"Card_module_body__924d992f",children:[MP(OO,{size:ME.MD,className:Yf(vD,"Card_module_title__924d992f"),color:VE.WHITE,children:a}),!!r&&MP(OO,{weight:xE.NORMAL,element:"p",className:`${vD} Card_module_detail__924d992f`,color:VE.WHITE,children:r})]}),!!i&&MP("div",{className:"Card_module_popOutWrapper__924d992f",children:MP(nO,{name:OP.POP_OUT,className:"Card_module_popOut__924d992f"})})]})})};const ED=()=>{const e=jw(e=>e.cards.cardsMap),t=jw(e=>e.cards.displayedCard),n=jw(e=>e.displayList.cards),r=jw(e=>e.displayList.fullPlayerElement),i=e=>t===e&&!r;return n&&MP("div",{className:"Cards_module_cardsWrapper__19f4ca28",children:e.values().map(e=>MP(gD,{id:e.id,timecode:e.timecode,className:e.className,teaser:e.teaser,url:e.url,imageUrl:e.imageUrl,headline:e.headline,inView:i(e.timecode)},e.id))})};const bD=({show:e})=>{const{buffering:t,currentTime:n,loadedTime:r,currentFragment:i}=jw(e=>e.playback),o=Xf(n,i),a=Xf(r,i);return e&&MP("div",{className:"TinyProgressBar_module_tinyBar__c04d36b1",children:MP("svg",{className:"TinyProgressBar_module_tinyBarSVG__c04d36b1",width:"100%",height:"100%",viewBox:"0 0 70 40",focusable:"false",children:[MP("defs",{children:[MP("clipPath",{id:"rounded-border",children:MP("rect",{height:"100%",width:"100%",x:"0",y:"0",rx:"5"})}),MP("pattern",{id:"tiny-buffer","data-tiny-buffer-pattern":!0,className:"TinyProgressBar_module_bufferPattern__c04d36b1",patternUnits:"userSpaceOnUse",x:"0",y:"0",width:"10",height:"10",viewBox:"0 0 10 10",children:[MP("line",{x1:"5",y1:"-1",x2:"-5",y2:"10",strokeWidth:"2",strokeLinecap:"butt"}),MP("line",{x1:"10",y1:"-1",x2:"0",y2:"10",strokeWidth:"2",strokeLinecap:"butt"}),MP("line",{x1:"15",y1:"-1",x2:"5",y2:"10",strokeWidth:"2",strokeLinecap:"butt"})]})]}),MP("g",{clipPath:"url(#rounded-border)",children:t?MP("rect",{className:"TinyProgressBar_module_buffer__c04d36b1",height:"3",width:"110%",x:"0",y:"37",fill:"url(#tiny-buffer)"}):MP(AA,{children:[MP("rect",{className:"TinyProgressBar_module_loaded__c04d36b1","data-tiny-loaded":!0,height:"3",width:Zf(a),x:"0",y:"37"}),MP("rect",{className:"TinyProgressBar_module_played__c04d36b1","data-tiny-played":!0,height:"3",width:Zf(o),x:"0",y:"37"})]})})]})})};var yD="PlayButton_module_trailer__181dcaa6",TD="PlayButton_module_progressExpanded__181dcaa6";const SD=({className:e,controlBarVisibilityHandlers:t})=>{const n=jw(e=>e.displayList.controlBar),r=jw(e=>e.setPlayback),i=jw(e=>e.controlBar.trailerButtonText),o=jw(e=>e.embed.playbar),a=jw(e=>e.appearance.playerSizeMode),s=jw(e=>e.controlBar.isExpanded),{buttonState:l,setButtonState:c}=rP(),u=pP(),d=CR(),_=a===Iv.TINY||!o,h=l===Ov.TRAILER,p={[Ov.PLAY]:{icon:OP.PLAY,onClick:()=>{r("paused",!1),c(Ov.PAUSE)},label:"Play",className:"PlayButton_module_playIcon__181dcaa6"},[Ov.PAUSE]:{icon:OP.PAUSE,onClick:()=>{r("paused",!0),c(Ov.PLAY)},label:"Pause",className:"PlayButton_module_pauseIcon__181dcaa6"},[Ov.REPLAY]:{icon:OP.REPLAY,onClick:()=>{r("paused",!1),c(Ov.PAUSE)},label:"Replay",className:"PlayButton_module_replayIcon__181dcaa6"},[Ov.TRAILER]:{icon:OP.PLAY,onClick:()=>{r("paused",!1)},label:"Play",className:"PlayButton_module_trailerIcon__181dcaa6"}}[l],m=u===hP.CENTER,f=Yf("PlayButton_module_playButtonWrapper__181dcaa6",m&&"PlayButton_module_center__181dcaa6",h&&yD,s&&!m&&TD),v=Yf("PlayButton_module_playButton__181dcaa6",h&&yD,DO,s&&!m&&TD,e);return d&&MP(zw,{visible:n,children:MP("div",{className:f,children:MP(AO,{id:"play-button-tooltip",tooltipContent:p.label,className:"Tooltip_module_playTooltip__b2bc4d16 "+(h?"Tooltip_module_trailerPlayTooltip__b2bc4d16":""),children:MP(WO,{className:v,onClick:p.onClick,icon:MP(nO,{className:p.className,name:p.icon}),onTouchStart:t.onTouchStart,onTouchEnd:t.onTouchEnd,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,"data-play-button":!0,children:[MP(bD,{show:_}),h&&MP("span",{className:"PlayButton_module_text__181dcaa6",children:i||"Watch Trailer"})]})})})})};var CD="ControlBarButton_module_controlBarButton__5e0eae92";const AD=e=>{const t=jw(e=>e.displayList.menu),n=jw(e=>e.embed.flags.small_player_v2),r=jw(e=>e.appearance.playerSizeMode);return(Q.touch||t||n&&r===Iv.TINY)&&Object.assign(e,{visible:!1}),MP(AO,p({},e))},LD=["className","icon","children","tooltipLabel","hasTooltip","animating","id"],ID=VL((e,t)=>{let{className:n="",icon:r,children:i,tooltipLabel:o,hasTooltip:a=!0,animating:s=!1,id:l}=e,c=m(e,LD);const u=jw(e=>e.appearance.playerBreakpoint),d=jw(e=>e.displayList.controlBarButtons),_=jw(e=>e.embed.flags.small_player_v2),h=Yf(CD,DO,n),f=["xl","xxl"].includes(u)?16:8,v=d?0:-1;return a?MP(AD,{id:l?`${l}-tooltip`:null,tooltipContent:o,margin:f,animating:s,className:_&&"ControlBarButton_module_controlBarButtonTooltip__5e0eae92",children:MP(WO,p(p({id:l,ref:t,className:h,childrenClassName:_&&"ControlBarButton_module_controlBarButtonChildren__5e0eae92",icon:r,tabIndex:v},c),{},{children:i}))}):MP(WO,p({ref:t,className:h,icon:r,tabIndex:v},c))});const PD=({onFocus:e,ariaHidden:t})=>{const n=jw(e=>e.appearance.fullscreen),r=jw(e=>e.setAppearance),i=Yf(bf.FULLSCREEN,"FullscreenButton_module_fullscreen__5b68e32b"),o=n?"Exit full screen":"Fullscreen",a=n?OP.EXIT_FULLSCREEN:OP.ENTER_FULLSCREEN;return MP(ID,{id:Rf.FULLSCREEN,onClick:()=>r("fullscreen",!n),onFocus:e,className:i,icon:MP(nO,{name:a}),tooltipLabel:o,"data-fullscreen-button":!0,"aria-hidden":t})};const RD=VL(({isMenuDisplayed:e,setMenuDisplayed:t,onFocus:n,ariaHidden:r},i)=>{const o=jw(e=>e.appearance.isMenuBlockingUI),{onClick:a,onKeyDown:s,onMouseDown:l}=nP(()=>t(!e));return MP(ID,{id:Rf.PREFS,ref:i,className:`${yf.VP_PREFS} PrefsButton_module_prefsButton__c0bd4f7c`,"aria-expanded":e,"aria-haspopup":o?"dialog":"true","aria-hidden":r,icon:MP(nO,{name:OP.GEAR,className:"PrefsButton_module_gearIcon__c0bd4f7c"}),onClick:a,onKeyDown:s,onMouseDown:l,onFocus:n,tooltipLabel:"Settings","data-prefs-button":!0})}),wD=({onFocus:e,ariaHidden:t})=>{const n=jw(e=>e.appearance.pictureInPictureActive),r=jw(e=>e.setAppearance),i=n?"Exit Picture-in-Picture":"Picture-in-Picture",o=n?OP.EXIT_PICTURE_IN_PICTURE:OP.ENTER_PICTURE_IN_PICTURE;return MP(ID,{id:Rf.PIP,className:yf.PIP,icon:MP(nO,{name:o}),onClick:()=>r("pictureInPictureActive",!n),onFocus:e,tooltipLabel:i,"data-pip-button":!0,"aria-hidden":t})},OD=VL(({onFocus:e,ariaHidden:t},n)=>{const r=jw(e=>e.playback.volume),i=jw(e=>e.playback.muted),o=i?"Unmute":"Mute",{toggleMuted:a}=mP();return MP(ID,{ref:n,onClick:a,onFocus:e,icon:MP(nO,!i&&r>0?{name:OP.VOLUME_ON_FILLED,"data-volume-icon":!0}:{name:OP.VOLUME_OFF_FILLED,"data-volume-muted-icon":!0}),"aria-label":o,"aria-hidden":t,"aria-keyshortcuts":"m","data-volume-button":!0,hasTooltip:!1})});const kD=()=>{const e=jw(e=>e.controlBar.vimeoLogoUrl),t=jw(e=>e.appearance.playerBreakpoint),n=jw(e=>e.bigPicture);return MP(Zw,{className:Yf("VimeoLogoLink_module_vimeoLogo__970f58c4",DO),href:e,"data-vimeo-logo":!0,"aria-label":"Watch on Vimeo",onClick:()=>{n.sendEvent(yg.SELECT_PLAYER_VIMEO_LOGO,{},{[Tg.WEB]:{target:"vimeo.com",target_path:e,copy:"vimeo"},[Tg.PRODUCT_ANALYTICS]:{flow:"viewer_home_from_embed_player",element:"icon",copy:"vimeo"}})},children:MP(mk,{playerBreakpoint:t})})},DD=({onFocus:e,ariaHidden:t})=>{const n=jw(e=>e.appearance.showAirPlayPicker),r=jw(e=>e.setAppearance);return MP(ID,{onClick:()=>r("showAirPlayPicker",!n),onFocus:e,"aria-label":n?"Turn off AirPlay":"Choose an AirPlay device","aria-hidden":t,tooltipLabel:"AirPlay","data-airplay-button":!0,icon:MP(nO,{name:OP.AIRPLAY})})},ND=VL(({isMenuDisplayed:e,setMenuDisplayed:t,onFocus:n,ariaHidden:r},i)=>{const o=jw(e=>e.appearance.isMenuBlockingUI),{onClick:a,onKeyDown:s,onMouseDown:l}=nP(()=>t(!e));return MP(ID,{ref:i,onClick:a,onKeyDown:s,onMouseDown:l,onFocus:n,"aria-expanded":e,"aria-haspopup":o?"dialog":"true","aria-hidden":r,icon:MP(nO,{name:OP.CHAPTERS}),tooltipLabel:"Chapters","data-chapter-button":!0,id:Rf.CHAPTERS})}),MD=({onFocus:e,ariaHidden:t})=>{const n=jw(e=>e.events),r=jw(e=>e.captions.activeTextTrackId),i=r&&"off"!==r,o=i?OP.CC_FILLED:OP.CC;return MP(ID,{id:Rf.CC,className:bf.CC,"aria-hidden":t,"aria-pressed":i,icon:MP(nO,{name:o}),onClick:()=>{n.fire(_h)},onFocus:e,tooltipLabel:"CC/subtitles","data-cc-button":!0})},xD=({onFocus:e,ariaHidden:t})=>{const n=jw(e=>e.setAppearance),r=jw(e=>e.appearance.stereoscopicEnabled),i=r?"Disable stereoscopic playback":"Enable stereoscopic playback";return MP(ID,{className:bf.STEREOSCOPIC,onClick:()=>n("stereoscopicEnabled",!r),onFocus:e,"aria-label":i,"aria-hidden":t,icon:MP(nO,{name:OP.STEREOSCOPIC}),tooltipLabel:"Stereoscopic","data-stereoscopic-button":!0})};const VD=({onFocus:e,ariaHidden:t})=>{const n=Yf(Tf.EXCLUDE_GLOBAL_BUTTON_STYLES,"ChromecastButton_module_chromecastButton__6a7b0286",CD,DO,bf.VP_CAST_BUTTON);return(()=>{const[e,t]=aL(!1);lL(()=>{setTimeout(()=>t(!0),500)},[])})(),MP(AO,{id:"chromecast-control-bar-button-tooltip",tooltipContent:"GoogleCast",children:MP("button",{className:n,is:"google-cast-button","data-chromecast-button":!0,onFocus:e,"aria-hidden":t})})},BD=({onFocus:e,ariaHidden:t})=>{const n=VP(e=>e.bigPicture),r=jw(e=>e.displayList.transcript),i=jw(e=>e.toggleDisplayList),o="Transcript",{onClick:a,onKeyDown:s}=nP(()=>{i("transcript"),n.sendEvent(yg.EMBEDDED_TRANSCRIPT_CLICK,{name:r?"exit_embed_transcript":"open_embed_transcript",copy:o,location:"control_bar",element:"transcript_button",current_transcript_language:""})}),l=MP(nO,{name:r?OP.TRANSCRIPT_ON:OP.TRANSCRIPT_OFF}),c=r?[Cf.TRANSCRIPT_VIEWER,Sf.RIGHT_CONTENT_AREA].join(" "):Sf.RIGHT_CONTENT_AREA;return MP(ID,{id:Rf.TRANSCRIPT,onClick:a,onKeyDown:s,onFocus:e,icon:l,tooltipLabel:o,"aria-controls":c,"aria-expanded":r,"aria-hidden":t})};const UD=()=>{const e=jw(e=>e.displayList.controlBarButtons),t=jw(e=>e.setDisplayList),n=uL(e),[r,i]=aL(!1),o=jw(e=>e.setControlBar);lL(()=>{e!==n.current&&i(!0),n.current=e},[e]);const a=e?"Hide controls":"Show controls",s=Yf("CollapseButton_module_collapseIcon__d5f32a43",e&&"CollapseButton_module_expanded__d5f32a43");return MP(ID,{id:Rf.COLLAPSE,onClick:()=>{const n=!e;o("shouldRestoreButtonsDisplayed",n),t("controlBarButtons",n)},onTransitionEnd:e=>{"transform"===e.propertyName&&i(!1)},tooltipLabel:a,animating:r,tabIndex:0,className:"CollapseButton_module_collapseButton__d5f32a43",icon:MP(nO,{"data-collapse-icon":!0,name:OP.CHEVRON_RIGHT,className:s,"aria-hidden":"true"})})};var FD="CustomLogo_module_progressExpanded__4457cefa";const HD=({className:e})=>{const t=jw(e=>e.displayList.controlBar),n=jw(e=>e.displayList.accessGate),r=jw(e=>e.appearance.playerSizeMode)===Iv.TINY,i=jw(e=>e.embed.customLogo),o=jw(e=>e.displayList.ad),{customLogoUrl:a,customLogoImg:s,customLogoSticky:l}=jw(e=>e.embed.customLogoFields),c=jw(e=>e.user.ownerName),u=jw(e=>e.controlBar.isExpanded),d=i&&!r&&!o,_=!n&&(l||t),h=Yf("CustomLogo_module_customLogo__4457cefa",a?"CustomLogo_module_link__4457cefa":"",DO,e,u&&FD),p=Yf("CustomLogo_module_customLogoImg__4457cefa",u&&FD);return d&&MP(zw,{visible:!!_,children:MP(kO,{classNames:h,imgClassNames:p,url:a,img:s,imgAlt:c})})},WD=({className:e,marker:t})=>{const n=jw(e=>e.setPlayback),r=jw(e=>e.playback.currentFragment),i=(t.startTime-r.startTime)/r.duration*100,o=()=>n("currentTime",t.startTime),a="Seek to "+Math.round(100*t.startTime)/100+" seconds.";return MP("div",{id:`cuepoint-${t.id}`,className:e,style:{left:`${i}%`},"data-time":t.startTime,role:"button","aria-label":a,tabIndex:0,onClick:o,onKeyUp:e=>{["Space","Enter"].includes(e.code)&&o()},"data-cue-point-marker":!0})};const GD=()=>{const e=jw(e=>e.playback.currentFragment),t=jw(e=>e.cuePoints.cuePoints),n=jw(e=>e.displayList.progressBar),r=bR(),i=Yf("CuePointMarkers_module_cuePoints__7287c027",xO),o=t.filter(t=>{const n=e.startTime<=t.time&&t.time<=e.endTime,i=r(t.time);return n&&i}).map(e=>({id:e.id,startTime:e.time}));return MP(AA,{children:!!o.length&&n&&o.map(e=>MP(WD,{className:i,marker:e},e.startTime))})};const jD=()=>{const e=uL(null),t=jw(e=>e.playback.currentTime),n=jw(e=>e.playback.currentFragment),r=jw(e=>e.liveEvent.isLiveEvent),i=jw(e=>e.liveEvent.isArchived),o=jw(e=>e.playback.liveEdgeTime),a=jw(e=>e.playback.liveTailTime),s=jw(e=>e.playback.atLiveEdge),l=Kf(t,n),[c,u]=aL(!1);wP(e,()=>{if(e.current){const t=e.current.getBoundingClientRect();u(0===t.width)}},100);const d={progressBar:"Progress Bar",ariaTextVOD:uv(l)+" of "+uv(n.duration),ariaTextLiveEdge:"Live time at "+uv(o),ariaTextLiveDVR:uv(Math.abs(o-l))+" behind Live"};let _=d.ariaTextVOD,h=0,p=n.duration,m=c||void 0;return r&&!i&&(_=s?d.ariaTextLiveEdge:d.ariaTextLiveDVR,h=Math.round(a),p=Math.round(o)),MP("div",{ref:e,className:`FocusTarget_module_focusTarget__abd564d5 ${DO}`,role:"slider","aria-label":d.progressBar,"aria-valuemin":h,"aria-valuemax":p,"aria-valuenow":Math.round(l),"aria-valuetext":_,"aria-hidden":m,tabIndex:c?-1:0,"data-progress-bar-focus-target":!0})};const YD=({marker:e,setTabFocused:t,setHoverFocused:n})=>{const r=jw(e=>e.setPlayback),i=jw(e=>e.playback.currentFragment),o=(e.start-i.startTime)/i.duration,a={visibleLabel:e.visibleLabel,ariaLabel:e.ariaLabel,id:e.id,start:e.start,left:o};function s(t){r("currentTime",e.start,{action:t.type,seekType:"interactive-marker"})}return MP("div",{className:Yf("InteractiveMarker_module_interactiveMarker__6d3dc825",xO),role:"button",style:{left:Zf(o,!1)},"aria-label":e.ariaLabel,"data-time":e.start,tabIndex:0,onClick:s,onKeyUp:e=>{["Space","Enter"].includes(e.code)&&s(e)},onMouseEnter:()=>n(a),onMouseLeave:()=>n(null),onFocus:()=>t(a),onBlur:()=>t(null),"data-hotspot-marker":!0})},$D=({width:e,setHoverFocused:t,setTabFocused:n})=>{const r=jw(e=>e.playback.currentFragment),i=jw(e=>e.interactive.hotspots),o=jw(e=>e.interactive.polls),a=jw(e=>e.interactive.quizzes),s=jw(e=>e.interactive.showMarkers),l=jw(e=>e.displayList.progressBar),c=bR(),u=AE({hotspots:i,polls:o,quizzes:a,fragment:r,progressBarWidth:e}).filter(e=>c(e.start));return!!u.length&&s&&MP(AA,{children:l&&u.map(e=>MP(YD,{marker:e,setTabFocused:n,setHoverFocused:t},e.start))})};const qD=({time:e,left:t,visible:n=!0,disabled:r=!1})=>MP(zw,{visible:n,children:MP("div",{className:"Timecode_module_timecodeContainer__0e71c943",role:"presentation",style:{left:t},"aria-hidden":"true","data-progress-bar-timecode-container":!0,children:MP("div",{className:"Timecode_module_timecode__0e71c943 "+(r?"Timecode_module_disabled__0e71c943":""),"data-progress-bar-timecode":!0,children:uv(e)})})}),zD=()=>{const e=jw(e=>e.playback.currentTime),t=jw(e=>e.playback.liveEdgeTime),n=jw(e=>e.playback.liveTailTime),r=jw(e=>e.playback.atLiveEdge),i=jw(e=>e.playback.currentFragment),o=jw(e=>e.playback.playInitiated),a=jw(e=>e.playback.paused),s=jw(e=>e.playback.buffering),l=jw(e=>e.displayList.progressBar),c=jw(e=>e.liveEvent.isLiveEvent),u=jw(e=>e.liveEvent.dvrEnabled),d=jw(e=>e.liveEvent.isEnded),_=jw(e=>e.liveEvent.isArchived),h=c?t:i.duration,p=c&&!_?1:0;let m=h,f=p;const v=Kf(e,i);if(c)if(u){if(u){const a=d&&!o&&0===e,s=_&&0!==i.duration;a?(m=i.duration,f=0):s?(m=e,f=e/i.duration):r?(f=1,m=e):(f=tv(e,n,t),m=e-t)}}else _&&(o||0!==e)?(f=Xf(e,i),m=v):_?(m=i.duration,f=p):(f=1,m=e);else o||0!==v?(f=Xf(e,i),m=v):(m=h,f=p);const g=(!c||_||u&&0!==t||!a&&!s&&0!==t)&&!isNaN(m)&&l;return MP(qD,{time:m,left:Zf(f,!1),disabled:c&&!u,visible:g})};var KD="ThumbnailPreview_module_text__0cb46f3c";const XD={xs:120,md:160,xl:200},ZD=({visible:e=!1,mousePercent:t=0,progressBarWidth:n,isMousedOverProgress:r=!1,tabOrHoverFocusedMarker:i=null})=>{const o=jw(e=>e.displayList.menu),a=jw(e=>e.playback.currentFragment),s=jw(e=>e.playback.duration),l=jw(e=>e.playback.liveEdgeTime),c=jw(e=>e.playback.liveTailTime),u=jw(e=>e.liveEvent.isLiveEvent),d=jw(e=>e.liveEvent.dvrEnabled),_=jw(e=>e.liveEvent.isArchived),h=jw(e=>e.appearance.boundingClientRect),m=jw(e=>e.appearance.isVerticalVideo),f=jw(e=>e.appearance.playerBreakpoint),v=jw(e=>e.verifyConfig),g=jw(e=>e.chapters.chapters),E=jw(e=>e.embed.chapters),b=jw(e=>e.controlBar.thumbnailPreview),y=jw(e=>e.playback.isSegmentedPlaybackEnabled),[T,S]=aL({width:0,height:0,backgroundImage:"",backgroundSize:"",backgroundPosition:""}),[C,A]=aL(!1),L=h.height>300&&n>=185,I=0!==l&&!isNaN(l);let P=L&&!o&&(!u||d&&I)&&e;const[R,w]=aL(0);r?w(t):i?w(i.left):P=!1;const O=Jf(R,a);let k;k=d?_&&0!==a.duration?Qf(R,a):((e,t,n)=>ev(e,t,n)-n)(R,c,l):Qf(R,a),isNaN(k)&&(P=!1);const D=bR()(O);let N="";if(g.length&&E&&!y){const e=g.find(e=>e.startTime<=O&&e.endTime>=O);N=(null==e?void 0:e.text)||""}const M=(null==i?void 0:i.visibleLabel)||"",x=(e=>{switch(e){case wE.XL:case wE.XXL:return"xl";case wE.SM:case wE.MD:case wE.LG:return"md";default:return"xs"}})(f),V=((e,t)=>XD[e]*(t?9/16:1))(x,m),B=V/(null==b?void 0:b.frame_width);return lL(()=>{!C&&L&&e&&b&&v().then(()=>QP(b.url).then(()=>{A(!0),S({width:b.frame_width*B,height:b.frame_height*B,backgroundImage:`url(${b.url})`,backgroundSize:`${b.width*B}px ${b.height*B}px`,backgroundPosition:""})})).catch(()=>{})},[e,C,L,b,B,v]),lL(()=>{A(!1)},[b]),lL(()=>{b&&S(e=>p(p({},e),{},{width:b.frame_width*B,height:b.frame_height*B,backgroundSize:`${b.width*B}px ${b.height*B}px`}))},[f]),lL(()=>{if(b&&L){let e=0,t=0;if(b){const n=s/b.frames,r=Math.min(b.frames-1,Math.ceil(O/n)),i=r%b.columns,o=Math.floor(r/b.columns);e=-i*b.frame_width*B,t=-o*b.frame_height*B}S(n=>p(p({},n),{},{backgroundPosition:`${e}px ${t}px`}))}},[R,h,b,L,s,B,O]),MP(zw,{visible:P,children:MP("div",{className:"ThumbnailPreview_module_thumbnailPreview__0cb46f3c",role:"presentation","aria-hidden":"true",style:{left:Zf(R,!1),maxWidth:V},children:[!!T.backgroundImage&&C&&D&&MP("div",{className:`${bf.THUMB} ThumbnailPreview_module_thumbnailPreviewImage__0cb46f3c`,style:{width:`${T.width}px`,height:`${T.height}px`,backgroundImage:T.backgroundImage,backgroundSize:T.backgroundSize,backgroundPosition:T.backgroundPosition}}),MP("div",{className:"ThumbnailPreview_module_thumbnailPreviewText__0cb46f3c",children:[M&&MP("span",{className:KD,children:M}),M&&N&&MP("span",{className:"ThumbnailPreview_module_separator__0cb46f3c"}),N&&MP("span",{className:KD,children:N}),MP("span",{className:"ThumbnailPreview_module_time__0cb46f3c",children:uv(k)})]})]})})};var JD="ChapterSegment_module_segmentBar__4e173c26",QD="ChapterSegment_module_seekingDisabled__4e173c26";const eN=({segment:e,className:t})=>{const n=jw(e=>e.playback.canSeekForward),r=jw(e=>e.playback.maxPlayedTime),i=jw(e=>e.playback.currentFragment),o=jw(e=>e.playback.loadedTime),a=SR(e,n?o:r),s=Zf(a);return MP("div",{className:Yf("LoadedBar_module_loaded__3d837846",i.duration<60&&"LoadedBar_module_shortVideo__3d837846",t),style:{width:s},"data-progress-bar-loaded":!0})};const tN=({segment:e,className:t})=>{const n=jw(e=>e.playback.currentTime),r=jw(e=>e.liveEvent.isLiveEvent),i=jw(e=>e.liveEvent.dvrEnabled),o=jw(e=>e.liveEvent.isArchived),a=r&&!i&&!o,s=SR(e,n),l=Zf(a?0:s,!1);return MP("div",{className:Yf("PlayedBar_module_played__38fb8087",t),style:{width:l},"data-progress-bar-played":!0})},nN=({segment:e,isExpanded:t})=>{const n=jw(e=>e.playback.canSeekForward),r=jw(e=>e.playback.currentFragment),i=jw(e=>e.playback.liveEdgeTime),o=jw(e=>e.liveEvent.isLiveEvent),a=jw(e=>e.liveEvent.dvrEnabled),s=jw(e=>e.liveEvent.isArchived),l=o&&!s,c=0!==i&&!isNaN(i),u=o?1:((e,t)=>(e.endTime-e.startTime)/t.duration)(e,r),d=Zf(u,!1),_=l&&(!a||!c),h=bR()(e.startTime),p=Yf("ChapterSegment_module_chapterWrapper__4e173c26",_&&"ChapterSegment_module_liveDisabled__4e173c26",!n&&QD,t&&"ChapterSegment_module_expanded__4e173c26",(_||!h)&&"ChapterSegment_module_hoverDisabled__4e173c26"),m=Yf("ChapterSegment_module_chapter__4e173c26",!n&&QD);return MP("div",{className:p,style:{width:`calc(${d} - ${e.startTime===r.startTime?0:2}px)`},children:MP("div",{className:m,children:[MP(eN,{segment:e,className:JD}),MP(tN,{segment:e,className:JD})]})})};const rN=({hoveredChapterId:e})=>{const t=jw(e=>e.playback.currentFragment),n=jw(e=>e.chapters.chapters),r=jw(e=>e.embed.chapters),i=jw(e=>e.appearance.playerBreakpoint),o=jw(e=>e.playback.isSegmentedPlaybackEnabled),a=jw(e=>e.controlBar.isExpanded);let s;return s=i===wE.XXS||!r||o?[{startTime:t.startTime,endTime:t.endTime}]:((e,t)=>{const n=nv(e,t);let r=[];return 0===n.length?r.push({startTime:t.startTime,endTime:t.endTime}):n.forEach((e,i)=>{let o=e.startTime,a=e.endTime;0===i&&e.startTime>t.startTime&&r.push({startTime:t.startTime,endTime:e.startTime}),0===i&&e.startTime<t.startTime&&(o=t.startTime),i===n.length-1&&e.endTime>t.endTime&&(a=t.endTime),r.push({startTime:o,endTime:a,chapterId:e.startTime})}),r})(n,t),MP("div",{className:"ChapterSegments_module_chapterSegmentsWrapper__e0fda153",children:s.map(t=>MP(nN,{segment:t,isExpanded:a||t.chapterId===e},t.startTime))})};const iN=({hoveredChapterId:e})=>{const t=Yw(),n=jw(e=>e.playback.liveEdgeTime),r=jw(e=>e.liveEvent.isLiveEvent),i=jw(e=>e.liveEvent.isArchived),o=jw(e=>e.liveEvent.dvrEnabled),a=jw(e=>e.controlBar.isExpanded),s=jw(e=>e.displayList.progressBar),[l,c]=aL(!1),[u,d]=aL(!1),[_,h]=aL(0),[m,f]=aL(null),[v,g]=aL(null),[E,b]=aL(null),y=uL(null),T=uL(null),S=uL(qf(null==y?void 0:y.current)),[C,A]=aL(S.current.rightOffsetValue-S.current.leftOffsetValue);function L(){const e=qf(null==y?void 0:y.current);S.current=e,A(S.current.rightOffsetValue-S.current.leftOffsetValue)}wP(y,L);const{startExpandingProgressBar:I,endExpandingProgressBar:P,onExpandTransitionEnd:R}=yR(),{startScrub:w,continueScrub:O,endScrub:k}=TR(),D=(e,t=3)=>Fm(Mm((e-S.current.leftOffsetValue)/(S.current.rightOffsetValue-S.current.leftOffsetValue),0,1),t);function N(e){const{clientX:t}=e,n=D(t);h(n)}function M(e){const n=zf(e),r=D(n),{liveEvent:i,playback:o}=t.getState();return!i.dvrEnabled||i.isArchived&&0!==o.currentFragment.duration?Jf(r,o.currentFragment):ev(r,o.liveTailTime,o.liveEdgeTime)}function x(e){if(2===(null==e?void 0:e.button)||null!=e&&e.ctrlKey)return;const t=M(e);if(w(t),"pointerdown"===e.type||"MSPointerDown"===e.type){f(e.pointerId);try{e.target.msSetPointerCapture?e.target.msSetPointerCapture(m):e.target.setPointerCapture(m)}catch(e){}document.addEventListener("pointermove",V),document.addEventListener("pointerup",B)}else"touchstart"===e.type?(document.addEventListener("touchmove",V),document.addEventListener("touchend",B),I()):(document.addEventListener("mousemove",V),document.addEventListener("mouseup",B))}function V(e){if(m&&m!==e.pointerId||!1===e.isPrimary)return;const t=M(e);O(t)}function B(e){const t=e.type;"pointerup"===t||"MSPointerUp"===t?(document.removeEventListener("pointermove",V),document.removeEventListener("pointerup",B),f(null)):"touchend"===t?(document.removeEventListener("touchmove",V),document.removeEventListener("touchend",B),P()):(document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",B)),k()}lL(()=>()=>{document.removeEventListener("touchmove",V),document.removeEventListener("touchend",B),document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",B),document.removeEventListener("pointermove",V),document.removeEventListener("pointerup",B)},[]);let U={};(!r||o&&n||i)&&(U=Q.pointerEvents?{onPointerDown:x}:{onTouchStart:x,onMouseDown:x});const F=Yf("ProgressBarV1_module_progressBarContainer__ddee2161",!s&&"ProgressBarV1_module_progressHidden__ddee2161",a&&"ProgressBarV1_module_progressExpanded__ddee2161"),H=Yf(yf.VP_PROGRESS,"ProgressBarV1_module_progressBar__ddee2161");return MP("div",{className:F,ref:T,onTransitionEnd:function(e){e.target===(null==T?void 0:T.current)&&"flex-shrink"===e.propertyName&&R()},children:MP("div",p(p({className:H,"data-progress-bar":!0,ref:y,onMouseEnter:e=>{L(),N(e),d(!0)},onMouseMove:e=>{N(e),c(!1),g(null)},onMouseLeave:()=>d(!1),onFocus:()=>c(!0),onBlur:()=>c(!1),role:"presentation"},U),{},{children:[MP(jD,{}),MP(rN,{hoveredChapterId:e}),MP(GD,{}),MP($D,{width:C,setTabFocused:g,setHoverFocused:b}),MP(ZD,{visible:u||l,mousePercent:_,isMousedOverProgress:u,progressBarWidth:C,tabOrHoverFocusedMarker:v||E}),MP(zD,{})]}))})};const oN=({hoveredChapterId:e})=>{const t=Yw(),n=jw(e=>e.playback.liveEdgeTime),r=jw(e=>e.liveEvent.isLiveEvent),i=jw(e=>e.liveEvent.isArchived),o=jw(e=>e.liveEvent.dvrEnabled),a=jw(e=>e.controlBar.isExpanded),s=jw(e=>e.controlBar.progressBarTransitionState),[l,c]=aL(!1),[u,d]=aL(!1),[_,h]=aL(0),[m,f]=aL(null),[v,g]=aL(null),[E,b]=aL(null),y=uL(null),T=uL(null),S=uL(null),C=uL(qf(null==y?void 0:y.current)),[A,L]=aL(C.current.rightOffsetValue-C.current.leftOffsetValue);function I(){const e=qf(null==y?void 0:y.current);C.current=e,L(C.current.rightOffsetValue-C.current.leftOffsetValue)}wP(y,I);const{startExpandingProgressBar:P,endExpandingProgressBar:R,onExpandTransitionEnd:w}=yR(),{startScrub:O,continueScrub:k,endScrub:D}=TR(),N=(e,t=3)=>Fm(Mm((e-C.current.leftOffsetValue)/(C.current.rightOffsetValue-C.current.leftOffsetValue),0,1),t);function M(e){const{clientX:t}=e,n=N(t);h(n)}function x(e){const n=zf(e),r=N(n),{liveEvent:i,playback:o}=t.getState();return!i.dvrEnabled||i.isArchived&&0!==o.currentFragment.duration?Jf(r,o.currentFragment):ev(r,o.liveTailTime,o.liveEdgeTime)}function V(e){if(2===(null==e?void 0:e.button)||null!=e&&e.ctrlKey)return;const t=x(e);if(O(t),"pointerdown"===e.type||"MSPointerDown"===e.type){f(e.pointerId);try{e.target.msSetPointerCapture?e.target.msSetPointerCapture(m):e.target.setPointerCapture(m)}catch(e){}document.addEventListener("pointermove",B),document.addEventListener("pointerup",U)}else"touchstart"===e.type?(document.addEventListener("touchmove",B),document.addEventListener("touchend",U),P()):(document.addEventListener("mousemove",B),document.addEventListener("mouseup",U))}function B(e){if(m&&m!==e.pointerId||!1===e.isPrimary)return;const t=x(e);k(t)}function U(e){const t=e.type;"pointerup"===t||"MSPointerUp"===t?(document.removeEventListener("pointermove",B),document.removeEventListener("pointerup",U),f(null)):"touchend"===t?(document.removeEventListener("touchmove",B),document.removeEventListener("touchend",U),R()):(document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",U)),D()}lL(()=>{clearTimeout(S.current),"expanding"!==s&&"collapsing"!==s||(S.current=setTimeout(()=>{w()},YE))},[s,w]),lL(()=>()=>{document.removeEventListener("touchmove",B),document.removeEventListener("touchend",U),document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",U),document.removeEventListener("pointermove",B),document.removeEventListener("pointerup",U)},[]);let F={};return(!r||o&&n||i)&&(F=Q.pointerEvents?{onPointerDown:V}:{onTouchStart:V,onMouseDown:V}),MP("div",{className:Yf("ProgressBarV2_module_progressBarContainer__08fa8301",a&&"ProgressBarV2_module_progressExpanded__08fa8301"),ref:T,children:MP("div",p(p({className:Yf(yf.VP_PROGRESS,"ProgressBarV2_module_progressBar__08fa8301"),"data-progress-bar":!0,ref:y,onMouseEnter:e=>{I(),M(e),d(!0)},onMouseMove:e=>{M(e),c(!1),g(null)},onMouseLeave:()=>d(!1),onFocus:()=>c(!0),onBlur:()=>c(!1),role:"presentation"},F),{},{children:[MP(jD,{}),MP(rN,{hoveredChapterId:e}),MP(GD,{}),MP($D,{width:A,setTabFocused:g,setHoverFocused:b}),MP(ZD,{visible:u||l,mousePercent:_,isMousedOverProgress:u,progressBarWidth:A,tabOrHoverFocusedMarker:v||E}),MP(zD,{})]}))})},aN=e=>MP(jw(e=>e.embed.flags.small_player_v2)?oN:iN,p({},e)),sN=()=>{const e=jw(e=>e.setAppearance),[t,n]=aL(!1);return{onMouseEnter:()=>{t||e("mousedOverControlBar",!0),n(!1)},onMouseLeave:()=>{t||e("mousedOverControlBar",!1),n(!1)},onTouchStart:()=>{e("mousedOverControlBar",!0),n(!0)},onTouchEnd:()=>{e("mousedOverControlBar",!1),n(!0)}}};const lN=({setMenuDisplayed:e})=>{const t=jw(e=>e.setDisplayList);return MP(WO,{className:"DebugPanelButton_module_debugPanelButton__02c58441",onClick:()=>{e(!1),t("debugPanel",!0)},icon:MP(nO,{className:"DebugPanelButton_module_debugPanelButtonIcon__02c58441",name:OP.INFO_CIRCLE}),color:kE.ALTERNATIVE,iconSize:OE.XS,"aria-haspopup":"dialog",children:MP(OO,{size:ME.SM,weight:xE.NORMAL,children:"Debug log"})})};const cN=()=>{const e=jw(e=>e.captions.fontSize),t=jw(e=>e.captions.fontFamily),n=jw(e=>e.captions.fontOpacity),r=jw(e=>e.captions.color),i=jw(e=>e.captions.bgColor),o=jw(e=>e.captions.bgOpacity),a=jw(e=>e.captions.windowOpacity),s=jw(e=>e.captions.windowColor),l=jw(e=>e.captions.edgeStyle),c=jw(e=>e.appearance.videoHeight);return MP("div",{className:"PreviewWindow_module_previewWindow__8f065cd1",role:"menuitem",children:MP("div",{className:"PreviewWindow_module_checkeredBackground__8f065cd1",children:MP(XO,{cues:[{html:"This is a preview\n of a caption"}],fontSize:e,fontFamily:t,fontOpacity:n,color:r,bgColor:i,bgOpacity:o,windowOpacity:a,windowColor:s,edgeStyle:l,height:c})})})},uN=({setPanel:e})=>{const t=jw(e=>e.appearance.isMenuBlockingUI),n=jw(e=>e.appearance.isMenuVerticalVideoMode);return(t||n)&&MP(AA,{children:[MP(uO,{}),MP(pO,{label:"Preview",onSelect:()=>e(oP.PREVIEW),hasPopup:!0})]})};const dN=({updateMetricsPayload:e})=>{const t=jw(e=>e.resetCaptionsStyles);return MP(WO,p(p({className:`${Tf.EXCLUDE_GLOBAL_BUTTON_STYLES} ResetButton_module_resetButton__5af7707c ${DO}`,withActive:!1,styled:!1,role:"menuitem"},Bf(()=>{t(),e({has_reset_all:!0,final_action_reset_all:!0})})),{},{children:MP("span",{children:"Reset all"})}))},_N={[oP.EMPTY]:()=>MP(AA,{}),[oP.PREFS]:({setPanel:e,setMenuDisplayed:t})=>{var n;const r=gP(),i=jw(e=>e.embed.cc),o=jw(e=>e.embed.speedChangeEnabled),a=jw(e=>e.embed.multipleAudioTracks),s=jw(e=>e.embed.quality),l=jw(e=>e.playback.qualities),c=r&&i,u=jw(e=>e.playback.currentQuality),d=jw(e=>e.playback.playbackRates),_=jw(e=>e.playback.audioTracks),h=s&&(null==l?void 0:l.length)>0,m=a&&(null==_?void 0:_.length)>1,f=(e=[])=>{var t;return null==(t=e.find(e=>e.active))?void 0:t.label},v=f(d),g=jw(e=>e.captions.activeTextTrackId),E={quality:{label:"Quality",value:"Auto"===u?"Auto":u,onSelect:()=>e(oP.QUALITY),hasPopup:!0},speed:{label:"Speed",value:"Normal"===v?"Normal":v,onSelect:()=>e(oP.SPEED),hasPopup:!0},subtitles:{label:"CC/subtitles",value:null==(n=jw(e=>e.captions.textTracks).find(e=>e.id===g))?void 0:n.label,onSelect:()=>e(oP.SUBTITLES),hasPopup:!0},audio:{label:"Audio",value:f(_),onSelect:()=>e(oP.AUDIO),hasPopup:!0}};return MP(AA,{children:[h&&MP(pO,p({},E.quality)),o&&MP(pO,p({},E.speed)),c&&MP(pO,p({},E.subtitles)),m&&MP(pO,p({},E.audio)),Q.touch&&MP(AA,{children:[MP(uO,{buffer:!0}),MP(lN,{setMenuDisplayed:t})]})]})},[oP.QUALITY]:()=>{const{qualities:e}=jw(e=>e.playback),t=jw(e=>e.setPlayback),n=e.map(e=>p(p({},e),{},{label:"Auto"===e.label?"Auto":e.label}));return MP(gO,{items:n,onSelect:e=>t("qualities",e.currentTarget.dataset.id)})},[oP.SPEED]:()=>{const{playbackRates:e}=jw(e=>e.playback),t=jw(e=>e.setPlayback),n=e.map(e=>p(p({},e),{},{label:"Normal"===e.label?"Normal":e.label}));return MP(gO,{items:n,onSelect:e=>t("playbackRates",e.currentTarget.dataset.id)})},[oP.SUBTITLES]:({setPanel:e,updateMetricsPayload:t})=>{const n=jw(e=>e.captions.textTracks),r=jw(e=>e.setCaptions),i={customize:{label:"Customize",onSelect:()=>{e(oP.CUSTOMIZE),t({has_clicked_customize:!0})},hasPopup:!0}};return MP(AA,{children:[MP(gO,{items:n,onSelect:e=>{const i=e.currentTarget.dataset.id,o=n.find(e=>e.id===i);r("activeTextTrackId",i),t({language_selected:null==o?void 0:o.language,language_provenance:(null==o?void 0:o.provenance)||null,has_updated_language:!0})}}),MP(uO,{buffer:!0}),MP(pO,p({},i.customize)),MP(uN,{setPanel:e})]})},[oP.AUDIO]:()=>{const e=jw(e=>e.playback.audioTracks),t=jw(e=>e.setPlayback),n=VP(e=>e.bigPicture),r=uL(!1),i=uL(e.find(e=>!!e.enabled));return lL(()=>{const e=i.current.label,t=Pg[i.current.provenance];return n.sendEvent(yg.MULTI_AUDIO_TRACK_CLICK,{event_name:"audio_menu_opened",has_selected_track:r.current,initial_track:e,initial_track_provenance:t}),()=>{n.sendEvent(yg.MULTI_AUDIO_TRACK_CLICK,{event_name:"audio_menu_closed",has_selected_track:r.current,initial_track:e,initial_track_provenance:t})}},[n]),MP(gO,{items:e,onSelect:o=>{t("audioTracks",o.currentTarget.dataset.id),r.current=!0;const a=e.find(e=>e.id===o.currentTarget.dataset.id);n.sendEvent(yg.MULTI_AUDIO_TRACK_CLICK,{event_name:"select_audio_track",track_selected:a.label,track_selected_provenance:Pg[a.provenance],has_selected_track:r.current,initial_track:i.current.label,initial_track_provenance:Pg[i.current.provenance]})}})},[oP.CUSTOMIZE]:({setPanel:e,updateMetricsPayload:t})=>{const n={font:{label:"Font",onSelect:()=>{e(oP.FONT),t({has_clicked_font:!0})},size:aP.SMALL,hasPopup:!0},background:{label:"Background",onSelect:()=>{e(oP.BACKGROUND),t({has_clicked_background:!0})},size:aP.SMALL,hasPopup:!0},window:{label:"Window",onSelect:()=>{e(oP.WINDOW),t({has_clicked_window:!0})},size:aP.SMALL,hasPopup:!0}};return MP(AA,{children:[MP(pO,p({},n.font)),MP(pO,p({},n.background)),MP(pO,p({},n.window)),MP(dN,{updateMetricsPayload:t}),MP(uN,{setPanel:e})]})},[oP.FONT]:({setPanel:e,updateMetricsPayload:t})=>{const n=jw(e=>e.setCaptions),r=jw(e=>e.captions.fontSize),i=jw(e=>e.captions.fontFamily),o=jw(e=>e.captions.fontOpacity),a=jw(e=>e.captions.color),s=jw(e=>e.captions.edgeStyle),l=_b(),c=()=>t({has_changed_font:!0,final_action_reset_all:!1}),u={fontFamily:{label:l.fontFamily.title,items:$f(l.fontFamily.items,i),onSelect:e=>{n("fontFamily",e.currentTarget.dataset.id),c()},id:wf.FONT_FAMILY_ACCORDION},color:{label:l.color.title,labelId:wf.VP_CC_FONT_COLOR_LABEL,items:$f(l.color.items,a),onSelect:e=>{n("color",e.currentTarget.dataset.id),c()}},fontSize:{label:l.fontSize.title,labelId:wf.VP_CC_FONT_SIZE_LABEL,items:$f(l.fontSize.items,`${r}`),onSelect:e=>{n("fontSize",e.currentTarget.dataset.id),c()}},fontOpacity:{label:l.fontOpacity.title,labelId:wf.VP_CC_FONT_OPACITY_LABEL,items:$f(l.fontOpacity.items,o),onSelect:e=>{n("fontOpacity",e.currentTarget.dataset.id),c()}},edgeStyle:{label:l.edgeStyle.title,labelId:wf.VP_CC_FONT_EDGE_STYLE_LABEL,items:$f(l.edgeStyle.items,s),onSelect:e=>{n("edgeStyle",e.currentTarget.dataset.id),c()},id:wf.EDGE_STYLE_ACCORDION}};return MP(AA,{children:[MP(EO,p({},u.fontFamily)),MP(TO,p({},u.color)),MP(yO,p({},u.fontSize)),MP(yO,p({},u.fontOpacity)),MP(EO,p({},u.edgeStyle)),MP(dN,{updateMetricsPayload:t}),MP(uN,{setPanel:e})]})},[oP.BACKGROUND]:({setPanel:e,updateMetricsPayload:t})=>{const n=jw(e=>e.setCaptions),r=jw(e=>e.captions.bgColor),i=jw(e=>e.captions.bgOpacity),o=_b(),a=()=>t({has_changed_background:!0,final_action_reset_all:!1}),s={bgColor:{label:o.bgColor.title,labelId:wf.VP_CC_BACKGROUND_COLOR_LABEL,items:$f(o.bgColor.items,r),onSelect:e=>{n("bgColor",e.currentTarget.dataset.id),a()}},bgOpacity:{label:o.bgOpacity.title,labelId:wf.VP_CC_BACKGROUND_OPACITY_LABEL,items:$f(o.bgOpacity.items,i),onSelect:e=>{n("bgOpacity",e.currentTarget.dataset.id),a()}}};return MP(AA,{children:[MP(TO,p({},s.bgColor)),MP(yO,p({},s.bgOpacity)),MP(dN,{updateMetricsPayload:t}),MP(uN,{setPanel:e})]})},[oP.WINDOW]:({setPanel:e,updateMetricsPayload:t})=>{const n=jw(e=>e.setCaptions),r=jw(e=>e.captions.windowOpacity),i=jw(e=>e.captions.windowColor),o=_b(),a=()=>t({has_changed_window:!0,final_action_reset_all:!1}),s={windowColor:{label:o.windowColor.title,labelId:wf.VP_CC_WINDOW_COLOR_LABEL,items:$f(o.windowColor.items,i),onSelect:e=>{n("windowColor",e.currentTarget.dataset.id),a()}},windowOpacity:{label:o.windowOpacity.title,labelId:wf.VP_CC_WINDOW_OPACITY_LABEL,items:$f(o.windowOpacity.items,r),onSelect:e=>{n("windowOpacity",e.currentTarget.dataset.id),a()}}};return MP(AA,{children:[MP(TO,p({},s.windowColor)),MP(yO,p({},s.windowOpacity)),MP(dN,{updateMetricsPayload:t}),MP(uN,{setPanel:e})]})},[oP.PREVIEW]:({updateMetricsPayload:e})=>MP(AA,{children:[MP(cN,{}),MP(dN,{updateMetricsPayload:e})]})},hN={[oP.EMPTY]:()=>MP(AA,{}),[oP.QUALITY]:({onBack:e,setMenuDisplayed:t})=>MP(dO,{title:"Quality",onBack:e,setMenuDisplayed:t}),[oP.SPEED]:({onBack:e,setMenuDisplayed:t})=>MP(dO,{title:"Speed",onBack:e,setMenuDisplayed:t}),[oP.PREFS]:({setMenuDisplayed:e})=>jw(e=>e.appearance.isMenuBlockingUI)&&MP(dO,{title:"Settings",setMenuDisplayed:e}),[oP.SUBTITLES]:({setMenuDisplayed:e,onBack:t})=>MP(dO,{title:"CC/subtitles",onBack:t,setMenuDisplayed:e}),[oP.AUDIO]:({onBack:e,setMenuDisplayed:t})=>MP(dO,{title:"Audio",onBack:e,setMenuDisplayed:t}),[oP.CUSTOMIZE]:({onBack:e,setMenuDisplayed:t})=>MP(dO,{title:"Customize",onBack:e,setMenuDisplayed:t}),[oP.FONT]:({onBack:e,setMenuDisplayed:t})=>MP(dO,{title:"Font",onBack:e,setMenuDisplayed:t}),[oP.BACKGROUND]:({onBack:e,setMenuDisplayed:t})=>MP(dO,{title:"Background",onBack:e,setMenuDisplayed:t}),[oP.WINDOW]:({onBack:e,setMenuDisplayed:t})=>MP(dO,{title:"Window",onBack:e,setMenuDisplayed:t}),[oP.PREVIEW]:({onBack:e,setMenuDisplayed:t})=>MP(dO,{title:"Preview",onBack:e,setMenuDisplayed:t})},pN=oP.PREFS,mN=[oP.SUBTITLES,oP.CUSTOMIZE,oP.FONT,oP.BACKGROUND,oP.WINDOW,oP.PREVIEW],fN=({isMenuDisplayed:e,setMenuDisplayed:t,buttonRef:n,progressBarAndButtonsRef:r})=>{const i=jw(e=>e.events),o=jw(e=>e.playback.playbackRates),{panel:a,setPanel:s,goToPreviousPanel:l}=((e,t)=>{const[n,r]=aL(e),i=uL([e]),o=uL(null);return lL(()=>{t?clearTimeout(o.current):o.current=setTimeout(()=>{i.current=[e],r(e)},YE)},[e,t]),{panel:n,setPanel:e=>{e!==n&&(i.current.push(e),r(e))},goToPreviousPanel:()=>{if(i.current.length>1){i.current.pop();const e=i.current[i.current.length-1];r(e)}}}})(pN,e),c=uL(a),u=uL(!1),d=(e=>_N[e]||_N[oP.EMPTY])(a),_=(e=>hN[e]||hN[oP.EMPTY])(a),h=a===oP.SPEED?o.length:null,{updateCCMetricsPayload:m,sendBPClosedCaptionsClickEvent:f}=(()=>{const e=VP(e=>e.bigPicture),t=jw(e=>e.captions.language),n=jw(e=>e.captions.provenance),r=jw(e=>e.captions.fontSize),i=jw(e=>e.captions.fontOpacity),o=jw(e=>e.captions.fontFamily),a=jw(e=>e.captions.color),s=jw(e=>e.captions.edgeStyle),l=jw(e=>e.captions.bgColor),c=jw(e=>e.captions.bgOpacity),u=jw(e=>e.captions.windowColor),d=jw(e=>e.captions.windowOpacity),_=uL({fontSize:r,fontOpacity:i,fontColor:a,fontFamily:o,edgeStyle:s,bgColor:l,bgOpacity:c,windowColor:u,windowOpacity:d}),h=uL({language_selected:t||"off",has_updated_language:!1,prev_selected_language:t||"off",language_provenance:n||null,prev_language_provenance:n||null,has_clicked_customize:!1,has_customized:!1,has_clicked_font:!1,has_changed_font:!1,has_clicked_background:!1,has_changed_background:!1,has_clicked_window:!1,has_changed_window:!1,has_reset_all:!1,final_action_reset_all:!1}),m=_L(e=>{h.current=p(p({},h.current),e)},[]);return lL(function(){const e=r!==_.current.fontSize||a!==_.current.fontColor||o!==_.current.fontFamily||i!==_.current.fontOpacity||s!==_.current.edgeStyle||l!==_.current.bgColor||c!==_.current.bgOpacity||u!==_.current.windowColor||d!==_.current.windowOpacity;m({has_customized:e})},[r,i,a,o,s,l,c,u,d,m]),{sendBPClosedCaptionsClickEvent:()=>{e.sendEvent(yg.CLOSED_CAPTIONS_CLICK,h.current),h.current=p(p({},h.current),{},{prev_language_provenance:h.current.language_provenance||null,prev_selected_language:h.current.language_selected,has_updated_language:!1,has_clicked_customize:!1,has_customized:!1,has_clicked_font:!1,has_changed_font:!1,has_clicked_background:!1,has_changed_background:!1,has_clicked_window:!1,has_changed_window:!1,has_reset_all:!1,final_action_reset_all:!1}),_.current={fontSize:r,fontOpacity:i,fontColor:a,fontFamily:o,edgeStyle:s,bgColor:l,bgOpacity:c,windowColor:u,windowOpacity:d}},updateCCMetricsPayload:m}})();return lL(()=>{mN.includes(c.current)&&a===pN&&f(),mN.includes(a)&&!u.current&&(i.fire(_m),u.current=!0),c.current=a},[a,f,i]),MP(sO,{ariaLabel:"Settings",type:iP.PREFS,isMenuDisplayed:e,setMenuDisplayed:t,panel:a,buttonRef:n,progressBarAndButtonsRef:r,toggleKey:Dv.PrefsMenu,panelContent:MP(d,{setPanel:s,setMenuDisplayed:t,updateMetricsPayload:mN.includes(a)?m:void 0}),headerContent:MP(_,{setPanel:s,setMenuDisplayed:t,onBack:l}),resizeDependencies:h,onBack:l})},vN=({setMenuDisplayed:e})=>jw(e=>e.appearance.isMenuBlockingUI)&&MP(dO,{title:"Chapters",setMenuDisplayed:e});const gN=({chapterId:e,className:t})=>{const n=jw(e=>e.bigPicture),r=jw(e=>e.embed.parentUrl),i=jw(e=>e.chapters.chapterShareBaseUrl),o=jw(e=>e.debug.clipId),a=jw(e=>e.playback.canSeekForward),[s,l]=aL(!1),[c,u]=aL(!1),d=Yf("ChaptersCopyLinkButton_module_button__fd58dc8d",Q.touch&&"ChaptersCopyLinkButton_module_touchDevice__fd58dc8d",t),_="copy-link-button-tooltip",h=r?function(e,t,n){const[r]=n.split("#");return`${r}#vimeo_chapter_${e}=${t}`}(o,e,r):function(e,t){if(!t)return"";const[n]=t.split("#");return`${n}#chapter=${e}`}(e,i);if(!h||!a)return null;const p=s||Q.touch?MP("span",{className:"ChaptersCopyLinkButton_module_linkCopied__fd58dc8d",children:[MP(nO,{name:OP.CHECKMARK,className:"ChaptersCopyLinkButton_module_linkCopiedIcon__fd58dc8d"}),"Link copied"]}):"Copy link";return MP("div",{className:"ChaptersCopyLinkButton_module_tooltipContainer__fd58dc8d",children:MP(AO,{id:_,tooltipContent:p,visible:s||c,position:SO.LEFT,margin:4,preventFocusOnClick:!0,children:MP("div",{className:"ChaptersCopyLinkButton_module_buttonWrapper__fd58dc8d",children:MP(GO,{linkUrl:h,className:d,onClick:()=>{n.sendEvent(yg.SHARE_CHAPTER,{chapter_id:e})},onPointerEnter:()=>u(!0),onPointerLeave:()=>u(!1),onFocus:()=>u(!0),onBlur:()=>u(!1),icon:MP("div",{className:"ChaptersCopyLinkButton_module_iconContainer__fd58dc8d",children:MP(nO,{name:OP.LINK})}),ariaDescribedBy:_,setDisplayLinkCopied:l})})})})};var EN="ChaptersPanelMenuOption_module_active__22a198a7";const bN=({startTime:e,id:t,chapterId:n,active:r,label:i,onMouseEnter:o,onMouseLeave:a,onSelect:s})=>{const l=bR()(e),{onClick:c,onKeyDown:u}=nP(s);return MP("div",{className:Yf("ChaptersPanelMenuOption_module_chapterListItem__22a198a7",r&&EN,!l&&"ChaptersPanelMenuOption_module_disabled__22a198a7"),children:[MP("button",p(p({id:t,role:"menuitem","data-id":t,disabled:!l||null,"data-testid":"chapter-list-item-button",tabIndex:0,className:Yf(r&&EN,"ChaptersPanelMenuOption_module_chapterListButton__22a198a7",Tf.EXCLUDE_GLOBAL_BUTTON_STYLES),onClick:c,onKeyDown:u,onMouseEnter:o,onMouseLeave:a},CO),{},{children:MP("div",{className:"ChaptersPanelMenuOption_module_chapterInfoContainer__22a198a7",children:[MP("div",{className:"ChaptersPanelMenuOption_module_chapterTitleText__22a198a7",children:i}),MP("div",{className:"ChaptersPanelMenuOption_module_chapterStartTime__22a198a7",children:uv(e)})]})})),MP(gN,{className:"ChaptersPanelMenuOption_module_copyLinkButton__22a198a7",chapterId:n})]},t)},yN=({setMenuDisplayed:e,onMenuOptionMouseEnter:t,onMenuOptionMouseLeave:n})=>{const r=jw(e=>e.events),i=jw(e=>e.chapters.chapters),o=jw(e=>e.chapters.activeCueId),a=VP(e=>e.bigPicture),s=i.map(e=>({label:e.text,id:e.cueId,active:e.cueId===o,startTime:e.startTime,chapterId:e.chapterId}));return MP(gO,{items:s,onSelect:t=>{const n=t.currentTarget.dataset.id;"string"==typeof n&&(r.fire(hh,parseFloat(n)+.001,"menu"),a.sendEvent(yg.CHAPTER_SELECTED,{chapter_id:parseInt(n),provenance:null})),e(!1)},onMenuOptionMouseEnter:t,onMenuOptionMouseLeave:n,itemComponent:bN})},TN=({isMenuDisplayed:e,setMenuDisplayed:t,buttonRef:n,progressBarAndButtonsRef:r,onMenuOptionMouseEnter:i,onMenuOptionMouseLeave:o})=>MP(sO,{ariaLabel:"Chapters",type:iP.CHAPTERS,isMenuDisplayed:e,setMenuDisplayed:t,panel:oP.CHAPTERS,buttonRef:n,progressBarAndButtonsRef:r,panelContent:MP(yN,{setMenuDisplayed:t,onMenuOptionMouseEnter:i,onMenuOptionMouseLeave:o}),headerContent:MP(vN,{setMenuDisplayed:t})});const SN=({buttonProperties:e={}})=>{const t=uL(null),n=uL(null),r=jw(e=>e.setPlayback),i=jw(e=>e.setDisplayList),o=jw(e=>e.playback.volume),a=jw(e=>e.playback.muted)?0:o,s=jw(e=>e.playback.supportsSettingVolume),l=jw(e=>e.displayList.controlBar),[c,u]=aL(!1),d=100*a,[_,h]=aL(!1),[m,f]=aL(!1),v=bP(UE.VOLUME_SLIDER)&&s,g=c&&v,E=Math.round(100*a)+"% volume";lL(()=>{l||u(!1)},[l]);const b=e=>{I(e)},y=()=>{u(!0),i("menu",!1)},T=e=>{jf(t.current,e)||jf(null==n?void 0:n.current,e)||u(!1),h(!1),document.removeEventListener("mouseup",T),document.removeEventListener("mousemove",b),document.removeEventListener("pointerup",T),document.removeEventListener("pointermove",b)},S=e=>{h(!0),I(e),Q.pointerEvents?(document.addEventListener("pointerup",T),document.addEventListener("pointermove",b)):(document.addEventListener("mouseup",T),document.addEventListener("mousemove",b))},C=()=>{_||u(!1)},A=()=>f(!0),L=()=>f(!1);function I(e){let n=e.clientY;e.targetTouches&&e.targetTouches.length&&(n=e.targetTouches[0].clientY,e.preventDefault());const i=function(e){const n=km(t.current).top,r=km(t.current).bottom;return Mm((r-e)/(r-n),0,100)}(n);r("volume",i)}const P=Yf("VolumeControl_module_volumeControl__02ffae11",yf.VOLUME,DO),R=Yf("VolumeControl_module_volumeBar__02ffae11",m||_?"VolumeControl_module_mouseEnteredSlider__02ffae11":""),w=!v||e.ariaHidden||void 0,O=Q.pointerEvents?{onPointerEnter:y,onPointerLeave:C}:{onMouseEnter:y,onMouseLeave:C},k=Q.pointerEvents?{onPointerDown:S,onPointerEnter:A,onPointerLeave:L}:{onMouseDown:S,onMouseEnter:A,onMouseLeave:L};return MP("div",p(p({className:"VolumeControl_module_volumeControlContainer__02ffae11"},O),{},{"data-volume-control-container":!0,children:[MP(OD,p({ref:n},e)),MP(zw,{visible:g,children:MP("div",p(p({role:"slider",className:P,ref:t,tabIndex:v?0:-1,"aria-label":"Volume (use up/down arrow keys to change)","aria-valuenow":100*a,"aria-valuetext":E,"aria-valuemin":0,"aria-valuemax":100,"aria-hidden":w,onBlur:()=>{_||u(!1)},onFocus:()=>{u(!0),i("menu",!1)},onTouchMove:I},k),{},{"data-volume-control":!0,children:MP("div",{className:R,children:[MP("div",{className:"VolumeControl_module_volumeBarFill__02ffae11",style:{height:`${d}%`}}),MP("div",{className:"VolumeControl_module_sliderHandle__02ffae11",style:{bottom:`${d}%`}})]})}))})]}))};var CN="ControlBarButtonsAndMenusV1_module_progressHidden__948bfa96",AN="ControlBarButtonsAndMenusV1_module_buttonsHidden__948bfa96",LN="ControlBarButtonsAndMenusV1_module_collapsingEnabled__948bfa96",IN="ControlBarButtonsAndMenusV1_module_canScroll__948bfa96";const PN=[vP.VIMEO_LOGO],RN=({menuProps:e})=>{const t=Yw(),n=jw(e=>e.appearance.isMenuBlockingUI),r=jw(e=>e.appearance.isMenuVerticalVideoMode),i=jw(e=>e.controlBar.showAllControls),o=jw(e=>e.displayList.controlBarButtons),a=jw(e=>e.displayList.progressBar),s=jw(e=>e.controlBar.isExpanded),l=sP(),c=EP(),u=uL(),d=uL(),_=Object.keys(c).filter(e=>c[e]),h=Object.keys(l).filter(e=>l[e]),m=!!_.length||!!h.length,f=_.concat(h).filter(e=>!PN.includes(e)),v=f.length>0,g=f.length>1,[E,b]=aL(!1),y=()=>{if(t.getState().controlBar.showAllControls)return void b(!1);const e=u.current,n=d.current,r=null==e?void 0:e.children;if(!n||null==r||!r.length||!t.getState().displayList.controlBarButtons)return;const i=n.clientWidth,o=Array.from(r).reduce((e,t)=>e+t.clientWidth+4,4);b(i<o)};wP(u,y,100),lL(()=>{y()},[_.length,h.length]);const T=!n&&!r,S=!i&&g&&E,C=!i&&g,A=!o&&g,L=!a&&!A&&v,I=c[vP.VIMEO_LOGO],P=Yf("ControlBarButtonsAndMenusV1_module_wrapper__948bfa96",A&&AN,!a&&CN,s&&"ControlBarButtonsAndMenusV1_module_progressExpanded__948bfa96"),R=Yf("ControlBarButtonsAndMenusV1_module_collapsibleWrapper__948bfa96",A&&AN,!a&&CN,C&&LN,S&&IN,L&&"ControlBarButtonsAndMenusV1_module_buttonsOnly__948bfa96",I&&"ControlBarButtonsAndMenusV1_module_vimeoLogoEnabled__948bfa96"),w=Yf("ControlBarButtonsAndMenusV1_module_collapsibleContent__948bfa96",A&&AN,C&&LN,S&&IN);if(!m)return null;const O={onFocus:e=>{const t=null==e?void 0:e.target;if(!t||!o||i||!u.current||!d.current||!E)return;const n=km(t),r=km(d.current);if(n.left>r.left&&n.right<r.right)return;const a=n.right-r.width;u.current.scrollTo({top:0,left:a,behavior:"smooth"})}};return A&&(O.ariaHidden=!0),MP("div",{className:P,children:[C&&MP(UD,{}),MP("div",{className:R,ref:d,onKeyDown:e=>{"ArrowLeft"!==e.code&&"ArrowRight"!==e.code||e.preventDefault()},role:"none",children:MP("div",{className:w,ref:u,role:"none",children:[c[vP.VOLUME]&&MP(SN,{buttonProperties:O}),c[vP.CC]&&MP(MD,p({},O)),l[iP.PREFS]&&MP(RD,p(p({},e[iP.PREFS]),{},{ref:e[iP.PREFS].buttonRef},O)),l[iP.TRANSCRIPT]&&MP(BD,p({},O)),T&&l[iP.PREFS]&&MP(fN,p({},e[iP.PREFS])),l[iP.CHAPTERS]&&MP(ND,p(p({},e[iP.CHAPTERS]),{},{ref:e[iP.CHAPTERS].buttonRef},O)),T&&l[iP.CHAPTERS]&&MP(TN,p({},e[iP.CHAPTERS])),c[vP.CHROMECAST]&&MP(VD,p({},O)),c[vP.AIRPLAY]&&MP(DD,p({},O)),c[vP.STEREOSCOPIC]&&MP(xD,p({},O)),c[vP.PIP]&&MP(wD,p({},O)),c[vP.FULLSCREEN]&&MP(PD,p({},O))]})}),I&&MP(kD,{})]})};var wN="ControlBarButtonsAndMenusV2_module_collapsingEnabled__8315e7b2",ON="ControlBarButtonsAndMenusV2_module_canScroll__8315e7b2",kN="ControlBarButtonsAndMenusV2_module_buttonsHidden__8315e7b2";const DN=[vP.VIMEO_LOGO],NN=({menuProps:e,controlsContainerRef:t,progressBarAndButtonsRef:n})=>{const r=Yw(),i=jw(e=>e.appearance.isMenuBlockingUI),o=jw(e=>e.appearance.isMenuVerticalVideoMode),a=jw(e=>e.controlBar.showAllControls),s=jw(e=>e.displayList.controlBarButtons),l=jw(e=>e.controlBar.isExpanded),c=jw(e=>e.embed.playbar),u=sP(),d=EP(),_=uL(null),h=uL(),m=uL(),f=Object.keys(d).filter(e=>d[e]),v=Object.keys(u).filter(e=>u[e]),g=!!f.length||!!v.length,E=f.concat(v).filter(e=>!DN.includes(e)),b=E.length>1,y=E.length>0,[T,S]=aL(!1),[C,A]=aL(0),L=()=>{const e=null==t?void 0:t.current,i=null==n?void 0:n.current,o=_.current,a=h.current,s=m.current,l=null==a?void 0:a.children;if(!(e&&i&&s&&null!=l&&l.length))return void A(0);if(!r.getState().displayList.controlBarButtons&&!r.getState().controlBar.showAllControls&&b)return void A(0);const c=e.clientWidth-Array.from(o.children).reduce((e,t)=>t===s?e:e+t.clientWidth+4,8),u=a.clientWidth+8;A(Math.min(c,u));const d=s.clientWidth&&s.scrollWidth>s.clientWidth;S(d)};wP(t,L,100),wP(m,L,100),lL(()=>{L()},[f.length,v.length,s]);const I=!i&&!o,P=!a&&b,R=P&&T,w=P&&!s,O=Yf("ControlBarButtonsAndMenusV2_module_wrapper__8315e7b2",P&&wN,w&&kN,l&&"ControlBarButtonsAndMenusV2_module_progressExpanded__8315e7b2",!c&&"ControlBarButtonsAndMenusV2_module_progressDisabled__8315e7b2",!y&&"ControlBarButtonsAndMenusV2_module_noCollapsibleButtons__8315e7b2"),k=Yf("ControlBarButtonsAndMenusV2_module_collapsibleWrapper__8315e7b2",w&&kN,P&&wN,R&&ON),D=Yf("ControlBarButtonsAndMenusV2_module_collapsibleContent__8315e7b2",w&&kN,P&&wN,R&&ON);if(!g)return null;const N={onFocus:e=>{const t=null==e?void 0:e.target;if(!t||!s||a||!h.current||!m.current||!T)return;const n=km(t),r=km(m.current);if(n.left>r.left&&n.right<r.right)return;const i=n.right-r.width;h.current.scrollTo({top:0,left:i,behavior:"smooth"})}};return w&&(N.ariaHidden=!0),MP("div",{className:O,ref:_,children:[MP("div",{className:k,ref:m,onKeyDown:e=>{"ArrowLeft"!==e.code&&"ArrowRight"!==e.code||e.preventDefault()},role:"presentation",style:{maxWidth:`${C}px`},tabIndex:-1,"aria-hidden":!(!P||!w)||void 0,children:MP("div",{className:D,ref:h,role:"none",children:[d[vP.VOLUME]&&MP(SN,{buttonProperties:N}),d[vP.CC]&&MP(MD,p({},N)),u[iP.PREFS]&&MP(RD,p(p({},e[iP.PREFS]),{},{ref:e[iP.PREFS].buttonRef},N)),u[iP.TRANSCRIPT]&&MP(BD,p({},N)),I&&u[iP.PREFS]&&MP(fN,p({},e[iP.PREFS])),u[iP.CHAPTERS]&&MP(ND,p(p({},e[iP.CHAPTERS]),{},{ref:e[iP.CHAPTERS].buttonRef},N)),I&&u[iP.CHAPTERS]&&MP(TN,p({},e[iP.CHAPTERS])),d[vP.CHROMECAST]&&MP(VD,p({},N)),d[vP.AIRPLAY]&&MP(DD,p({},N)),d[vP.STEREOSCOPIC]&&MP(xD,p({},N)),d[vP.PIP]&&MP(wD,p({},N)),d[vP.FULLSCREEN]&&MP(PD,p({},N))]})}),P&&MP(UD,{}),d[vP.VIMEO_LOGO]&&MP(kD,{})]})},MN=e=>MP(jw(e=>e.embed.flags.small_player_v2)?NN:RN,p({},e)),xN=({menuProps:e})=>{const t=sP(),n=jw(e=>e.appearance.isMenuBlockingUI),r=jw(e=>e.appearance.isMenuVerticalVideoMode);return(n||r)&&MP(AA,{children:[t[iP.PREFS]&&MP(fN,p({},e[iP.PREFS])),t[iP.CHAPTERS]&&MP(TN,p({},e[iP.CHAPTERS]))]})},VN=()=>{const e=uL(null),t=jw(e=>e.displayList.controlBar),n=jw(e=>e.displayList.outro),r=jw(e=>e.playback.playInitiated),i=jw(e=>e.embed.isTrailer),o=jw(e=>e.displayList.controlBarButtons),a=jw(e=>e.controlBar.showAllControls),s=jw(e=>e.embed.playbar),l=sN(),c=pP()===hP.CENTER,u=i&&!r,d=bP(UE.PROGRESS_BAR)&&s,[_,h]=aL(null),m=_P({setHoveredChapterId:h,progressBarAndButtonsRef:e}),f=Yf("ControlBarV1_module_controlBarWrapper__58eeb942",c&&"ControlBarV1_module_centerPlayButton__58eeb942"),v=Yf(bf.VP_CONTROLS,"ControlBarV1_module_controls__58eeb942",u&&"ControlBarV1_module_trailer__58eeb942"),g=Yf("ControlBarV1_module_progressBarAndButtons__58eeb942",!d&&"ControlBarV1_module_progressBarDisabled__58eeb942",a&&"ControlBarV1_module_showAllControls__58eeb942",o&&!a&&"ControlBarV1_module_buttonsExpanded__58eeb942");return MP(cO,{children:[MP("div",{className:f,children:[MP(SD,{controlBarVisibilityHandlers:l}),MP(zw,{visible:t,children:MP("div",p(p({className:v},l),{},{"data-control-bar":!0,children:!n&&!u&&MP("div",{className:g,ref:e,children:[d&&MP(aN,{hoveredChapterId:_}),MP(MN,{menuProps:m})]})}))}),MP(HD,{})]}),MP(xN,{menuProps:m})]})};var BN="ControlBarV2_module_centerPlayButton__54cb9e14";const UN=()=>{const e=uL(null),t=uL(null),n=jw(e=>e.displayList.controlBar),r=jw(e=>e.displayList.outro),i=jw(e=>e.playback.playInitiated),o=jw(e=>e.embed.isTrailer),a=jw(e=>e.embed.playbar),s=jw(e=>e.controlBar.isExpanded),l=sN(),c=pP(),u=CR(),d=c===hP.CENTER,_=o&&!i,h=bP(UE.PROGRESS_BAR)&&a,[m,f]=aL(null),v=_P({setHoveredChapterId:f,progressBarAndButtonsRef:t}),g=Yf("ControlBarV2_module_controlBarWrapper__54cb9e14",d&&BN),E=Yf(bf.VP_CONTROLS,"ControlBarV2_module_controls__54cb9e14",_&&"ControlBarV2_module_trailer__54cb9e14",d&&BN,s&&"ControlBarV2_module_progressBarExpanded__54cb9e14",!u&&"ControlBarV2_module_playButtonHidden__54cb9e14"),b=Yf("ControlBarV2_module_progressBarAndButtons__54cb9e14",!h&&"ControlBarV2_module_progressBarDisabled__54cb9e14");return MP(cO,{children:[MP("div",{className:g,children:[MP(SD,{controlBarVisibilityHandlers:l}),MP(zw,{visible:n,children:MP("div",p(p({className:E},l),{},{"data-control-bar":!0,ref:e,children:!r&&!_&&MP("div",{className:b,ref:t,children:[h&&MP(aN,{hoveredChapterId:m}),MP(MN,{menuProps:v,controlsContainerRef:e,progressBarAndButtonsRef:t})]})}))}),MP(HD,{})]}),MP(xN,{menuProps:v})]})},FN=()=>MP(jw(e=>{var t;return null==(t=e.embed.flags)?void 0:t.small_player_v2})?UN:VN,{});let HN=function(e){return e.Backward="backward",e.Forward="forward",e}({});const WN=()=>{const e=jw(e=>e.displayList.nudgeNotification),t=jw(e=>e.nudge.direction),n=jw(e=>e.nudge.time);return MP(zw,{visible:e,children:MP("div",{"aria-hidden":"true",className:`NudgeNotification_module_nudge__f8bdde81 ${t===HN.Backward&&"NudgeNotification_module_nudgeBackward__f8bdde81"}`,children:MP("div",{className:"NudgeNotification_module_nudgeInfo__f8bdde81",children:[MP("div",{className:"NudgeNotification_module_nudgeIcon__f8bdde81",children:MP(nO,{name:OP.FAST_FORWARD})}),MP("div",{className:"NudgeNotification_module_nudgeTime__f8bdde81",children:n?n+" seconds":""})]})})})};var GN="NudgeArea_module_nudgeArea__49409dbe";let jN;const YN=()=>{const e=Yw(),t=jw(e=>e.displayList.fullPlayerElement),n=jw(e=>e.displayList.ad),r=jw(e=>e.liveEvent.isLiveEvent),i=jw(e=>e.liveEvent.dvrEnabled),o=jw(e=>e.liveEvent.isArchived),a=r&&!o&&!i,s=jw(e=>e.embed.background),l=jw(e=>e.embed.controls),c=jw(e=>e.displayList.outro),u=jw(e=>e.config.video.spatial),d=jw(e=>e.progressController),_=jw(e=>e.playback.playInitiated),h=!(!Q.spatialPlayback||!u),p=Q.touch&&!t&&!n&&!a&&!s&&l&&!c&&!h,m=jw(e=>e.setPlayback),f=jw(e=>e.setNudgeProperties),v=jw(e=>e.startNudgeHideTimeout),[g,E]=aL({left:0,right:0}),b=t=>n=>{let i;n.preventDefault(),t===HN.Forward?(i=g.left+1,E({left:i,right:0})):(i=g.right+1,E({left:0,right:i})),clearTimeout(jN),jN=setTimeout(y,250),i>=2&&function(t,n){let i,o;const{liveTailTime:a,liveEdgeTime:s,currentFragment:l,currentTime:c}=e.getState().playback;r?(i=a,o=s):({startTime:i,endTime:o}=l);let u=0;u=t===HN.Forward?c+10:c-10;let h=d.getAllowedSeekTime(u);h<i&&(h=i),h>=o&&(h=o-.001),t===HN.Forward&&!d.canSeekNow&&_||(h===u&&f({direction:t,time:10+10*(n-2)}),v(),m("currentTime",h,{seekType:"nudge"}))}(t,i)};function y(){E({left:0,right:0})}return p&&MP(AA,{children:[MP("div",{className:`${GN} NudgeArea_module_nudgeBackwardArea__49409dbe`,onTouchEnd:b(HN.Backward)}),MP("div",{className:`${GN} NudgeArea_module_nudgeForwardArea__49409dbe`,onTouchEnd:b(HN.Forward)})]})},$N=({element:e,children:t})=>zL(MP(AA,{children:t}),e);var qN="HelpOverlay_module_hideOnSmall__9720f2ff",zN="HelpOverlay_module_arrow__9720f2ff";const KN=()=>{const e=VP(e=>e.embed.onsite),t=jw(e=>e.embed.like),n=jw(e=>e.embed.watchLater),r=jw(e=>e.embed.share),i=jw(e=>e.embed.transcript),o=jw(e=>e.embed.aiWidget),a=jw(e=>e.playback.drm),s=jw(e=>e.playback.playInitiated),l=[{key:"↑",text:"Volume up",className:`${zN} ${qN}`},{key:"↓",text:"Volume down",className:`${zN} ${qN}`},{key:"→",text:"Scrub forward",className:`${zN} ${qN}`},{key:"←",text:"Scrub backwards",className:`${zN} ${qN}`},{key:"X",text:"Like",ignore:!t},{key:"S",text:"Share",ignore:!r},{key:"W",text:"Watch Later",ignore:!n},{key:"C",text:"Toggle Captions"},{key:"H",text:"Toggle Preferences Menu"},{key:"F",text:"Toggle fullscreen"},{key:"⇧T",text:"Toggle Transcript",ignore:!i},{key:"⇧A",text:"Toggle Vimeo AI",ignore:!o},{key:"V",text:"View on Vimeo",ignore:e},{key:"J",text:"Scrub backwards"},{key:"K",text:"Play/Pause"},{key:"L",text:"Scrub forward"},{key:"M",text:"Toggle Mute"},{key:"P",text:"Screenshot frame",ignore:!("ClipboardItem"in window&&"clipboard"in navigator)||a||!s}];return MP(AA,{children:[MP("h1",{id:Sf.VP_OVERLAY_LABELLEDBY,children:"Keyboard Shortcuts"}),MP("div",{className:"HelpOverlay_module_keysWrapper__9720f2ff","data-help-keys":!0,children:l.map(e=>!e.ignore&&MP("div",{className:`HelpOverlay_module_keyWrapper__9720f2ff ${e.className||""}`,children:[MP("div",{className:"HelpOverlay_module_keySymbol__9720f2ff",children:e.key}),MP("div",{className:"HelpOverlay_module_keyText__9720f2ff",children:e.text})]}))})]})},XN=()=>{const e=jw(e=>e.overlay.incrementOverlayElementsUpdatedCount);return MP(Ok,{onEmbedShareVisibilityChange:e})};const ZN=[n_,i_],JN=()=>{const e=VP(e=>e.embed.onsite),t=VP(e=>e.embed.videoId),n=jw(e=>e.overlay.spatialRedirectContext),r={title:"headset"===n?"Headset viewing isn’t currently supported in your mobile browser.":null,buttonText:"Watch in the Vimeo app",lowerText:"browser-support"===n?"360 not supported in this browser":null},i=jw(e=>e.embed.doNotTrack),o=jw(e=>!ZN.includes(e.embed.privacy)),a=jw(e=>e.embed.shareUrl);return MP(AA,{children:[MP(zw,{visible:!0,children:MP("div",{className:"SpatialRedirectOverlay_module_background__08f49e82"})}),"headset"===n&&MP("div",{className:"SpatialRedirectOverlay_module_title__08f49e82",children:r.title}),o&&MP(WO,{className:"SpatialRedirectOverlay_module_button__08f49e82",onClick:()=>{const n=i?a:function(e){return`https://vimeo.page.link/?link=https%3A%2F%2Fvimeo.com%2F${e}%3Futm_source%3Dvimeo%26utm_campaign%3Dmobileweb%26utm_content%3Dplayer-button-360video&apn=com.vimeo.android.videoapp&ibi=com.vimeo&isi=425194759&utm_source=vimeo&utm_campaign=mobileweb&utm_content=player-button&ct=360video&pt=417731&efr=1`}(t);window.open(n,e&&"_blank",e?"noopener":"")},children:r.buttonText}),"browser-support"===n&&MP("div",{className:"SpatialRedirectOverlay_module_lowerText__08f49e82",children:r.lowerText})]})},QN=()=>{const e=jw(e=>e.overlay.purpose),t=jw(e=>e.displayList.overlay),n=jw(e=>e.setDisplayList),r=iv(e)?null:e;return MP(ak,{onContentChange:e=>{n("overlay",!(null===e||e===rv.EMPTY))},styleOverrides:{exitDone:{display:"block",visibility:"hidden"}},targetContent:r,children:n=>MP(Bk,{visible:n===e&&t,children:[n===rv.ERROR&&MP(Mk,{}),n===rv.HELP&&MP(KN,{}),n===rv.SHARE&&MP(XN,{}),n===rv.SPATIAL_REDIRECT&&MP(JN,{})]})})};const eM=()=>{const{pipOverlay:e}=jw(e=>e.displayList);return MP(zw,{visible:e,children:MP("div",{className:"PipOverlay_module_overlay__82a6be37","aria-hidden":"true",children:[MP(nO,{name:OP.PIP}),MP("div",{className:"PipOverlay_module_title__82a6be37",children:"Playing in picture-in-picture"})]})})};const tM=()=>{const e=jw(e=>e.liveEvent.isLiveEvent),t=jw(e=>e.liveEvent.isPlayable),n=jw(e=>e.playback.paused),r=jw(e=>e.liveEvent.isEnded),i=e&&!r,o=jw(e=>e.displayList.controlBar),a=jw(e=>e.displayList.topCenterActionItem),s=jw(e=>e.displayList.title),l=jw(e=>e.displayList.toast),c=jw(e=>e.playback.atLiveEdge);return!!i&&MP(zw,{visible:(o||a)&&!(s||l)&&t&&!n&&c,children:MP("div",{className:"LiveStatusLabelAndViewerCounter_module_liveStatusLabelAndViewerCounter__51a91077","aria-hidden":"true",children:[MP(iM,{}),MP(lM,{})]})})};var nM="LiveStatusLabel_module_offline__bf9dd22d",rM="LiveStatusLabel_module_live__bf9dd22d";const iM=()=>{const e=jw(e=>e.embed.hideLiveLabel),t=jw(e=>e.liveEvent.isLiveEvent),n=jw(e=>e.liveEvent.isPlayable),r=jw(e=>e.liveEvent.isArchived),i=Yf("LiveStatusLabel_module_liveStatusCircle__bf9dd22d",n?rM:nM),o=Yf("LiveStatusLabel_module_liveStatusText__bf9dd22d",n?rM:nM);return t&&!r&&!e&&MP("div",{className:"LiveStatusLabel_module_liveStatusLabel__bf9dd22d","data-live-status-label":!0,children:[MP("div",{className:i}),MP("span",{className:o,children:"LIVE"})]})};function oM(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}function aM(){}function sM(e){if(e&&e.then)return e.then(aM)}const lM=()=>{const e=VP(e=>e.embed.videoId),t=VP(e=>e.config.vimeo_api_url),n=jw(e=>e.events),r=jw(e=>e.updatePhpTokens),i=jw(e=>e.liveEvent.isPlayable),o=jw(e=>e.embed.showViewerCount),a=jw(e=>e.liveEvent.viewerCount),s=jw(e=>e.liveEvent.liveStatsRequestSucceeded),l=jw(e=>e.liveEvent.isStarted),c=jw(e=>e.liveEvent.isOnline),u=jw(e=>e.embed.privacy),d=jw(e=>e.embed.videoUnlistedHash),_=jw(e=>e.user.vimeoBucketedLiveClientToken),h=l&&o&&c,p=_L(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(){let i=`${e}`;u===wv.PRIVACY_UNLISTED&&d&&(i+=`:${d}`);const o=`https://${t}/videos/${i}/stats/live`,a={jwt_token:_};return sM(oM(function(){return function(e,t){try{var n=Promise.resolve(e());return t?n.then(t):n}catch(e){return Promise.reject(e)}}(r,function(){return sM(oM(function(){return function(e,t){return e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e}(We({url:o,searchParams:a}).json(),function(e){e.viewers&&n.fire(Pu.LIVE_STATS_SUCCESS,{viewerCount:e.viewers.current})})},function(){n.fire(Pu.LIVE_STATS_FAILURE)}))})},function(e){n.fire(Pu.LIVE_STATS_FAILURE)}))}),[n,r,e,t,_,u,d]);return lL(()=>{if(h){p();const e=setInterval(p,3e4);return()=>clearInterval(e)}return()=>{}},[h,p]),i&&o&&s&&MP("div",{className:"LiveViewerCounter_module_liveViewerCounter__3b9df3bd","data-live-viewer-counter":!0,children:[MP(nO,{className:"LiveViewerCounter_module_liveViewerCounterIcon__3b9df3bd",name:OP.PERSON_FILLED}),MP("span",{className:"LiveViewerCounter_module_liveViewerCountValue__3b9df3bd","data-live-viewer-count":!0,children:a})]})},cM=[Jm.privateLocked,Jm.privatePassword,Jm.geoBlocked,Jm.drmPlaybackUnavailable],uM={[bv.LIGHT]:Ev.EIGHTY,[bv.DARK]:Ev.TWENTY},dM="transparent !important",_M=()=>{const e=VP(e=>e.uuid),t=VP(e=>e.view),n=VP(e=>e.embed.transparent),r=VP(e=>e.colors.colorOne),i=VP(e=>e.colors.colorTwo),o=VP(e=>e.colors.colorThree),a=VP(e=>e.colors.colorFour),s=[[gv.ONE,Tv(r,Ev.ONE_HUNDRED)],[gv.TWO,Tv(i,Ev.ONE_HUNDRED)],[gv.THREE,Tv(o,Ev.ONE_HUNDRED)],[gv.FOUR,Tv(a,Ev.ONE_HUNDRED,{forceHexAlpha:!0})],[gv.ONE_MONOCHROME,Tv(r,Ev.ONE_HUNDRED,{monochrome:!0})],[gv.TWO_MONOCHROME,Tv(i,Ev.ONE_HUNDRED,{monochrome:!0})],[gv.ONE_OPACITY_NINETY,Tv(r,Ev.NINETY,{forceHexAlpha:!0})],[gv.TWO_OPACITY_NINETY,Tv(i,Ev.NINETY,{forceHexAlpha:!0})],[gv.THREE_OPACITY_TWENTY,Tv(o,Ev.TWENTY)],[gv.ONE_MONOCHROME_OPACITY_TWENTY,Tv(r,Ev.TWENTY,{monochrome:!0})],[gv.TWO_MONOCHROME_OPACITY_TWENTY,Tv(i,Ev.TWENTY,{monochrome:!0})],[gv.ONE_MONOCHROME_OPACITY_SIXTY,Tv(r,Ev.SIXTY,{monochrome:!0})],[gv.TWO_COMPLEMENT,Tv(i,Ev.ONE_HUNDRED,{complement:!0})],[gv.ONE_MONOCHROME_OPACITY_TWENTY_EIGHTY,Tv(r,uM,{monochrome:!0})],[gv.TWO_MONOCHROME_OPACITY_TWENTY_EIGHTY,Tv(i,uM,{monochrome:!0})]];let l,c;return cM.includes(t)?(l="#000 !important",c=dM):n?(l=dM,c=dM):(l=`var(${gv.FOUR})`,c=`var(${gv.FOUR})`),MP("style",{type:"text/css","data-player-colors":e,children:[`.player-${e} {\n                ${Sv(s)}\n            }`,`.player-${e} {\n                background-color: ${l};\n            }`,`.player-${e} .${bf.VP_VIDEO_WRAPPER} {\n                background-color: ${c};\n            }`]})};const hM=()=>{const e=jw(e=>e.embed.rightContentAreaEnabled),t=jw(e=>e.displayList.rightContentArea),n=jw(e=>e.appearance.rightContentAreaAnimating);let r=jw(e=>e.element);const i={transcript:{component:LM,displayed:jw(e=>e.displayList.transcript)},aiWidget:{component:qM,displayed:jw(e=>e.displayList.aiWidget)}},o=Q.isGoogleBot&&i.transcript.displayed;var a;o&&(r=null==(a=r)?void 0:a.parentElement);const s=Yf("RightContentArea_module_rightContentArea__a0f39df8",t&&"RightContentArea_module_visible__a0f39df8",Xg&&"RightContentArea_module_iframeEmbed__a0f39df8",o&&"RightContentArea_module_googleBot__a0f39df8"),l=Object.keys(i).some(e=>{var t;return null==(t=i[e])?void 0:t.displayed}),c=!t&&n,u=c?400:void 0,d=c||l&&t&&!n?void 0:0,_={exitDone:{visibility:"hidden",display:"block"}};return e&&zL(MP("div",{id:Sf.RIGHT_CONTENT_AREA,className:s,"aria-hidden":!t,children:Object.keys(i).map(function(e){var t,n;const r=null==(t=i[e])?void 0:t.component,o=null==(n=i[e])?void 0:n.displayed;return r?MP(zw,{duration:d,visible:o,delay:u,styleOverrides:_,children:MP(r,{})},e):null})}),r)};const pM=()=>{const[e,t]=aL(!1),n=jw(e=>e.appearance.placeholderThumbnail),r=jw(e=>e.appearance.appSizeMode),i=jw(e=>e.appearance.appBreakpoint),o=jw(e=>e.embed.rightContentAreaEnabled),a=jw(e=>e.displayList.rightContentArea),s=jw(e=>e.appearance.rightContentAreaAnimating),l=jw(e=>e.element),c=o&&(a||s),u=i===wE.XS||i===wE.XXS||r===Iv.MINI||r===Iv.TINY,d=Yf("ContentAreaBackground_module_img__9da212ea",e&&"ContentAreaBackground_module_loaded__9da212ea"),_=u?{visible:a,duration:400}:{visible:c,duration:0};return Q.isGoogleBot?null:zL(MP(zw,p(p({},_),{},{children:MP("div",{className:"ContentAreaBackground_module_imgContainer__9da212ea",children:n&&MP("img",{onLoad:()=>t(!0),alt:"video thumbnail",className:d,src:n})})})),null==l?void 0:l.querySelector(`.${Tf.CONTENT_AREA_BACKGROUND_CONTAINER}`))};var mM=[],fM=[];function vM(e,t){if(e&&"undefined"!=typeof document){var n,r=!0===t.prepend?"prepend":"append",i=!0===t.singleTag,o="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var a=mM.indexOf(o);-1===a&&(a=mM.push(o)-1,fM[a]={}),n=fM[a]&&fM[a][r]?fM[a][r]:fM[a][r]=s()}else n=s();65279===e.charCodeAt(0)&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function s(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var n=Object.keys(t.attributes),i=0;i<n.length;i++)e.setAttribute(n[i],t.attributes[n[i]]);var a="prepend"===r?"afterbegin":"beforeend";return o.insertAdjacentElement(a,e),e}}vM(".TranscriptError_lazy_module_refresh__a13befbe{background:#ffffff1a;border:none;border-radius:4px;gap:4px;height:32px;padding:4px 12px}.TranscriptError_lazy_module_icon__a13befbe{height:40px;width:40px}",{});const{Provider:gM,useStore:EM}=_I(),bM={timecodeDisplayed:!0,selectedSettingsMenu:VI.MAIN,settingsDisplayed:!1,currentSearchResultIndex:0,searchTerms:{terms:"",timestamp:null},searchResults:[],transcriptDisabled:!1,autofollowEnabled:!0},yM=({children:e})=>{const t=jw(e=>e.subscribe),n=jw(e=>e.captions.textTrackEls),r=jw(e=>e.captions.rtlTracks),i=jw(e=>e.config),o=jw(e=>e.events),a=jw(e=>e.displayList.transcript),s=jw(e=>e.displayList.fullPlayerElement),l=jw(e=>e.appearance.appBreakpoint),c=jw(e=>e.appearance.appSizeMode),u=VP(e=>e.bigPicture),d=((e,t)=>e.map(e=>{const n=e.id.replace(Pf.TEXT_TRACK_ID_PREFIX,""),r=t.includes(n);return{id:e.id,label:e.label,language:e.srclang,rtl:r}}))(n,r),_=GI(i,d),h=uL(null==_?void 0:_.language);return MP(gM,{createStore:()=>dI((e,n)=>{const r=(t,n)=>e(e=>p(p({},e),{},{[t]:n})),i=bM.selectedSettingsMenu,m=e=>r("selectedSettingsMenu",e),f=bM.settingsDisplayed,v=t=>{var r,i;const a={};if(t!==(null==(r=n())?void 0:r.settingsDisplayed)){var s;a.settingsDisplayed=t;const e=null==(s=n())||null==(s=s.selectedTrack)?void 0:s.language;t?u.sendEvent(yg.EMBEDDED_TRANSCRIPT_CLICK,{name:"open_embed_transcript_setting",copy:"settings",location:"player_embedded_transcript",element:"embedded_transcript_settings_menu",current_transcript_language:e}):t||e===h.current||(u.sendEvent(yg.EMBEDDED_TRANSCRIPT_CLICK,{name:"change_language_settings",copy:e,location:"player_embedded_transcript_settings",element:"language_select_panel",current_transcript_language:e}),h.current=e)}(null==(i=n())?void 0:i.settingsDisplayed)&&!t&&(a.selectedSettingsMenu=bM.selectedSettingsMenu),Object.keys(a).length&&e(e=>p(p({},e),a));const l=t?cf:"";o.fire(yh,l)},g=bM.timecodeDisplayed,E=bM.currentSearchResultIndex,b=e=>r("currentSearchResultIndex",e),y=bM.searchResults,T=e=>{0===e.length&&r("currentSearchResultIndex",0),r("searchResults",e)},S=bM.searchTerms,C=e=>r("searchTerms",e),A=!a||s,L=TM(l,c),I=bM.autofollowEnabled;function P(){C(bM.searchTerms),T(bM.searchResults),b(bM.currentSearchResultIndex)}return t(e=>{var t;return null==e||null==(t=e.displayList)?void 0:t.transcript},e=>{e||(v(bM.settingsDisplayed),m(bM.selectedSettingsMenu))}),t(e=>{var t,n;return{transcriptVisible:null==e||null==(t=e.displayList)?void 0:t.transcript,overlayVisible:null==e||null==(n=e.displayList)?void 0:n.fullPlayerElement}},({transcriptVisible:e,fullPlayerElement:t})=>{r("transcriptDisabled",!(e&&!t))}),t(e=>{var t,n;return{breakpoint:null==e||null==(t=e.appearance)?void 0:t.appBreakpoint,sizeMode:null==e||null==(n=e.appearance)?void 0:n.appSizeMode}},({breakpoint:t,sizeMode:r})=>{const i=TM(t,r);i!==n().transcriptSizeMode&&e(e=>p(p({},e),{},{transcriptSizeMode:i}))}),t(e=>{var t,n;return{outroDisplayed:null==e||null==(t=e.displayList)?void 0:t.outro,animationActive:null==e||null==(n=e.appearance)?void 0:n.rightContentAreaAnimating}},({outroDisplayed:e,animationActive:t})=>{e&&!t&&P()}),{timecodeDisplayed:g,searchTerms:S,setSearchTerms:C,resetSearchTerms:()=>C(bM.searchTerms),currentSearchResultIndex:E,setCurrentSearchResultIndex:b,settingsDisplayed:f,setSettingsDisplayed:v,selectedTrack:_,availableTracks:d,setSelectedTrack:e=>{const t=d.find(t=>t.id===e);r("selectedTrack",t),P(),o.fire(rm,t)},selectedSettingsMenu:i,setSelectedSettingsMenu:m,searchResults:y,setSearchResults:T,toggleTimecodeDisplayed:()=>{var e;return r("timecodeDisplayed",!(null!=(e=n())&&e.timecodeDisplayed))},toggleSettingsDisplayed:()=>{var e;return v(!(null!=(e=n())&&e.settingsDisplayed))},transcriptDisabled:A,transcriptSizeMode:L,autoFollowEnabled:I,setAutoFollowEnabled:e=>r("autoFollowEnabled",e)}}),children:e})};function TM(e,t){const n=e===wE.XS||e===wE.XXS,r=t===Iv.MINI||t===Iv.TINY;return n||r?BI.SMALL:e===wE.XL||e===wE.XXL?BI.LARGE:BI.MEDIUM}const SM=({onClose:e})=>{const t=Yf(Tf.EXCLUDE_GLOBAL_BUTTON_STYLES,"ContentAreaCloseButton_module_closeContentAreaButton__8960d891",NO),n="Close";let r=OE.MD;const i=jw(e=>e.appearance.appBreakpoint),o=jw(e=>e.displayList.rightContentArea);i!==wE.XL&&i!==wE.XXL||(r=OE.CUSTOM);const{onClick:a,onKeyDown:s}=Bf(e),l=MP(WO,{onClick:a,onKeyDown:s,size:r,icon:MP(nO,{name:OP.CLOSE,focusable:"false"}),"aria-label":n,disabled:!o,color:kE.CUSTOM,className:t});return Q.touch?l:MP(AO,{tooltipContent:n,className:"ContentAreaCloseButton_module_tooltip__8960d891",children:l})};const CM=({message:e,icon:t,componentType:n,children:r,onClose:i})=>MP("div",{className:"ContentAreaMessage_module_container__3b7e983a","data-component-type":n,children:[MP(SM,{onClose:i}),t||MP(nO,{name:OP.INFO_CIRCLE,className:"ContentAreaMessage_module_icon__3b7e983a"}),MP(OO,{size:ME.MD,weight:xE.NORMAL,className:"ContentAreaMessage_module_messageText__3b7e983a",children:e}),r]}),AM=({onRetry:e})=>{const t=VP(e=>e.bigPicture),n=EM(e=>e.selectedTrack),r=jw(e=>e.setDisplayList),i="Refresh",o=MP(nO,{name:OP.WARN_CIRCLE,className:"TranscriptError_lazy_module_icon__a13befbe"});return MP(CM,{message:"There was a problem loading the transcript.",onClose:()=>r("transcript",!1),componentType:"transcript-error",icon:o,children:MP(WO,{className:"TranscriptError_lazy_module_refresh__a13befbe",color:kE.PRIMARY,onClick:()=>{e(),t.sendEvent(yg.EMBEDDED_TRANSCRIPT_CLICK,{name:"click_refresh_error",copy:i,location:"player_embedded_transcript_error",element:"refresh_transcript_button",current_transcript_language:null==n?void 0:n.language})},"data-component-type":"retry-request",children:MP(OO,{size:ME.MD,weight:xE.BOLD,color:VE.WHITE,children:i})})})};const LM=({style:e={}})=>{const t=uL(!0),n=jw(e=>e.displayList.transcript),{module:r,load:i,readyState:o}=uP(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(){return Promise.resolve().then(function(){return vB})})),a=null==r?void 0:r.Transcript,s=jw(e=>e.embed.transcript);return n&&t.current&&(i(),t.current=!1),!s||o!==lP.LOADED&&!n?null:MP("div",{style:e,className:Yf(!n&&"TranscriptLoader_module_hidden__9a8b905f"),children:[o===lP.LOADING&&MP(zO,{}),o===lP.ERROR&&MP(AM,{onRetry:i}),o===lP.LOADED&&MP(a,{})]})};const IM=()=>{const e=Yw(),t=uL(null),n=jw(e=>e.playback.buffering),r=jw(e=>e.chromecast.isChromecastBuffering),i=jw(e=>e.chromecast.isChromecastConnected),o=jw(e=>e.displayList.controlBar),a=jw(e=>e.embed.background),s=pP(),[l,c]=aL(!1),u=!(o&&s===hP.CENTER||a);return lL(()=>{n||r?t.current=setTimeout(()=>{const t=e.getState;(t().playback.buffering||t().chromecast.isChromecastBuffering)&&c(!0)},600):(clearTimeout(t.current),c(!1))},[n,r]),u&&MP(AA,{children:[MP(zw,{visible:i||l,styleOverrides:{enterActive:{opacity:.4},enterDone:{opacity:.4},exit:{opacity:.4},exitDone:{display:"none"}},children:MP("div",{className:"BufferHandler_module_shade__94101f09","data-shade":!0})}),MP(zw,{visible:l,styleOverrides:{exitDone:{display:"none"}},children:MP(zO,{size:BE.LG})})]})};const PM=()=>{const e=jw(e=>e.captions.activeCues),t=jw(e=>e.captions.language),n=jw(e=>e.captions.direction),r=jw(e=>e.displayList.captions),i=jw(e=>e.displayList.controlBar),o=jw(e=>e.displayList.progressBar),a=jw(e=>e.appearance.fullscreen),s=jw(e=>e.embed.rightContentAreaEnabled),l=jw(e=>e.captions.fontSize),c=jw(e=>e.captions.fontFamily),u=jw(e=>e.captions.fontOpacity),d=jw(e=>e.captions.color),_=jw(e=>e.captions.bgColor),h=jw(e=>e.captions.bgOpacity),p=jw(e=>e.captions.windowOpacity),m=jw(e=>e.captions.windowColor),f=jw(e=>e.captions.edgeStyle),v=jw(e=>e.appearance.videoHeight),g=jw(e=>e.appearance.containerHeight),E=VP(e=>e.embed.transparent);let b=null,y={};!a&&E||v<g-58&&(b=`translateY(-${(g-v)/2}px)`,y.transform=b);const T=Yf("Captions_module_captions__5ed5b89b",!r&&"Captions_module_hide__5ed5b89b",i&&!b&&"Captions_module_withControls__5ed5b89b",!o&&"Captions_module_noPlaybar__5ed5b89b",a&&"Captions_module_fullscreen__5ed5b89b",s&&"Captions_module_contentAreaSibling__5ed5b89b");return MP(XO,{cues:e,language:t,direction:n,className:T,fontSize:l,fontFamily:c,fontOpacity:u,color:d,bgColor:_,bgOpacity:h,windowOpacity:p,windowColor:m,edgeStyle:f,height:v,style:y})};var RM="QoESurvey_module_selected__c40e38d2";let wM;const OM=({containerRef:e})=>{const t=jw(e=>e.closeToast),n=VP(e=>e.bigPicture),[r,i]=aL(!1),[o,a]=aL(!1),[s,l]=aL(!1);lL(()=>{n.sendEvent(yg.VIEW_PLAYER_CSAT_V1),wM=setTimeout(t,1e4)},[n,t]);const c="Good",u="Poor";return MP(AA,{children:[MP(rk,{transitionTime:1e4,ariaLabelledby:Lf.QOE_SURVEY_TEXT}),MP(ik,{id:Lf.QOE_SURVEY_TEXT,children:"How's the viewing experience?"}),MP(ek,{className:`QoESurvey_module_thumbsUp__c40e38d2 ${r?RM:""}`,tooltipLabel:c,"aria-label":c,"aria-describedby":Lf.QOE_SURVEY_TEXT,icon:MP(nO,{name:r?OP.THUMBS_UP_FILLED:OP.THUMBS_UP}),onClick:()=>{r||o||s||(n.sendEvent(yg.SELECT_THUMBS_UP_PLAYER_CSAT_V1),i(!0),clearTimeout(wM),setTimeout(t,200))},containerRef:e}),MP(ek,{className:`QoESurvey_module_thumbsDown__c40e38d2 ${o?RM:""}`,tooltipLabel:u,"aria-label":u,"aria-describedby":Lf.QOE_SURVEY_TEXT,icon:MP(nO,{name:o?OP.THUMBS_DOWN_FILLED:OP.THUMBS_DOWN}),onClick:()=>{r||o||s||(n.sendEvent(yg.SELECT_THUMBS_DOWN_PLAYER_CSAT_V1),a(!0),clearTimeout(wM),setTimeout(t,200))},containerRef:e}),MP(JO,{}),MP(ok,{onClick:()=>{r||o||s||(n.sendEvent(yg.DISMISS_PLAYER_CSAT_V1),l(!0),clearTimeout(wM),t())},describedBy:Lf.QOE_SURVEY_TEXT,selected:s})]})},kM=()=>{const e=jw(e=>e.playback.liveEdgeTime),t=jw(e=>e.setPlayback),n=VP(e=>e.bigPicture);return MP(nk,{onClick:()=>{t("atLiveEdge",!0),t("currentTime",e),n.sendEvent(yg.SKIP_TO_LIVE_CLICK)},label:"Skip to live"})},DM=()=>{const e=jw(e=>e.closeToast);return MP(AA,{children:[MP(ik,{id:Lf.BROADCAST_OVER,children:"The live broadcast is over"}),MP(JO,{}),MP(ok,{onClick:e,describedBy:Lf.BROADCAST_OVER})]})},NM=()=>{const e=jw(e=>e.closeToast);return lL(()=>{const t=setTimeout(e,3e3);return()=>{clearTimeout(t)}},[e]),MP(AA,{children:[MP(rk,{transitionTime:3e3,ariaLabelledby:Lf.FRAME_CAPTURED}),MP(ik,{id:Lf.FRAME_CAPTURED,children:"Screenshot copied to your clipboard!"}),MP(JO,{}),MP(ok,{onClick:e,describedBy:Lf.FRAME_CAPTURED})]})};let MM;const xM=()=>{const e=jw(e=>e.closeToast);return lL(()=>{MM=setTimeout(e,3e3)},[e]),MP(AA,{children:[MP(rk,{transitionTime:3e3,ariaLabelledby:Lf.CHANGE_LANGUAGES}),MP(ik,{id:Lf.CHANGE_LANGUAGES,children:"Change languages in Settings"}),MP(nO,{name:OP.GEAR,className:"ChangeLanguages_module_icon__5b8ff53b"}),MP(JO,{}),MP(ok,{onClick:()=>{e(),clearTimeout(MM)},describedBy:Lf.CHANGE_LANGUAGES})]})};const VM={[Dw.QOE_SURVEY]:Lf.QOE_SURVEY_TEXT,[Dw.BROADCAST_OVER]:Lf.BROADCAST_OVER},BM=()=>{const e=uL(null),t=jw(e=>e.toast.purpose),n=jw(e=>e.appearance.fullscreen),r=jw(e=>e.setDisplayList),i=VM[t],o="translateY("+(n&&Q.iPadOS?"calc(36px + 16px)":"0")+")",a="translateY(calc(-100% - 16px))",s="transform 400 ease-in-out",l={enter:{transform:a,opacity:1},enterActive:{transition:s,transform:o},enterDone:{transform:o},exit:{transform:o},exitActive:{transition:s,transform:a,opacity:1},exitDone:{transform:a,display:"none"}};return MP(ak,{targetContent:t!==Dw.EMPTY?t:null,onContentChange:e=>{r("toast",!!e)},delay:400,styleOverrides:l,children:t=>MP(ZO,{className:"Toasts_module_toasts__b772bc4f",ref:e,ariaLabelledby:i,children:[t===Dw.QOE_SURVEY&&MP(OM,{containerRef:e}),t===Dw.SKIP_TO_LIVE&&MP(kM,{}),t===Dw.BROADCAST_OVER&&MP(DM,{}),t===Dw.FRAME_CAPTURED&&MP(NM,{}),t===Dw.CHANGE_LANGUAGES&&MP(xM,{})]})})};const UM=({text:e})=>MP("div",{className:"SpatialInstructions_module_instructions__c872b826",children:MP(OO,{size:ME.MD,weight:xE.NORMAL,children:e})}),FM=()=>{const e=jw(e=>e.liveEvent.isLiveEvent)?"Unmute broadcast":"Unmute",{unmute:t}=mP();return MP(nk,{onClick:t,label:e})},HM=()=>{const e=jw(e=>e.setAppearance),t=jw(e=>e.clearSegment),n=jw(e=>e.playback.startTime),r=jw(e=>e.playback.endTime),i=VP(e=>e.bigPicture);return MP(nk,{onMouseEnter:()=>e("mousedOverControlBar",!0),onMouseLeave:()=>e("mousedOverControlBar",!1),onClick:()=>{i.sendEvent(yg.WATCH_FULL_VIDEO,{start_time:n,end_time:r}),t()},label:"Watch full video"})};const WM=Q.android?"Look around":"Click and drag to look around",GM=Q.android?"Look around":"Use arrow keys to see more",jM=()=>{const e=jw(e=>e.topCenterActionItem.purpose),t=jw(e=>e.setDisplayList);return MP(ak,{targetContent:e!==yI.EMPTY?e:null,onContentChange:e=>{t("topCenterActionItem",!!e)},styleOverrides:{exitDone:{display:"none"}},children:e=>MP(ZO,{className:"TopCenterActionItems_module_topCenterActionItems__6bbfa089",children:[e===yI.UNMUTE&&MP(FM,{}),e===yI.WATCH_FULL_VIDEO&&MP(HM,{}),e===yI.SPATIAL_INSTRUCTIONS_CLICK&&MP(UM,{text:WM}),e===yI.SPATIAL_INSTRUCTIONS_ARROWS&&MP(UM,{text:GM})]})})};const YM=({onReload:e})=>{const t=jw(e=>e.setDisplayList),n=Yf(Tf.EXCLUDE_GLOBAL_BUTTON_STYLES,"AIWidgetError_module_reload__9a79f9d1");return MP(CM,{message:"Unable to load Vimeo AI",componentType:"ai-error",onClose:()=>t("aiWidget",!1),children:MP(WO,{className:n,size:OE.CUSTOM,onClick:e,"data-component-type":"reload-ai",children:MP(OO,{size:ME.MD,weight:xE.BOLD,children:"Try again"})})})};const $M="Ask Vimeo AI",qM=({style:e={}})=>{const t=jw(e=>e.displayList.aiWidget),n=VP(e=>e.embed.vimeoUrl),r=VP(e=>e.embed.videoId),i=VP(e=>e.embed.onsite),o=jw(e=>e.embed.videoUnlistedHash),a=jw(e=>e.setDisplayList),s=jw(e=>e.appearance.rightContentAreaAnimating),l=jw(e=>e.embed.aiWidgetSignature),c=VP(e=>e.bigPicture),u=RP(t),[d,_]=aL(!1),h=Yf("AIWidget_module_aiWidget__f665b717",!t&&"AIWidget_module_hidden__f665b717"),m={transparentBackground:!i};l&&(m.guestSignature=l);const f=me(`https://${n}/ai-player/${r}${o?`/${o}`:""}`,m),{componentVersion:v,hasError:g,componentTimeout:E,onError:b,onReload:y}=fP(),T=_L(()=>{c.sendEvent(yg.OPEN_AI_OPTIONS,{},{[Tg.WEB]:{page_name:"player"},[Tg.PRODUCT_ANALYTICS]:{copy:$M,feature:"ai",product:"ai",element:"icon"}})},[c]);return lL(()=>{t&&(T(),d||_(!0))},[t]),MP("div",p(p({className:h,style:e,"aria-label":"Ask Vimeo AI"},u),{},{children:[g&&MP(YM,{onReload:y}),!g&&d&&MP(hk,{id:Af.AI_WIDGET_ID,url:f,title:$M,onError:b,timeout:E,visible:t,onClose:()=>{a("aiWidget",!1)},isAnimating:s,waitForReady:!0},v)]}))},zM=()=>{const e=uL(!0),{module:t,load:n,readyState:r}=uP(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(){return Promise.resolve().then(function(){return EB})})),i=null==t?void 0:t.Compass,o=jw(e=>e.playback.playInitiated),a=jw(e=>e.embed.compass);return a&&o&&e.current&&(n(),e.current=!1),!a||r!==lP.LOADED&&!o?null:MP(i,{})};const KM=({children:e,shade:t,hideOnTiny:n})=>{const r=jw(e=>e.appearance.playerSizeMode);return MP("div",{className:Yf("OutroContentWrapper_module_outroContent__06afa88b",t&&"OutroContentWrapper_module_outroShade__06afa88b",r===Iv.TINY&&n&&"OutroContentWrapper_module_hidden__06afa88b"),children:e})};const XM=()=>{const e=jw(e=>e.outro.outroData);return MP(KM,{hideOnTiny:!0,shade:!0,children:MP("div",{className:"TextOutro_module_textWrapper__24ee4bfe",children:e&&MP("div",{className:"TextOutro_module_text__24ee4bfe",dangerouslySetInnerHTML:{__html:e.text}})})})};const ZM=({url:e})=>{const t={};return e&&(t.backgroundImage=`url(${e})`),MP("div",{className:"OutroContentBackground_module_background__3bf40fb2",style:t})},JM=()=>{const e=jw(e=>e.outro.outroData);return e&&MP(AA,{children:[MP(ZM,{url:null==e?void 0:e.imageUrl}),MP(KM,{shade:!0,hideOnTiny:!0,children:MP(Ok,{})})]})};const QM=()=>{const e=jw(e=>e.events),t=jw(e=>e.outro.outroData),n={};return null!=t&&t.imageUrl&&(n.backgroundImage=`url(${t.imageUrl})`),MP(AA,{children:[MP(zw,{visible:!0,children:MP("div",{className:"LinkOutro_module_linkBackground__0f1c39e6",style:n})}),MP(KM,{shade:!0,children:MP("div",{className:"LinkOutro_module_linkWrapper__0f1c39e6",children:t&&MP(AA,{children:[t.title&&MP("h1",{className:"LinkOutro_module_title__0f1c39e6",children:t.title}),t.description&&MP("p",{className:"LinkOutro_module_description__0f1c39e6",children:t.description}),t.text&&t.url&&MP("div",{className:"LinkOutro_module_buttonWrap__0f1c39e6",children:MP(Zw,{href:t.url,className:"LinkOutro_module_button__0f1c39e6",onClick:()=>e.fire(Pp,null==t?void 0:t.url),children:MP("span",{children:t.text})})}),t.text2&&t.url2&&MP(Zw,{href:t.url2,className:"LinkOutro_module_link__0f1c39e6",onClick:()=>e.fire(Cp,null==t?void 0:t.url2),children:MP("span",{children:t.text2})})]})})})]})};const ex=()=>{const e=jw(e=>e.outro.outroData),t=function(e){const t=jw(e=>e.events);return _L(function(){t.fire(Ip,e)},[e,t])}(null==e?void 0:e.url);return e&&MP(KM,{children:null!=e&&e.url?MP(Zw,{href:e.url,className:"ImageOutro_module_imageOutroLink__7772436e",onClick:t,targetBlank:!0,children:MP(tx,{url:e.imageUrl,altText:null==e?void 0:e.alt_text})}):MP(tx,{url:e.imageUrl,altText:null==e?void 0:e.alt_text})})};function tx({url:e,altText:t}){return MP("div",p({role:"img",className:"ImageOutro_module_imageOutro__7772436e",style:{backgroundImage:`url(${e})`}},t?{ariaLabel:t}:{}))}const nx=()=>MP(AA,{children:[MP(ZM,{}),MP(KM,{shade:!0}),";"]});const rx=({videos:e})=>{const t=VP(e=>e.loadVideoViaIframe),n=VP(e=>e.embed.onsite),r=jw(e=>e.events),i=jw(e=>e.user.isPayingOwner),o=jw(e=>e.embed.svvContext),a=e=>n=>{r.fire(Ep,e.id),i&&!o&&(n.preventDefault(),t(e.id,{autoplay:!0}))},s=Yf("VideosList_module_videoLink__24b2c487",DO);return e.length&&MP("ul",{className:"VideosList_module_videosList__24b2c487","data-num-videos":e.length,children:e.map(e=>MP("li",{children:MP(Zw,p(p({className:s,targetBlank:!n,href:e.url,onClick:a(e)},CO),{},{children:[MP(fk,{url:e.thumbnail,className:"VideosList_module_videoThumbnail__24b2c487"}),MP("header",{className:"VideosList_module_videoHeader__24b2c487",children:[MP(OO,{className:"VideosList_module_videoTitle__24b2c487",weight:xE.BOLD,element:"h1",size:ME.MD,color:VE.WHITE,children:e.title}),e.byline&&MP(OO,{className:"VideosList_module_videoByline__24b2c487",element:"h2",children:e.byline})]})]}))},e.id))})};var ix="FollowButton_module_icon__7f7b5348";const ox=()=>{const[e,t]=aL(!1),n=VP(e=>e.user.isClipOwner),r=jw(e=>e.events),i=jw(e=>e.user.following),o=jw(e=>e.user.loggedIn),a=jw(e=>e.user.persistUserAction);let s="Follow";const l=i&&e,c=i&&!e;l&&(s="Unfollow"),c&&(s="Following");const u=Yf(ix,"FollowButton_module_check__7f7b5348"),d=Yf(ix,"FollowButton_module_close__7f7b5348"),_=Yf("FollowButton_module_followButton__7f7b5348",c&&"FollowButton_module_following__7f7b5348");return MP("div",{onMouseEnter:()=>i&&t(!0),onMouseLeave:()=>t(!1),className:"FollowButton_module_followButtonContainer__7f7b5348",children:MP(WO,{className:_,onClick:()=>{if(o&&!n){if(r.fire(Bh),i)return a(rR.FOLLOWING,"DELETE"),void r.fire(Lp);a(rR.FOLLOWING,"PUT"),r.fire(Ap)}},children:[!i&&MP(nO,{className:ix,name:OP.PLUS_SYMBOL}),c&&MP(nO,{className:u,name:OP.CHECKMARK}),l&&MP(nO,{className:d,name:OP.CLOSE}),MP("span",{className:"FollowButton_module_followButtonText__7f7b5348",children:s})]})})};const ax=({titleMarkup:e})=>{const t=VP(e=>!e.user.isClipOwner);return MP("div",{className:"VideosHeader_module_videosHeaderWrapper__75827656",children:MP("header",{className:"VideosHeader_module_videosHeader__75827656",children:[MP(OO,{className:"VideosHeader_module_videosTitle__75827656",size:ME.LG,element:"h1",containsMarkup:!0,children:e}),t&&MP(ox,{})]})})};const sx=()=>{var e;const t=jw(e=>e.outro.outroData);return(null==t||null==(e=t.videos)?void 0:e.length)>0&&MP(AA,{children:[MP(ZM,{url:t.imageUrl}),MP(KM,{shade:!0,children:MP("div",{className:"VideosOutro_module_videosOutro__ce717ee3",children:[MP(ax,{titleMarkup:t.context}),MP(rx,{videos:t.videos})]})})]})};function lx({children:e,url:t,onClick:n,type:r="purchase-item"}){const i=Yf("VODButton_module_VODButton__9172ec57","watch"===r&&"VODButton_module_watch__9172ec57");return MP(Zw,p(p({className:i,role:"button",href:t},Bf(n)),{},{children:e}))}const cx=()=>{const e=jw(e=>e.vod.url),t=jw(e=>e.setDisplayList),n=jw(e=>e.vod.isPreorder),r=(jw(e=>e.vod.releaseDate),n?"Watch on {releaseDate}":"Watch Now"),i=ER();return MP(lx,{url:e,type:"watch",onClick:e=>{n||(e.preventDefault(),t("outro",!1),i(e))},children:r})},ux=()=>{const e=jw(e=>e.vod.isComingSoon),t=jw(e=>e.vod.isPreorder),n=jw(e=>e.vod.releaseDate);let r="Coming soon to Vimeo On Demand.";return e&&n&&(r="Coming soon to Vimeo On Demand on "+n+"."),t&&(r="Pre-order now. Watch on "+n+"."),MP("p",{children:r})};const dx=e=>{const t=function({type:e}){switch(e){case"buy":return OP.VOD_DOWNLOAD;case"rent":return OP.VOD_RENT;case"subscribe":return OP.VOD_SUBSCRIBE;default:return OP.VOD}}(e);return MP("div",{className:"VODIcon_module_VODIconContainer__698e3678",children:MP(nO,{className:"VODIcon_module_VODIcon__698e3678",name:t})})};const _x=({product_id:e,formattedLabel:t,type:n})=>{const r=jw(e=>e.vod.url),i=ER(e);return MP("li",{className:"PurchaseOptionItem_module_purchaseOptionItem__9ee33594",children:MP(lx,{url:`${r}#buy=${e}`,onClick:e=>{e.preventDefault(),i(e)},children:[MP(dx,{type:n}),MP("p",{className:"PurchaseOptionItem_module_label__9ee33594",children:t})]})})};const hx=()=>MP("ul",{className:"PurchaseOptions_module_purchaseOptions__40d29c02",children:jw(e=>e.vod.purchaseOptions).map((e,t)=>MP(_x,p({},e),`${e.type}-${t}`))}),px=()=>{const e=jw(e=>e.vod.isComingSoon),t=jw(e=>e.vod.isPreorder);return MP(AA,{children:[!e&&MP(hx,{}),(t||e)&&MP(ux,{})]})};const mx=()=>{const e=jw(e=>e.vod.url),t=jw(e=>e.vod.title),n=jw(e=>e.vod.isAvailableInCountry),r=jw(e=>e.vod.purchased),i=jw(e=>e.outro.outroData);return i&&MP(AA,{children:[(null==i?void 0:i.imageUrl)&&MP(ZM,{url:null==i?void 0:i.imageUrl}),MP(KM,{shade:!0,children:MP("div",{className:"VODOutro_module_VODOutroContainer__4642efe8",children:[MP("h1",{"aria-describedby":"new-window",className:"VODOutro_module_VODHeader__4642efe8",children:MP(Zw,{href:e,children:t})}),n&&MP(r?cx:px,{})]})})]})},fx=()=>{const e=jw(e=>e.displayList.outro),t=jw(e=>e.outro.active),n=jw(e=>e.outro.purpose),r=Yf("Outro_module_outroWrapper__64bf980e",yf.VP_OUTRO_WRAPPER,!t&&"Outro_module_inactive__64bf980e");return MP(zw,{visible:e,styleOverrides:{exitDone:{display:"none"}},children:MP("div",{className:r,"data-content-area-sibling-eligible":!0,children:MP("div",{className:"Outro_module_outro__64bf980e",role:"dialog",children:[n===wI.TEXT&&MP(XM,{}),n===wI.SHARE&&MP(JM,{}),n===wI.VIDEOS&&MP(sx,{}),n===wI.LINK&&MP(QM,{}),n===wI.IMAGE&&MP(ex,{}),n===wI.NOTHING&&MP(nx,{}),n===wI.VOD&&MP(mx,{})]})})})};const vx=({text:e})=>MP("h3",{children:[MP(nO,{name:OP.WARN_TRIANGLE,className:"Warning_module_warningIcon__3a030e60"}),MP("span",{dangerouslySetInnerHTML:{__html:e}})]});function gx(){const e=`See a <a href="https://help.vimeo.com/hc/en-us/articles/12425909164561-Watch-360-videos#h_01FRKB6NKKXE9WTVX8P5C64D69" target="_blank" rel="noopener" aria-describedby="${Sf.NEW_WINDOW_DESCRIPTION}">list of browsers</a> that support 360 viewing.`;return MP(vx,{text:e})}function Ex(){const e=`Looking to watch a 360 video? See <a href="https://help.vimeo.com/hc/en-us/articles/12425909164561-Watch-360-videos#h_01FRKB6NKKXE9WTVX8P5C64D69" target="_blank" rel="noopener" aria-describedby="${Sf.NEW_WINDOW_DESCRIPTION}">supported browsers and settings</a>.`;return MP(vx,{text:e})}const bx=({visible:e,children:t,duration:n,onComplete:r})=>MP(OL,{in:e,duration:n,styles:{enter:{transform:"translateY(-100%)",transition:`transform ${n}ms linear, opacity ${n}ms`,opacity:0},enterActive:{opacity:1,transition:`transform ${n}ms cubic-bezier(0, 1.14, 0.57, 1.21), opacity ${n}ms`,transform:"translateY(0)",animationName:"bounce",animationDelay:n,animationDuration:"0.5s",animationFillMode:"forwards"},enterDone:{opacity:1,transform:"translateY(0)"},exit:{opacity:1,transform:"translateY(0)"},exitActive:{animationFillMode:"none",opacity:0,transform:"translateY(-100%)",transition:`transform ${2*n}ms linear, opacity ${2*n}ms linear`},exitDone:{display:"none"}},onExited:r,children:t}),yx=()=>{const e=jw(e=>e.displayList.alert),t=uL(null),n=jw(e=>e.setAlert),r=jw(e=>e.setDisplayList),i=jw(e=>e.alert.currentAlert),o=_L(()=>r("alert",!1),[r]),a=_L(()=>n("currentAlert",NI.EMPTY),[n]);return lL(function(){e&&(clearTimeout(t.current),t.current=setTimeout(o,1e3))},[e,i]),MP(bx,{visible:e,duration:100,onComplete:a,children:MP("div",{className:"Alert_module_alert__59e6b5e4",role:"alert",hidden:!e,children:[MP(WO,{onClick:o,icon:MP(nO,{name:OP.CLOSE,className:"Alert_module_closeIcon__59e6b5e4"}),"aria-label":"Close alert",className:"Alert_module_close__59e6b5e4"}),i===NI.SPATIAL_UNSUPPORTED&&MP(gx,{}),i===NI.SPATIAL_FAILURE&&MP(Ex,{})]})})};const Tx="opacity 250ms ease-out",Sx={enter:{opacity:0},enterActive:{opacity:1,transition:Tx},enterDone:{opacity:1},exit:{opacity:1},exitActive:{opacity:0,transition:Tx},exitDone:{display:"none"}},Cx=Object.values(sk),Ax=()=>{const e=VP(e=>e.element),t=VP(e=>e.accessGate.purpose),n=VP(e=>e.accessGate.url),r=VP(e=>e.accessGate.title),i=VP(e=>e.accessGate.accessGateReady),o=VP(e=>e.accessGate.accessGateLoaded),a=VP(e=>e.accessGate.closeAccessGate),s=VP(e=>e.accessGate.setAccessGateReady),l=VP(e=>e.accessGate.setAccessGateLoaded),c=VP(e=>e.accessGate.sendGateBPEvent),u=VP(e=>e.bigPicture),[d,_]=aL(!1),[h,p]=aL(!1),m=t!==rE.EMPTY,f=d&&h&&m,v=d&&m&&!o,g=f&&i,E=Yf(Tf.REMOTE_ACCESS_GATE,"RemoteAccessGate_module_accessGate__a110c222",v&&"RemoteAccessGate_module_waitingToDisplay__a110c222",g&&"RemoteAccessGate_module_visible__a110c222"),{componentVersion:b,hasError:y,componentTimeout:T,onError:S,onReload:C}=fP();return lL(()=>{_(!0)},[]),lL(()=>{const t=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(){return function(e,t){return e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e}(re(e),function(){p(!0)})});h||t()},[h,e]),MP(OL,{in:f,styles:Sx,duration:250,children:MP("div",{className:"RemoteAccessGate_module_accessGateWrapper__a110c222",children:[y&&MP(Lx,{onReload:C}),!y&&f&&MP(dk,{visible:g,id:t,url:n,title:r,className:E,timeout:T,bigPicture:u,waitForReady:!0,onClose:a,onError:e=>{Cx.includes(null==e?void 0:e.message)&&S(),c(oE.ERROR,e)},onRemoteComponentReady:s,onIframeLoad:l},b)]})})};const Lx=({onReload:e})=>{const t=Yf(Tf.EXCLUDE_GLOBAL_BUTTON_STYLES,"RemoteAccessGateError_module_reload__fdcfc0f0");return MP("div",{className:"RemoteAccessGateError_module_container__fdcfc0f0","data-component-type":"access-gate",children:[MP(nO,{name:OP.INFO_CIRCLE,className:"RemoteAccessGateError_module_icon__fdcfc0f0","aria-hidden":"true"}),MP(OO,{size:ME.LG,weight:xE.NORMAL,className:"RemoteAccessGateError_module_messageText__fdcfc0f0",role:"alert",children:"Unable to load registration form"}),MP(WO,{className:t,size:OE.CUSTOM,onClick:e,"data-component-type":"reload-access-gate",children:MP(OO,{size:ME.MD,weight:xE.BOLD,children:"Try again"})})]})};const Ix=()=>{const e=VP(e=>e.login.status),t=VP(e=>e.embed.videoId),n=VP(e=>e.embed.vimeoUrl),{loginText:r,buttonTarget:i}=((e=_E.NOT_LOGGED_IN)=>{const t={loginText:_g()?{title:"Sign in to Vimeo to watch this video",subtitle:"You may need to allow cookies first. If asked, select <b>Allow</b> to continue.",buttonText:"Sign in"}:{title:"Sign in to Vimeo",subtitle:"This video is private. Sign in to watch.",buttonText:"Sign in"},buttonTarget:vf.POPUP};switch(e){case _E.LOGGED_IN_NO_ACCESS:t.loginText={title:"Private Video",subtitle:"Sorry, you don’t have permission to watch.",buttonText:null};break;case _E.LOGGED_IN_STORAGE_ACCESS_REQUIRED:t.loginText={title:"Allow cookies",subtitle:"Your browser will ask if you want to allow cookies. Select <b>Allow</b> to continue.",buttonText:"Continue"};break;case _E.STORAGE_ACCESS_GRANTED_LOGIN_UNCONFIRMED:t.loginText={title:"Continue to sign in",subtitle:"You may now sign in to watch this video.",buttonText:"Continue"};break;case _E.ALL_ACCESS_ATTEMPTS_FAILED:t.loginText={title:"Video unavailable",subtitle:"Try watching on vimeo.com.",buttonText:"Watch on Vimeo"},t.buttonTarget=vf.ON_SITE}return t})(e),{loginHandler:o}=(()=>{const e=VP(e=>e.events),t=VP(e=>e.embed.videoId),n=uL(null),{openLoginPopup:r}=mR({url:`/video/${t}/login/private`,context:hE.PRIVATE_LOCKED});return lL(()=>{n.current=function({events:e,dependencies:t=pE}){const n={onLoginRequested:function(t){c=t,!r()||a?(u(),d()):(s++,i(u).then(t=>t?(a=!0,o||d(),void e.fire(np,hE.PRIVATE)):void(m(1)?h(_E.ALL_ACCESS_ATTEMPTS_FAILED):d())).catch(e=>{}))}},{storageAccessRequired:r,requestCookieAccess:i}=t;let o=!1,a=!1,s=0,l=0,c=Cv;function u(){o=!0,c()}function d(){e.once(op,_)}function _(){l++;const e=p();m()?h(_E.ALL_ACCESS_ATTEMPTS_FAILED):h(!e&&o?_E.LOGGED_IN_STORAGE_ACCESS_REQUIRED:_E.STORAGE_ACCESS_GRANTED_LOGIN_UNCONFIRMED)}function h(t){e.fire(Sm,t)}function p(){return s>=2}function m(e=2){const t=!r()&&o&&l>0,n=l>=e,i=p();return n&&i||t}return n}({events:e})},[e]),{loginHandler:()=>{n.current&&n.current.onLoginRequested(r)}}})(),a=e===_E.STORAGE_ACCESS_GRANTED_LOGIN_UNCONFIRMED||e===_E.ALL_ACCESS_ATTEMPTS_FAILED;return MP("div",{className:"PrivateGate_module_privateGateWrapper__b6123279","data-private-gate":!0,children:[MP(OO,{element:"h1",className:"PrivateGate_module_header__b6123279",children:r.title}),MP(OO,{className:"PrivateGate_module_subtitle__b6123279",weight:xE.NORMAL,containsMarkup:!0,"data-private-text":!0,children:r.subtitle}),e!==_E.LOGGED_IN_NO_ACCESS&&MP(WO,{role:a?"link":void 0,color:kE.PRIMARY,className:Yf("PrivateGate_module_login__b6123279","PrivateGate_module_loginButton__b6123279",NO),"aria-describedby":a?Sf.NEW_WINDOW_DESCRIPTION:void 0,onClick:()=>{if(i===vf.POPUP)return void o();const e=`https://${n}/${t}`;window.open(e,"_blank")},children:r.buttonText})]})};function Px(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}const Rx=kx(function(e,t){const n=new URLSearchParams({password:window.btoa(Rm(e))}),r=me(t,he(window.location.search));return Px($e(r,{method:"post",body:n.toString(),headers:{"Content-Type":"application/x-www-form-urlencoded"},credentials:"include"}),function(e){return Px(e.json(),function(t){if(!e.ok||!1===t)throw new Error("Password submission failed");return t})})});function wx(){}function Ox(e){var t=e();if(t&&t.then)return t.then(wx)}function kx(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}const Dx=()=>{const e=VP(e=>e.events),t=VP(e=>e.embed.playerUrl),n=VP(e=>e.embed.referrer),r=VP(e=>e.embed.videoId),i=uL(null),o=uL(null),a=uL(null),[s,l]=aL(!1),[c,u]=aL("There is an error with this input."),[d,_]=aL(!1),h=`https://${t}/video/${r}/check-password?referrer=${n}`,p="Enter password",m=Yf("PasswordGate_module_submitPassword__edc7257a",d&&"PasswordGate_module_loading__edc7257a"),f=()=>{const e=a.current;e.focus(),_(!1),l(!0),e.value.length?u("The password you entered is incorrect. Please try again."):u("Please enter the password.")},v=kx(function(t){return t.preventDefault(),u(""),l(!1),Ox(function(){if(a.current.checkValidity())return _(!0),Ox(function(){if(a.current.checkValidity())return function(e){if(e&&e.then)return e.then(wx)}(function(t,n){try{var r=Px(Rx(a.current.value,h),function(t){t&&e.fire(lp,t)})}catch(e){return n()}return r&&r.then?r.then(void 0,n):r}(0,function(){f()}))});f()})});return MP("div",{className:"PasswordGate_module_passwordGateWrapper__edc7257a","data-password-gate":!0,children:[MP(OO,{className:"PasswordGate_module_header__edc7257a",element:"h1",children:"Password required"}),MP(OO,{className:"PasswordGate_module_subtitle__edc7257a",weight:xE.NORMAL,containsMarkup:!0,"data-private-text":!0,children:"If you have access, enter the password to watch."}),MP("form",{className:"PasswordGate_module_form__edc7257a",ref:i,noValidate:!0,onSubmit:v,children:[MP(Dk,{message:c,visible:s,wrapperEl:a.current}),MP("input",{className:"PasswordGate_module_passwordInput__edc7257a",placeholder:p,required:!0,"aria-required":"true","aria-label":p,"aria-invalid":s?"true":"false",ref:a,onInput:()=>l(!1),minLength:1,type:"password"}),MP(WO,{className:m,onClick:v,ref:o,disabled:s,focusable:!1,"data-submit-password":!0,children:"Submit"})]})]})};const Nx=()=>MP("div",{className:"GeoBlockingGate_module_geoblockingGateWrapper__b24d757a","data-geo-blocking-gate":!0,children:MP(OO,{className:"GeoBlockingGate_module_header__b24d757a",element:"h1",weight:xE.BOLD,children:"This video is not available in your region"})});const Mx=()=>{const e=VP(e=>e.user.isClipOwner),t={header:e?"Account is over the DRM limit":"Video is currently unavailable",message:"Contact the Vimeo sales team to add more licenses, or turn off DRM. Until then, viewers will see this video listed as unavailable."};return MP("div",{className:"DRMPlaybackUnavailableGate_module_wrapper__e4e38468","data-drm-playback-unavailable-gate":!0,children:[MP(OO,{className:"DRMPlaybackUnavailableGate_module_header__e4e38468",element:"h1",weight:xE.BOLD,children:t.header}),e&&MP(OO,{className:"DRMPlaybackUnavailableGate_module_message__e4e38468",weight:xE.NORMAL,children:t.message})]})},xx=()=>{const e=VP(e=>e.localAccessGate.purpose);return e!==GP.EMPTY&&MP("div",{className:"LocalAccessGate_module_localAccessGateWrapper__36d942ec",children:[e===GP.GEO_BLOCKED&&MP(Nx,{}),e===GP.DRM_PLAYBACK_UNAVAILABLE&&MP(Mx,{}),e===GP.PASSWORD&&MP(Dx,{}),e===GP.PRIVATE_LOCKED&&MP(Ix,{}),e===GP.ERROR&&MP(xk,{})]})};function Vx(){const e=jw(e=>e.setInteractive),t=jw(e=>e.interactive.instanceId),n=jw(e=>e.interactive.active),r=jw(e=>e.interactive.enabled),i=Yf("VimeoInteractive_module_container__8c53216a",n&&"VimeoInteractive_module_active__8c53216a");return r?t?MP("div",{children:MP("div",{id:t,className:i},t)}):(e("instanceId",`vp-vimeo-interactive-instance-${Math.random().toString(36).substring(2)}`),null):null}const Bx=()=>MP("div",{className:"DefaultVideoThumbnail_module_defaultVideoThumbnail__a8b490d0",children:MP(nO,{name:OP.CAMERA,className:"DefaultVideoThumbnail_module_icon__a8b490d0"})}),Ux=()=>{const e=VP(e=>e.videoThumbnail.isDisplayed),t=VP(e=>e.videoThumbnail.thumbnailUrl),n=VP(e=>e.videoThumbnail.shouldCoverBackground),r={backgroundImage:`url(${t})`},i=Yf(bf.VP_PREVIEW,"VideoThumbnail_module_videoThumbnail__836d3344",n&&"VideoThumbnail_module_cover__836d3344");return e?t?MP("div",{className:i,style:r,"data-thumb":t}):MP(Bx,{}):null},Fx=()=>MP("span",{id:Sf.NEW_WINDOW_DESCRIPTION,hidden:!0,children:"(opens a new window)"});var Hx="LiveStatusAlerts_module_schedule__edeebd03";const Wx=()=>{const e=jw(e=>e.liveEvent.isLiveEvent),t=jw(e=>e.liveEvent.isOnline),n=jw(e=>e.liveEvent.liveEventSchedule),r=jw(e=>e.liveEvent.isPending),i=jw(e=>e.liveEvent.isActive),o=jw(e=>e.liveEvent.isEnded),a=jw(e=>e.liveEvent.isArchived),s=jw(e=>e.liveEvent.dvrEnabled),l=jw(e=>e.liveEvent.showEventSchedule),c=jw(e=>e.playback.currentTime),u=jw(e=>e.playback.atLiveEdge),d=jw(e=>e.config.request.lang),_=jw(e=>e.element),[h,p]=aL(null),[m,f]=aL(null),[v,g]=aL(new Date),E=uL(null),b=dL(()=>new Date(n),[n]),y=o&&s&&0!==c||!1===t&&!u,T=null===t,S=o&&!y&&!a,C=!1===t&&!y;return lL(()=>(T&&l?(r||i)&&n?WE(b,v)>0?(p("time"),f(function(e,t,n=new Date){const r=WE(t),i=Math.ceil(r/1e3).toFixed(0),o=Math.ceil(r/6e4).toFixed(0),a=Math.ceil(r/36e5).toFixed(0),s=Math.ceil(r/864e5).toFixed(0),l=n.toDateString()===t.toDateString();if(parseInt(s,10)>1||!l)return("This event is scheduled for\n"+new Intl.DateTimeFormat(e,{month:"long",day:"numeric"}).format(t)+"\nat "+new Intl.DateTimeFormat(e,{hour:"2-digit",minute:"2-digit"}).format(t)).split("\n");if(parseInt(a,10)>1&&l)return("This event is scheduled for\nToday\nat "+new Intl.DateTimeFormat(e,{hour:"numeric",minute:"numeric"}).format(t)).split("\n");let c;const u=parseInt(o,10)>1;return c=u?"minutes":parseInt(i,10)>1?"seconds":"second",("This event will start in\n"+(u?o:i)+" "+c).split("\n")}(d,b,v)),E.current=setInterval(()=>{g(new Date)},1e3)):(p("text"),f("This event hasn't started yet")):(r||i)&&(p("text"),f("This event hasn't started yet")):S?(p("text"),f("Live event ended")):C?(p("text"),f("Live stream offline")):(p(null),f(null)),()=>{E.current&&(clearInterval(E.current),E.current=null)}),[r,i,o,a,t,y,n,d,b,v,T,l,S,C]),e&&h&&m&&zL(MP("div",{className:"LiveStatusAlerts_module_eventTextWrapper__edeebd03","data-live-status-alerts":!0,children:["text"===h&&MP("span",{className:Hx,children:m}),"time"===h&&MP("div",{className:Hx,"data-live-event-schedule":!0,children:[MP("span",{className:"LiveStatusAlerts_module_scheduleTitle__edeebd03",children:m[0]}),MP("span",{className:"LiveStatusAlerts_module_scheduleBody__edeebd03",children:m[1]}),MP("span",{className:"LiveStatusAlerts_module_scheduleFooter__edeebd03",children:m[2]})]})]}),_)};const Gx=()=>{const e=jw(e=>e.chromecast.isChromecastConnected),t=jw(e=>e.chromecast.receiverFriendlyName),n=jw(e=>e.playback.ended);return e&&!n&&MP("div",{className:"ChromecastText_module_wrapper__b7ce34bb",children:MP("span",{className:"ChromecastText_module_text__b7ce34bb",children:`Casting on ${t}`})})};function jx(e,t){const n=t.querySelector(`.${bf.VP_PLAYER_UI_CONTAINER}`),r=t.querySelector(`.${bf.VP_PLAYER_UI_OVERLAYS}`),i=t.querySelector(`.${bf.VP_VIDEO_WRAPPER}`);YA(MP(BP,{player:e,children:[MP(_M,{}),MP(Ax,{}),MP(xx,{}),MP($N,{element:i,children:MP(Ux,{})}),MP($w,{player:e,children:[MP(WN,{}),MP(eM,{}),MP($N,{element:r,children:[MP(jM,{}),MP(BM,{}),MP(tM,{}),MP(fD,{}),MP(rD,{}),MP(hD,{}),MP(ED,{}),MP(QN,{}),MP(FN,{}),MP(YN,{}),MP(IM,{}),MP(PM,{}),MP(zM,{}),MP(fx,{}),MP(yx,{}),MP(Vx,{}),MP(Gx,{})]}),MP(Wx,{}),MP(pM,{}),MP(hM,{})]}),MP(Fx,{})]}),n)}const Yx=Symbol("CONFIG_CHANGED"),$x=Symbol("TELECINE_READY"),qx=Symbol("TELECINE_VIDEO_INIT"),zx=Symbol("PLAY_INITIATED"),Kx=Symbol("QUALITY_CHANGED"),Xx=Symbol("CUE_CHANGED"),Zx=Symbol("CAPTIONS_CHANGED"),Jx=Symbol("SPATIAL_PLAYBACK_TOGGLED"),Qx=Symbol("PICTURE_IN_PICTURE_AVAILABLE_SAFARI"),eV=Symbol("HLS_QUALITY_CHANGED"),tV=Symbol("REQUEST_COMPLETE_LIVE_SUBTITLES"),nV=Symbol("COMPLETE_LIVE_SUBTITLES_LOADED"),rV=Symbol("COMPLETE_LIVE_SUBTITLES_ERROR");var iV=Object.freeze({__proto__:null,CONFIG_CHANGED:Yx,TELECINE_READY:$x,TELECINE_VIDEO_INIT:qx,PLAY_INITIATED:zx,QUALITY_CHANGED:Kx,CUE_CHANGED:Xx,CAPTIONS_CHANGED:Zx,SPATIAL_PLAYBACK_TOGGLED:Jx,PICTURE_IN_PICTURE_AVAILABLE_SAFARI:Qx,HLS_QUALITY_CHANGED:eV,REQUEST_COMPLETE_LIVE_SUBTITLES:tV,COMPLETE_LIVE_SUBTITLES_LOADED:nV,COMPLETE_LIVE_SUBTITLES_ERROR:rV});const oV=Symbol("liveeventpending"),aV=Symbol("liveeventactive"),sV=Symbol("liveeventstarting"),lV=Symbol("liveeventstarted"),cV=Symbol("liveeventended"),uV=Symbol("livearchivestarted"),dV=Symbol("livearchivedone"),_V=Symbol("livearchiveerror"),hV=Symbol("livesettingsupdated"),pV=Symbol("lowlatencyfallback"),mV=Symbol("livestatssuccess"),fV=Symbol("livestatsfailure");var vV=Object.freeze({__proto__:null,EVENT_PENDING:oV,EVENT_ACTIVE:aV,EVENT_STARTING:sV,EVENT_STARTED:lV,EVENT_ENDED:cV,ARCHIVE_STARTED:uV,ARCHIVE_DONE:dV,ARCHIVE_ERROR:_V,SETTINGS_UPDATED:hV,LOW_LATENCY_FALLBACK:pV,LIVE_STATS_SUCCESS:mV,LIVE_STATS_FAILURE:fV});p(p(p(p(p(p(p(p({},Pi),ki),Di),vV),Ni),wi),Mi),iV),p(p({},Di),vV);class gV{static init(e){this.configurePictureInPicture(e.config,e.backbone),e.backbone.on(Yx,(t,n)=>{this.getPipSetting(n)!==this.getPipSetting(t)&&this.configurePictureInPicture(t,e.backbone)})}static getPipSetting(e){var t;return null==(t=e.embed)||null==(t=t.settings)?void 0:t.pip}static configurePictureInPicture(e,t){var n,r;t.disablePictureInPicture=!((null==(n=e.embed)||null==(n=n.settings)?void 0:n.pip)??1),t.autoPictureInPicture=!!((null==(r=e.embed)||null==(r=r.settings)?void 0:r.auto_pip)??1)}}class EV{constructor(e){gV.init(e)}}const bV=`\n    <div class="${Tf.CONTENT_AREA_BACKGROUND_CONTAINER}" aria-hidden="true"></div>\n        <div class="${bf.VP_VIDEO_WRAPPER}" ${kf.CONTENT_AREA_SIBLING_ELIGIBLE} aria-hidden="true">\n            <div class="${bf.VP_VIDEO}">\n                <div class="${bf.VP_TELECINE}"></div>\n            </div>\n        </div>\n        <div class="${bf.VP_TARGET}" ${kf.CONTENT_AREA_SIBLING_ELIGIBLE}></div>\n        <div class="${bf.VP_PLAYER_UI_CONTAINER}" ${kf.CONTENT_AREA_SIBLING_ELIGIBLE}></div>\n        <div class="${bf.VP_PLAYER_UI_OVERLAYS}" ${kf.CONTENT_AREA_SIBLING_ELIGIBLE}></div>\n    </div>\n`;var yV=new WeakMap,TV=new WeakMap,SV=new WeakMap,CV=new WeakMap,AV=new WeakMap;class LV{constructor(e){var t;s(this,yV,void 0),s(this,TV,void 0),s(this,SV,void 0),s(this,CV,void 0),s(this,AV,void 0),l(yV,this,e),l(TV,this,{}),l(SV,this,0!==(null==(t=e.config)||null==(t=t.embed)||null==(t=t.settings)?void 0:t.skipping_forward)),l(CV,this,!0),l(AV,this,{timeStamp:null,videoTime:null,timeElapsed:0,playbackElapsed:0}),this._onTimeUpdate=this._onTimeUpdate.bind(this),this._onConfigChanged=this._onConfigChanged.bind(this),this._init()}_init(){a(yV,this).events.on(Pi.TIME_UPDATE,this._onTimeUpdate),a(yV,this).events.on(ap,this._onConfigChanged)}_onTimeUpdate(){this._captureTimeUpdateElapsedTime();const e=a(yV,this).currentTime;if(!a(CV,this)&&!this.canPlayNow)return a(yV,this).events.fire(ch),void(!this.canPlayToTime(e-1)&&this._resetToMaxPlayedTime());if(this.canSeekForward)return void(this.maxPlayedTime=e);if(a(yV,this).backbone.seeking)return;const t=Bu(a(AV,this).timeElapsed,0,1)+1;$c(e)>$c(this.maxPlayedTime+t)?this._resetToMaxPlayedTime():this.maxPlayedTime=e}_resetToMaxPlayedTime(){try{vy.isCastConnected&&(vy.chromecastPlayer.currentTime=this.maxPlayedTime),a(yV,this).backbone.currentTime=this.maxPlayedTime}catch(e){}}_onConfigChanged(e,t){var n;e&&(l(TV,this,{}),l(CV,this,!0)),l(SV,this,0!==(null==t||null==(n=t.embed)||null==(n=n.settings)?void 0:n.skipping_forward))}_captureTimeUpdateElapsedTime(){const e=performance.now()/1e3,t=a(yV,this).currentTime,n=e-(a(AV,this).timeStamp??e),r=t-(a(AV,this).videoTime??t);Object.assign(a(AV,this),{timeStamp:e,videoTime:t,timeElapsed:n,playbackElapsed:r})}_getMaxPlayedTimeForFragment(e){const t=e.startTime;return void 0===a(TV,this)[t]&&(a(TV,this)[t]=t),a(TV,this)[t]}_clampToMaxPlayedTime(e){const t=a(yV,this).fragmentsHandler.getFragmentFromTime(e),n=this._getMaxPlayedTimeForFragment(t);return Math.min(e,n)}getAllowedPlayTime(e){return this.canPlayForward?e:this._clampToMaxPlayedTime(e)}getAllowedSeekTime(e){return this.canSeekForward?e:this._clampToMaxPlayedTime(e)}canPlayToTime(e){return this.getAllowedPlayTime(e)>=e}canSeekToTime(e){return this.getAllowedSeekTime(e)>=e}get maxPlayedTime(){const e=a(yV,this).fragmentsHandler.getFragmentFromTime(a(yV,this).currentTime);return this._getMaxPlayedTimeForFragment(e)}set maxPlayedTime(e){const t=a(yV,this).fragmentsHandler.getFragmentFromTime(e),n=this._getMaxPlayedTimeForFragment(t);e=Math.max(e,n),a(TV,this)[t.startTime]=e}get canSeekForward(){return a(CV,this)&&a(SV,this)}get canSeekNow(){return!!this.canSeekForward||this.canSeekToTime(a(yV,this).currentTime)}get canPlayNow(){return!!this.canPlayForward||this.canPlayToTime(a(yV,this).currentTime)}get canPlayForward(){return a(CV,this)}lockPlayback(){l(CV,this,!1),a(yV,this).events.fire(Am),this.canPlayNow||a(yV,this).events.fire(ch)}unlockPlayback(){const e=!a(CV,this)&&!this.canPlayToTime(a(yV,this).currentTime+1);l(CV,this,!0),a(yV,this).events.fire(Lm),e&&a(yV,this).events.fire(uh)}}function IV(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function PV(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function RV(){}function wV({element:e,delegate:t={},cssLoadedPromise:n=Promise.resolve(null),name:r=null}){const i=PV(function(e){var t;const n=e.abTests.some(e=>"hls_js_live"===e.test&&"variant"===e.group),r=null==(t=e.config.video)?void 0:t.live_event;return function(){var e=function(){if(r&&n)return function(e,t){return function(e,t,n){if(n)return t?t(e()):e();try{var r=Promise.resolve(e());return t?r.then(t):r}catch(e){return Promise.reject(e)}}(e,RV,t)}(Ac)}();if(e&&e.then)return e.then(RV)}()}),o=PV(function(t){return function(e){jE.forEach(t=>{const n=t(e.config);n&&e.addABTest(n)})}(t),IV(i(t),function(){V=new LV(t),x=ey(t),ee(),function(t){S=new oy(t),T=new Yd(_,u.config,t.abTests),g=T;const n=t.config.embed.settings.debug_payload_collection_policy;w=new VC(t,n),new Fy(t,s,e.querySelector(`.${bf.VP_VIDEO_WRAPPER}`)),ne(t),t.doNotTrackEnabled||(new ES(t,s),B.init(t),new Jy(t),new oC(t),new bb(t),function(e){function t(t){return function({value:n}){uA[t]||(uA[t]=!0,function(t,n){e.bigPicture.sendEvent(yg.PLAYER_PERFORMANCE_MEASUREMENT,{measurement_type:t,measurement_value:n})}(t,n))}}Math.random()<=cA&&(function(e,t){var n,r=ZC(),i=GC("FID"),o=function(e){e.startTime<r.firstHiddenTime&&(i.value=e.processingStart-e.startTime,i.entries.push(e),n(!0))},a=jC("first-input",o);n=qC(e,i,t),a&&YC(function(){a.takeRecords().map(o),a.disconnect()},!0),a&&$C(function(){var r;i=GC("FID"),n=qC(e,i,t),WC=[],FC=-1,UC=null,aA(addEventListener),r=o,WC.push(r),iA()})}(t(lA.FIRST_INPUT_DELAY)),function(e,t){QC||(JC(function(e){eA=e.value}),QC=!0);var n,r=function(t){eA>-1&&e(t)},i=GC("CLS",0),o=0,a=[],s=function(e){if(!e.hadRecentInput){var t=a[0],r=a[a.length-1];o&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,a.push(e)):(o=e.value,a=[e]),o>i.value&&(i.value=o,i.entries=a,n())}},l=jC("layout-shift",s);l&&(n=qC(r,i,t),YC(function(){l.takeRecords().map(s),n(!0)}),$C(function(){o=0,eA=-1,i=GC("CLS",0),n=qC(r,i,t)}))}(t(lA.CUMULATIVE_LAYOUT_SHIFT)),function(e,t){var n,r=ZC(),i=GC("LCP"),o=function(e){var t=e.startTime;t<r.firstHiddenTime&&(i.value=t,i.entries.push(e),n())},a=jC("largest-contentful-paint",o);if(a){n=qC(e,i,t);var s=function(){sA[i.id]||(a.takeRecords().map(o),a.disconnect(),sA[i.id]=!0,n(!0))};["keydown","click"].forEach(function(e){addEventListener(e,s,{once:!0,capture:!0})}),YC(s,!0),$C(function(r){i=GC("LCP"),n=qC(e,i,t),requestAnimationFrame(function(){requestAnimationFrame(function(){i.value=performance.now()-r.timeStamp,sA[i.id]=!0,n(!0)})})})}}(t(lA.LARGEST_CONTENTFUL_PAINT)))}(t)),A=new ly(t),function(e){if(!ug(e.config)||!e.config.embed.settings.chromecast)return;const t=new py({core:e});vy.init({chromecastPlayer:t}),vy.on([hy.error,hy.mediaLoadedFailed],e=>{Ab.captureException(e)})}(t),te(t)}(t),new EV(t)})});ud(Ab);let a=!1;const s=pn(PT,mn(e=>(...t)=>{const n=e.apply(void 0,t),r=Om();function i(e,t){return(e=[].concat(e)).map(e=>t(n.createGetter(e)))}return p(p({},n),{},{watch:function(e,t){return i(e,e=>{let i=r.get({selector:e,listener:t});if(!i){const o=function(e,t){let r=e(n.getState());return n.subscribe(function(){let i=e(n.getState());if(r!==i){let e=r;r=i,t(r,e,n.getState())}})}(e,t);i=r.insert({selector:e,listener:t,unsubscribe:o})}return i.unsubscribe})},unwatch:function(e,t){return i(e,e=>{const n=r.get({selector:e,listener:t});return n&&n.unsubscribe()})}})},function(e={}){return t=>(...n)=>{const r=t.apply(void 0,n);function i(){return e}const o=Bt(e=>{if(mt(e))return e;const t=Kt(i(),e);return mt(t)?t:t=>Kt(t,e)});return p(p({},r),{},{getSelectors:i,createGetter:o,get:function(e,t){let n=(e=o(e))(r.getState());return void 0!==t&&(n=function(e,t){return null==e||e!=e?t:e}(n,t)),n}})}}(RT),vn.apply(void 0,[]))),l=new Map,c=new bn,u=new Ib({events:c}),d=ve();e.classList.add(`player-${d}`),e.classList.add("loading"),e.id||(e.id=`player${d}`),e.innerHTML=bV;const _=e.querySelector(`.${bf.VP_TELECINE}`);if(Q.iOS){const e=document.createElement("video");_.appendChild(e);try{e.setAttribute("muted",""),e.setAttribute("playsinline",""),e.setAttribute("disableRemotePlayback",""),e.load()}catch(e){Ab.captureException(e)}}let h,m,v,g,E,b,y,T=null,S=null,C=null,A=null,I=null,P=null,R=[],w=null,k=null,N=null,M=null,x=null,V=null,B=new iC,U=!1,F=!1,H=null,W=null,G={};const j=new Promise((e,t)=>{b=e,y=t,U=!0}).then(()=>(U=!1,c.fire(xp),null));let Y,$;const q=new Promise((e,t)=>{Y=e,$=t,F=!0}).then(()=>(F=!1,null));let z=((e,t,n,r=!0)=>new Promise((i,o)=>{e.on(t,(...e)=>{i.apply(void 0,e)}),"number"==typeof n&&setTimeout(()=>{r?o():i(null)},n)}))(c,Tm),K={get config(){return u.config},set config(e){u.config=e},get delegate(){return t},set delegate(e){t=e},ready(e){if(!e)return j;j.then(()=>e()).catch(e=>{Ab.captureException(e)})},playbackEngineReady(e){if(!e)return q;q.then(()=>e()).catch(e=>{Ab.captureException(e)})},get sessionId(){return u.config.request.session},get name(){return r},get parentUrl(){return M},set parentUrl(e){M=e},destroy(){(U||F)&&(y("Cancelling ready promise for player initialization."),$("Cancelling playback engine ready promise for player initialization.")),c.fire(V_)}};function X(e){var t;const{old:n,loaded:r}=e;if(function(e,t){var n;null==(n=t.request)||n.ab_tests}(0,r),(e=>{Q.mse=e})(D(r.request.flags.disable_mms)),null!=(t=r.request)&&t.urls.js&&function(e){L=e.substring(0,e.lastIndexOf("/")+1)}(r.request.urls.js),window.parent!==window){var i;let e="Private Video on Vimeo";r.view!==Jm.main&&r.view!==Jm.privateUnlocked||(e=`${r.video.title} from ${r.video.owner.name} on Vimeo`),document.title=e,null!=(i=history)&&i.replaceState&&r.video&&n&&history.replaceState({id:r.video.id},"",`/video/${r.video.id}${window.location.search}`)}if(r.view!==Jm.main&&r.view!==Jm.privateUnlocked)throw new Error(`Config not authorized: ${r.view}`);!function(e,t){null!=e&&e.embed&&null!=t&&t.embed&&[["color",df],["color_one",uf],["color_two",df],["color_three",_f],["color_four",hf]].forEach(([n,r])=>{t.embed[n]&&e.embed[n]!==t.embed[n]&&c.fire(p_,t.embed[n],r)})}(n,r),A&&A.reset();let o=!n||!n.video||n.video.id!==r.video.id||n.video.version.current!==r.video.version.current;return m=null,g=T,c.fire(u_),s.dispatch(Sy(r)),c.fire(ap,o,r),e}function Z(){var t;null==(t=S)||t.hide(),e.classList.remove("loading"),b()}function J(e){return n.then(()=>{if(te(e),c.fire(G_),"function"!=typeof G.authorizationHandler)throw new Error("Config was not authorized.");return G.authorizationHandler(Z)}).then(e=>(u.config=e,m=null,s.dispatch(Sy(u.config)),c.fire(u_),c.fire(ap,!0,u.config),e))}function ee(){a||(c.on(np,function(e){u.reload().then(t=>u.config.user.logged_in?(c.fire(rp),"private"===e&&c.fire(cp,t.loaded),t):(c.fire(op),t)).catch(e=>{Ab.captureException(e)})}),c.on(ip,()=>{u.reload().catch(e=>{Ab.captureException(e)})}),a=!0)}function te(e){C||(C=new hS(e),wT(K,C),WT(Ab))}function ne(t){const n=u.config.request.ads;n&&(n.adcode&&n.adunit||n.adurl)&&(I=new EC(t,e.querySelector(`.${bf.VP_VIDEO_WRAPPER}`)),c.on(K_,()=>{g=I,c.fire(kp)}),c.on(X_,()=>{g=T,c.fire(kp)}),vy&&(vy.on(hy.connected,()=>{I.toggleCastingState(!0)}),vy.on(hy.disconnected,()=>{I.toggleCastingState(!1)})))}function ie(e,t){let n=e;return isNaN(e)&&"string"!=typeof e||(n=Bm(Vm(e),e,t)),n}const oe={get store(){return s},get config(){return u.config},get element(){return e},get events(){return c},get uuid(){return d},get expose(){return K},get backbone(){return T},get adHandler(){return I},get displayContext(){return g},get doNotTrackEnabled(){var e;return u.config.embed.dnt||(null==(e=u.config.request.flags)?void 0:e.dnt)},get playLoggingEnabled(){var e;return u.config.embed.log_plays&&(null==(e=u.config.request.flags)?void 0:e.plays)},get canPlayPictureInPicture(){var e;const t=!1!==Q.pictureInPictureSupportType,n=Q.spatialPlayback&&(null==(e=u.config.video)?void 0:e.spatial),r=(Q.iOS>=17||Q.browser.safari)&&T.readyState<2;r&&T.once(Pi.LOADED_DATA,()=>c.fire(cu));const i=1===u.config.embed.settings.pip;return t&&!r&&!n&&i},get currentTime(){return vy.isCastConnected?vy.chromecastPlayer.currentTime:T.currentTime},get debugCollector(){return w},overrideFragmentsHandler(e,t){var n;null==(n=k)||n.hibernate(),h=u.config.embed.interactive,N=k,k=e,u.config.embed.interactive=u.config.embed.interactive||{markers:0},u.config.embed.interactive.fragments=t,c.fire(sh)},restoreLastFragmentsHandler(){var e;k=N,null==(e=k)||e.wake(),u.config.embed.interactive&&(u.config.embed.interactive=h),c.fire(sh)},get fragmentsHandler(){return k},get progressController(){return V},get ottVideoMetadata(){return P},set ottVideoMetadata(e){P=e},get startTime(){return H},set startTime(e){var t;null!==H&&null===e&&null===W&&(null==(t=x)||t.clearSegmentedPlayback()),H=e,c.fire(mm,H)},get endTime(){return W},set endTime(e){var t;null!==W&&null===e&&null===H&&(null==(t=x)||t.clearSegmentedPlayback()),W=e,c.fire(fm,W)},get segmentedPlaybackEnabled(){return null!==H&&null!==W},get bigPicture(){return B},get abTests(){return R},inView:()=>re(e),addABTest(e){O("A/B Test","color: white; background-color: blue")(`Test: ${e.test}, Group: ${e.group}`),R.push(e)},init:(t,i)=>v||(k=new BC(oe),new MT(oe,s,e),G=i,v=u.load(t).then(t=>(new jx(oe,e),t)).then(X).catch(e=>(ee(),J(oe))).then(()=>"function"==typeof G.initializationHandler?Promise.resolve(i.initializationHandler()):null).then(function(){return IV(o(oe),function(){return Y(),"function"==typeof G.postInitializationHandler?Promise.resolve(i.postInitializationHandler()):null})}).then(()=>Promise.all([z,n])).then(Z).then(()=>(Ab.setUp(oe.config,r||Lv.VimeoPlayer),null)).catch(e=>{Ab.captureException(e)}),v),loadVideoViaIframe(e,t={},n={}){let r=[],i=t;for(const e in n)!0===n[e]&&r.push(e);r.length&&(i.listeners=r.join(",")),i.fromLoadVideo=1,i.referrer=u.config.request.referrer;const o=he(window.location.search),a=he(`${e}`.split("?")[1]);i=Object.assign(o,a,i);const s=_e(i),l=Um(e);window.location.replace(`https://${u.config.player_url}/video/${l}?${s}`)},loadVideoViaConfig(t,n){if(E===t&&m)return m;if(c.fire(G_),null!=n&&n.video_version){let e=u.config.video.version.available;if(!e||!Array.isArray(e))return Promise.reject("No available video versions");if(e=e.map(e=>e.id),-1===e.indexOf(n.video_version))return Promise.reject("Invalid version id specified")}c.fire(Tp),E=t,e.classList.add("loading");const r=ie(t,n),i=l.get(r);return t=i?i._config.loaded:t,m=u.load(t,n).then(e=>{if(i){const e=T.element;T=i._backbone,T.element.style.visibility="visible",e.parentNode.replaceChild(T.element,e),c.fire(Sp)}return e=X(e),I||ne(oe),e}).catch(e=>J(oe)).then(()=>Promise.resolve(z)).then(Z),m},preloadVideo(e,t,n){const r=ie(t,n),i=l.get(r);return i?Promise.resolve(i):new Ib({events:c}).load(t,n).then(t=>{t.loaded.preload=!0;const n=T.element.cloneNode(!1);n.style.visibility="hidden",T.element.parentNode.insertBefore(n,T.element);const i=new Yd(n,t.loaded);i.loadVideo(t.loaded),i.preload=e;const o={_backbone:i,_config:t};return l.set(r,o),o})},performDelegateAction(e,n=()=>{},r=[]){var i,o;let a;var s;null!=(i=t)&&i[e.will]&&(a=(s=t)[e.will].apply(s,[u.config.video.id].concat(f(r))),!1===a)||(n.apply(void 0,[u.config.video.id].concat(f(r),[a])),null!=(o=t)&&o[e.did]&&t[e.did]())},ready:()=>j,playbackEngineReady:()=>q,verifyConfig:()=>u.verify(),refreshAssetUrls:()=>u.refreshAssetUrls().then(e=>{const t=p(p({},u.config),{},{request:e});return X({old:u.config,loaded:t})}).catch(e=>J(oe)),updatePhpTokens:()=>new Promise((e,t)=>{if(function(e){const{vimeo_api_client_token:t,vimeo_api_interaction_tokens:{likes:n,watch_later:r,following:i}={},vimeo_live_client_token:o,vimeo_bucketed_live_client_token:a}=e;return t&&IE(t)||n&&IE(n)||r&&IE(r)||i&&IE(i)||o&&IE(o)||a&&IE(a)}(u.config.user)){const{signature:n,session:r,timestamp:i,expires:o}=u.config.request;return void We(`https://${u.config.player_url}/video/${u.config.video.id}/token/refresh?signature=${n}&session=${r}&time=${i}&expires=${o}`,{withCredentials:!0}).json().then(t=>(u.config.user.vimeo_api_client_token=t?t.vimeo_api_client_token:null,u.config.user.vimeo_api_interaction_tokens=t?t.vimeo_api_interaction_tokens:null,u.config.user.vimeo_live_client_token=t?t.vimeo_live_client_token:null,u.config.user.vimeo_bucketed_live_client_token=t?t.vimeo_bucketed_live_client_token:null,e())).catch(e=>{Ab.captureBreadcrumb("Failed to refresh JWT token",{},"auth","error"),t(e)})}e()})};return oe}function OV(e,t,n){var r,i=2e3,o=4500,a=null,s=Q.touch?o:i,l=!0,c=!0,u=!1,d=null,_=!1,h=null,p=null,m=!0,f=!1,v=!1,g=!1,E=!1;let b=!1;var y=!1;let T,S;var C=n.querySelector(`.${bf.VP_TARGET}`),A=n.querySelector(`.${bf.VP_CONTROLS}`);let L=n.querySelector('button[class*="_playButton_"]');var I=n.querySelector(`.${bf.VP_TITLE}`),P=n.querySelector(`.${bf.VP_VIDEO}`);let R,w=n.querySelector(`.${bf.VP_SIDEDOCK}`),O=n.querySelectorAll(`.${bf.VP_MENU}`),k=n.querySelector(`.${bf.ADS_WRAPPER}`),D=n.querySelector(`.${bf.COMPASS_WRAPPER}`),N=Array.from(n.querySelectorAll("dialog[data-menu]"));const M=e.config.embed.autoplay&&(null==(r=e.config.request.flags)?void 0:r.autohide_controls),x=Q.touch?300:0;let V=null;const B=YR(e.config,"webvr").group||!1;function U(){clearTimeout(a),a=null}function F(){p!==cf&&(p&&p.isNewMenu&&p.isFullwidth()||y&&(clearTimeout(a),a=setTimeout(()=>W(!1,!0),s)))}function H(){sS.element&&sS.element.classList.contains("js-player-fullscreen")&&(u||(n.classList.add("player-cursor-hide"),c=!0,u=!0))}function W(t,r){var i,o,a;if(p===cf&&r)return;if(p&&p.isNewMenu&&p.isFullwidth())return;if(!f&&!m&&!n.classList.contains("player-ad"))return;if(g)return;U(),A=z(),L=K(),w=q(),O=n.querySelectorAll(`.${bf.VP_MENU}`);const s=document.activeElement&&document.body.classList.contains(bf.SHOWFOCUS)&&((null==(i=w)?void 0:i.contains(document.activeElement))||(null==(o=A)?void 0:o.contains(document.activeElement))||(null==(a=L)?void 0:a.contains(document.activeElement))),u=document.activeElement&&p===cf&&Array.from(O).find(e=>null==e?void 0:e.contains(document.activeElement));s||u||(e.events.fire(t?Kh:Zh),c=!0,Q.spatialPlayback&&e.config.video.spatial||(C.classList.add("hidden"),C.setAttribute("hidden","")),l=!0,H())}function G(){F(),E||(e.events.fire(Xh),C.classList.remove("hidden"),C.removeAttribute("hidden"))}function j(){f||m?n.removeAttribute("tabindex"):f||m||v||n.setAttribute("tabindex","0")}function Y(){e.events.on([Pi.TIME_UPDATE,Pi.SEEKED],function t({currentTime:n}){n>=1.75&&null===a&&(e.events.fire(th),e.events.off([Pi.TIME_UPDATE,Pi.SEEKED],t))})}function $(){e.element.classList.remove("grabbable"),e.element.classList.remove("grabbing")}function q(){return w||(w=n.querySelector(`.${bf.VP_SIDEDOCK}`),w)}function z(){return A||(A=n.querySelector(`.${bf.VP_CONTROLS}`))}function K(){return L||(L=n.querySelector('button[class*="_playButton_"]'),L)}return function(){var t=!0;function r(){G()}function a(r){var o;if(s=i,c)c=!1;else if(void 0===T||void 0===S||r.screenX!==T||r.screenY!==S)if(T=r.screenX,S=r.screenY,u&&(n.classList.remove("player-cursor-hide"),u=!1),0!==r.screenX&&r.screenX!==screen.width-1&&0!==r.screenY&&r.screenY!==screen.height-1){if(t=!0,Q.spatialPlayback&&null!=(o=e.config.video)&&o.spatial){const t=km(e.element),n=r.clientX-t.left,i=r.clientY-t.top,o=180,a=i>e.element.clientHeight-55,s=n>e.element.clientWidth-45&&i<o;if(_||!a&&!s)return}l&&G(),F()}else U(),H(),t&&(W(!0),t=!1)}function d(e){var t;k=k||(k=n.querySelector(`.${bf.ADS_WRAPPER}`),k),N.length||(N=Array.from(n.querySelectorAll("dialog[data-menu]"))),null!=(t=k)&&t.contains(e.target)||N.length&&N.some(t=>t.contains(e.target))||W(!0)}function h(e){var t,r,i,o;A=z(),w=q(),L=K(),D=D||(D=n.querySelector(`.${bf.COMPASS_WRAPPER}`),D);var a=(null==(t=A)?void 0:t.contains(e.target))||(null==(r=w)?void 0:r.contains(e.target))||(null==(i=L)?void 0:i.contains(e.target));let s=null==(o=D)?void 0:o.contains(e.target);f&&m||s?a||!f&&!m||W(!0):(clearTimeout(V),V=setTimeout(G,x))}function p(e){if("mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)return a(e)}Q.pointerEvents?Vb(n).on("pointerenter",function(e){if("mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)return s=i,r();s=o,h(e)}).on("pointermove",p).on("pointerleave",function(e){if("mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)return d(e)}):Vb(n).on("touchmove",function(){s=o,F()}).on("touchend",h).on("mouseenter",r).on("mousemove",a).on("mouseleave",d),e.events.on(Rh,function(e){var t;Q.pointerEvents?Vb(sS.element).on("pointermove",p):Vb(sS.element).on("mousemove",a),e||(null==(t=R)||t.focus(),b=!0)}),e.events.on(Oh,function(){Q.pointerEvents?Vb(sS.element).off("pointermove",p):Vb(sS.element).off("mousemove",a),R&&b&&R.focus(),b=!1})}(),e.events.on(Pi.PLAY,function(e){M||0===e||G()}).on(z_,G).on([ki.BUFFER_ENDED,Pi.SEEKED,vh,J_,Lh],F).on(iu,function(){y=!0}),e.events.on(yh,function(e){e&&F()}),e.events.on(Uh,j).on(gm,j).on(gh,function(e){m=e,j()}).on(bh,function(e){f=e,j()}),e.events.on(vp,function(){g=!0,G()}).on(gp,function(){g=!1}),function(){var r=!1,i=0;e.events.on(yh,function(e,t){p=e===cf?e:e?t:null}),Vb(n).on(Q.pointerEvents?"pointerup":"click",function(r){if(p)return;if(2===r.button)return;if(!r.target.classList)return;if(!function(e){var t,r;return w=q(),I=I||(I=n.querySelector(`.${bf.VP_TITLE}`)),(e.classList.contains(bf.VP_TITLE)||e.classList.contains(bf.VP_TARGET)||(null==(t=I)?void 0:t.contains(e.parentNode))&&"HEADER"===e.parentNode.tagName||P.contains(e))&&!(null!=(r=w)&&r.contains(e))}(r.target))return;var o=("pointerup"===r.type||"MSPointerUp"===r.type)&&"mouse"!==r.pointerType&&r.pointerType!==r.MSPOINTER_TYPE_MOUSE;const a=y&&Q.spatialPlayback&&e.config.video.spatial&&d;if(Q.touch||o){const t=!Q.mobileAndroid;if(!a){if(y&&t)return;return void e.events.fire(uh)}}1===++i&&setTimeout(function(){if(a){let t=h&&h.x===r.clientX&&h.y===r.clientY;return 1===i&&t&&!Q.mobileAndroid&&e.events.fire(e.backbone.paused?uh:ch),1!==i&&e.backbone.getEffectByName("ThreeSixtyEffect").snapToCenter(),void(i=0)}if(1===i){if(t.get(Ay)&&!t.get(Iy)&&!t.get(Ry))return;e.events.fire(e.backbone.paused?uh:ch)}else e.events.fire(lh);i=0},200)}),Vb(n).on("mousedown",`.${bf.VP_VIDEO_WRAPPER}`,function(e){var t;if(!r)return C.classList.remove("hidden"),C.removeAttribute("hidden"),2!==e.button&&document.createEvent&&((t=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),C.dispatchEvent(t)),!1}).on("contextmenu",`.${bf.VP_VIDEO}`,function(e){return C.classList.remove("hidden"),C.removeAttribute("hidden"),!1}),e.events.on(C_,function(e){if(e)return r=!0,void C.classList.add("hidden");r=!1,C.classList.remove("hidden")})}(),function(){function t(){v=!0,n.removeAttribute("tabindex")}function r(){v=!1,j()}let i;Vb(n).on("focus","a, button, input, [tabindex]",function(e){b||(R=this),clearTimeout(i),i=null,document.activeElement===this&&G()}),Vb(n).on("blur","a, button, input, [tabindex]",function(){document.activeElement===this&&(i=setTimeout(W,50))}),n.addEventListener("focus",function(){G(),R&&R.focus()},!1),e.events.on(Uh,t),e.events.on(Fh,r),e.events.on(gm,t),e.events.on(Em,r)}(),e.events.on(Rh,function(e){H(),d&&d.adjustRenderSize(),g&&G()}).on(Oh,function(e){l=!0,d&&d.adjustRenderSize(),e?W():(G(),U())}),Y(),e.events.on(u_,function(){l=!0,c=!0,m=!0,f=!1,E=!1,y=!1,Y(),U()}),e.events.on(O_,function(){const t=e=>(...t)=>{d&&e.apply(void 0,t)},r=t(t=>{const n=e.element.classList.contains("webvr");d&&n&&d.toggleVR()}),i=t(t=>{d.isVRPresenting?setTimeout(()=>{e.events.fire(Ni.WEBVR_ENTER)},100):setTimeout(()=>{e.events.fire(Ni.WEBVR_EXIT)},100)});e.events.on(k_,t(()=>{e.element.classList.contains("webvr")||e.element.classList.add("grabbable")})),e.events.on(Z_,t(()=>{$(),Q.webvr&&d.isVRPresenting&&B&&d.toggleVR()})),e.events.on(iu,t(()=>{e.config.video.spatial||$()})),(Q.webvr||Q.stereoscopic||Q.webxr)&&(Q.webvr&&window.addEventListener("vrdisplaypresentchange",i,!1),e.events.on(Ah,t(()=>{Q.webvr&&d.hasVRHeadset&&B?d.toggleVR():e.events.fire(qh)})),e.events.on(Ni.WEBVR_HARDWARE_AVAILABLE,t(e=>{const t=n.querySelector(`.${bf.STEREOSCOPIC}`);t&&t.classList.contains("off")&&B&&t.classList.remove("off")})),e.events.on(Ni.WEBVR_ENTER,t(t=>{window.addEventListener("vrdisplaydisconnect",r,!1),window.addEventListener("vrdisplaydeactivate",r,!1),e.element.classList.remove("grabbable"),e.element.classList.add("webvr"),d.isUserInteracting=!1})),e.events.on(Ni.WEBVR_EXIT,t(t=>{window.removeEventListener("vrdisplaydisconnect",r),window.removeEventListener("vrdisplaydeactivate",r),e.element.classList.add("grabbable"),e.element.classList.remove("webvr"),d.isUserInteracting=!0})));let o=null;const a=t(t=>{const n=e.element.classList.contains("webvr");_||n||(_=!0,t.preventDefault(),e.element.classList.add("grabbing"),h={x:t.clientX,y:t.clientY},d.makeContact(h))}),s=t(t=>{const n=e.element.classList.contains("webvr");_&&!n&&d.move({x:t.clientX,y:t.clientY})}),l=t(t=>{const n=e.element.classList.contains("webvr");_&&!n&&(e.element.classList.remove("grabbing"),d.releaseContact(!1),_=!1)}),c=t(t=>{t.preventDefault(),e.element.classList.contains("webvr")||(d.isUserInteracting||(d.isUserInteracting=!0),null!==o&&clearTimeout(o),o=setTimeout(()=>{e.element.classList.remove("player-cursor-hide"),e.element.classList.add("grabbable"),d.isUserInteracting=!1},500),e.element.classList.add("player-cursor-hide"),e.element.classList.remove("grabbable"),d.moveWheel({x:t.deltaX,y:t.deltaY}))}),u=t(e=>{_||(_=!0,d.makeContact({x:e.touches[0].clientX,y:e.touches[0].clientY}))}),p=t(e=>{_&&(e.preventDefault(),d.move({x:e.touches[0].clientX,y:e.touches[0].clientY}))}),m=t(e=>{d.releaseContact(!0),_=!1}),f=t(e=>{d.moveDevice(e.alpha,e.beta,e.gamma,e.orientation)}),v=t(t=>{_=!1,e.element.classList.remove("grabbing"),d.abandonMotion()});e.events.on(iu,()=>{Q.android&&d&&window.addEventListener("deviceorientation",f,!1)}),e.events.once(iu,()=>{e.store.watch("ui.player.boundingRect",()=>{d&&d.adjustRenderSize(),_=!1}),Q.pointerEvents?(Vb(C).on("pointerdown",a),window.addEventListener("pointermove",s),window.addEventListener("pointerup",l),window.addEventListener("pointerleave",v)):(Vb(C).on("mousedown",a).on("wheel",c),C.addEventListener("touchstart",u,!!Q.passiveEvents&&{passive:!1}),window.addEventListener("touchmove",p,!!Q.passiveEvents&&{passive:!1}),window.addEventListener("touchend",m,!!Q.passiveEvents&&{passive:!1}),window.addEventListener("mousemove",s),window.addEventListener("mouseup",l),window.addEventListener("mouseleave",v))})}),e.events.on(lu,e=>{$(),d=e}),e.events.on(ih,()=>{E=!0,clearTimeout(V),V=null}),e.events.on(ah,()=>{E=!1}),{}}const kV={16:"shift",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down",74:"j",75:"k",76:"l",80:"p"},DV={106:"j",107:"k",108:"l",112:"p"},NV=["up","down","left","right"],MV=["right","l"],xV=["left","j"],VV="scrub",BV=[VV],UV=[Cf.TRANSCRIPT_LIST];function FV(e,t,n){var r=!!e.config.embed.on_site,i=n.querySelector(".volume"),o=!1;let a;var s=null;let l=!1;var c=!1,u=e.config.video.fps/5,d=u,_=0,h=!1,p=gb(T,80),m=5;const f=Q.spatialPlayback&&e.config.video.spatial;function v(n){var r;return!t.get(Ay)||!(BV.includes(n)&&(null==(r=e.config.video.live_event)||!r.dvr))&&(t.get(Iy)||t.get(Ry))}function g(t){return"d"===t||!r&&(e.config.view===Jm.main||e.config.view===Jm.privateUnlocked)}function E(e){return"number"!=typeof e.which&&(e.which=e.keyCode),e}function b(e){if(!e)return"";if("keypress"===e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return e.which in kV?kV[e.which]:String.fromCharCode(e.which).toLowerCase()}function y(t){if(e.config.embed.settings.background)return!0;var n=t.target||t.srcElement;return"INPUT"===n.tagName||"SELECT"===n.tagName||"TEXTAREA"===n.tagName||n.isContentEditable}function T(n,r){var i,o;const a=MV.includes(n);if(!v(VV))return;if(null!=(i=e.backbone)&&null!=(i=i.telecine)&&i.ended&&a)return;if(null!=(o=e.config.video.live_event)&&o.dvr&&a&&e.backbone.atLiveEdge)return;if(a&&!e.progressController.canSeekNow)return;h||(r&&!e.backbone.paused&&e.events.fire(ch),e.events.fire(fh,{seekType:"keyboard",isFrameByFrame:r}),h=!0),function(n){var r=n,i=Math.ceil(u),o=Math.ceil(function(){const n=t.get(Ay)?e.backbone.liveEdgeTime-e.backbone.liveTailTime:e.config.video.duration;return Math.max(u,.618*n)}()-u);d=function(e,t,n){return e/=100,n*(--e*e*e+1)+t}(r,i,o)}(_),1===++_&&(d=e.config.video.fps*m);const s=r?1:d,l=a?s:-s,c=e.currentTime*e.config.video.fps;!function(n,r){let i,o;t.get(Ay)?(i=e.backbone.liveTailTime,o=e.backbone.liveEdgeTime):(i=e.fragmentsHandler.currentFragment.startTime,o=e.fragmentsHandler.currentFragment.endTime);let a=n/e.config.video.fps;a<i?a=i:a>=o?a=o-.001:e.events.fire(oh,{direction:a-e.currentTime>0?"forward":"backward",time:1!==_||r?null:m}),e.events.fire(a_,a)}((a?Math.ceil(c):Math.floor(c))+l,r)}function S(e){if(s===cf)return!1;var t=s.getTabIndexItems(),n=t.indexOf(document.activeElement),r="up"===e?n-1:n+1,i=null;return!(i=r>=t.length?t[0]:r<0?t[t.length-1]:t[r])||(i.focus(),!1)}function C(t,n){if(s&&document.body.classList.contains(bf.SHOWFOCUS)&&"k"!==n)return!0;if(!v("play/pause"))return!0;if(!document.activeElement||document.activeElement===document.body||!document.body.classList.contains(bf.SHOWFOCUS)||"k"===n){const t=e.backbone.paused?uh:ch;return e.events.fire(t),!1}}function A(){const t=e.backbone.muted,n=e.backbone.volume;return t?(e.events.fire(l_,!1),0===n&&e.events.fire(s_,1)):t||0!==n?!t&&n>0&&e.events.fire(l_,!0):e.events.fire(s_,1),!1}function L(){const t="ClipboardItem"in window&&"clipboard"in navigator,n=e.element.querySelector("video");if(!t||!n||e.config.request.drm||!l)return!1;let r=document.createElement("canvas");r.width=n.videoWidth,r.height=n.videoHeight,r.getContext("2d").drawImage(n,0,0);const i=new ClipboardItem({"image/png":new Promise(e=>{r.toBlob(t=>{e(t)},"image/png")})});return navigator.clipboard.write([i]).then(()=>{e.events.fire(Cm)}),!0}function I(){return s!==cf&&(s?(s.element.contains(document.activeElement)&&s.button.focus(),s.hide(),!1):!o&&void 0)}function P(){return!c&&(s===cf||(s?!s.element.contains(document.activeElement)||S("up"):f?(e.backbone.getEffectByName("ThreeSixtyEffect").keyPress("up"),!1):!(!e.config.embed.on_site||!document.activeElement||n.contains(document.activeElement))||(e.events.fire(s_,.05,!1,!0),!1)))}function R(){return!c&&(s===cf||(s?!s.element.contains(document.activeElement)||S("down"):f?(e.backbone.getEffectByName("ThreeSixtyEffect").keyPress("down"),!1):!(!e.config.embed.on_site||!document.activeElement||n.contains(document.activeElement))||(e.events.fire(s_,-.05,!1,!0),!1)))}function w(t,n){const r=NV.includes(n);if(s===cf)return!0;if(e.displayContext===e.adHandler)return!0;if(s)return!s.element.contains(document.activeElement)||!r||S("left"===n?"up":"down");if(o&&a!==rv.HELP)return!0;if(f&&r)return e.backbone.getEffectByName("ThreeSixtyEffect").keyPress(n),!1;if(document.activeElement&&document.activeElement===i&&r){var l="left"===n?-.05:.05;return e.events.fire(s_,l,!1,!0),!1}t.shiftKey||0===_?T(n,t.shiftKey):p(n,t.shiftKey)}return function(){function t(e){o=!0,a=e,e!==rv.NOT_SUPPORTED&&e!==rE.LEAD_CAPTURE_FORM||(r=!0)}function n(){o=!1,a=null}e.events.on(Uh,t),e.events.on(gm,t),e.events.on(Fh,n),e.events.on(Em,n)}(),e.events.on(yh,function(e,t){s=e?t||e:null}),e.events.on(sm,function(e){c=e}),e.events.on(ap,function(e){e&&(r=!1)}),function(){const{like:t,watch_later:n,share:r}=e.config.embed.settings,i={c:[_h,!0],h:[dh,!0],T:cm,f:lh,d:Yh,A:um,k:C,j:w,l:w,m:A,p:L,space:C,up:P,down:R,left:w,right:w,esc:I,"?":[c_,rv.HELP]};function o(t){E(t);const n=b(t);if(function(e){return!(e.ctrlKey||e.metaKey||e.altKey||"keypress"===e.type&&e.charCode in DV||(e.which in kV?"keydown"!==e.type:"keypress"!==e.type))}(t)&&!y(t)&&g(n)&&n in i){if("function"==typeof i[n]){if(!1===i[n](t,n)){var r;if(t.preventDefault(),UV.includes(null==(r=t.target)?void 0:r.id))return;t.stopPropagation()}return}if(!1===function(t){return t=Array.isArray(t)?t:[t],e.events.fire.apply(null,t),!1}(i[n])){var o;if(t.preventDefault(),UV.includes(null==(o=t.target)?void 0:o.id))return;t.stopPropagation()}}}e.config.embed.on_site||(i.v=h_),t&&(i.x=kh),n&&(i.w=Dh),r&&(i.s=Nh),e.config.embed.keyboard&&(document.addEventListener("keydown",o,!1),document.addEventListener("keypress",o,!1),document.addEventListener("keyup",function(t){if(s!==cf&&(E(t),!y(t)&&g())){var n=b(t);f&&NV.includes(n)?e.backbone.getEffectByName("ThreeSixtyEffect").keyUp(n):v(VV)&&(xV.includes(n)||MV.includes(n))&&function(t){p.cancel(),d=u,_=0;var n=t.shiftKey;e.events.fire(vh,n),h=!1}(t)}},!1))}(),e.events.on(bp,function(){r=!1}).on(yp,function(){r=!0}),e.config.embed.on_site&&document.querySelector(".player")===n&&(r=!1),function(){let e,t=!1;document.body.addEventListener("keyup",e=>{E(e),9!==e.which||document.body.classList.contains(bf.SHOWFOCUS)||document.body.classList.add(bf.SHOWFOCUS)}),document.body.addEventListener("keydown",n=>{E(n),32!==n.which&&13!==n.which||(t=!0,clearTimeout(e),e=setTimeout(()=>{t=!1},200))}),document.body.addEventListener("click",e=>{t||document.body.classList.remove(bf.SHOWFOCUS)})}(),e.events.on(V_,()=>{r=!0}),e.events.on(Pi.PLAY,()=>{l=!0}),e.events.on(Pi.ENDED,()=>{l=!1}),{pause:function(){r=!0},unpause:function(){r=!1}}}function HV(){return HV=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HV.apply(this,arguments)}var WV,GV=["bottom","height","left","right","top","width"],jV=new Map,YV=function e(){var t=[];jV.forEach(function(e,n){var r=n.getBoundingClientRect();(function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),GV.some(function(n){return e[n]!==t[n]})})(r,e.rect)&&(e.rect=r,t.push(e))}),t.forEach(function(e){e.callbacks.forEach(function(t){return t(e.rect)})}),WV=window.requestAnimationFrame(e)},$V="undefined"!=typeof window?cI.useLayoutEffect:cI.useEffect;function qV(e,t){void 0===t&&(t={width:0,height:0});var n=cI.useState(e.current),r=n[0],i=n[1],o=cI.useReducer(zV,t),a=o[0],s=o[1],l=cI.useRef(!1);return $V(function(){e.current!==r&&i(e.current)}),$V(function(){if(r&&!l.current){l.current=!0;var e=r.getBoundingClientRect();s({rect:e})}},[r]),cI.useEffect(function(){if(r){var e=function(e,t){return{observe:function(){var n=0===jV.size;jV.has(e)?jV.get(e).callbacks.push(t):jV.set(e,{rect:void 0,hasRectChanged:!1,callbacks:[t]}),n&&YV()},unobserve:function(){var n=jV.get(e);if(n){var r=n.callbacks.indexOf(t);r>=0&&n.callbacks.splice(r,1),n.callbacks.length||jV.delete(e),jV.size||cancelAnimationFrame(WV)}}}}(r,function(e){s({rect:e})});return e.observe(),function(){e.unobserve()}}},[r]),a}function zV(e,t){var n=t.rect;return e.height!==n.height||e.width!==n.width?n:e}var KV=function(){return 50},XV=function(e){return e},ZV=function(e,t){return e[t?"offsetWidth":"offsetHeight"]},JV=function(e){for(var t=Math.max(e.start-e.overscan,0),n=Math.min(e.end+e.overscan,e.size-1),r=[],i=t;i<=n;i++)r.push(i);return r};var QV=function(e,t,n,r){for(;e<=t;){var i=(e+t)/2|0,o=n(i);if(o<r)e=i+1;else{if(!(o>r))return i;t=i-1}}return e>0?e-1:0};vM(".TranscriptCue_lazy_module_cueListItem__d61e74ab{border:1px solid #0000;cursor:pointer;display:flex;gap:8px;justify-content:space-between;left:0;list-style:none;opacity:.6;padding:1.2em;padding-left:var(--transcript-horizontal-padding);padding-right:var(--transcript-horizontal-padding);position:absolute;width:100%}.right-content-area-supported.app-mini .TranscriptCue_lazy_module_cueListItem__d61e74ab,.right-content-area-supported.app-tiny .TranscriptCue_lazy_module_cueListItem__d61e74ab,.right-content-area-supported.app-xs .TranscriptCue_lazy_module_cueListItem__d61e74ab,.right-content-area-supported.app-xxs .TranscriptCue_lazy_module_cueListItem__d61e74ab{padding:.8em}.TranscriptCue_lazy_module_cueListItem__d61e74ab.TranscriptCue_lazy_module_inactive__d61e74ab{opacity:.6}.TranscriptCue_lazy_module_cueListItem__d61e74ab.TranscriptCue_lazy_module_inactive__d61e74ab:hover{opacity:1}.TranscriptCue_lazy_module_cueListItem__d61e74ab.TranscriptCue_lazy_module_focused__d61e74ab,.TranscriptCue_lazy_module_cueListItem__d61e74ab.TranscriptCue_lazy_module_hasSearchMatch__d61e74ab,.TranscriptCue_lazy_module_cueListItem__d61e74ab.TranscriptCue_lazy_module_isCurrentTime__d61e74ab{color:#fff;opacity:1}.TranscriptCue_lazy_module_cueListItem__d61e74ab.TranscriptCue_lazy_module_isCurrentTime__d61e74ab.TranscriptCue_lazy_module_playing__d61e74ab{background-color:#ffffff1a}.TranscriptCue_lazy_module_cueListItem__d61e74ab.TranscriptCue_lazy_module_isCurrentTime__d61e74ab.TranscriptCue_lazy_module_playing__d61e74ab:hover,.TranscriptCue_lazy_module_cueListItem__d61e74ab:hover{background:#fff3;color:#fff;opacity:1}.TranscriptCue_lazy_module_cueListItem__d61e74ab.TranscriptCue_lazy_module_focused__d61e74ab{outline:2px solid #00adef;outline-offset:-2px}.TranscriptCue_lazy_module_cueText__d61e74ab{font-size:1.4em;line-height:20px}.TranscriptCue_lazy_module_cueText__d61e74ab[dir=rtl]{text-align:right}.right-content-area-supported.app-mini .TranscriptCue_lazy_module_cueText__d61e74ab,.right-content-area-supported.app-tiny .TranscriptCue_lazy_module_cueText__d61e74ab,.right-content-area-supported.app-xs .TranscriptCue_lazy_module_cueText__d61e74ab,.right-content-area-supported.app-xxs .TranscriptCue_lazy_module_cueText__d61e74ab{font-size:1.2em}.right-content-area-supported.app-xl .TranscriptCue_lazy_module_cueText__d61e74ab,.right-content-area-supported.app-xxl .TranscriptCue_lazy_module_cueText__d61e74ab{font-size:1.6em;line-height:24px}.TranscriptCue_lazy_module_timestamp__d61e74ab{align-items:center;background:#fff3;border-radius:.4em;display:flex;font-size:1.2em;gap:1em;height:2.4em;justify-content:center;letter-spacing:.4px;padding:.4em .8em}.right-content-area-supported.app-mini .TranscriptCue_lazy_module_timestamp__d61e74ab,.right-content-area-supported.app-tiny .TranscriptCue_lazy_module_timestamp__d61e74ab,.right-content-area-supported.app-xs .TranscriptCue_lazy_module_timestamp__d61e74ab,.right-content-area-supported.app-xxs .TranscriptCue_lazy_module_timestamp__d61e74ab{border-radius:.2em;font-size:1em;height:2em;padding:.4em}",{});vM(".CueSearchHighlight_lazy_module_highlightMatch__c8b6bd0b{background-color:#ffffff4d;border-radius:2px;color:#fff;line-height:normal;padding:2px;position:relative}.CueSearchHighlight_lazy_module_highlightMatch__c8b6bd0b.CueSearchHighlight_lazy_module_current__c8b6bd0b{background-color:#fff;color:#000;font-weight:bolder;padding:2px 4px}.right-content-area-supported.app-mini .CueSearchHighlight_lazy_module_highlightMatch__c8b6bd0b.CueSearchHighlight_lazy_module_current__c8b6bd0b,.right-content-area-supported.app-tiny .CueSearchHighlight_lazy_module_highlightMatch__c8b6bd0b.CueSearchHighlight_lazy_module_current__c8b6bd0b,.right-content-area-supported.app-xs .CueSearchHighlight_lazy_module_highlightMatch__c8b6bd0b.CueSearchHighlight_lazy_module_current__c8b6bd0b,.right-content-area-supported.app-xxs .CueSearchHighlight_lazy_module_highlightMatch__c8b6bd0b.CueSearchHighlight_lazy_module_current__c8b6bd0b{line-height:16px}",{});const eB=({cue:e})=>{const t=EM(e=>e.searchTerms),n=EM(e=>e.searchResults),r=EM(e=>e.currentSearchResultIndex),i=n.filter(t=>t.originalIndex===e.originalIndex);if(i.length){const n=t.terms.length;let o=[];if(0!==i[0].matchStart){const t=e.text.slice(0,i[0].matchStart);o.push(t)}return o=i.reduce(function(t,o,a){const{matchStart:s,searchIndex:l}=o,c=Yf("CueSearchHighlight_lazy_module_highlightMatch__c8b6bd0b",l===r&&"CueSearchHighlight_lazy_module_current__c8b6bd0b"),u=i[a+1],d=e.text.slice(s,s+n);if(t.push(MP("mark",{className:c,children:d})),u){const r=e.text.slice(s+n,u.matchStart);t.push(r)}else{const r=e.text.slice(s+n);t.push(r)}return t},o),MP(AA,{children:o.map((e,t)=>MP(AA,{children:e},t))})}return MP(AA,{children:e.text})},tB=({index:e,cue:t,isCurrentTime:n,hasSearchMatch:r,measureRef:i,style:o,onClick:a,isFocused:s=!1})=>{const l=EM(e=>e.timecodeDisplayed),c=EM(e=>e.searchResults),u=EM(e=>{var t;return null==(t=e.selectedTrack)?void 0:t.rtl}),d=jw(e=>e.playback.paused),_=c.some(e=>e.originalIndex===t.originalIndex),h=Yf("TranscriptCue_lazy_module_cueListItem__d61e74ab",!r&&!s&&!n&&"TranscriptCue_lazy_module_inactive__d61e74ab",r&&"TranscriptCue_lazy_module_hasSearchMatch__d61e74ab",n&&"TranscriptCue_lazy_module_isCurrentTime__d61e74ab",s&&"TranscriptCue_lazy_module_focused__d61e74ab",!d&&"TranscriptCue_lazy_module_playing__d61e74ab");return MP("li",p(p({role:"option",id:`${Cf.TRANSCRIPT_CUE_PREFIX}-${e}`,className:h,"aria-selected":!!s||null,ref:i,style:o},Bf(a)),{},{onMouseDown:e=>e.preventDefault(),children:[MP("span",{className:"TranscriptCue_lazy_module_cueText__d61e74ab",dir:u?"rtl":"ltr",children:_?MP(eB,{cue:t}):t.text}),l&&MP("span",{className:"TranscriptCue_lazy_module_timestamp__d61e74ab",children:t.startTimeDisplay})]}))};vM(".TranscriptList_lazy_module_container__f67b6693{background-color:initial;display:flex;flex-direction:column;overflow:hidden;position:relative}.TranscriptList_lazy_module_listContainer__f67b6693{-ms-overflow-style:none;display:flex;overflow-y:scroll;padding-top:0;scrollbar-width:none}.TranscriptList_lazy_module_listContainer__f67b6693::-webkit-scrollbar{display:none}.TranscriptList_lazy_module_list__f67b6693{list-style:none;margin:0;position:relative;width:100%}.TranscriptList_lazy_module_list__f67b6693:focus{outline:none}.TranscriptList_lazy_module_transcriptDisabled__f67b6693{cursor:not-allowed;height:100%;left:0;position:absolute;top:0;width:100%}",{});vM(".AutoFollowButton_lazy_module_autoFollowContainer__6be9fe82{align-items:center;display:flex;justify-content:center;pointer-events:none;position:absolute;top:0;width:100%;z-index:39}.AutoFollowButton_lazy_module_autoFollowButton__6be9fe82{align-items:center;background-color:#000000e6;border:1px solid #fff6;border-radius:.4em;color:#fff;cursor:pointer;display:flex;font-size:1.4em;font-weight:700;height:32px;justify-content:center;padding:4px 12px}.AutoFollowButton_lazy_module_autoFollowButton__6be9fe82 span{font-size:1.4em}.AutoFollowButton_lazy_module_autoFollowButton__6be9fe82.AutoFollowButton_lazy_module_visible__6be9fe82{pointer-events:auto}.AutoFollowButton_lazy_module_autoFollowButton__6be9fe82:hover:not(:disabled){background-color:#000;border:1px solid #fff}.AutoFollowButton_lazy_module_autoFollowButton__6be9fe82:hover:not(:disabled):active{background-color:#000000e6;outline:none}",{});const nB=({visible:e,onClick:t,tabIndex:n})=>{const r=Yf("AutoFollowButton_lazy_module_autoFollowContainer__6be9fe82"),i=Yf("AutoFollowButton_lazy_module_autoFollowButton__6be9fe82",e&&"AutoFollowButton_lazy_module_visible__6be9fe82",NO);return MP("div",{className:r,children:MP(zw,{visible:e,styleOverrides:{exitDone:{display:"none"}},children:MP(WO,p(p({className:i,tabIndex:n},Bf(t)),{},{children:"Return to current time"}))})})},rB=({cues:e})=>{const t=uL(null),n=uL(-1),r=uL(-1),i=uL(0),o=uL(0),a=uL(null),s=jw(e=>e.playback.currentTime),l=jw(e=>e.appearance.appBreakpoint),c=uL(l),u=jw(e=>e.appearance.rightContentAreaAnimating),d=jw(e=>e.setPlayback),_=jw(e=>e.playback.canSeekForward),h=jw(e=>e.playback.paused),p=EM(e=>e.transcriptDisabled),m=EM(e=>e.timecodeDisplayed),f=jw(e=>e.displayList.outro),v=jw(e=>e.setDisplayList),g=jw(e=>e.liveEvent.isLiveEvent),E=EM(e=>e.settingsDisplayed),b=EM(e=>e.setSettingsDisplayed),y=EM(e=>e.currentSearchResultIndex),T=EM(e=>e.autoFollowEnabled),S=EM(e=>e.setAutoFollowEnabled),C=EM(e=>e.searchResults),A=EM(e=>e.transcriptSizeMode),L=EM(e=>e.selectedTrack),I=VP(e=>e.bigPicture),P=f&&!u,R=function(e){var t,n=e.size,r=void 0===n?0:n,i=e.estimateSize,o=void 0===i?KV:i,a=e.overscan,s=void 0===a?1:a,l=e.paddingStart,c=void 0===l?0:l,u=e.paddingEnd,d=void 0===u?0:u,_=e.parentRef,h=e.horizontal,p=e.scrollToFn,m=e.useObserver,f=e.initialRect,v=e.onScrollElement,g=e.scrollOffsetFn,E=e.keyExtractor,b=void 0===E?XV:E,y=e.measureSize,T=void 0===y?ZV:y,S=e.rangeExtractor,C=void 0===S?JV:S,A=h?"width":"height",L=h?"scrollLeft":"scrollTop",I=cI.useRef({scrollOffset:0,measurements:[]}),P=cI.useState(0),R=P[0],w=P[1];I.current.scrollOffset=R;var O=(m||qV)(_,f)[A];I.current.outerSize=O;var k=cI.useCallback(function(e){_.current&&(_.current[L]=e)},[_,L]),D=p||k;p=cI.useCallback(function(e){D(e,k)},[k,D]);var N=cI.useState({}),M=N[0],x=N[1],V=cI.useCallback(function(){return x({})},[]),B=cI.useRef([]),U=cI.useMemo(function(){var e=B.current.length>0?Math.min.apply(Math,B.current):0;B.current=[];for(var t=I.current.measurements.slice(0,e),n=e;n<r;n++){var i=b(n),a=M[i],s=t[n-1]?t[n-1].end:c,l="number"==typeof a?a:o(n),u=s+l;t[n]={index:n,start:s,size:l,end:u,key:i}}return t},[o,M,c,r,b]),F=((null==(t=U[r-1])?void 0:t.end)||c)+d;I.current.measurements=U,I.current.totalSize=F;var H=v?v.current:_.current,W=cI.useRef(g);W.current=g,$V(function(){if(H){var e=function(e){var t=W.current?W.current(e):H[L];w(t)};return e(),H.addEventListener("scroll",e,{capture:!1,passive:!0}),function(){H.removeEventListener("scroll",e)}}w(0)},[H,L]);var G=function(e){for(var t=e.measurements,n=e.outerSize,r=e.scrollOffset,i=t.length-1,o=QV(0,i,function(e){return t[e].start},r),a=o;a<i&&t[a].end<r+n;)a++;return{start:o,end:a}}(I.current),j=G.start,Y=G.end,$=cI.useMemo(function(){return C({start:j,end:Y,overscan:s,size:U.length})},[j,Y,s,U.length,C]),q=cI.useRef(T);q.current=T;var z=cI.useMemo(function(){for(var e=[],t=function(t,n){var r=$[t],i=HV(HV({},U[r]),{},{measureRef:function(e){if(e){var t=q.current(e,h);if(t!==i.size){var n=I.current.scrollOffset;i.start<n&&k(n+(t-i.size)),B.current.push(r),x(function(e){var n;return HV(HV({},e),{},((n={})[i.key]=t,n))})}}}});e.push(i)},n=0,r=$.length;n<r;n++)t(n);return e},[$,k,h,U]),K=cI.useRef(!1);$V(function(){K.current&&x({}),K.current=!0},[o]);var X=cI.useCallback(function(e,t){var n=(void 0===t?{}:t).align,r=void 0===n?"start":n,i=I.current,o=i.scrollOffset,a=i.outerSize;"auto"===r&&(r=e<=o?"start":e>=o+a?"end":"start"),"start"===r?p(e):"end"===r?p(e-a):"center"===r&&p(e-a/2)},[p]),Z=cI.useCallback(function(e,t){var n=void 0===t?{}:t,i=n.align,o=void 0===i?"auto":i,a=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,["align"]),s=I.current,l=s.measurements,c=s.scrollOffset,u=s.outerSize,d=l[Math.max(0,Math.min(e,r-1))];if(d){if("auto"===o)if(d.end>=c+u)o="end";else{if(!(d.start<=c))return;o="start"}var _="center"===o?d.start+d.size/2:"end"===o?d.end:d.start;X(_,HV({align:o},a))}},[X,r]),J=cI.useCallback(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Z.apply(void 0,t),requestAnimationFrame(function(){Z.apply(void 0,t)})},[Z]);return{virtualItems:z,totalSize:F,scrollToOffset:X,scrollToIndex:J,measure:V}}({size:e.length,parentRef:t,keyExtractor:e=>e}),w=R.virtualItems,O=function(e,t){const n=uL(null),r=_L(r=>{const i=Date.now(),o=e.current.scrollTop;cancelAnimationFrame(n.current);const a=()=>{const e=Date.now()-i,s=e/1e3,l=function(e){return e<.5?16*Math.pow(e,5):1+16*--e*Math.pow(e,4)}(Math.min(s,1)),c=t.virtualItems.find(e=>e.key===r);if(!c)return void cancelAnimationFrame(n.current);const u=o+(c.start-o)*l;t.scrollToOffset(u),e<1e3&&(n.current=requestAnimationFrame(a))};n.current=requestAnimationFrame(a)},[e,t]);return r}(t,R),k=_L((e,t={align:"start"})=>{R.scrollToIndex(e>-1?e:0,t)},[e,P]),{currentFocusedCue:D,queueListFocus:N,setListBlurred:M,setListFocused:x}=((e,t,n)=>{const[r,i]=aL(null),o=null!==r,a=uL(null),s=e.length-1,l=jw(e=>e.setAppearance),c=EM(e=>e.transcriptDisabled),u=_L(e=>i(e),[]),d=_L(()=>i(null),[]),_=_L(e=>{a.current=e},[]),h=_L((e,n)=>{if(!o)return;let a=r;const l=0===r,c=r===s;e!==UI.NEXT||c||a++,e!==UI.PREV||l||a--,e!==UI.FIRST||l||(a=0,null==n||n.preventDefault()),e!==UI.LAST||c||(a=s,null==n||n.preventDefault()),i(a),t(a,{align:"auto"})},[o,r,s,t]),p=_L(()=>h(UI.NEXT),[h]),m=_L(()=>h(UI.PREV),[h]),f=_L(e=>h(UI.FIRST,e),[h]),v=_L(e=>h(UI.LAST,e),[h]),g=_L(e=>{var t;null!==a.current&&(e.preventDefault(),null==(t=n.current)||t.focus(),i(a.current),a.current=null)},[n]);return dP("ArrowDown",p),dP("ArrowUp",m),dP("Home",f),dP("End",v),dP("Escape",d),dP("Tab",g),lL(()=>{l("transcriptNavActive",o)},[o,l]),lL(()=>{c&&i(null)},[c]),{currentFocusedCue:r,queueListFocus:_,setListBlurred:d,setListFocused:u}})(e,k,a),V=!T&&!E&&!C.length&&null===D;lL(function(){null!=C&&C.length&&y!==n.current&&(k(C[y].originalIndex,{align:"start"}),n.current=y)},[C,y,k]),lL(function(){R.measure()},[m]),lL(function(){!function(){if(!T)return;const t=((e,t)=>e.findIndex(e=>e.startTime<=t&&e.endTime>t))(e,s),n=(e=>e?e.endTime-e.startTime:0)(e[t]),a=t>-1,l=t!==i.current,c=n!==o.current;a&&(l||c)&&(r.current=i.current,i.current=t,o.current=n,jI(w,t)?O(t):k(t))}(),function(){const e=jI(w,i.current);S(e)}()},[e,s,T,w,k,O,S]),lL(function(){T&&l!==c.current&&(k(i.current),c.current=l)},[l,T,k]),lL(function(){!g&&_&&(i.current=0,k(0),S(!0))},[k,S,g,_]);const B=_L(t=>{d("currentTime",e[t].startTime),i.current=t,I.sendEvent(yg.EMBEDDED_TRANSCRIPT_CLICK,{name:"click_transcript_cue",copy:e[t].startTimeDisplay,location:"player_embedded_transcript",element:"transcript_cue",current_transcript_language:null==L?void 0:L.language})},[e,d,I,L]),U=_L(e=>{B(e),N(e),M(),A===BI.SMALL&&v("transcript",!1)},[B,N,v,M,A]),F=_L(()=>{null!==D&&B(D)},[D,B]),H=_L(e=>{null!==D&&(e.preventDefault(),d("paused",!h))},[D,h,d]);return dP("Enter",F),dP("Space",H),MP("div",{className:"TranscriptList_lazy_module_container__f67b6693",children:[MP("div",{className:"TranscriptList_lazy_module_listContainer__f67b6693",ref:t,onScroll:()=>{b(!1)},children:[MP(nB,{visible:V,onClick:function(){k(i.current),I.sendEvent(yg.EMBEDDED_TRANSCRIPT_CLICK,{name:"click_return_to_current_time",copy:"Return to current time",location:"player_embedded_transcript",element:"return_to_current_time_button",current_transcript_language:null==L?void 0:L.language})},tabIndex:p?null:0}),MP("div",{id:Cf.TRANSCRIPT_USAGE_DESCRIPTION,className:VO,"aria-hidden":!0,children:"Use the up and down arrow keys to navigate the transcript. Press enter to seek to the selected cue. Press space to toggle playback."}),MP("ul",{className:"TranscriptList_lazy_module_list__f67b6693",style:{height:`${R.totalSize}px`},id:Cf.TRANSCRIPT_LIST,"data-component-type":"loaded-transcript",tabIndex:p?null:0,role:"listbox",ref:a,"aria-label":"Transcript List","aria-describedby":Cf.TRANSCRIPT_USAGE_DESCRIPTION,onFocus:()=>{const e=C.length?C[y].originalIndex:i.current,t=jI(w,e);x(e),t||k(e)},onBlur:M,"aria-multiselectable":"false",children:w.map(({index:t,measureRef:n,start:r})=>MP(tB,{index:t,cue:e[t],isFocused:t===D,isCurrentTime:t===i.current,hasSearchMatch:C.some(e=>e.originalIndex===t),measureRef:n,style:{transform:`translateY(${r}px)`},onClick:e=>{e.stopPropagation(),U(t)}},t))})]}),p&&MP("div",{className:"TranscriptList_lazy_module_transcriptDisabled__f67b6693"})]})};vM("div.TranscriptMenu_lazy_module_menu__3d0c9927.TranscriptMenu_lazy_module_transcriptMenu__3d0c9927{background-color:#000000e6;border:1px solid #fff3;border-radius:8px;display:flex;flex-direction:column;height:fit-content!important;left:0;margin:0 16px;position:absolute;top:64px;width:auto}.right-content-area-supported.app-xl div.TranscriptMenu_lazy_module_menu__3d0c9927.TranscriptMenu_lazy_module_transcriptMenu__3d0c9927,.right-content-area-supported.app-xxl div.TranscriptMenu_lazy_module_menu__3d0c9927.TranscriptMenu_lazy_module_transcriptMenu__3d0c9927{top:72px}.right-content-area-supported.app-mini div.TranscriptMenu_lazy_module_menu__3d0c9927.TranscriptMenu_lazy_module_transcriptMenu__3d0c9927,.right-content-area-supported.app-tiny div.TranscriptMenu_lazy_module_menu__3d0c9927.TranscriptMenu_lazy_module_transcriptMenu__3d0c9927,.right-content-area-supported.app-xs div.TranscriptMenu_lazy_module_menu__3d0c9927.TranscriptMenu_lazy_module_transcriptMenu__3d0c9927,.right-content-area-supported.app-xxs div.TranscriptMenu_lazy_module_menu__3d0c9927.TranscriptMenu_lazy_module_transcriptMenu__3d0c9927{border:none;height:100%!important;margin:0;top:0;width:100%}",{});vM(".MainPanel_lazy_module_label__ac35b233{flex-grow:1;margin:0 0 0 .6666666667em;text-align:start}.MainPanel_lazy_module_value__ac35b233{margin:0 0 0 .8em;pointer-events:none}",{});const iB=()=>{const e=VP(e=>e.bigPicture),t=jw(e=>e.captions.textTracks),n=EM(e=>e.transcriptSizeMode),r=EM(e=>e.selectedTrack),i=EM(e=>e.timecodeDisplayed),o=EM(e=>e.toggleTimecodeDisplayed),a=EM(e=>e.selectedSettingsMenu),s=EM(e=>e.setSelectedSettingsMenu),l="Timestamps",c=i?"Timestamps Enabled":"Timestamps Disabled",u=t.length>1,d=n===BI.LARGE?aP.LARGE:aP.MEDIUM;let _,h=ME.MD;return d===aP.LARGE&&(h=ME.LG,_=ME.MD),MP(AA,{children:[u&&MP(pO,{label:"Language",value:null==r?void 0:r.label,onSelect:()=>s(VI.LANGUAGE),size:d,hasPopup:!0,isOpened:a===VI.LANGUAGE}),MP(KO,{label:l,onSelect:()=>{o(),e.sendEvent(yg.EMBEDDED_TRANSCRIPT_CLICK,{name:"embed_transcript_timestamps",copy:c,location:"player_embedded_transcript",element:"timestamps_toggle",current_transcript_language:null==r?void 0:r.language})},checked:i,isMenuItem:!0,role:"menuitemcheckbox",children:[MP(OO,{size:h,weight:xE.NORMAL,className:"MainPanel_lazy_module_label__ac35b233",children:l}),MP(OO,{weight:xE.NORMAL,size:_,className:"MainPanel_lazy_module_value__ac35b233",ariaHidden:!0,children:i?"On":"Off"})]})]})},oB=()=>{const e=EM(e=>e.selectedTrack),t=EM(e=>e.availableTracks),n=EM(e=>e.setSelectedTrack),r=dL(()=>t.map(t=>t.id===e.id?p(p({},t),{},{active:!0}):t),[e,t]);return MP(gO,{items:r,onSelect:e=>n(e.currentTarget.dataset.id)})},aB=({buttonRef:e})=>{const t=EM(e=>e.settingsDisplayed),n=EM(e=>e.selectedSettingsMenu),r=EM(e=>e.setSelectedSettingsMenu),i=EM(e=>e.setSettingsDisplayed),o=EM(e=>e.transcriptSizeMode),a=e=>{null==e||e.stopPropagation(),r(VI.MAIN)},s=EM(e=>e.transcriptSizeMode)===BI.SMALL;let l,c,u;const d=()=>i(!1);switch(n){case VI.MAIN:l=s&&MP(dO,{title:"Settings",onClose:d,forceModalMenu:s}),c=oP.TRANSCRIPT_SETTINGS,u=MP(iB,{});break;case VI.LANGUAGE:l=MP(dO,{title:"Language",onBack:a,hasCloseButton:!1,size:o===BI.LARGE?ME.LG:ME.MD}),c=oP.TRANSCRIPT_LANGUAGES,u=MP(oB,{})}return MP(sO,{id:Cf.TRANSCRIPT_MENU,isMenuBlockingUI:s,className:"TranscriptMenu_lazy_module_menu__3d0c9927 TranscriptMenu_lazy_module_transcriptMenu__3d0c9927",headerContent:l,panelContent:u,panel:c,setMenuDisplayed:i,isMenuDisplayed:t,ariaLabel:"Transcript",onBack:a,buttonRef:e})};vM(".Transcript_lazy_module_transcript__4f2662ee{--transcript-horizontal-padding:16px;bottom:0;display:flex;flex-direction:column;gap:.8em;gap:1.2em;height:100%;overflow:hidden;pointer-events:all;position:absolute;top:0;width:100%}.player.app-lg .Transcript_lazy_module_transcript__4f2662ee,.player.app-xl .Transcript_lazy_module_transcript__4f2662ee{gap:1.2em}.player.app-xxl .Transcript_lazy_module_transcript__4f2662ee{gap:1.6em}.right-content-area-supported.app-mini .Transcript_lazy_module_transcript__4f2662ee.Transcript_lazy_module_applyBackground__4f2662ee,.right-content-area-supported.app-tiny .Transcript_lazy_module_transcript__4f2662ee.Transcript_lazy_module_applyBackground__4f2662ee,.right-content-area-supported.app-xs .Transcript_lazy_module_transcript__4f2662ee.Transcript_lazy_module_applyBackground__4f2662ee,.right-content-area-supported.app-xxs .Transcript_lazy_module_transcript__4f2662ee.Transcript_lazy_module_applyBackground__4f2662ee{background-color:initial}.Transcript_lazy_module_transcript__4f2662ee.Transcript_lazy_module_hidden__4f2662ee{pointer-events:none}.Transcript_lazy_module_transcript__4f2662ee.Transcript_lazy_module_applyBackground__4f2662ee{background-color:#000000e6}.Transcript_lazy_module_transcript__4f2662ee.Transcript_lazy_module_disabled__4f2662ee{cursor:not-allowed}.Transcript_lazy_module_transcript__4f2662ee form{flex-grow:0;margin:0 var(--transcript-horizontal-padding)}.Transcript_lazy_module_transcript__4f2662ee button:disabled,.Transcript_lazy_module_transcript__4f2662ee input:disabled{cursor:not-allowed}.player.app-xl .Transcript_lazy_module_transcript__4f2662ee,.player.app-xxl .Transcript_lazy_module_transcript__4f2662ee{--transcript-horizontal-padding:24px}.player.app-mini .Transcript_lazy_module_transcript__4f2662ee,.player.app-tiny .Transcript_lazy_module_transcript__4f2662ee,.player.app-xs .Transcript_lazy_module_transcript__4f2662ee,.player.app-xxs .Transcript_lazy_module_transcript__4f2662ee{--transcript-horizontal-padding:12px}",{});const sB=VL(({cues:e},t)=>{const n=jw(e=>e.liveEvent.isLiveEvent),r=uL([]),i=jw(e=>e.embed.transcriptQuery),o=jw(e=>e.playback.canSeekForward),a=jw(e=>e.playback.startTime),[s,l]=aL(!1),c=EM(e=>e.transcriptDisabled),u=EM(e=>e.searchTerms),d=EM(e=>e.setSearchTerms),_=EM(e=>e.resetSearchTerms),h=EM(e=>e.setCurrentSearchResultIndex),m=EM(e=>e.currentSearchResultIndex),f=EM(e=>e.searchResults),v=EM(e=>e.setSearchResults),g=EM(e=>e.selectedTrack),E=VP(e=>e.bigPicture),b=dL(()=>vb(e=>{E.sendEvent(yg.EMBEDDED_TRANSCRIPT_CLICK,{name:"search_embed_transcript",copy:e,location:"player_embedded_transcript",element:"search_input",current_transcript_language:null==g?void 0:g.language})},1500),[E,g]);return lL(function(){if(u.terms.length<=2)v([]),r.current=[];else{const t=function(e,t){if(!t.length)return[];const n=[],r=PE(t);for(let t=0;t<e.length;t++){const i=e[t].text;if("string"!=typeof i)continue;const o=PE(i);let a=o.indexOf(r);for(;a>-1;)n.push(p(p({},e[t]),{},{searchIndex:n.length,matchStart:a})),a=o.indexOf(r,a+1)}return n}(e,u.terms);if(jR(t,r.current))return;if(r.current=t,t.length>0)if(u.timestamp){const e=((e,t)=>{let n={index:0,diff:1/0};for(let r=0;r<t.length;r++){if(t[r].startTime<=e&&t[r].endTime>=e)return r;const i=Math.abs(t[r].startTime-e),o=Math.abs(t[r].endTime-e),a=Math.min(i,o);a<n.diff&&(n={index:r,diff:a})}return n.index})(u.timestamp,t);h(e||0)}else h(m||0);v(t),b(u.terms)}},[e,u,b,v,h,m]),lL(function(){!n&&o&&_()},[o,e,n,_]),lL(function(){e.length>0&&!s&&i&&(d({terms:i,timestamp:a??null}),l(!0))},[i,d,e,s,a]),MP($O,{ref:t,value:u.terms,ariaControls:Cf.TRANSCRIPT_LIST,onSearchIterate:h,onChange:e=>d({terms:e,timestamp:null}),disabled:c,placeholder:"Search transcript",numSearchResults:f.length,searchItemIterator:m})}),lB=()=>{const e=jw(e=>e.setDisplayList);return MP(CM,{message:"Segment not transcribed.",onClose:()=>e("transcript",!1),componentType:"transcript-empty"})};vM(".SEOBotTranscriptRenderer_lazy_module_seoTranscript__92de6094 details[open]{background-color:#fff;height:50vh;overflow:scroll;padding:32px}",{});const cB=({cues:e})=>{const t=jw(e=>e.element);return Kg(t)&&(t.parentElement.style.flexDirection="column",t.parentElement.style.overflow="scroll"),function(e){const{videoObject:t}=cS();null==e||!e.length||null!=t&&t.transcript||lS({transcript:e.map(({text:e})=>e).join(" ")})}(e),MP("div",{className:"SEOBotTranscriptRenderer_lazy_module_seoTranscript__92de6094",children:[MP("details",{children:[MP("summary",{children:"Video Transcript"}),e.map((e,t)=>MP("p",{children:[e.text," - ",MP("span",{children:e.startTimeDisplay})]},`transcript-cue-${t}`))]}),MP("style",{children:".player_area.js-player_area {\n                        overflow: visible !important;\n                        z-index: 1 !important;\n                    }"})]})};vM(".TranscriptHeader_lazy_module_transcriptHeader__0f3c8341{align-items:center;align-self:stretch;border-bottom:1px solid #fff3;display:flex;gap:.4em;padding-left:var(--transcript-horizontal-padding);padding-right:var(--transcript-horizontal-padding)}.player.app-xl .TranscriptHeader_lazy_module_transcriptHeader__0f3c8341,.player.app-xxl .TranscriptHeader_lazy_module_transcriptHeader__0f3c8341{padding-bottom:1.6em;padding-top:1.6em}.player.app-lg .TranscriptHeader_lazy_module_transcriptHeader__0f3c8341,.player.app-md .TranscriptHeader_lazy_module_transcriptHeader__0f3c8341{padding-bottom:1.2em;padding-top:1.2em}.player.app-sm .TranscriptHeader_lazy_module_transcriptHeader__0f3c8341,.player.app-xs .TranscriptHeader_lazy_module_transcriptHeader__0f3c8341,.player.app-xxs .TranscriptHeader_lazy_module_transcriptHeader__0f3c8341{padding-bottom:.8em;padding-top:.8em}.TranscriptHeader_lazy_module_transcriptHeader__0f3c8341 header{flex:1 0 0;margin:0;width:100%}.TranscriptHeader_lazy_module_title__0f3c8341{margin:0}.player.app-xxl .TranscriptHeader_lazy_module_title__0f3c8341{font-size:2.4em;letter-spacing:-.8px;line-height:32px}.player.app-lg .TranscriptHeader_lazy_module_title__0f3c8341,.player.app-md .TranscriptHeader_lazy_module_title__0f3c8341,.player.app-xl .TranscriptHeader_lazy_module_title__0f3c8341{font-size:1.8em;letter-spacing:-.6px;line-height:24px}.player.app-sm .TranscriptHeader_lazy_module_title__0f3c8341{font-size:1.6em;letter-spacing:-.4px;line-height:20px}.player.app-xs .TranscriptHeader_lazy_module_title__0f3c8341,.player.app-xxs .TranscriptHeader_lazy_module_title__0f3c8341{font-size:1.4em;letter-spacing:-.2px;line-height:20px}",{});vM(".TranscriptControlButton_lazy_module_transcriptControlButton__911e4d96{background:none;border:none;color:#fff}.TranscriptControlButton_lazy_module_transcriptControlButton__911e4d96 svg path{fill:#fff}.TranscriptControlButton_lazy_module_transcriptControlButton__911e4d96:hover:not(:disabled),.TranscriptControlButton_lazy_module_transcriptControlButton__911e4d96:hover:not(:disabled):active{background-color:#ffffff4d}.TranscriptControlButton_lazy_module_transcriptControlButton__911e4d96 .TranscriptControlButton_lazy_module_tooltip__911e4d96{bottom:auto;pointer-events:none;top:3.6em;z-index:1}.TranscriptControlButton_lazy_module_transcriptControlButton__911e4d96 .TranscriptControlButton_lazy_module_tooltip__911e4d96.TranscriptControlButton_lazy_module_tooltipDisabled__911e4d96,.TranscriptControlButton_lazy_module_transcriptControlButton__911e4d96 .TranscriptControlButton_lazy_module_tooltip__911e4d96.TranscriptControlButton_lazy_module_tooltipHidden__911e4d96{display:none}.player.app-xl .TranscriptControlButton_lazy_module_transcriptControlButton__911e4d96,.player.app-xxl .TranscriptControlButton_lazy_module_transcriptControlButton__911e4d96{border-radius:8px;height:40px;padding:8px;width:40px}.player.app-xl .TranscriptControlButton_lazy_module_transcriptControlButton__911e4d96 .TranscriptControlButton_lazy_module_tooltip__911e4d96,.player.app-xxl .TranscriptControlButton_lazy_module_transcriptControlButton__911e4d96 .TranscriptControlButton_lazy_module_tooltip__911e4d96{top:4.5em}.right-content-area-supported.app-lg .TranscriptControlButton_lazy_module_transcriptControlButton__911e4d96,.right-content-area-supported.app-md .TranscriptControlButton_lazy_module_transcriptControlButton__911e4d96,.right-content-area-supported.app-mini .TranscriptControlButton_lazy_module_transcriptControlButton__911e4d96,.right-content-area-supported.app-sm .TranscriptControlButton_lazy_module_transcriptControlButton__911e4d96,.right-content-area-supported.app-tiny .TranscriptControlButton_lazy_module_transcriptControlButton__911e4d96,.right-content-area-supported.app-xs .TranscriptControlButton_lazy_module_transcriptControlButton__911e4d96,.right-content-area-supported.app-xxs .TranscriptControlButton_lazy_module_transcriptControlButton__911e4d96{border-radius:4px;height:32px;padding:4px;width:32px}",{});const uB=["icon","onClick","label","tooltipLabel","disabled","className","name"],dB=VL((e,t)=>{let{icon:n,onClick:r,label:i,tooltipLabel:o,disabled:a,className:s,name:l}=e,c=m(e,uB);const u=EM(e=>e.transcriptDisabled),d=EM(e=>e.settingsDisplayed),{onClick:_,onKeyDown:h,onMouseDown:f}=nP(r),v="boolean"!=typeof a?u:a,g=`transcript-${l}-button-tooltip`,E=Yf(s,"TranscriptControlButton_lazy_module_transcriptControlButton__911e4d96",NO),b=MP(WO,p({ref:t,onClick:_,onKeyDown:h,onMouseDown:f,icon:n,iconSize:OE.SM,"aria-label":i,disabled:v,className:E},c)),y=Yf("TranscriptControlButton_lazy_module_tooltip__911e4d96",v&&"TranscriptControlButton_lazy_module_tooltipDisabled__911e4d96",d&&"TranscriptControlButton_lazy_module_tooltipHidden__911e4d96");return Q.touch?b:MP(AO,{id:g,tooltipContent:o,className:y,children:b})}),_B=({className:e})=>{const t=EM(e=>e.selectedTrack),n=jw(e=>e.displayList.transcript),r=jw(e=>e.setDisplayList),i=VP(e=>e.bigPicture),o="Close Transcript",a=!n;return MP(dB,{icon:MP(nO,{name:OP.CLOSE,focusable:"false"}),label:o,tooltipLabel:"Close",onClick:()=>{r("transcript",!1),i.sendEvent(yg.EMBEDDED_TRANSCRIPT_CLICK,{name:"exit_embed_transcript",copy:o,location:"player_embedded_transcript",element:"x_button",current_transcript_language:t.language})},disabled:a,"aria-controls":Cf.TRANSCRIPT_VIEWER,className:e,name:"close"})},hB=VL((e,t)=>{const n=EM(e=>e.toggleSettingsDisplayed),r=EM(e=>e.settingsDisplayed),i=EM(e=>e.transcriptSizeMode)===BI.SMALL,o="Settings";return MP(dB,{ref:t,icon:MP(nO,{name:OP.SLIDERS,focusable:"false"}),label:o,tooltipLabel:o,"aria-controls":Cf.TRANSCRIPT_MENU,"aria-expanded":r,"aria-haspopup":i?"dialog":"true",onClick:n,name:"settings"})}),pB=VL((e,t)=>{const n=EM(e=>e.transcriptSizeMode)===BI.SMALL;return MP("div",{className:"TranscriptHeader_lazy_module_transcriptHeader__0f3c8341",children:[MP("header",{children:MP(OO,{size:ME.XL,className:"TranscriptHeader_lazy_module_title__0f3c8341",color:VE.WHITE,element:n?"h1":"h2",children:"Transcript"})}),MP(hB,{ref:t}),MP(_B,{})]})}),mB=Q.android||Q.iOS,fB=()=>{const e=jw(e=>e.displayList.transcript),t=VP(e=>!e.embed.transparent),n=jw(e=>e.element),r=uL(null),i=uL(null),o=uL(null),a=uL(!1),s=EM(e=>e.selectedTrack),l=EM(e=>e.transcriptDisabled),{status:c,cues:u,load:d}=((e=FI)=>{const t=jw(e=>e.captions.textTrackEls),n=jw(e=>e.captions.requiresCrossOrigin),r=jw(e=>e.playback.hasFragments&&e.playback.currentFragment),i=t.find(t=>(null==t?void 0:t.srclang)===e),o=jw(e=>e.liveEvent.isLiveEvent),a=jw(e=>e.liveEvent.dvrEnabled),s=jw(e=>e.playback.liveTailTime),l=jw(e=>e.playback.liveEdgeTime),c=jw(e=>e.playback.canSeekForward),u=jw(e=>e.playback.maxPlayedTime),d=jw(e=>e.displayList.transcript),_=jw(e=>e.events),h=uL(!1),m=uL(!1),f=uL(d);let v=null,g=null;o?(v=s,g=l):c||(g=u);const E=uL(v),b=uL(g),[y,T]=aL({status:xI.IDLE,cues:[],rawCues:[],load:()=>{}}),S=_L(()=>{return a?(m.current||(_.on(_u,o),_.on(hu,u),_.on(ki.SEGMENT_CUES_LOADED,s)),c(),h.current=!0,_.fire(U_),m.current=!0,Cv):(i&&(i.readyState===Pv.LOADED?t(i):i.readyState===Pv.ERROR?(i.src=tg(i.src,"t",JSON.stringify(Date.now())),u()):(i.addEventListener("load",e),i.addEventListener("error",u),n&&i.parentElement.setAttribute("crossorigin","anonymous"),i.track.mode="hidden",c())),function(){i&&(i.removeEventListener("load",e),i.removeEventListener("error",u))});function e(e){t(e.target)}function t(e){var t,n;"showing"!==(null==e||null==(t=e.track)?void 0:t.mode)&&(e.track.mode="hidden"),l(null==e||null==(n=e.track)?void 0:n.cues)}function o(e){l(e),h.current=!1}function s(e){null!=e&&e.length&&(h.current||function(e){T(t=>{const n=t.rawCues;if(function(e){var t;return(null==(t=e[e.length-1])?void 0:t.endTime)||0}(n)>function(e){var t;return(null==(t=e[0])?void 0:t.startTime)||0}(e))return t;const i=n.concat(e);return p(p({},t),{},{cues:YI(i,r,E.current,b.current),rawCues:i})})}(e))}function l(e){try{let t=e?Array.from(e):[];T(e=>p(p({},e),{},{status:xI.LOADED,cues:YI(t,r,E.current,b.current),rawCues:t,load:S}))}catch(e){u()}}function c(){T(e=>p(p({},e),{},{status:xI.LOADING,cues:[],load:S}))}function u(){T(e=>p(p({},e),{},{status:xI.ERROR,cues:[],load:S}))}},[t,i,e,n,r,a,_]);return lL(()=>{S()},[e,t,S]),lL(()=>{E.current=v,b.current=g,T(e=>p(p({},e),{},{cues:YI(e.rawCues,r,E.current,b.current)}))},[r,v,g]),lL(()=>{a&&d&&!f.current&&S(),f.current=d},[d,a,S]),y})(null==s?void 0:s.language),_=RP(e),h=_L(()=>{var e;null==n||null==(e=n.querySelector(`#${Rf.TRANSCRIPT}`))||e.focus()},[n]),m=_L(()=>{a.current=!0},[]),f=_L(()=>{!e&&a.current&&(h(),a.current=!1)},[e,h]);if((({status:e,transcriptSearchInputRef:t,transcriptContainerRef:n})=>{const r=jw(e=>e.displayList.rightContentArea),i=jw(e=>e.appearance.rightContentAreaAnimating),o=jw(e=>e.element);lL(function(){if(e===xI.LOADED&&r&&!i){var a,s,l;if((null==(a=document.activeElement)?void 0:a.id)!==Rf.TRANSCRIPT&&!(null==(s=o.querySelector(`#${Rf.TRANSCRIPT}`))?void 0:s.contains(document.activeElement)))return;let e;e=mB?yP(n.current).filter(e=>"input"!==e.tagName)[0]:t.current,null==(l=e)||l.focus()}},[e,r,o,i,n,t])})({status:c,transcriptContainerRef:i,transcriptSearchInputRef:o}),c===xI.ERROR)return MP(AM,{onRetry:d});if(xI.LOADED&&Q.isGoogleBot)return MP(cB,{cues:u});if(c===xI.LOADED&&(null==u||!u.length))return MP(lB,{});const v=Yf("Transcript_lazy_module_transcript__4f2662ee",!e&&"Transcript_lazy_module_hidden__4f2662ee",t&&"Transcript_lazy_module_applyBackground__4f2662ee",l&&"Transcript_lazy_module_disabled__4f2662ee");return MP("div",p(p({id:Cf.TRANSCRIPT_VIEWER,className:v,"data-component-type":"transcript",ref:i,onFocus:m,onBlur:f,"aria-label":"Transcript"},_),{},{children:[c===xI.LOADED&&MP(cO,{children:[MP(pB,{ref:r}),MP(sB,{cues:u,ref:o}),MP(aB,{buttonRef:r})]}),c===xI.LOADING&&MP(zO,{}),c===xI.LOADED&&MP(rB,{cues:u})]}))};var vB=Object.freeze({__proto__:null,Transcript:()=>MP(yM,{children:MP(fB,{})})});vM(".Compass_lazy_module_compassBackground__068c0a0f{fill:#000000e6}.Compass_lazy_module_compassRing__068c0a0f{stroke:#fff}.Compass_lazy_module_compassDimple__068c0a0f,.Compass_lazy_module_compassSlice__068c0a0f{fill:#fff}.Compass_lazy_module_compassWrapper__068c0a0f{background:#0000;border:none;cursor:pointer;display:block;height:40px;opacity:.35;padding:0;pointer-events:all;position:absolute;right:1em;top:49%;transition:opacity .2s ease-in-out,fill .2s ease-in-out;width:40px;z-index:19}.Compass_lazy_module_compassWrapper__068c0a0f:focus,.Compass_lazy_module_compassWrapper__068c0a0f:hover{opacity:1}.Compass_lazy_module_compassWrapper__068c0a0f:focus .Compass_lazy_module_compassBackground__068c0a0f,.Compass_lazy_module_compassWrapper__068c0a0f:hover .Compass_lazy_module_compassBackground__068c0a0f{fill:#000c}.Compass_lazy_module_tooltipWrapper__068c0a0f{height:100%}",{});const gB=18;var EB=Object.freeze({__proto__:null,COMPASS_RADIUS_PX:gB,COMPASS_SLICE_OFFSET_DEG:45,Compass:()=>{const e=jw(e=>e.backbone),t=jw(e=>e.embed.compass),n=jw(e=>e.playback.playInitiated),r=jw(e=>e.spatial.webVRActive),i=jw(e=>e.spatial.longitude),o=jw(e=>e.displayList.fullPlayerElement),a=jw(e=>e.displayList.outro),s=t&&n&&!r&&!a&&!o,l=`rotate(${i-45}, 18, 18)`,c=Yf("Compass_lazy_module_compassWrapper__068c0a0f",bf.COMPASS_WRAPPER,Tf.EXCLUDE_GLOBAL_BUTTON_STYLES,MO);return MP(zw,{visible:s,children:MP("button",p(p({className:c},Bf(()=>{var t;null==(t=e.getEffectByName("ThreeSixtyEffect"))||null==t.snapToCenter||t.snapToCenter()})),{},{children:MP(AO,{id:"compass-button-tooltip",tooltipContent:"Reset view",position:SO.LEFT,margin:4,children:MP("div",{className:"Compass_lazy_module_tooltipWrapper__068c0a0f",children:MP("svg",{viewBox:"0 0 36 36",children:[MP("circle",{className:"Compass_lazy_module_compassBackground__068c0a0f",r:gB,cx:gB,cy:gB}),MP("path",{className:"Compass_lazy_module_compassSlice__068c0a0f",transform:l,d:"M0,0 m18,18 l12,0 A12,12 0 0,0 18,6 z"}),MP("circle",{fill:"none",className:"Compass_lazy_module_compassRing__068c0a0f",strokeWidth:"1",r:"14.5",cx:gB,cy:gB}),MP("polygon",{className:"Compass_lazy_module_compassDimple__068c0a0f",points:"16,3.5 18,1 20,3.5"})]})})})}))})}});e.BigScreen=sS,e.VimeoPlayer=function(e,t,n,r){const i=function(e){if(!0===e)return Promise.resolve(null);let t=!1;return new Promise(n=>{e.link.addEventListener("load",()=>{if(!t){t=!0;const r=(new Date).getTime()-e.startTime;setTimeout(()=>n(r),100)}},!1)})}(n),o=new wV({element:e,delegate:r,cssLoadedPromise:i}),a=o.store;e.classList.add("js-player-fullscreen");let s=o.expose,l=null,c=null,u=null,d=null,_=null,h=null;const p=e.querySelector(`.${bf.VP_CONTROLS}`),m={tiny:up,mini:dp,normal:_p,none:_p};function f(t){t&&void 0!==m[t]&&(o.events.fire(m[t]),e.classList.toggle("player-normal","normal"===t),e.classList.toggle("player-mini","mini"===t),e.classList.toggle("player-tiny","tiny"===t))}function v(t){t&&void 0!==m[t]&&(e.classList.toggle("app-normal","normal"===t),e.classList.toggle("app-mini","mini"===t),e.classList.toggle("app-tiny","tiny"===t))}function g(t){Object.keys(vT).forEach(n=>e.classList.toggle(`player-${n}`,t===n))}function E(t){Object.keys(vT).forEach(n=>e.classList.toggle(`app-${n}`,t===n))}function b(){const t=o.config.embed.settings;e.classList.toggle("with-fullscreen",!!t.fullscreen);const n=t.custom_logo;e.classList.toggle("with-custom-logo",!!n),e.classList.toggle("with-sticky-custom-logo",n&&n.sticky),e.classList.toggle("hide-controls-mode",!!t.background||0===t.controls),e.classList.toggle("touch-support",Q.touch),e.classList.toggle("is-google-bot",Q.isGoogleBot)}function y(e,t=o.config.video.url){if(!(!t||e&&e.metaKey)){if(-1===t.indexOf("#")&&o.backbone.currentTime>0&&o.backbone.currentTime<o.config.video.duration-30&&!o.backbone.paused&&(t+=`#at=${Math.floor(o.backbone.currentTime)}`),!o.config.embed.on_site)return window.open(t),function(e){if(e&&e.detail>0)try{document.activeElement.blur()}catch(e){}}(e),o.events.fire(ch),!1;window.location=t}}function T(){d||(f(a.get("ui.player.mode")),d=a.watch("ui.player.mode",f)),_||(f(a.get("ui.app.mode")),_=a.watch("ui.app.mode",v))}function S(){c||(g(a.get("ui.player.breakpoint")),c=a.watch("ui.player.breakpoint",g)),u||(E(a.get("ui.app.breakpoint")),u=a.watch("ui.app.breakpoint",E))}function C(){b(),h=new Promise(e=>{let t=null;const n=()=>{clearTimeout(t),window.innerWidth>0&&window.innerHeight>0?e():t=setTimeout(n,250)};o.events.once(xp,n),o.events.once(Y_,n)}),o.events.on(Vh,()=>{o.performDelegateAction(Ky,()=>{o.config.video.vod&&o.config.video.vod.url?y(null,`${o.config.video.vod.url}#collections`):o.config.video.url&&y(null,`${o.config.video.url}#collections`)})}),o.events.on(Nh,()=>{const e=o.config.embed.settings.share&&o.config.embed.settings.share.embed_only,t=()=>{o.events.fire(c_,"share",e)};sS.element?t():o.performDelegateAction(qy,t)}),o.events.on(Mh,()=>{o.config.embed.settings.share.embed_only&&o.performDelegateAction(qy,()=>{o.events.fire(c_,"share",!0)})}),o.events.on(K_,()=>{e.classList.add("player-ad")}),o.events.on([X_,u_],()=>{e.classList.remove("player-ad")}),function(){const t=function(){return function(e,t){return e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e}(h,function(){const t=function(){const{width:t,height:n}=km(e),r="10px";return Dg?n<=200?r:t<450?"12px":t<=1024?"11px":r:r}();p&&(p.style.fontSize=t);const n=e.querySelector(`.${bf.VP_SIDEDOCK}`);n&&(n.style.fontSize=t)})};o.events.on(Rh,t),o.events.on(Oh,t),window.addEventListener("orientationchange",t),Dg&&(e.classList.add("mobile"),t())}(),T(),S(),function(){function t(){let t=e;if(r&&r.getFullscreenElement&&"function"==typeof r.getFullscreenElement){const n=r.getFullscreenElement();n&&n instanceof HTMLElement&&n.contains(e)&&n.classList.contains("js-player-fullscreen")&&(t=n)}return t}o.config.embed.fullscreen=!0,Q.iPad&&e.classList.add("no-fullscreen-api-support");const n=o.config.embed.playsinline&&(Q.iOS>=10||rf),i=Q.iPad||n;sS.enabled||i||(e.classList.add("no-fullscreen-support"),Q.iOS||(o.config.embed.fullscreen=!1));let a=!1,s=!1;o.events.on(E_,function(){sS.enabled||sS.videoEnabled(e)?(o.events.fire(Ph),s=!1,sS.request(t())):o.events.fire(C_,!0)}),o.events.on(lh,function(){if(o.backbone.pictureInPictureActive&&o.backbone.exitPictureInPicture(),sS.element)o.events.fire(wh),sS.exit();else{const{HAVE_CURRENT_DATA:e}=o.backbone.videoElement;Q.fullscreenRequiresDataLoaded&&o.backbone.readyState<e&&o.backbone.play(),o.events.fire(Ph),s=!0,sS.request(t())}});var l=sS.onenter,c=sS.onexit;if(sS.onenter=function(e){null!==document.webkitFullScreenElement&&(a||(t().contains(e)?function(e){a||(a=!0,o.events.fire(Rh,t()===e,s))}(e):"function"==typeof l&&l(e)))},sS.onexit=function(){document.webkitFullScreenElement||(a?a&&(a=!1,o.events.fire(Oh,s),s||o.events.fire(C_,!1),s=!1):"function"==typeof c&&c())},Vb(e).on("click","a",function(e){sS.element===t()&&sS.exit()}),Vb(e).on("gestureend",function(e){e.scale>1&&o.events.fire(lh)}),"undefined"!=typeof MSGesture){var u=1,d=new MSGesture;d.target=e,Vb(e).on("pointerdown",function(e){d.addPointer(e.pointerId)}).on(["MSGestureChange"],function(e){u*=e.scale}).on(["MSGestureEnd"],function(){(!a&&u>=2||a&&u<1)&&o.events.fire(lh),u=1})}}(),function(){const t=Kv(zd,o.config);!function(e,t,n,r){var i=!1;r="function"==typeof t?n:r,n="function"==typeof t?t:n;var o=function(e){var t=!0;if(e.changedTouches){var o=e.changedTouches[0].pageX-window.pageXOffset,a=e.changedTouches[0].pageY-window.pageYOffset,s=document.elementFromPoint(o,a);null!==s&&this.contains(s)&&(t=n.call(this,e))}return"function"==typeof r&&r.call(this,e),i=!0,t},a=function(e){if(!i)return n.call(this,e);i=!1};(t="function"==typeof t?null:t)?Vb(e).on("click",t,a).on("touchend",t,o):Vb(e).on("click",a).on("touchend",o)}(e,"a[data-clip-link]",e=>y(e,t)),o.events.on(h_,y)}(),o.events.on(ap,()=>{b()})}function A(){l||(l=new FV(o,a,e),Object.defineProperties(s,{pauseKeyboard:{enumerable:!0,value:l.pause},unpauseKeyboard:{enumerable:!0,value:l.unpause}}))}const L="right-content-area-open",I="right-content-area-supported",P="[data-content-area-sibling-eligible]",R="content-area-sibling-enabled";let w;function O(e=400){var t;w&&clearTimeout(w),null==(t=o.element)||null==(t=t.classList)||t.add("animating"),w=setTimeout(()=>{var e;null==(e=o.element)||null==(e=e.classList)||e.remove("animating")},e)}const k={initializationHandler:()=>(o.events.on(im,e=>{e&&!o.element.classList.contains(L)?(O(),o.element.classList.add(L)):!e&&o.element.classList.contains(L)&&(O(),o.element.classList.remove(L))}),o.events.on(om,()=>{var e;null==(e=o.element)||null==(e=e.classList)||e.add(I),Array.from(o.element.querySelectorAll(P)).forEach(e=>{var t;return null==e||null==(t=e.classList)?void 0:t.add(R)})}),o.events.on(am,()=>{var e;null==(e=o.element)||null==(e=e.classList)||e.remove(I),Array.from(o.element.querySelectorAll(P)).forEach(e=>{var t;return null==e||null==(t=e.classList)?void 0:t.remove(R)})}),new OV(o,a,e),A(),C(),Promise.resolve()),postInitializationHandler:()=>Promise.resolve(),authorizationHandler(e){S(),T(),e(),A();let t="Error",n="Unhandled video privacy";switch(o.config.view){case Jm.privatePassword:return new Promise(e=>{o.events.once(lp,t=>{e(t)})});case Jm.privateLocked:let e;return e=o.config.user.logged_in?Promise.reject():new Promise((e,t)=>{o.events.once(cp,n=>{n.view!==Jm.privateLocked?e(n):t()})}),e;case Jm.geoBlocked:case Jm.drmPlaybackUnavailable:return Promise.reject();case Jm.error:t=o.config.title,n=o.config.message}return o.config.view!==Jm.main&&o.config.view!==Jm.privateUnlocked&&o.events.fire(j_,"error",{title:t,message:n}),Promise.reject()}};return o.init(t,k).catch(t=>{Ab.captureException(t),e.classList.remove("loading");const n=xf();o.events.fire(Y_,n.type,n)}),s},e.requestModule=Ze,Object.defineProperty(e,"__esModule",{value:!0})}(this.window=this.window||{});
